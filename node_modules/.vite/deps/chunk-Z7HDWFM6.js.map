{
  "version": 3,
  "sources": ["../../parse-unit/index.js", "../../to-px/browser.js", "../../striptags/src/striptags.js", "../../d3-selection/src/namespaces.js", "../../d3-selection/src/namespace.js", "../../d3-selection/src/creator.js", "../../d3-selection/src/selector.js", "../../d3-selection/src/selection/select.js", "../../d3-selection/src/array.js", "../../d3-selection/src/selectorAll.js", "../../d3-selection/src/selection/selectAll.js", "../../d3-selection/src/matcher.js", "../../d3-selection/src/selection/selectChild.js", "../../d3-selection/src/selection/selectChildren.js", "../../d3-selection/src/selection/filter.js", "../../d3-selection/src/selection/sparse.js", "../../d3-selection/src/selection/enter.js", "../../d3-selection/src/constant.js", "../../d3-selection/src/selection/data.js", "../../d3-selection/src/selection/exit.js", "../../d3-selection/src/selection/join.js", "../../d3-selection/src/selection/merge.js", "../../d3-selection/src/selection/order.js", "../../d3-selection/src/selection/sort.js", "../../d3-selection/src/selection/call.js", "../../d3-selection/src/selection/nodes.js", "../../d3-selection/src/selection/node.js", "../../d3-selection/src/selection/size.js", "../../d3-selection/src/selection/empty.js", "../../d3-selection/src/selection/each.js", "../../d3-selection/src/selection/attr.js", "../../d3-selection/src/window.js", "../../d3-selection/src/selection/style.js", "../../d3-selection/src/selection/property.js", "../../d3-selection/src/selection/classed.js", "../../d3-selection/src/selection/text.js", "../../d3-selection/src/selection/html.js", "../../d3-selection/src/selection/raise.js", "../../d3-selection/src/selection/lower.js", "../../d3-selection/src/selection/append.js", "../../d3-selection/src/selection/insert.js", "../../d3-selection/src/selection/remove.js", "../../d3-selection/src/selection/clone.js", "../../d3-selection/src/selection/datum.js", "../../d3-selection/src/selection/on.js", "../../d3-selection/src/selection/dispatch.js", "../../d3-selection/src/selection/iterator.js", "../../d3-selection/src/selection/index.js", "../../d3-selection/src/select.js", "../../d3-selection/src/local.js", "../../d3-selection/src/sourceEvent.js", "../../d3-selection/src/pointer.js", "../../@unovis/src/types/component.ts", "../../@juggle/resize-observer/lib/utils/resizeObservers.js", "../../@juggle/resize-observer/lib/algorithms/hasActiveObservations.js", "../../@juggle/resize-observer/lib/algorithms/hasSkippedObservations.js", "../../@juggle/resize-observer/lib/algorithms/deliverResizeLoopError.js", "../../@juggle/resize-observer/lib/ResizeObserverBoxOptions.js", "../../@juggle/resize-observer/lib/utils/freeze.js", "../../@juggle/resize-observer/lib/ResizeObserverSize.js", "../../@juggle/resize-observer/lib/DOMRectReadOnly.js", "../../@juggle/resize-observer/lib/utils/element.js", "../../@juggle/resize-observer/lib/utils/global.js", "../../@juggle/resize-observer/lib/algorithms/calculateBoxSize.js", "../../@juggle/resize-observer/lib/ResizeObserverEntry.js", "../../@juggle/resize-observer/lib/algorithms/calculateDepthForNode.js", "../../@juggle/resize-observer/lib/algorithms/broadcastActiveObservations.js", "../../@juggle/resize-observer/lib/algorithms/gatherActiveObservationsAtDepth.js", "../../@juggle/resize-observer/lib/utils/process.js", "../../@juggle/resize-observer/lib/utils/queueMicroTask.js", "../../@juggle/resize-observer/lib/utils/queueResizeObserver.js", "../../@juggle/resize-observer/lib/utils/scheduler.js", "../../@juggle/resize-observer/lib/ResizeObservation.js", "../../@juggle/resize-observer/lib/ResizeObserverDetail.js", "../../@juggle/resize-observer/lib/ResizeObserverController.js", "../../@juggle/resize-observer/lib/ResizeObserver.js", "../../@unovis/src/utils/resize-observer.ts", "../../@unovis/src/core/container/config.ts", "../../@unovis/src/core/container/index.ts", "../../@unovis/src/utils/misc.ts", "../../d3-color/src/define.js", "../../d3-color/src/color.js", "../../d3-color/src/math.js", "../../d3-color/src/lab.js", "../../d3-color/src/cubehelix.js", "../../@unovis/src/styles/colors.ts", "../../@unovis/src/styles/patterns.ts", "../../@unovis/src/styles/index.ts", "../../d3-transition/src/transition/schedule.js", "../../d3-transition/src/interrupt.js", "../../d3-transition/src/selection/interrupt.js", "../../d3-interpolate/src/basis.js", "../../d3-interpolate/src/basisClosed.js", "../../d3-interpolate/src/constant.js", "../../d3-interpolate/src/color.js", "../../d3-interpolate/src/rgb.js", "../../d3-interpolate/src/numberArray.js", "../../d3-interpolate/src/array.js", "../../d3-interpolate/src/date.js", "../../d3-interpolate/src/number.js", "../../d3-interpolate/src/object.js", "../../d3-interpolate/src/string.js", "../../d3-interpolate/src/value.js", "../../d3-interpolate/src/round.js", "../../d3-interpolate/src/transform/decompose.js", "../../d3-interpolate/src/transform/parse.js", "../../d3-interpolate/src/transform/index.js", "../../d3-interpolate/src/zoom.js", "../../d3-interpolate/src/hsl.js", "../../d3-interpolate/src/hcl.js", "../../d3-interpolate/src/cubehelix.js", "../../d3-interpolate/src/piecewise.js", "../../d3-transition/src/transition/tween.js", "../../d3-transition/src/transition/interpolate.js", "../../d3-transition/src/transition/attr.js", "../../d3-transition/src/transition/attrTween.js", "../../d3-transition/src/transition/delay.js", "../../d3-transition/src/transition/duration.js", "../../d3-transition/src/transition/ease.js", "../../d3-transition/src/transition/easeVarying.js", "../../d3-transition/src/transition/filter.js", "../../d3-transition/src/transition/merge.js", "../../d3-transition/src/transition/on.js", "../../d3-transition/src/transition/remove.js", "../../d3-transition/src/transition/select.js", "../../d3-transition/src/transition/selectAll.js", "../../d3-transition/src/transition/selection.js", "../../d3-transition/src/transition/style.js", "../../d3-transition/src/transition/styleTween.js", "../../d3-transition/src/transition/text.js", "../../d3-transition/src/transition/textTween.js", "../../d3-transition/src/transition/transition.js", "../../d3-transition/src/transition/end.js", "../../d3-transition/src/transition/index.js", "../../d3-ease/src/linear.js", "../../d3-ease/src/cubic.js", "../../d3-ease/src/poly.js", "../../d3-ease/src/sin.js", "../../d3-ease/src/math.js", "../../d3-ease/src/bounce.js", "../../d3-ease/src/back.js", "../../d3-ease/src/elastic.js", "../../d3-transition/src/selection/transition.js", "../../d3-transition/src/selection/index.js", "../../@unovis/src/utils/d3.ts", "../../@unovis/src/containers/single-container/config.ts", "../../@unovis/src/containers/single-container/index.ts", "../../@unovis/src/data-models/core.ts", "../../@unovis/src/components/axis/types.ts", "../../d3-scale/src/init.js", "../../d3-scale/src/ordinal.js", "../../d3-scale/src/band.js", "../../d3-scale/src/constant.js", "../../d3-scale/src/number.js", "../../d3-scale/src/continuous.js", "../../d3-format/src/formatDecimal.js", "../../d3-format/src/exponent.js", "../../d3-format/src/formatGroup.js", "../../d3-format/src/formatNumerals.js", "../../d3-format/src/formatSpecifier.js", "../../d3-format/src/formatTrim.js", "../../d3-format/src/formatPrefixAuto.js", "../../d3-format/src/formatRounded.js", "../../d3-format/src/formatTypes.js", "../../d3-format/src/identity.js", "../../d3-format/src/locale.js", "../../d3-format/src/defaultLocale.js", "../../d3-format/src/precisionFixed.js", "../../d3-format/src/precisionPrefix.js", "../../d3-format/src/precisionRound.js", "../../d3-scale/src/tickFormat.js", "../../d3-scale/src/linear.js", "../../d3-scale/src/identity.js", "../../d3-scale/src/nice.js", "../../d3-scale/src/log.js", "../../d3-scale/src/symlog.js", "../../d3-scale/src/pow.js", "../../d3-scale/src/quantile.js", "../../d3-scale/src/quantize.js", "../../d3-scale/src/threshold.js", "../../d3-time/src/interval.js", "../../d3-time/src/millisecond.js", "../../d3-time/src/duration.js", "../../d3-time/src/second.js", "../../d3-time/src/minute.js", "../../d3-time/src/hour.js", "../../d3-time/src/day.js", "../../d3-time/src/week.js", "../../d3-time/src/month.js", "../../d3-time/src/year.js", "../../d3-time/src/ticks.js", "../../d3-time-format/src/locale.js", "../../d3-time-format/src/defaultLocale.js", "../../d3-time-format/src/isoFormat.js", "../../d3-time-format/src/isoParse.js", "../../d3-scale/src/time.js", "../../d3-scale/src/utcTime.js", "../../d3-scale/src/sequential.js", "../../d3-scale/src/diverging.js", "../../@unovis/src/types/scale.ts", "../../@unovis/src/types/direction.ts", "../../@unovis/src/containers/xy-container/config.ts", "../../@unovis/src/containers/xy-container/index.ts", "../../@unovis/src/core/component/config.ts", "../../@unovis/src/core/component/index.ts", "../../@unovis/src/data-models/series.ts", "../../@unovis/src/core/xy-component/config.ts", "../../@unovis/src/core/xy-component/index.ts", "../../@unovis/src/types/position.ts", "../../@unovis/src/components/tooltip/config.ts", "../../@unovis/src/components/tooltip/style.ts", "../../@unovis/src/components/tooltip/index.ts", "../../d3-shape/src/constant.js", "../../d3-shape/src/math.js", "../../d3-path/src/path.js", "../../d3-shape/src/path.js", "../../d3-shape/src/arc.js", "../../d3-shape/src/array.js", "../../d3-shape/src/curve/linear.js", "../../d3-shape/src/point.js", "../../d3-shape/src/line.js", "../../d3-shape/src/area.js", "../../d3-shape/src/descending.js", "../../d3-shape/src/identity.js", "../../d3-shape/src/pie.js", "../../d3-shape/src/curve/radial.js", "../../d3-shape/src/lineRadial.js", "../../d3-shape/src/areaRadial.js", "../../d3-shape/src/symbol/asterisk.js", "../../d3-shape/src/symbol/circle.js", "../../d3-shape/src/symbol/cross.js", "../../d3-shape/src/symbol/diamond.js", "../../d3-shape/src/symbol/square.js", "../../d3-shape/src/symbol/star.js", "../../d3-shape/src/symbol/triangle.js", "../../d3-shape/src/symbol/triangle2.js", "../../d3-shape/src/symbol/wye.js", "../../d3-shape/src/symbol.js", "../../d3-shape/src/noop.js", "../../d3-shape/src/curve/basis.js", "../../d3-shape/src/curve/basisClosed.js", "../../d3-shape/src/curve/basisOpen.js", "../../d3-shape/src/curve/bundle.js", "../../d3-shape/src/curve/cardinal.js", "../../d3-shape/src/curve/cardinalClosed.js", "../../d3-shape/src/curve/cardinalOpen.js", "../../d3-shape/src/curve/catmullRom.js", "../../d3-shape/src/curve/catmullRomClosed.js", "../../d3-shape/src/curve/catmullRomOpen.js", "../../d3-shape/src/curve/linearClosed.js", "../../d3-shape/src/curve/monotone.js", "../../d3-shape/src/curve/natural.js", "../../d3-shape/src/curve/step.js", "../../d3-interpolate-path/build/d3-interpolate-path.mjs", "../../@unovis/src/utils/color.ts", "../../@unovis/src/types/curve.ts", "../../@unovis/src/components/line/config.ts", "../../@unovis/src/components/line/style.ts", "../../@unovis/src/components/line/index.ts", "../../@unovis/src/utils/path.ts", "../../@unovis/src/components/stacked-bar/config.ts", "../../@unovis/src/components/stacked-bar/style.ts", "../../@unovis/src/components/stacked-bar/index.ts", "../../@unovis/src/components/grouped-bar/config.ts", "../../@unovis/src/components/grouped-bar/style.ts", "../../@unovis/src/components/grouped-bar/index.ts", "../../d3-axis/src/identity.js", "../../d3-axis/src/axis.js", "../../@unovis/src/types/text.ts", "../../@unovis/src/types/svg.ts", "../../@unovis/src/utils/text.ts", "../../@unovis/src/components/axis/config.ts", "../../@unovis/src/components/axis/style.ts", "../../@unovis/src/components/axis/index.ts", "../../@unovis/src/types/symbol.ts", "../../@unovis/src/components/scatter/config.ts", "../../@unovis/src/components/scatter/modules/utils.ts", "../../@unovis/src/components/scatter/modules/point.ts", "../../@unovis/src/components/scatter/style.ts", "../../@unovis/src/components/scatter/index.ts", "../../d3-drag/src/noevent.js", "../../d3-drag/src/nodrag.js", "../../d3-drag/src/constant.js", "../../d3-drag/src/event.js", "../../d3-drag/src/drag.js", "../../d3-brush/src/constant.js", "../../d3-brush/src/event.js", "../../d3-brush/src/noevent.js", "../../d3-brush/src/brush.js", "../../@unovis/src/components/brush/config.ts", "../../@unovis/src/components/brush/types.ts", "../../@unovis/src/utils/style.ts", "../../@unovis/src/components/brush/style.ts", "../../@unovis/src/components/brush/index.ts", "../../@unovis/src/components/bullet-legend/types.ts", "../../@unovis/src/components/bullet-legend/config.ts", "../../@unovis/src/components/bullet-legend/modules/shape.ts", "../../@unovis/src/components/bullet-legend/style.ts", "../../@unovis/src/components/bullet-legend/index.ts", "../../@unovis/src/components/flow-legend/config.ts", "../../@unovis/src/components/flow-legend/types.ts", "../../@unovis/src/components/flow-legend/style.ts", "../../@unovis/src/components/flow-legend/index.ts", "../../@unovis/src/components/crosshair/config.ts", "../../@unovis/src/components/crosshair/style.ts", "../../@unovis/src/components/crosshair/index.ts", "../../@unovis/src/components/timeline/config.ts", "../../@unovis/src/components/timeline/style.ts", "../../@unovis/src/components/timeline/index.ts", "../../d3-sankey/node_modules/d3-array/src/ascending.js", "../../d3-sankey/node_modules/d3-array/src/bisector.js", "../../d3-sankey/node_modules/d3-array/src/number.js", "../../d3-sankey/node_modules/d3-array/src/bisect.js", "../../d3-sankey/node_modules/d3-array/src/array.js", "../../d3-sankey/node_modules/d3-array/src/ticks.js", "../../d3-sankey/node_modules/d3-array/src/max.js", "../../d3-sankey/node_modules/d3-array/src/min.js", "../../d3-sankey/node_modules/d3-array/src/shuffle.js", "../../d3-sankey/node_modules/d3-array/src/sum.js", "../../d3-sankey/src/align.js", "../../d3-sankey/src/constant.js", "../../d3-sankey/src/sankey.js", "../../d3-sankey/node_modules/d3-path/src/path.js", "../../d3-sankey/node_modules/d3-shape/src/math.js", "../../d3-sankey/node_modules/d3-shape/src/curve/linear.js", "../../d3-sankey/node_modules/d3-shape/src/curve/radial.js", "../../d3-sankey/node_modules/d3-shape/src/array.js", "../../d3-sankey/node_modules/d3-shape/src/symbol/diamond.js", "../../d3-sankey/node_modules/d3-shape/src/symbol/star.js", "../../d3-sankey/node_modules/d3-shape/src/symbol/triangle.js", "../../d3-sankey/node_modules/d3-shape/src/symbol/wye.js", "../../d3-sankey/node_modules/d3-shape/src/noop.js", "../../d3-sankey/node_modules/d3-shape/src/curve/basis.js", "../../d3-sankey/node_modules/d3-shape/src/curve/basisClosed.js", "../../d3-sankey/node_modules/d3-shape/src/curve/basisOpen.js", "../../d3-sankey/node_modules/d3-shape/src/curve/bundle.js", "../../d3-sankey/node_modules/d3-shape/src/curve/cardinal.js", "../../d3-sankey/node_modules/d3-shape/src/curve/cardinalClosed.js", "../../d3-sankey/node_modules/d3-shape/src/curve/cardinalOpen.js", "../../d3-sankey/node_modules/d3-shape/src/curve/catmullRom.js", "../../d3-sankey/node_modules/d3-shape/src/curve/catmullRomClosed.js", "../../d3-sankey/node_modules/d3-shape/src/curve/catmullRomOpen.js", "../../d3-sankey/node_modules/d3-shape/src/curve/linearClosed.js", "../../d3-sankey/node_modules/d3-shape/src/curve/monotone.js", "../../d3-sankey/node_modules/d3-shape/src/curve/natural.js", "../../d3-sankey/node_modules/d3-shape/src/curve/step.js", "../../@unovis/src/data-models/graph.ts", "../../@unovis/src/components/sankey/types.ts", "../../@unovis/src/components/sankey/config.ts", "../../@unovis/src/components/sankey/style.ts", "../../@unovis/src/components/sankey/modules/link.ts", "../../@unovis/src/components/sankey/modules/label.ts", "../../@unovis/src/components/sankey/modules/node.ts", "../../@unovis/src/components/sankey/index.ts", "../../@unovis/src/components/area/config.ts", "../../@unovis/src/components/area/style.ts", "../../@unovis/src/components/area/index.ts", "../../d3-zoom/src/constant.js", "../../d3-zoom/src/event.js", "../../d3-zoom/src/transform.js", "../../d3-zoom/src/noevent.js", "../../d3-zoom/src/zoom.js", "../../d3-geo/src/math.js", "../../d3-geo/src/noop.js", "../../d3-geo/src/stream.js", "../../d3-geo/src/area.js", "../../d3-geo/src/cartesian.js", "../../d3-geo/src/compose.js", "../../d3-geo/src/rotation.js", "../../d3-geo/src/circle.js", "../../d3-geo/src/clip/buffer.js", "../../d3-geo/src/pointEqual.js", "../../d3-geo/src/clip/rejoin.js", "../../d3-geo/src/polygonContains.js", "../../d3-geo/src/clip/index.js", "../../d3-geo/src/clip/antimeridian.js", "../../d3-geo/src/clip/circle.js", "../../d3-geo/src/clip/line.js", "../../d3-geo/src/clip/rectangle.js", "../../d3-geo/src/identity.js", "../../d3-geo/src/path/area.js", "../../d3-geo/src/path/bounds.js", "../../d3-geo/src/path/centroid.js", "../../d3-geo/src/path/context.js", "../../d3-geo/src/path/measure.js", "../../d3-geo/src/path/string.js", "../../d3-geo/src/path/index.js", "../../d3-geo/src/transform.js", "../../d3-geo/src/projection/fit.js", "../../d3-geo/src/projection/resample.js", "../../d3-geo/src/projection/index.js", "../../d3-geo/src/projection/conic.js", "../../d3-geo/src/projection/cylindricalEqualArea.js", "../../d3-geo/src/projection/conicEqualArea.js", "../../d3-geo/src/projection/albers.js", "../../d3-geo/src/projection/albersUsa.js", "../../d3-geo/src/projection/azimuthal.js", "../../d3-geo/src/projection/azimuthalEqualArea.js", "../../d3-geo/src/projection/azimuthalEquidistant.js", "../../d3-geo/src/projection/mercator.js", "../../d3-geo/src/projection/conicConformal.js", "../../d3-geo/src/projection/equirectangular.js", "../../d3-geo/src/projection/conicEquidistant.js", "../../d3-geo/src/projection/equalEarth.js", "../../d3-geo/src/projection/gnomonic.js", "../../d3-geo/src/projection/naturalEarth1.js", "../../d3-geo/src/projection/orthographic.js", "../../d3-geo/src/projection/stereographic.js", "../../d3-geo/src/projection/transverseMercator.js", "../../topojson-client/src/identity.js", "../../topojson-client/src/transform.js", "../../topojson-client/src/reverse.js", "../../topojson-client/src/feature.js", "../../@unovis/src/data-models/map-graph.ts", "../../d3-geo-projection/src/math.js", "../../d3-geo-projection/src/aitoff.js", "../../d3-geo-projection/src/armadillo.js", "../../d3-geo-projection/src/august.js", "../../d3-geo-projection/src/baker.js", "../../d3-geo-projection/src/hammer.js", "../../d3-geo-projection/src/newton.js", "../../d3-geo-projection/src/mollweide.js", "../../d3-geo-projection/src/boggs.js", "../../d3-geo-projection/src/parallel1.js", "../../d3-geo-projection/src/sinusoidal.js", "../../d3-geo-projection/src/bromley.js", "../../d3-geo-projection/src/collignon.js", "../../d3-geo-projection/src/craster.js", "../../d3-geo-projection/src/cylindricalEqualArea.js", "../../d3-geo-projection/src/cylindricalStereographic.js", "../../d3-geo-projection/src/eckert1.js", "../../d3-geo-projection/src/eckert2.js", "../../d3-geo-projection/src/eckert3.js", "../../d3-geo-projection/src/eckert4.js", "../../d3-geo-projection/src/eckert5.js", "../../d3-geo-projection/src/eckert6.js", "../../d3-geo-projection/src/eisenlohr.js", "../../d3-geo-projection/src/fahey.js", "../../d3-geo-projection/src/foucaut.js", "../../d3-geo-projection/src/foucautSinusoidal.js", "../../d3-geo-projection/src/ginzburgPolyconic.js", "../../d3-geo-projection/src/ginzburg4.js", "../../d3-geo-projection/src/ginzburg5.js", "../../d3-geo-projection/src/ginzburg6.js", "../../d3-geo-projection/src/ginzburg8.js", "../../d3-geo-projection/src/ginzburg9.js", "../../d3-geo-projection/src/gringorten.js", "../../d3-geo-projection/src/elliptic.js", "../../d3-geo-projection/src/guyou.js", "../../d3-geo-projection/src/healpix.js", "../../d3-geo-projection/src/sinuMollweide.js", "../../d3-geo-projection/src/homolosine.js", "../../d3-geo-projection/src/hufnagel.js", "../../d3-geo-projection/src/kavrayskiy7.js", "../../d3-geo-projection/src/larrivee.js", "../../d3-geo-projection/src/laskowski.js", "../../d3-geo-projection/src/littrow.js", "../../d3-geo-projection/src/miller.js", "../../d3-geo-projection/src/mtFlatPolarParabolic.js", "../../d3-geo-projection/src/mtFlatPolarQuartic.js", "../../d3-geo-projection/src/mtFlatPolarSinusoidal.js", "../../d3-geo-projection/src/naturalEarth2.js", "../../d3-geo-projection/src/nellHammer.js", "../../d3-geo-projection/src/nicolosi.js", "../../d3-geo-projection/src/patterson.js", "../../d3-geo-projection/src/polyconic.js", "../../d3-geo-projection/src/polyhedral/octahedron.js", "../../d3-geo-projection/src/polyhedral/collignon.js", "../../d3-geo-projection/src/robinson.js", "../../d3-geo-projection/src/stitch.js", "../../d3-geo-projection/src/times.js", "../../d3-geo-projection/src/vanDerGrinten.js", "../../d3-geo-projection/src/vanDerGrinten2.js", "../../d3-geo-projection/src/vanDerGrinten3.js", "../../d3-geo-projection/src/vanDerGrinten4.js", "../../d3-geo-projection/src/wagner4.js", "../../d3-geo-projection/src/wagner6.js", "../../d3-geo-projection/src/wiechel.js", "../../d3-geo-projection/src/winkel3.js", "../../@unovis/src/components/topojson-map/types.ts", "../../@unovis/src/components/topojson-map/config.ts", "../../@unovis/src/components/topojson-map/utils.ts", "../../@unovis/src/components/topojson-map/style.ts", "../../@unovis/src/components/topojson-map/index.ts", "../../d3-hierarchy/src/hierarchy/count.js", "../../d3-hierarchy/src/hierarchy/each.js", "../../d3-hierarchy/src/hierarchy/eachBefore.js", "../../d3-hierarchy/src/hierarchy/eachAfter.js", "../../d3-hierarchy/src/hierarchy/find.js", "../../d3-hierarchy/src/hierarchy/sum.js", "../../d3-hierarchy/src/hierarchy/sort.js", "../../d3-hierarchy/src/hierarchy/path.js", "../../d3-hierarchy/src/hierarchy/ancestors.js", "../../d3-hierarchy/src/hierarchy/descendants.js", "../../d3-hierarchy/src/hierarchy/leaves.js", "../../d3-hierarchy/src/hierarchy/links.js", "../../d3-hierarchy/src/hierarchy/iterator.js", "../../d3-hierarchy/src/hierarchy/index.js", "../../d3-hierarchy/src/lcg.js", "../../d3-hierarchy/src/array.js", "../../d3-hierarchy/src/pack/enclose.js", "../../d3-hierarchy/src/pack/siblings.js", "../../d3-hierarchy/src/treemap/round.js", "../../d3-hierarchy/src/treemap/dice.js", "../../d3-hierarchy/src/partition.js", "../../d3-hierarchy/src/tree.js", "../../d3-hierarchy/src/treemap/slice.js", "../../d3-hierarchy/src/treemap/squarify.js", "../../d3-hierarchy/src/treemap/resquarify.js", "../../@unovis/src/utils/map.ts", "../../@unovis/src/data-models/map.ts", "../../@unovis/src/components/leaflet-map/renderer/mapboxgl-utils.ts", "../../kdbush/src/sort.js", "../../kdbush/src/range.js", "../../kdbush/src/within.js", "../../kdbush/src/index.js", "../../supercluster/index.js", "../../@unovis/src/utils/html.ts", "../../@unovis/src/components/leaflet-map/types.ts", "../../@unovis/src/components/leaflet-map/modules/utils.ts", "../../@unovis/src/components/leaflet-map/config.ts", "../../@unovis/ts/components/leaflet-map/leaflet.css.js", "../../@unovis/src/components/leaflet-map/style.ts", "../../tslib/tslib.es6.mjs", "../../@unovis/src/components/leaflet-map/modules/map.ts", "../../@unovis/src/components/leaflet-map/modules/donut.ts", "../../@unovis/src/components/leaflet-map/modules/node.ts", "../../@unovis/src/components/leaflet-map/modules/selectionRing.ts", "../../@unovis/src/components/leaflet-map/modules/clusterBackground.ts", "../../@unovis/src/components/leaflet-map/index.ts", "../../@unovis/ts/components/leaflet-map/renderer/mapboxgl/mapboxgl-settings.json.js", "../../@unovis/ts/components/leaflet-map/renderer/mapboxgl/mapboxgl-dark-theme.json.js", "../../@unovis/ts/components/leaflet-map/renderer/mapboxgl/mapboxgl-light-theme.json.js", "../../@unovis/src/components/leaflet-map/renderer/map-style.ts", "../../@unovis/src/components/leaflet-flow-map/config.ts", "../../@unovis/src/components/leaflet-flow-map/index.ts", "../../@unovis/src/components/chord-diagram/types.ts", "../../@unovis/src/components/chord-diagram/config.ts", "../../@unovis/src/components/chord-diagram/modules/node.ts", "../../@unovis/src/components/chord-diagram/style.ts", "../../@unovis/src/components/chord-diagram/modules/label.ts", "../../@unovis/src/components/chord-diagram/modules/layout.ts", "../../d3-chord/src/math.js", "../../d3-chord/src/array.js", "../../d3-chord/src/constant.js", "../../d3-chord/src/ribbon.js", "../../@unovis/src/components/chord-diagram/modules/link.ts", "../../@unovis/src/components/chord-diagram/index.ts", "../../@unovis/src/components/graph/types.ts", "../../@unovis/src/components/graph/config.ts", "../../@unovis/src/components/graph/modules/node/style.ts", "../../@unovis/src/components/graph/modules/link/style.ts", "../../@unovis/src/components/graph/style.ts", "../../@unovis/src/components/graph/modules/panel/style.ts", "../../@unovis/src/utils/svg.ts", "../../@unovis/src/components/graph/modules/node/helper.ts", "../../@unovis/src/components/graph/modules/shape.ts", "../../@unovis/src/components/graph/modules/zoom-levels.ts", "../../@unovis/src/components/graph/modules/node/index.ts", "../../@unovis/src/components/graph/modules/link/helper.ts", "../../@unovis/src/components/graph/modules/link/index.ts", "../../@unovis/src/components/graph/modules/panel/helper.ts", "../../@unovis/src/components/graph/modules/panel/index.ts", "../../@unovis/src/components/graph/modules/layout-helpers.ts", "../../@unovis/src/components/graph/modules/layout.ts", "../../@unovis/src/components/graph/index.ts", "../../@unovis/src/components/vis-controls/types.ts", "../../@unovis/src/components/vis-controls/config.ts", "../../@unovis/src/components/vis-controls/style.ts", "../../@unovis/src/components/vis-controls/index.ts", "../../@unovis/src/components/donut/config.ts", "../../@unovis/src/components/donut/modules/arc.ts", "../../@unovis/src/components/donut/constants.ts", "../../@unovis/src/components/donut/style.ts", "../../@unovis/src/components/donut/index.ts", "../../@unovis/src/components/free-brush/types.ts", "../../@unovis/src/components/free-brush/config.ts", "../../@unovis/src/components/free-brush/style.ts", "../../@unovis/src/components/free-brush/index.ts", "../../@unovis/src/components/xy-labels/types.ts", "../../@unovis/src/components/xy-labels/config.ts", "../../@unovis/src/components/xy-labels/modules/label.ts", "../../@unovis/src/components/xy-labels/style.ts", "../../@unovis/src/components/xy-labels/index.ts", "../../@unovis/src/components/nested-donut/types.ts", "../../@unovis/src/components/nested-donut/config.ts", "../../@unovis/src/components/nested-donut/modules/arc.ts", "../../@unovis/src/components/nested-donut/style.ts", "../../@unovis/src/components/nested-donut/modules/label.ts", "../../@unovis/src/components/nested-donut/index.ts", "../../@unovis/src/components/annotations/config.ts", "../../@unovis/src/components/annotations/style.ts", "../../@unovis/src/components/annotations/index.ts", "../../@unovis/src/types/shape.ts", "../../@unovis/src/styles/sizes.ts", "../../@unovis/src/utils/scale.ts"],
  "sourcesContent": ["module.exports = function parseUnit(str, out) {\n    if (!out)\n        out = [ 0, '' ]\n\n    str = String(str)\n    var num = parseFloat(str, 10)\n    out[0] = num\n    out[1] = str.match(/[\\d.\\-\\+]*\\s*(.*)/)[1] || ''\n    return out\n}", "'use strict'\n\nvar parseUnit = require('parse-unit')\n\nmodule.exports = toPX\n\nvar PIXELS_PER_INCH = getSizeBrutal('in', document.body) // 96\n\n\nfunction getPropertyInPX(element, prop) {\n  var parts = parseUnit(getComputedStyle(element).getPropertyValue(prop))\n  return parts[0] * toPX(parts[1], element)\n}\n\n//This brutal hack is needed\nfunction getSizeBrutal(unit, element) {\n  var testDIV = document.createElement('div')\n  testDIV.style['height'] = '128' + unit\n  element.appendChild(testDIV)\n  var size = getPropertyInPX(testDIV, 'height') / 128\n  element.removeChild(testDIV)\n  return size\n}\n\nfunction toPX(str, element) {\n  if (!str) return null\n\n  element = element || document.body\n  str = (str + '' || 'px').trim().toLowerCase()\n  if(element === window || element === document) {\n    element = document.body\n  }\n\n  switch(str) {\n    case '%':  //Ambiguous, not sure if we should use width or height\n      return element.clientHeight / 100.0\n    case 'ch':\n    case 'ex':\n      return getSizeBrutal(str, element)\n    case 'em':\n      return getPropertyInPX(element, 'font-size')\n    case 'rem':\n      return getPropertyInPX(document.body, 'font-size')\n    case 'vw':\n      return window.innerWidth/100\n    case 'vh':\n      return window.innerHeight/100\n    case 'vmin':\n      return Math.min(window.innerWidth, window.innerHeight) / 100\n    case 'vmax':\n      return Math.max(window.innerWidth, window.innerHeight) / 100\n    case 'in':\n      return PIXELS_PER_INCH\n    case 'cm':\n      return PIXELS_PER_INCH / 2.54\n    case 'mm':\n      return PIXELS_PER_INCH / 25.4\n    case 'pt':\n      return PIXELS_PER_INCH / 72\n    case 'pc':\n      return PIXELS_PER_INCH / 6\n    case 'px':\n      return 1\n  }\n\n  // detect number of units\n  var parts = parseUnit(str)\n  if (!isNaN(parts[0]) && parts[1]) {\n    var px = toPX(parts[1], element)\n    return typeof px === 'number' ? parts[0] * px : null\n  }\n\n  return null\n}\n", "'use strict';\n\n(function (global) {\n\n    // minimal symbol polyfill for IE11 and others\n    if (typeof Symbol !== 'function') {\n        var Symbol = function(name) {\n            return name;\n        }\n\n        Symbol.nonNative = true;\n    }\n\n    const STATE_PLAINTEXT = Symbol('plaintext');\n    const STATE_HTML      = Symbol('html');\n    const STATE_COMMENT   = Symbol('comment');\n\n    const ALLOWED_TAGS_REGEX  = /<(\\w*)>/g;\n    const NORMALIZE_TAG_REGEX = /<\\/?([^\\s\\/>]+)/;\n\n    function striptags(html, allowable_tags, tag_replacement) {\n        html            = html || '';\n        allowable_tags  = allowable_tags || [];\n        tag_replacement = tag_replacement || '';\n\n        let context = init_context(allowable_tags, tag_replacement);\n\n        return striptags_internal(html, context);\n    }\n\n    function init_striptags_stream(allowable_tags, tag_replacement) {\n        allowable_tags  = allowable_tags || [];\n        tag_replacement = tag_replacement || '';\n\n        let context = init_context(allowable_tags, tag_replacement);\n\n        return function striptags_stream(html) {\n            return striptags_internal(html || '', context);\n        };\n    }\n\n    striptags.init_streaming_mode = init_striptags_stream;\n\n    function init_context(allowable_tags, tag_replacement) {\n        allowable_tags = parse_allowable_tags(allowable_tags);\n\n        return {\n            allowable_tags : allowable_tags,\n            tag_replacement: tag_replacement,\n\n            state         : STATE_PLAINTEXT,\n            tag_buffer    : '',\n            depth         : 0,\n            in_quote_char : ''\n        };\n    }\n\n    function striptags_internal(html, context) {\n        if (typeof html != \"string\") {\n            throw new TypeError(\"'html' parameter must be a string\");\n        }\n\n        let allowable_tags  = context.allowable_tags;\n        let tag_replacement = context.tag_replacement;\n\n        let state         = context.state;\n        let tag_buffer    = context.tag_buffer;\n        let depth         = context.depth;\n        let in_quote_char = context.in_quote_char;\n        let output        = '';\n\n        for (let idx = 0, length = html.length; idx < length; idx++) {\n            let char = html[idx];\n\n            if (state === STATE_PLAINTEXT) {\n                switch (char) {\n                    case '<':\n                        state       = STATE_HTML;\n                        tag_buffer += char;\n                        break;\n\n                    default:\n                        output += char;\n                        break;\n                }\n            }\n\n            else if (state === STATE_HTML) {\n                switch (char) {\n                    case '<':\n                        // ignore '<' if inside a quote\n                        if (in_quote_char) {\n                            break;\n                        }\n\n                        // we're seeing a nested '<'\n                        depth++;\n                        break;\n\n                    case '>':\n                        // ignore '>' if inside a quote\n                        if (in_quote_char) {\n                            break;\n                        }\n\n                        // something like this is happening: '<<>>'\n                        if (depth) {\n                            depth--;\n\n                            break;\n                        }\n\n                        // this is closing the tag in tag_buffer\n                        in_quote_char = '';\n                        state         = STATE_PLAINTEXT;\n                        tag_buffer   += '>';\n\n                        if (allowable_tags.has(normalize_tag(tag_buffer))) {\n                            output += tag_buffer;\n                        } else {\n                            output += tag_replacement;\n                        }\n\n                        tag_buffer = '';\n                        break;\n\n                    case '\"':\n                    case '\\'':\n                        // catch both single and double quotes\n\n                        if (char === in_quote_char) {\n                            in_quote_char = '';\n                        } else {\n                            in_quote_char = in_quote_char || char;\n                        }\n\n                        tag_buffer += char;\n                        break;\n\n                    case '-':\n                        if (tag_buffer === '<!-') {\n                            state = STATE_COMMENT;\n                        }\n\n                        tag_buffer += char;\n                        break;\n\n                    case ' ':\n                    case '\\n':\n                        if (tag_buffer === '<') {\n                            state      = STATE_PLAINTEXT;\n                            output    += '< ';\n                            tag_buffer = '';\n\n                            break;\n                        }\n\n                        tag_buffer += char;\n                        break;\n\n                    default:\n                        tag_buffer += char;\n                        break;\n                }\n            }\n\n            else if (state === STATE_COMMENT) {\n                switch (char) {\n                    case '>':\n                        if (tag_buffer.slice(-2) == '--') {\n                            // close the comment\n                            state = STATE_PLAINTEXT;\n                        }\n\n                        tag_buffer = '';\n                        break;\n\n                    default:\n                        tag_buffer += char;\n                        break;\n                }\n            }\n        }\n\n        // save the context for future iterations\n        context.state         = state;\n        context.tag_buffer    = tag_buffer;\n        context.depth         = depth;\n        context.in_quote_char = in_quote_char;\n\n        return output;\n    }\n\n    function parse_allowable_tags(allowable_tags) {\n        let tag_set = new Set();\n\n        if (typeof allowable_tags === 'string') {\n            let match;\n\n            while ((match = ALLOWED_TAGS_REGEX.exec(allowable_tags))) {\n                tag_set.add(match[1]);\n            }\n        }\n\n        else if (!Symbol.nonNative &&\n                 typeof allowable_tags[Symbol.iterator] === 'function') {\n\n            tag_set = new Set(allowable_tags);\n        }\n\n        else if (typeof allowable_tags.forEach === 'function') {\n            // IE11 compatible\n            allowable_tags.forEach(tag_set.add, tag_set);\n        }\n\n        return tag_set;\n    }\n\n    function normalize_tag(tag_buffer) {\n        let match = NORMALIZE_TAG_REGEX.exec(tag_buffer);\n\n        return match ? match[1].toLowerCase() : null;\n    }\n\n    if (typeof define === 'function' && define.amd) {\n        // AMD\n        define(function module_factory() { return striptags; });\n    }\n\n    else if (typeof module === 'object' && module.exports) {\n        // Node\n        module.exports = striptags;\n    }\n\n    else {\n        // Browser\n        global.striptags = striptags;\n    }\n}(this));\n", "export var xhtml = \"http://www.w3.org/1999/xhtml\";\n\nexport default {\n  svg: \"http://www.w3.org/2000/svg\",\n  xhtml: xhtml,\n  xlink: \"http://www.w3.org/1999/xlink\",\n  xml: \"http://www.w3.org/XML/1998/namespace\",\n  xmlns: \"http://www.w3.org/2000/xmlns/\"\n};\n", "import namespaces from \"./namespaces.js\";\n\nexport default function(name) {\n  var prefix = name += \"\", i = prefix.indexOf(\":\");\n  if (i >= 0 && (prefix = name.slice(0, i)) !== \"xmlns\") name = name.slice(i + 1);\n  return namespaces.hasOwnProperty(prefix) ? {space: namespaces[prefix], local: name} : name; // eslint-disable-line no-prototype-builtins\n}\n", "import namespace from \"./namespace.js\";\nimport {xhtml} from \"./namespaces.js\";\n\nfunction creatorInherit(name) {\n  return function() {\n    var document = this.ownerDocument,\n        uri = this.namespaceURI;\n    return uri === xhtml && document.documentElement.namespaceURI === xhtml\n        ? document.createElement(name)\n        : document.createElementNS(uri, name);\n  };\n}\n\nfunction creatorFixed(fullname) {\n  return function() {\n    return this.ownerDocument.createElementNS(fullname.space, fullname.local);\n  };\n}\n\nexport default function(name) {\n  var fullname = namespace(name);\n  return (fullname.local\n      ? creatorFixed\n      : creatorInherit)(fullname);\n}\n", "function none() {}\n\nexport default function(selector) {\n  return selector == null ? none : function() {\n    return this.querySelector(selector);\n  };\n}\n", "import {Selection} from \"./index.js\";\nimport selector from \"../selector.js\";\n\nexport default function(select) {\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n", "// Given something array like (or null), returns something that is strictly an\n// array. This is used to ensure that array-like objects passed to d3.selectAll\n// or selection.selectAll are converted into proper arrays when creating a\n// selection; we don’t ever want to create a selection backed by a live\n// HTMLCollection or NodeList. However, note that selection.selectAll will use a\n// static NodeList as a group, since it safely derived from querySelectorAll.\nexport default function array(x) {\n  return x == null ? [] : Array.isArray(x) ? x : Array.from(x);\n}\n", "function empty() {\n  return [];\n}\n\nexport default function(selector) {\n  return selector == null ? empty : function() {\n    return this.querySelectorAll(selector);\n  };\n}\n", "import {Selection} from \"./index.js\";\nimport array from \"../array.js\";\nimport selectorAll from \"../selectorAll.js\";\n\nfunction arrayAll(select) {\n  return function() {\n    return array(select.apply(this, arguments));\n  };\n}\n\nexport default function(select) {\n  if (typeof select === \"function\") select = arrayAll(select);\n  else select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        subgroups.push(select.call(node, node.__data__, i, group));\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, parents);\n}\n", "export default function(selector) {\n  return function() {\n    return this.matches(selector);\n  };\n}\n\nexport function childMatcher(selector) {\n  return function(node) {\n    return node.matches(selector);\n  };\n}\n\n", "import {childMatcher} from \"../matcher.js\";\n\nvar find = Array.prototype.find;\n\nfunction childFind(match) {\n  return function() {\n    return find.call(this.children, match);\n  };\n}\n\nfunction childFirst() {\n  return this.firstElementChild;\n}\n\nexport default function(match) {\n  return this.select(match == null ? childFirst\n      : childFind(typeof match === \"function\" ? match : childMatcher(match)));\n}\n", "import {childMatcher} from \"../matcher.js\";\n\nvar filter = Array.prototype.filter;\n\nfunction children() {\n  return Array.from(this.children);\n}\n\nfunction childrenFilter(match) {\n  return function() {\n    return filter.call(this.children, match);\n  };\n}\n\nexport default function(match) {\n  return this.selectAll(match == null ? children\n      : childrenFilter(typeof match === \"function\" ? match : childMatcher(match)));\n}\n", "import {Selection} from \"./index.js\";\nimport matcher from \"../matcher.js\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n", "export default function(update) {\n  return new Array(update.length);\n}\n", "import sparse from \"./sparse.js\";\nimport {Selection} from \"./index.js\";\n\nexport default function() {\n  return new Selection(this._enter || this._groups.map(sparse), this._parents);\n}\n\nexport function EnterNode(parent, datum) {\n  this.ownerDocument = parent.ownerDocument;\n  this.namespaceURI = parent.namespaceURI;\n  this._next = null;\n  this._parent = parent;\n  this.__data__ = datum;\n}\n\nEnterNode.prototype = {\n  constructor: EnterNode,\n  appendChild: function(child) { return this._parent.insertBefore(child, this._next); },\n  insertBefore: function(child, next) { return this._parent.insertBefore(child, next); },\n  querySelector: function(selector) { return this._parent.querySelector(selector); },\n  querySelectorAll: function(selector) { return this._parent.querySelectorAll(selector); }\n};\n", "export default function(x) {\n  return function() {\n    return x;\n  };\n}\n", "import {Selection} from \"./index.js\";\nimport {EnterNode} from \"./enter.js\";\nimport constant from \"../constant.js\";\n\nfunction bindIndex(parent, group, enter, update, exit, data) {\n  var i = 0,\n      node,\n      groupLength = group.length,\n      dataLength = data.length;\n\n  // Put any non-null nodes that fit into update.\n  // Put any null nodes into enter.\n  // Put any remaining data into enter.\n  for (; i < dataLength; ++i) {\n    if (node = group[i]) {\n      node.__data__ = data[i];\n      update[i] = node;\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Put any non-null nodes that don’t fit into exit.\n  for (; i < groupLength; ++i) {\n    if (node = group[i]) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction bindKey(parent, group, enter, update, exit, data, key) {\n  var i,\n      node,\n      nodeByKeyValue = new Map,\n      groupLength = group.length,\n      dataLength = data.length,\n      keyValues = new Array(groupLength),\n      keyValue;\n\n  // Compute the key for each node.\n  // If multiple nodes have the same key, the duplicates are added to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if (node = group[i]) {\n      keyValues[i] = keyValue = key.call(node, node.__data__, i, group) + \"\";\n      if (nodeByKeyValue.has(keyValue)) {\n        exit[i] = node;\n      } else {\n        nodeByKeyValue.set(keyValue, node);\n      }\n    }\n  }\n\n  // Compute the key for each datum.\n  // If there a node associated with this key, join and add it to update.\n  // If there is not (or the key is a duplicate), add it to enter.\n  for (i = 0; i < dataLength; ++i) {\n    keyValue = key.call(parent, data[i], i, data) + \"\";\n    if (node = nodeByKeyValue.get(keyValue)) {\n      update[i] = node;\n      node.__data__ = data[i];\n      nodeByKeyValue.delete(keyValue);\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Add any remaining nodes that were not bound to data to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if ((node = group[i]) && (nodeByKeyValue.get(keyValues[i]) === node)) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction datum(node) {\n  return node.__data__;\n}\n\nexport default function(value, key) {\n  if (!arguments.length) return Array.from(this, datum);\n\n  var bind = key ? bindKey : bindIndex,\n      parents = this._parents,\n      groups = this._groups;\n\n  if (typeof value !== \"function\") value = constant(value);\n\n  for (var m = groups.length, update = new Array(m), enter = new Array(m), exit = new Array(m), j = 0; j < m; ++j) {\n    var parent = parents[j],\n        group = groups[j],\n        groupLength = group.length,\n        data = arraylike(value.call(parent, parent && parent.__data__, j, parents)),\n        dataLength = data.length,\n        enterGroup = enter[j] = new Array(dataLength),\n        updateGroup = update[j] = new Array(dataLength),\n        exitGroup = exit[j] = new Array(groupLength);\n\n    bind(parent, group, enterGroup, updateGroup, exitGroup, data, key);\n\n    // Now connect the enter nodes to their following update node, such that\n    // appendChild can insert the materialized enter node before this node,\n    // rather than at the end of the parent node.\n    for (var i0 = 0, i1 = 0, previous, next; i0 < dataLength; ++i0) {\n      if (previous = enterGroup[i0]) {\n        if (i0 >= i1) i1 = i0 + 1;\n        while (!(next = updateGroup[i1]) && ++i1 < dataLength);\n        previous._next = next || null;\n      }\n    }\n  }\n\n  update = new Selection(update, parents);\n  update._enter = enter;\n  update._exit = exit;\n  return update;\n}\n\n// Given some data, this returns an array-like view of it: an object that\n// exposes a length property and allows numeric indexing. Note that unlike\n// selectAll, this isn’t worried about “live” collections because the resulting\n// array will only be used briefly while data is being bound. (It is possible to\n// cause the data to change while iterating by using a key function, but please\n// don’t; we’d rather avoid a gratuitous copy.)\nfunction arraylike(data) {\n  return typeof data === \"object\" && \"length\" in data\n    ? data // Array, TypedArray, NodeList, array-like\n    : Array.from(data); // Map, Set, iterable, string, or anything else\n}\n", "import sparse from \"./sparse.js\";\nimport {Selection} from \"./index.js\";\n\nexport default function() {\n  return new Selection(this._exit || this._groups.map(sparse), this._parents);\n}\n", "export default function(onenter, onupdate, onexit) {\n  var enter = this.enter(), update = this, exit = this.exit();\n  if (typeof onenter === \"function\") {\n    enter = onenter(enter);\n    if (enter) enter = enter.selection();\n  } else {\n    enter = enter.append(onenter + \"\");\n  }\n  if (onupdate != null) {\n    update = onupdate(update);\n    if (update) update = update.selection();\n  }\n  if (onexit == null) exit.remove(); else onexit(exit);\n  return enter && update ? enter.merge(update).order() : update;\n}\n", "import {Selection} from \"./index.js\";\n\nexport default function(context) {\n  var selection = context.selection ? context.selection() : context;\n\n  for (var groups0 = this._groups, groups1 = selection._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Selection(merges, this._parents);\n}\n", "export default function() {\n\n  for (var groups = this._groups, j = -1, m = groups.length; ++j < m;) {\n    for (var group = groups[j], i = group.length - 1, next = group[i], node; --i >= 0;) {\n      if (node = group[i]) {\n        if (next && node.compareDocumentPosition(next) ^ 4) next.parentNode.insertBefore(node, next);\n        next = node;\n      }\n    }\n  }\n\n  return this;\n}\n", "import {Selection} from \"./index.js\";\n\nexport default function(compare) {\n  if (!compare) compare = ascending;\n\n  function compareNode(a, b) {\n    return a && b ? compare(a.__data__, b.__data__) : !a - !b;\n  }\n\n  for (var groups = this._groups, m = groups.length, sortgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, sortgroup = sortgroups[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        sortgroup[i] = node;\n      }\n    }\n    sortgroup.sort(compareNode);\n  }\n\n  return new Selection(sortgroups, this._parents).order();\n}\n\nfunction ascending(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n", "export default function() {\n  var callback = arguments[0];\n  arguments[0] = this;\n  callback.apply(null, arguments);\n  return this;\n}\n", "export default function() {\n  return Array.from(this);\n}\n", "export default function() {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length; i < n; ++i) {\n      var node = group[i];\n      if (node) return node;\n    }\n  }\n\n  return null;\n}\n", "export default function() {\n  let size = 0;\n  for (const node of this) ++size; // eslint-disable-line no-unused-vars\n  return size;\n}\n", "export default function() {\n  return !this.node();\n}\n", "export default function(callback) {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) callback.call(node, node.__data__, i, group);\n    }\n  }\n\n  return this;\n}\n", "import namespace from \"../namespace.js\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, value) {\n  return function() {\n    this.setAttribute(name, value);\n  };\n}\n\nfunction attrConstantNS(fullname, value) {\n  return function() {\n    this.setAttributeNS(fullname.space, fullname.local, value);\n  };\n}\n\nfunction attrFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttribute(name);\n    else this.setAttribute(name, v);\n  };\n}\n\nfunction attrFunctionNS(fullname, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttributeNS(fullname.space, fullname.local);\n    else this.setAttributeNS(fullname.space, fullname.local, v);\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name);\n\n  if (arguments.length < 2) {\n    var node = this.node();\n    return fullname.local\n        ? node.getAttributeNS(fullname.space, fullname.local)\n        : node.getAttribute(fullname);\n  }\n\n  return this.each((value == null\n      ? (fullname.local ? attrRemoveNS : attrRemove) : (typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)\n      : (fullname.local ? attrConstantNS : attrConstant)))(fullname, value));\n}\n", "export default function(node) {\n  return (node.ownerDocument && node.ownerDocument.defaultView) // node is a Node\n      || (node.document && node) // node is a Window\n      || node.defaultView; // node is a Document\n}\n", "import defaultView from \"../window.js\";\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, value, priority) {\n  return function() {\n    this.style.setProperty(name, value, priority);\n  };\n}\n\nfunction styleFunction(name, value, priority) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.style.removeProperty(name);\n    else this.style.setProperty(name, v, priority);\n  };\n}\n\nexport default function(name, value, priority) {\n  return arguments.length > 1\n      ? this.each((value == null\n            ? styleRemove : typeof value === \"function\"\n            ? styleFunction\n            : styleConstant)(name, value, priority == null ? \"\" : priority))\n      : styleValue(this.node(), name);\n}\n\nexport function styleValue(node, name) {\n  return node.style.getPropertyValue(name)\n      || defaultView(node).getComputedStyle(node, null).getPropertyValue(name);\n}\n", "function propertyRemove(name) {\n  return function() {\n    delete this[name];\n  };\n}\n\nfunction propertyConstant(name, value) {\n  return function() {\n    this[name] = value;\n  };\n}\n\nfunction propertyFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) delete this[name];\n    else this[name] = v;\n  };\n}\n\nexport default function(name, value) {\n  return arguments.length > 1\n      ? this.each((value == null\n          ? propertyRemove : typeof value === \"function\"\n          ? propertyFunction\n          : propertyConstant)(name, value))\n      : this.node()[name];\n}\n", "function classArray(string) {\n  return string.trim().split(/^|\\s+/);\n}\n\nfunction classList(node) {\n  return node.classList || new ClassList(node);\n}\n\nfunction ClassList(node) {\n  this._node = node;\n  this._names = classArray(node.getAttribute(\"class\") || \"\");\n}\n\nClassList.prototype = {\n  add: function(name) {\n    var i = this._names.indexOf(name);\n    if (i < 0) {\n      this._names.push(name);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  remove: function(name) {\n    var i = this._names.indexOf(name);\n    if (i >= 0) {\n      this._names.splice(i, 1);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  contains: function(name) {\n    return this._names.indexOf(name) >= 0;\n  }\n};\n\nfunction classedAdd(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.add(names[i]);\n}\n\nfunction classedRemove(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.remove(names[i]);\n}\n\nfunction classedTrue(names) {\n  return function() {\n    classedAdd(this, names);\n  };\n}\n\nfunction classedFalse(names) {\n  return function() {\n    classedRemove(this, names);\n  };\n}\n\nfunction classedFunction(names, value) {\n  return function() {\n    (value.apply(this, arguments) ? classedAdd : classedRemove)(this, names);\n  };\n}\n\nexport default function(name, value) {\n  var names = classArray(name + \"\");\n\n  if (arguments.length < 2) {\n    var list = classList(this.node()), i = -1, n = names.length;\n    while (++i < n) if (!list.contains(names[i])) return false;\n    return true;\n  }\n\n  return this.each((typeof value === \"function\"\n      ? classedFunction : value\n      ? classedTrue\n      : classedFalse)(names, value));\n}\n", "function textRemove() {\n  this.textContent = \"\";\n}\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.textContent = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? textRemove : (typeof value === \"function\"\n          ? textFunction\n          : textConstant)(value))\n      : this.node().textContent;\n}\n", "function htmlRemove() {\n  this.innerHTML = \"\";\n}\n\nfunction htmlConstant(value) {\n  return function() {\n    this.innerHTML = value;\n  };\n}\n\nfunction htmlFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.innerHTML = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? htmlRemove : (typeof value === \"function\"\n          ? htmlFunction\n          : htmlConstant)(value))\n      : this.node().innerHTML;\n}\n", "function raise() {\n  if (this.nextSibling) this.parentNode.appendChild(this);\n}\n\nexport default function() {\n  return this.each(raise);\n}\n", "function lower() {\n  if (this.previousSibling) this.parentNode.insertBefore(this, this.parentNode.firstChild);\n}\n\nexport default function() {\n  return this.each(lower);\n}\n", "import creator from \"../creator.js\";\n\nexport default function(name) {\n  var create = typeof name === \"function\" ? name : creator(name);\n  return this.select(function() {\n    return this.appendChild(create.apply(this, arguments));\n  });\n}\n", "import creator from \"../creator.js\";\nimport selector from \"../selector.js\";\n\nfunction constantNull() {\n  return null;\n}\n\nexport default function(name, before) {\n  var create = typeof name === \"function\" ? name : creator(name),\n      select = before == null ? constantNull : typeof before === \"function\" ? before : selector(before);\n  return this.select(function() {\n    return this.insertBefore(create.apply(this, arguments), select.apply(this, arguments) || null);\n  });\n}\n", "function remove() {\n  var parent = this.parentNode;\n  if (parent) parent.removeChild(this);\n}\n\nexport default function() {\n  return this.each(remove);\n}\n", "function selection_cloneShallow() {\n  var clone = this.cloneNode(false), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nfunction selection_cloneDeep() {\n  var clone = this.cloneNode(true), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nexport default function(deep) {\n  return this.select(deep ? selection_cloneDeep : selection_cloneShallow);\n}\n", "export default function(value) {\n  return arguments.length\n      ? this.property(\"__data__\", value)\n      : this.node().__data__;\n}\n", "function contextListener(listener) {\n  return function(event) {\n    listener.call(this, event, this.__data__);\n  };\n}\n\nfunction parseTypenames(typenames) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    return {type: t, name: name};\n  });\n}\n\nfunction onRemove(typename) {\n  return function() {\n    var on = this.__on;\n    if (!on) return;\n    for (var j = 0, i = -1, m = on.length, o; j < m; ++j) {\n      if (o = on[j], (!typename.type || o.type === typename.type) && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.options);\n      } else {\n        on[++i] = o;\n      }\n    }\n    if (++i) on.length = i;\n    else delete this.__on;\n  };\n}\n\nfunction onAdd(typename, value, options) {\n  return function() {\n    var on = this.__on, o, listener = contextListener(value);\n    if (on) for (var j = 0, m = on.length; j < m; ++j) {\n      if ((o = on[j]).type === typename.type && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.options);\n        this.addEventListener(o.type, o.listener = listener, o.options = options);\n        o.value = value;\n        return;\n      }\n    }\n    this.addEventListener(typename.type, listener, options);\n    o = {type: typename.type, name: typename.name, value: value, listener: listener, options: options};\n    if (!on) this.__on = [o];\n    else on.push(o);\n  };\n}\n\nexport default function(typename, value, options) {\n  var typenames = parseTypenames(typename + \"\"), i, n = typenames.length, t;\n\n  if (arguments.length < 2) {\n    var on = this.node().__on;\n    if (on) for (var j = 0, m = on.length, o; j < m; ++j) {\n      for (i = 0, o = on[j]; i < n; ++i) {\n        if ((t = typenames[i]).type === o.type && t.name === o.name) {\n          return o.value;\n        }\n      }\n    }\n    return;\n  }\n\n  on = value ? onAdd : onRemove;\n  for (i = 0; i < n; ++i) this.each(on(typenames[i], value, options));\n  return this;\n}\n", "import defaultView from \"../window.js\";\n\nfunction dispatchEvent(node, type, params) {\n  var window = defaultView(node),\n      event = window.CustomEvent;\n\n  if (typeof event === \"function\") {\n    event = new event(type, params);\n  } else {\n    event = window.document.createEvent(\"Event\");\n    if (params) event.initEvent(type, params.bubbles, params.cancelable), event.detail = params.detail;\n    else event.initEvent(type, false, false);\n  }\n\n  node.dispatchEvent(event);\n}\n\nfunction dispatchConstant(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params);\n  };\n}\n\nfunction dispatchFunction(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params.apply(this, arguments));\n  };\n}\n\nexport default function(type, params) {\n  return this.each((typeof params === \"function\"\n      ? dispatchFunction\n      : dispatchConstant)(type, params));\n}\n", "export default function*() {\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) yield node;\n    }\n  }\n}\n", "import selection_select from \"./select.js\";\nimport selection_selectAll from \"./selectAll.js\";\nimport selection_selectChild from \"./selectChild.js\";\nimport selection_selectChildren from \"./selectChildren.js\";\nimport selection_filter from \"./filter.js\";\nimport selection_data from \"./data.js\";\nimport selection_enter from \"./enter.js\";\nimport selection_exit from \"./exit.js\";\nimport selection_join from \"./join.js\";\nimport selection_merge from \"./merge.js\";\nimport selection_order from \"./order.js\";\nimport selection_sort from \"./sort.js\";\nimport selection_call from \"./call.js\";\nimport selection_nodes from \"./nodes.js\";\nimport selection_node from \"./node.js\";\nimport selection_size from \"./size.js\";\nimport selection_empty from \"./empty.js\";\nimport selection_each from \"./each.js\";\nimport selection_attr from \"./attr.js\";\nimport selection_style from \"./style.js\";\nimport selection_property from \"./property.js\";\nimport selection_classed from \"./classed.js\";\nimport selection_text from \"./text.js\";\nimport selection_html from \"./html.js\";\nimport selection_raise from \"./raise.js\";\nimport selection_lower from \"./lower.js\";\nimport selection_append from \"./append.js\";\nimport selection_insert from \"./insert.js\";\nimport selection_remove from \"./remove.js\";\nimport selection_clone from \"./clone.js\";\nimport selection_datum from \"./datum.js\";\nimport selection_on from \"./on.js\";\nimport selection_dispatch from \"./dispatch.js\";\nimport selection_iterator from \"./iterator.js\";\n\nexport var root = [null];\n\nexport function Selection(groups, parents) {\n  this._groups = groups;\n  this._parents = parents;\n}\n\nfunction selection() {\n  return new Selection([[document.documentElement]], root);\n}\n\nfunction selection_selection() {\n  return this;\n}\n\nSelection.prototype = selection.prototype = {\n  constructor: Selection,\n  select: selection_select,\n  selectAll: selection_selectAll,\n  selectChild: selection_selectChild,\n  selectChildren: selection_selectChildren,\n  filter: selection_filter,\n  data: selection_data,\n  enter: selection_enter,\n  exit: selection_exit,\n  join: selection_join,\n  merge: selection_merge,\n  selection: selection_selection,\n  order: selection_order,\n  sort: selection_sort,\n  call: selection_call,\n  nodes: selection_nodes,\n  node: selection_node,\n  size: selection_size,\n  empty: selection_empty,\n  each: selection_each,\n  attr: selection_attr,\n  style: selection_style,\n  property: selection_property,\n  classed: selection_classed,\n  text: selection_text,\n  html: selection_html,\n  raise: selection_raise,\n  lower: selection_lower,\n  append: selection_append,\n  insert: selection_insert,\n  remove: selection_remove,\n  clone: selection_clone,\n  datum: selection_datum,\n  on: selection_on,\n  dispatch: selection_dispatch,\n  [Symbol.iterator]: selection_iterator\n};\n\nexport default selection;\n", "import {Selection, root} from \"./selection/index.js\";\n\nexport default function(selector) {\n  return typeof selector === \"string\"\n      ? new Selection([[document.querySelector(selector)]], [document.documentElement])\n      : new Selection([[selector]], root);\n}\n", "var nextId = 0;\n\nexport default function local() {\n  return new Local;\n}\n\nfunction Local() {\n  this._ = \"@\" + (++nextId).toString(36);\n}\n\nLocal.prototype = local.prototype = {\n  constructor: Local,\n  get: function(node) {\n    var id = this._;\n    while (!(id in node)) if (!(node = node.parentNode)) return;\n    return node[id];\n  },\n  set: function(node, value) {\n    return node[this._] = value;\n  },\n  remove: function(node) {\n    return this._ in node && delete node[this._];\n  },\n  toString: function() {\n    return this._;\n  }\n};\n", "export default function(event) {\n  let sourceEvent;\n  while (sourceEvent = event.sourceEvent) event = sourceEvent;\n  return event;\n}\n", "import sourceEvent from \"./sourceEvent.js\";\n\nexport default function(event, node) {\n  event = sourceEvent(event);\n  if (node === undefined) node = event.currentTarget;\n  if (node) {\n    var svg = node.ownerSVGElement || node;\n    if (svg.createSVGPoint) {\n      var point = svg.createSVGPoint();\n      point.x = event.clientX, point.y = event.clientY;\n      point = point.matrixTransform(node.getScreenCTM().inverse());\n      return [point.x, point.y];\n    }\n    if (node.getBoundingClientRect) {\n      var rect = node.getBoundingClientRect();\n      return [event.clientX - rect.left - node.clientLeft, event.clientY - rect.top - node.clientTop];\n    }\n  }\n  return [event.pageX, event.pageY];\n}\n", "export enum ComponentType {\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  SVG,\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  HTML,\n}\n\nexport enum Sizing {\n  Fit = 'fit',\n  Extend = 'extend',\n  FitWidth = 'fit_width',\n}\n\nexport interface ExtendedSizeComponent {\n  getWidth?(): number;\n  getHeight?(): number;\n}\n", "var resizeObservers = [];\nexport { resizeObservers };\n", "import { resizeObservers } from '../utils/resizeObservers';\nvar hasActiveObservations = function () {\n    return resizeObservers.some(function (ro) { return ro.activeTargets.length > 0; });\n};\nexport { hasActiveObservations };\n", "import { resizeObservers } from '../utils/resizeObservers';\nvar hasSkippedObservations = function () {\n    return resizeObservers.some(function (ro) { return ro.skippedTargets.length > 0; });\n};\nexport { hasSkippedObservations };\n", "var msg = 'ResizeObserver loop completed with undelivered notifications.';\nvar deliverResizeLoopError = function () {\n    var event;\n    if (typeof ErrorEvent === 'function') {\n        event = new ErrorEvent('error', {\n            message: msg\n        });\n    }\n    else {\n        event = document.createEvent('Event');\n        event.initEvent('error', false, false);\n        event.message = msg;\n    }\n    window.dispatchEvent(event);\n};\nexport { deliverResizeLoopError };\n", "var ResizeObserverBoxOptions;\n(function (ResizeObserverBoxOptions) {\n    ResizeObserverBoxOptions[\"BORDER_BOX\"] = \"border-box\";\n    ResizeObserverBoxOptions[\"CONTENT_BOX\"] = \"content-box\";\n    ResizeObserverBoxOptions[\"DEVICE_PIXEL_CONTENT_BOX\"] = \"device-pixel-content-box\";\n})(ResizeObserverBoxOptions || (ResizeObserverBoxOptions = {}));\nexport { ResizeObserverBoxOptions };\n", "export var freeze = function (obj) { return Object.freeze(obj); };\n", "import { freeze } from './utils/freeze';\nvar ResizeObserverSize = (function () {\n    function ResizeObserverSize(inlineSize, blockSize) {\n        this.inlineSize = inlineSize;\n        this.blockSize = blockSize;\n        freeze(this);\n    }\n    return ResizeObserverSize;\n}());\nexport { ResizeObserverSize };\n", "import { freeze } from './utils/freeze';\nvar DOMRectReadOnly = (function () {\n    function DOMRectReadOnly(x, y, width, height) {\n        this.x = x;\n        this.y = y;\n        this.width = width;\n        this.height = height;\n        this.top = this.y;\n        this.left = this.x;\n        this.bottom = this.top + this.height;\n        this.right = this.left + this.width;\n        return freeze(this);\n    }\n    DOMRectReadOnly.prototype.toJSON = function () {\n        var _a = this, x = _a.x, y = _a.y, top = _a.top, right = _a.right, bottom = _a.bottom, left = _a.left, width = _a.width, height = _a.height;\n        return { x: x, y: y, top: top, right: right, bottom: bottom, left: left, width: width, height: height };\n    };\n    DOMRectReadOnly.fromRect = function (rectangle) {\n        return new DOMRectReadOnly(rectangle.x, rectangle.y, rectangle.width, rectangle.height);\n    };\n    return DOMRectReadOnly;\n}());\nexport { DOMRectReadOnly };\n", "var isSVG = function (target) { return target instanceof SVGElement && 'getBBox' in target; };\nvar isHidden = function (target) {\n    if (isSVG(target)) {\n        var _a = target.getBBox(), width = _a.width, height = _a.height;\n        return !width && !height;\n    }\n    var _b = target, offsetWidth = _b.offsetWidth, offsetHeight = _b.offsetHeight;\n    return !(offsetWidth || offsetHeight || target.getClientRects().length);\n};\nvar isElement = function (obj) {\n    var _a;\n    if (obj instanceof Element) {\n        return true;\n    }\n    var scope = (_a = obj === null || obj === void 0 ? void 0 : obj.ownerDocument) === null || _a === void 0 ? void 0 : _a.defaultView;\n    return !!(scope && obj instanceof scope.Element);\n};\nvar isReplacedElement = function (target) {\n    switch (target.tagName) {\n        case 'INPUT':\n            if (target.type !== 'image') {\n                break;\n            }\n        case 'VIDEO':\n        case 'AUDIO':\n        case 'EMBED':\n        case 'OBJECT':\n        case 'CANVAS':\n        case 'IFRAME':\n        case 'IMG':\n            return true;\n    }\n    return false;\n};\nexport { isSVG, isHidden, isElement, isReplacedElement };\n", "export var global = typeof window !== 'undefined' ? window : {};\n", "import { ResizeObserverBoxOptions } from '../ResizeObserverBoxOptions';\nimport { ResizeObserverSize } from '../ResizeObserverSize';\nimport { DOMRectReadOnly } from '../DOMRectReadOnly';\nimport { isSVG, isHidden } from '../utils/element';\nimport { freeze } from '../utils/freeze';\nimport { global } from '../utils/global';\nvar cache = new WeakMap();\nvar scrollRegexp = /auto|scroll/;\nvar verticalRegexp = /^tb|vertical/;\nvar IE = (/msie|trident/i).test(global.navigator && global.navigator.userAgent);\nvar parseDimension = function (pixel) { return parseFloat(pixel || '0'); };\nvar size = function (inlineSize, blockSize, switchSizes) {\n    if (inlineSize === void 0) { inlineSize = 0; }\n    if (blockSize === void 0) { blockSize = 0; }\n    if (switchSizes === void 0) { switchSizes = false; }\n    return new ResizeObserverSize((switchSizes ? blockSize : inlineSize) || 0, (switchSizes ? inlineSize : blockSize) || 0);\n};\nvar zeroBoxes = freeze({\n    devicePixelContentBoxSize: size(),\n    borderBoxSize: size(),\n    contentBoxSize: size(),\n    contentRect: new DOMRectReadOnly(0, 0, 0, 0)\n});\nvar calculateBoxSizes = function (target, forceRecalculation) {\n    if (forceRecalculation === void 0) { forceRecalculation = false; }\n    if (cache.has(target) && !forceRecalculation) {\n        return cache.get(target);\n    }\n    if (isHidden(target)) {\n        cache.set(target, zeroBoxes);\n        return zeroBoxes;\n    }\n    var cs = getComputedStyle(target);\n    var svg = isSVG(target) && target.ownerSVGElement && target.getBBox();\n    var removePadding = !IE && cs.boxSizing === 'border-box';\n    var switchSizes = verticalRegexp.test(cs.writingMode || '');\n    var canScrollVertically = !svg && scrollRegexp.test(cs.overflowY || '');\n    var canScrollHorizontally = !svg && scrollRegexp.test(cs.overflowX || '');\n    var paddingTop = svg ? 0 : parseDimension(cs.paddingTop);\n    var paddingRight = svg ? 0 : parseDimension(cs.paddingRight);\n    var paddingBottom = svg ? 0 : parseDimension(cs.paddingBottom);\n    var paddingLeft = svg ? 0 : parseDimension(cs.paddingLeft);\n    var borderTop = svg ? 0 : parseDimension(cs.borderTopWidth);\n    var borderRight = svg ? 0 : parseDimension(cs.borderRightWidth);\n    var borderBottom = svg ? 0 : parseDimension(cs.borderBottomWidth);\n    var borderLeft = svg ? 0 : parseDimension(cs.borderLeftWidth);\n    var horizontalPadding = paddingLeft + paddingRight;\n    var verticalPadding = paddingTop + paddingBottom;\n    var horizontalBorderArea = borderLeft + borderRight;\n    var verticalBorderArea = borderTop + borderBottom;\n    var horizontalScrollbarThickness = !canScrollHorizontally ? 0 : target.offsetHeight - verticalBorderArea - target.clientHeight;\n    var verticalScrollbarThickness = !canScrollVertically ? 0 : target.offsetWidth - horizontalBorderArea - target.clientWidth;\n    var widthReduction = removePadding ? horizontalPadding + horizontalBorderArea : 0;\n    var heightReduction = removePadding ? verticalPadding + verticalBorderArea : 0;\n    var contentWidth = svg ? svg.width : parseDimension(cs.width) - widthReduction - verticalScrollbarThickness;\n    var contentHeight = svg ? svg.height : parseDimension(cs.height) - heightReduction - horizontalScrollbarThickness;\n    var borderBoxWidth = contentWidth + horizontalPadding + verticalScrollbarThickness + horizontalBorderArea;\n    var borderBoxHeight = contentHeight + verticalPadding + horizontalScrollbarThickness + verticalBorderArea;\n    var boxes = freeze({\n        devicePixelContentBoxSize: size(Math.round(contentWidth * devicePixelRatio), Math.round(contentHeight * devicePixelRatio), switchSizes),\n        borderBoxSize: size(borderBoxWidth, borderBoxHeight, switchSizes),\n        contentBoxSize: size(contentWidth, contentHeight, switchSizes),\n        contentRect: new DOMRectReadOnly(paddingLeft, paddingTop, contentWidth, contentHeight)\n    });\n    cache.set(target, boxes);\n    return boxes;\n};\nvar calculateBoxSize = function (target, observedBox, forceRecalculation) {\n    var _a = calculateBoxSizes(target, forceRecalculation), borderBoxSize = _a.borderBoxSize, contentBoxSize = _a.contentBoxSize, devicePixelContentBoxSize = _a.devicePixelContentBoxSize;\n    switch (observedBox) {\n        case ResizeObserverBoxOptions.DEVICE_PIXEL_CONTENT_BOX:\n            return devicePixelContentBoxSize;\n        case ResizeObserverBoxOptions.BORDER_BOX:\n            return borderBoxSize;\n        default:\n            return contentBoxSize;\n    }\n};\nexport { calculateBoxSize, calculateBoxSizes };\n", "import { calculateBoxSizes } from './algorithms/calculateBoxSize';\nimport { freeze } from './utils/freeze';\nvar ResizeObserverEntry = (function () {\n    function ResizeObserverEntry(target) {\n        var boxes = calculateBoxSizes(target);\n        this.target = target;\n        this.contentRect = boxes.contentRect;\n        this.borderBoxSize = freeze([boxes.borderBoxSize]);\n        this.contentBoxSize = freeze([boxes.contentBoxSize]);\n        this.devicePixelContentBoxSize = freeze([boxes.devicePixelContentBoxSize]);\n    }\n    return ResizeObserverEntry;\n}());\nexport { ResizeObserverEntry };\n", "import { isHidden } from '../utils/element';\nvar calculateDepthForNode = function (node) {\n    if (isHidden(node)) {\n        return Infinity;\n    }\n    var depth = 0;\n    var parent = node.parentNode;\n    while (parent) {\n        depth += 1;\n        parent = parent.parentNode;\n    }\n    return depth;\n};\nexport { calculateDepthForNode };\n", "import { resizeObservers } from '../utils/resizeObservers';\nimport { ResizeObserverEntry } from '../ResizeObserverEntry';\nimport { calculateDepthForNode } from './calculateDepthForNode';\nimport { calculateBoxSize } from './calculateBoxSize';\nvar broadcastActiveObservations = function () {\n    var shallowestDepth = Infinity;\n    var callbacks = [];\n    resizeObservers.forEach(function processObserver(ro) {\n        if (ro.activeTargets.length === 0) {\n            return;\n        }\n        var entries = [];\n        ro.activeTargets.forEach(function processTarget(ot) {\n            var entry = new ResizeObserverEntry(ot.target);\n            var targetDepth = calculateDepthForNode(ot.target);\n            entries.push(entry);\n            ot.lastReportedSize = calculateBoxSize(ot.target, ot.observedBox);\n            if (targetDepth < shallowestDepth) {\n                shallowestDepth = targetDepth;\n            }\n        });\n        callbacks.push(function resizeObserverCallback() {\n            ro.callback.call(ro.observer, entries, ro.observer);\n        });\n        ro.activeTargets.splice(0, ro.activeTargets.length);\n    });\n    for (var _i = 0, callbacks_1 = callbacks; _i < callbacks_1.length; _i++) {\n        var callback = callbacks_1[_i];\n        callback();\n    }\n    return shallowestDepth;\n};\nexport { broadcastActiveObservations };\n", "import { resizeObservers } from '../utils/resizeObservers';\nimport { calculateDepthForNode } from './calculateDepthForNode';\nvar gatherActiveObservationsAtDepth = function (depth) {\n    resizeObservers.forEach(function processObserver(ro) {\n        ro.activeTargets.splice(0, ro.activeTargets.length);\n        ro.skippedTargets.splice(0, ro.skippedTargets.length);\n        ro.observationTargets.forEach(function processTarget(ot) {\n            if (ot.isActive()) {\n                if (calculateDepthForNode(ot.target) > depth) {\n                    ro.activeTargets.push(ot);\n                }\n                else {\n                    ro.skippedTargets.push(ot);\n                }\n            }\n        });\n    });\n};\nexport { gatherActiveObservationsAtDepth };\n", "import { hasActiveObservations } from '../algorithms/hasActiveObservations';\nimport { hasSkippedObservations } from '../algorithms/hasSkippedObservations';\nimport { deliverResizeLoopError } from '../algorithms/deliverResizeLoopError';\nimport { broadcastActiveObservations } from '../algorithms/broadcastActiveObservations';\nimport { gatherActiveObservationsAtDepth } from '../algorithms/gatherActiveObservationsAtDepth';\nvar process = function () {\n    var depth = 0;\n    gatherActiveObservationsAtDepth(depth);\n    while (hasActiveObservations()) {\n        depth = broadcastActiveObservations();\n        gatherActiveObservationsAtDepth(depth);\n    }\n    if (hasSkippedObservations()) {\n        deliverResizeLoopError();\n    }\n    return depth > 0;\n};\nexport { process };\n", "var trigger;\nvar callbacks = [];\nvar notify = function () { return callbacks.splice(0).forEach(function (cb) { return cb(); }); };\nvar queueMicroTask = function (callback) {\n    if (!trigger) {\n        var toggle_1 = 0;\n        var el_1 = document.createTextNode('');\n        var config = { characterData: true };\n        new MutationObserver(function () { return notify(); }).observe(el_1, config);\n        trigger = function () { el_1.textContent = \"\".concat(toggle_1 ? toggle_1-- : toggle_1++); };\n    }\n    callbacks.push(callback);\n    trigger();\n};\nexport { queueMicroTask };\n", "import { queueMicroTask } from './queueMicroTask';\nvar queueResizeObserver = function (cb) {\n    queueMicroTask(function ResizeObserver() {\n        requestAnimationFrame(cb);\n    });\n};\nexport { queueResizeObserver };\n", "import { process } from './process';\nimport { global } from './global';\nimport { queueResizeObserver } from './queueResizeObserver';\nvar watching = 0;\nvar isWatching = function () { return !!watching; };\nvar CATCH_PERIOD = 250;\nvar observerConfig = { attributes: true, characterData: true, childList: true, subtree: true };\nvar events = [\n    'resize',\n    'load',\n    'transitionend',\n    'animationend',\n    'animationstart',\n    'animationiteration',\n    'keyup',\n    'keydown',\n    'mouseup',\n    'mousedown',\n    'mouseover',\n    'mouseout',\n    'blur',\n    'focus'\n];\nvar time = function (timeout) {\n    if (timeout === void 0) { timeout = 0; }\n    return Date.now() + timeout;\n};\nvar scheduled = false;\nvar Scheduler = (function () {\n    function Scheduler() {\n        var _this = this;\n        this.stopped = true;\n        this.listener = function () { return _this.schedule(); };\n    }\n    Scheduler.prototype.run = function (timeout) {\n        var _this = this;\n        if (timeout === void 0) { timeout = CATCH_PERIOD; }\n        if (scheduled) {\n            return;\n        }\n        scheduled = true;\n        var until = time(timeout);\n        queueResizeObserver(function () {\n            var elementsHaveResized = false;\n            try {\n                elementsHaveResized = process();\n            }\n            finally {\n                scheduled = false;\n                timeout = until - time();\n                if (!isWatching()) {\n                    return;\n                }\n                if (elementsHaveResized) {\n                    _this.run(1000);\n                }\n                else if (timeout > 0) {\n                    _this.run(timeout);\n                }\n                else {\n                    _this.start();\n                }\n            }\n        });\n    };\n    Scheduler.prototype.schedule = function () {\n        this.stop();\n        this.run();\n    };\n    Scheduler.prototype.observe = function () {\n        var _this = this;\n        var cb = function () { return _this.observer && _this.observer.observe(document.body, observerConfig); };\n        document.body ? cb() : global.addEventListener('DOMContentLoaded', cb);\n    };\n    Scheduler.prototype.start = function () {\n        var _this = this;\n        if (this.stopped) {\n            this.stopped = false;\n            this.observer = new MutationObserver(this.listener);\n            this.observe();\n            events.forEach(function (name) { return global.addEventListener(name, _this.listener, true); });\n        }\n    };\n    Scheduler.prototype.stop = function () {\n        var _this = this;\n        if (!this.stopped) {\n            this.observer && this.observer.disconnect();\n            events.forEach(function (name) { return global.removeEventListener(name, _this.listener, true); });\n            this.stopped = true;\n        }\n    };\n    return Scheduler;\n}());\nvar scheduler = new Scheduler();\nvar updateCount = function (n) {\n    !watching && n > 0 && scheduler.start();\n    watching += n;\n    !watching && scheduler.stop();\n};\nexport { scheduler, updateCount };\n", "import { ResizeObserverBoxOptions } from './ResizeObserverBoxOptions';\nimport { calculateBoxSize } from './algorithms/calculateBoxSize';\nimport { isSVG, isReplacedElement } from './utils/element';\nvar skipNotifyOnElement = function (target) {\n    return !isSVG(target)\n        && !isReplacedElement(target)\n        && getComputedStyle(target).display === 'inline';\n};\nvar ResizeObservation = (function () {\n    function ResizeObservation(target, observedBox) {\n        this.target = target;\n        this.observedBox = observedBox || ResizeObserverBoxOptions.CONTENT_BOX;\n        this.lastReportedSize = {\n            inlineSize: 0,\n            blockSize: 0\n        };\n    }\n    ResizeObservation.prototype.isActive = function () {\n        var size = calculateBoxSize(this.target, this.observedBox, true);\n        if (skipNotifyOnElement(this.target)) {\n            this.lastReportedSize = size;\n        }\n        if (this.lastReportedSize.inlineSize !== size.inlineSize\n            || this.lastReportedSize.blockSize !== size.blockSize) {\n            return true;\n        }\n        return false;\n    };\n    return ResizeObservation;\n}());\nexport { ResizeObservation };\n", "var ResizeObserverDetail = (function () {\n    function ResizeObserverDetail(resizeObserver, callback) {\n        this.activeTargets = [];\n        this.skippedTargets = [];\n        this.observationTargets = [];\n        this.observer = resizeObserver;\n        this.callback = callback;\n    }\n    return ResizeObserverDetail;\n}());\nexport { ResizeObserverDetail };\n", "import { scheduler, updateCount } from './utils/scheduler';\nimport { ResizeObservation } from './ResizeObservation';\nimport { ResizeObserverDetail } from './ResizeObserverDetail';\nimport { resizeObservers } from './utils/resizeObservers';\nvar observerMap = new WeakMap();\nvar getObservationIndex = function (observationTargets, target) {\n    for (var i = 0; i < observationTargets.length; i += 1) {\n        if (observationTargets[i].target === target) {\n            return i;\n        }\n    }\n    return -1;\n};\nvar ResizeObserverController = (function () {\n    function ResizeObserverController() {\n    }\n    ResizeObserverController.connect = function (resizeObserver, callback) {\n        var detail = new ResizeObserverDetail(resizeObserver, callback);\n        observerMap.set(resizeObserver, detail);\n    };\n    ResizeObserverController.observe = function (resizeObserver, target, options) {\n        var detail = observerMap.get(resizeObserver);\n        var firstObservation = detail.observationTargets.length === 0;\n        if (getObservationIndex(detail.observationTargets, target) < 0) {\n            firstObservation && resizeObservers.push(detail);\n            detail.observationTargets.push(new ResizeObservation(target, options && options.box));\n            updateCount(1);\n            scheduler.schedule();\n        }\n    };\n    ResizeObserverController.unobserve = function (resizeObserver, target) {\n        var detail = observerMap.get(resizeObserver);\n        var index = getObservationIndex(detail.observationTargets, target);\n        var lastObservation = detail.observationTargets.length === 1;\n        if (index >= 0) {\n            lastObservation && resizeObservers.splice(resizeObservers.indexOf(detail), 1);\n            detail.observationTargets.splice(index, 1);\n            updateCount(-1);\n        }\n    };\n    ResizeObserverController.disconnect = function (resizeObserver) {\n        var _this = this;\n        var detail = observerMap.get(resizeObserver);\n        detail.observationTargets.slice().forEach(function (ot) { return _this.unobserve(resizeObserver, ot.target); });\n        detail.activeTargets.splice(0, detail.activeTargets.length);\n    };\n    return ResizeObserverController;\n}());\nexport { ResizeObserverController };\n", "import { ResizeObserverController } from './ResizeObserverController';\nimport { isElement } from './utils/element';\nvar ResizeObserver = (function () {\n    function ResizeObserver(callback) {\n        if (arguments.length === 0) {\n            throw new TypeError(\"Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.\");\n        }\n        if (typeof callback !== 'function') {\n            throw new TypeError(\"Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.\");\n        }\n        ResizeObserverController.connect(this, callback);\n    }\n    ResizeObserver.prototype.observe = function (target, options) {\n        if (arguments.length === 0) {\n            throw new TypeError(\"Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.\");\n        }\n        if (!isElement(target)) {\n            throw new TypeError(\"Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element\");\n        }\n        ResizeObserverController.observe(this, target, options);\n    };\n    ResizeObserver.prototype.unobserve = function (target) {\n        if (arguments.length === 0) {\n            throw new TypeError(\"Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.\");\n        }\n        if (!isElement(target)) {\n            throw new TypeError(\"Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element\");\n        }\n        ResizeObserverController.unobserve(this, target);\n    };\n    ResizeObserver.prototype.disconnect = function () {\n        ResizeObserverController.disconnect(this);\n    };\n    ResizeObserver.toString = function () {\n        return 'function ResizeObserver () { [polyfill code] }';\n    };\n    return ResizeObserver;\n}());\nexport { ResizeObserver };\n", "import { ResizeObserver as ResizeObserverPolyfill } from '@juggle/resize-observer'\nexport const ResizeObserver = globalThis.ResizeObserver || ResizeObserverPolyfill\n", "// Core\n\n// Types\nimport { Sizing } from 'types/component'\nimport { Spacing } from 'types/spacing'\n\nexport interface ContainerConfigInterface {\n  /** Animation duration of all the components within the container. Default: `undefined` */\n  duration?: number;\n  /** Margins. Default: `{ top: 0, bottom: 0, left: 0, right: 0 }` */\n  margin?: Spacing;\n  /** Padding. Default: `{ top: 0, bottom: 0, left: 0, right: 0 }` */\n  padding?: Spacing;\n  /** Defines whether components should fit into the container or the container should expand to fit to the component's size. Default: `Sizing.Fit` */\n  sizing?: Sizing | string;\n  /** Width in pixels or in CSS units.\n   * Percentage units `\"%\"` are not supported here. If you want to set `width` as a percentage, do it via `style` or `class`\n   * of the corresponding DOM element.\n   * Default: `undefined`\n  */\n  width?: number | string;\n  /** Height in pixels or in CSS units.\n   * Percentage units `\"%\"` are not supported here. If you want to set `height` as a percentage, do it via `style` or `class`\n   * of the corresponding DOM element.\n   * Default: `undefined`\n  */\n  height?: number | string;\n  /** Custom SVG defs available to all the components within the container. Default: `undefined`. */\n  svgDefs?: string;\n  /** Alternative text description of the chart for accessibility purposes. It will be applied as an\n   * `aria-label` attribute to the div element containing your chart. Default: `undefined`.\n  */\n  ariaLabel?: string | null | undefined;\n}\n\nexport const ContainerDefaultConfig: ContainerConfigInterface = {\n  duration: undefined,\n  margin: {\n    top: 0,\n    bottom: 0,\n    left: 0,\n    right: 0,\n  },\n\n  padding: {\n    top: 0,\n    bottom: 0,\n    left: 0,\n    right: 0,\n  },\n\n  sizing: Sizing.Fit,\n  width: undefined,\n  height: undefined,\n\n  svgDefs: undefined,\n  ariaLabel: undefined,\n}\n", "import { select, Selection } from 'd3-selection'\n\n// Types\nimport { Sizing } from 'types/component'\n\n// Utils\nimport { isEqual, clamp, merge } from 'utils/data'\nimport { ResizeObserver } from 'utils/resize-observer'\n\n// Config\nimport { ContainerDefaultConfig, ContainerConfigInterface } from './config'\n\nexport class ContainerCore {\n  public svg: Selection<SVGSVGElement, unknown, null, undefined>\n  public element: SVGSVGElement\n  public prevConfig: ContainerConfigInterface\n  public config: ContainerConfigInterface\n\n  protected _defaultConfig: ContainerConfigInterface = ContainerDefaultConfig\n  protected _container: HTMLElement\n  protected _renderAnimationFrameId: number\n  protected _isFirstRender = true\n  protected _resizeObserver: ResizeObserver | undefined\n  protected _resizeObserverAnimationFrameId: number\n  protected _svgDefs: Selection<SVGDefsElement, unknown, null, undefined>\n  protected _svgDefsExternal: Selection<SVGDefsElement, unknown, null, undefined>\n  private _containerSize: { width: number; height: number }\n\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  static DEFAULT_CONTAINER_HEIGHT = 300\n\n  constructor (element: HTMLElement) {\n    this._renderAnimationFrameId = null\n    this._container = element\n\n    // Setting `role` attribute to `image` to make the container accessible\n    const container = select(this._container)\n    container.attr('role', 'figure')\n\n    // Create SVG element for visualizations\n    this.svg = container.append('svg')\n      // We set `display` to `block` because inline elements have an invisible\n      //   inline space that adds 4px to the height of the container\n      .style('display', 'block')\n      .attr('xmlns', 'http://www.w3.org/2000/svg')\n      .attr('height', ContainerCore.DEFAULT_CONTAINER_HEIGHT) // Overriding default SVG height of 150\n      .attr('aria-hidden', true)\n\n    this._svgDefs = this.svg.append('defs')\n    this._svgDefsExternal = this.svg.append('defs')\n    this.element = this.svg.node()\n  }\n\n  public updateContainer<T extends ContainerConfigInterface> (config: T): void {\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    this.prevConfig = this.config\n    this.config = merge(this._defaultConfig, config)\n\n    // Add `svgDefs` if provided in the config\n    if (config?.svgDefs !== this.prevConfig?.svgDefs) {\n      this._svgDefsExternal.selectAll('*').remove()\n      this._svgDefsExternal.html(config.svgDefs)\n    }\n  }\n\n  // The `_preRender` step should be used to perform some actions before rendering.\n  // For example, calculating scales, setting component sizes, etc ...\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\n  protected _preRender (): void {}\n\n  // The `_render` step should be used to perform the actual rendering\n  protected _render (duration?: number): void {\n    const { config } = this\n\n    // Apply the `aria-label` attribute\n    select(this._container)\n      .attr('aria-label', config.ariaLabel)\n\n    this._isFirstRender = false\n  }\n\n  // Warning: Some Containers (i.e. Single Container) may override this method, so if you introduce any changes here,\n  // make sure to check that other containers didn't break after them.\n  public render (duration = this.config.duration): void {\n    const width = this.config.width || this.containerWidth\n    const height = this.config.height || this.containerHeight\n\n    // We set SVG size in `render()` instead of `_render()`, because the size values in pixels will become\n    // available only in the next animation when being accessed via `element.clientWidth` and `element.clientHeight`,\n    // and we rely on those values when setting width and size of the components.\n    this.svg\n      .attr('width', width)\n      .attr('height', height)\n\n    // Set up Resize Observer. We do it in `render()` to capture container size change if it happened\n    // in the next animation frame after the initial `render` was called.\n    if (!this._resizeObserver) this._setUpResizeObserver()\n\n    // Schedule the actual rendering in the next frame\n    cancelAnimationFrame(this._renderAnimationFrameId)\n    this._renderAnimationFrameId = requestAnimationFrame(() => {\n      this._preRender()\n      this._render(duration)\n    })\n  }\n\n  get containerWidth (): number {\n    return this.config.width\n      ? this.element.clientWidth\n      : (this._container.clientWidth || this._container.getBoundingClientRect().width)\n  }\n\n  get containerHeight (): number {\n    return this.config.height\n      ? this.element.clientHeight\n      : (this._container.clientHeight || this._container.getBoundingClientRect().height || ContainerCore.DEFAULT_CONTAINER_HEIGHT)\n  }\n\n  get width (): number {\n    return clamp(this.containerWidth - this.config.margin.left - this.config.margin.right, 0, Number.POSITIVE_INFINITY)\n  }\n\n  get height (): number {\n    return clamp(this.containerHeight - this.config.margin.top - this.config.margin.bottom, 0, Number.POSITIVE_INFINITY)\n  }\n\n  protected _removeAllChildren (): void {\n    while (this.element.firstChild) {\n      this.element.removeChild(this.element.firstChild)\n    }\n  }\n\n  protected _onResize (): void {\n    const { config } = this\n    const redrawOnResize = config.sizing === Sizing.Fit || config.sizing === Sizing.FitWidth\n    if (redrawOnResize) this.render(0)\n  }\n\n  protected _setUpResizeObserver (): void {\n    if (this._resizeObserver) return\n\n    const containerRect = this._container.getBoundingClientRect()\n    this._containerSize = { width: containerRect.width, height: containerRect.height }\n\n    this._resizeObserver = new ResizeObserver((entries, observer) => {\n      // Using request animation frame to avoid multiple resize events when scrollbars appear/disappear\n      // See more: https://developer.mozilla.org/en-US/docs/Web/API/ResizeObserver#observation_errors\n      cancelAnimationFrame(this._resizeObserverAnimationFrameId)\n      this._resizeObserverAnimationFrameId = requestAnimationFrame(() => {\n        const resizedContainerRect = this._container.getBoundingClientRect()\n        const resizedContainerSize = { width: resizedContainerRect.width, height: resizedContainerRect.height }\n        const hasSizeChanged = !isEqual(this._containerSize, resizedContainerSize)\n        // Do resize only if element is attached to the DOM\n        // will come in useful when some ancestor of container becomes detached\n        if (hasSizeChanged && resizedContainerSize.width && resizedContainerSize.height) {\n          this._containerSize = resizedContainerSize\n          this._onResize()\n        }\n      })\n    })\n    this._resizeObserver.observe(this._container)\n  }\n\n  public destroy (): void {\n    cancelAnimationFrame(this._renderAnimationFrameId)\n    cancelAnimationFrame(this._resizeObserverAnimationFrameId)\n    this._resizeObserver?.disconnect()\n    this.svg.remove()\n  }\n}\n", "import { StringAccessor } from 'types/accessor'\nimport { LengthUnit, Rect } from 'types/misc'\nimport { getString, isString } from 'utils/data'\nimport toPx from 'to-px'\n\nexport function guid (): string {\n  const s4 = (): string =>\n    Math.floor((1 + crypto.getRandomValues(new Uint32Array(1))[0]) * 0x10000)\n      .toString(16)\n      .substring(1)\n\n  return `${s4() + s4()}-${s4()}-${s4()}-${s4()}-${s4()}${s4()}${s4()}`\n}\n\nexport function stringToHtmlId (str: string): string {\n  return (str || '').replace(/\\W/g, '_')\n}\n\nexport function isStringCSSVariable (s: string): boolean {\n  return isString(s) ? (s.substring(0, 6) === 'var(--') : false\n}\n\nexport function getCSSVariableValue (s: string, context: HTMLElement | SVGElement): string {\n  if (!isString(s)) return ''\n  const variableName = s.substr(4, s.length - 5)\n  return getComputedStyle(context).getPropertyValue(variableName)\n}\n\nexport function getCSSVariableValueInPixels (s: string, context: HTMLElement | SVGElement): number {\n  const val = getCSSVariableValue(s, context)\n  return toPx(val)\n}\n\nexport function getPixelValue (v: string | number): number | null {\n  return typeof v === 'number' ? v : toPx(v)\n}\n\nexport function rectIntersect (rect1: Rect, rect2: Rect, tolerancePx = 0): boolean {\n  const [left1, top1, right1, bottom1] = [\n    rect1.x + tolerancePx,\n    rect1.y + rect1.height - 2 * tolerancePx,\n    rect1.x + rect1.width - 2 * tolerancePx,\n    rect1.y + tolerancePx,\n  ]\n  const [left2, top2, right2, bottom2] = [\n    rect2.x + tolerancePx,\n    rect2.y + rect2.height - 2 * tolerancePx,\n    rect2.x + rect2.width - 2 * tolerancePx,\n    rect2.y + tolerancePx,\n  ]\n\n  return !(top1 < bottom2 || top2 < bottom1 || right1 < left2 || right2 < left1)\n}\n\nexport function getHref<T> (d: T, identifier: StringAccessor<T>): string {\n  const id = getString(d, identifier)\n  return id ? `url(#${id})` : null\n}\n\nexport function parseUnit (value: LengthUnit, basis = 0): number {\n  if (!value) return 0\n  else if (typeof value === 'number') return value\n  else if (value.endsWith('%')) return basis * parseFloat(value) / 100\n  else if (value.endsWith('px')) return parseFloat(value)\n  else return parseFloat(value) || 0\n}\n", "export default function(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\n\nexport function extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n", "import define, {extend} from \"./define.js\";\n\nexport function Color() {}\n\nexport var darker = 0.7;\nexport var brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?(?:\\\\d*\\\\.)?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?(?:\\\\d*\\\\.)?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex = /^#([0-9a-f]{3,8})$/,\n    reRgbInteger = new RegExp(`^rgb\\\\(${reI},${reI},${reI}\\\\)$`),\n    reRgbPercent = new RegExp(`^rgb\\\\(${reP},${reP},${reP}\\\\)$`),\n    reRgbaInteger = new RegExp(`^rgba\\\\(${reI},${reI},${reI},${reN}\\\\)$`),\n    reRgbaPercent = new RegExp(`^rgba\\\\(${reP},${reP},${reP},${reN}\\\\)$`),\n    reHslPercent = new RegExp(`^hsl\\\\(${reN},${reP},${reP}\\\\)$`),\n    reHslaPercent = new RegExp(`^hsla\\\\(${reN},${reP},${reP},${reN}\\\\)$`);\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\ndefine(Color, color, {\n  copy(channels) {\n    return Object.assign(new this.constructor, this, channels);\n  },\n  displayable() {\n    return this.rgb().displayable();\n  },\n  hex: color_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: color_formatHex,\n  formatHex8: color_formatHex8,\n  formatHsl: color_formatHsl,\n  formatRgb: color_formatRgb,\n  toString: color_formatRgb\n});\n\nfunction color_formatHex() {\n  return this.rgb().formatHex();\n}\n\nfunction color_formatHex8() {\n  return this.rgb().formatHex8();\n}\n\nfunction color_formatHsl() {\n  return hslConvert(this).formatHsl();\n}\n\nfunction color_formatRgb() {\n  return this.rgb().formatRgb();\n}\n\nexport default function color(format) {\n  var m, l;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex.exec(format)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) // #ff0000\n      : l === 3 ? new Rgb((m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1) // #f00\n      : l === 8 ? rgba(m >> 24 & 0xff, m >> 16 & 0xff, m >> 8 & 0xff, (m & 0xff) / 0xff) // #ff000000\n      : l === 4 ? rgba((m >> 12 & 0xf) | (m >> 8 & 0xf0), (m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), (((m & 0xf) << 4) | (m & 0xf)) / 0xff) // #f000\n      : null) // invalid hex\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format]) // eslint-disable-line no-prototype-builtins\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nexport function rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nexport function rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nexport function Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Rgb, rgb, extend(Color, {\n  brighter(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb() {\n    return this;\n  },\n  clamp() {\n    return new Rgb(clampi(this.r), clampi(this.g), clampi(this.b), clampa(this.opacity));\n  },\n  displayable() {\n    return (-0.5 <= this.r && this.r < 255.5)\n        && (-0.5 <= this.g && this.g < 255.5)\n        && (-0.5 <= this.b && this.b < 255.5)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  hex: rgb_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: rgb_formatHex,\n  formatHex8: rgb_formatHex8,\n  formatRgb: rgb_formatRgb,\n  toString: rgb_formatRgb\n}));\n\nfunction rgb_formatHex() {\n  return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}`;\n}\n\nfunction rgb_formatHex8() {\n  return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity) ? 1 : this.opacity) * 255)}`;\n}\n\nfunction rgb_formatRgb() {\n  const a = clampa(this.opacity);\n  return `${a === 1 ? \"rgb(\" : \"rgba(\"}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${a === 1 ? \")\" : `, ${a})`}`;\n}\n\nfunction clampa(opacity) {\n  return isNaN(opacity) ? 1 : Math.max(0, Math.min(1, opacity));\n}\n\nfunction clampi(value) {\n  return Math.max(0, Math.min(255, Math.round(value) || 0));\n}\n\nfunction hex(value) {\n  value = clampi(value);\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\n}\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nexport function hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nexport function hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  clamp() {\n    return new Hsl(clamph(this.h), clampt(this.s), clampt(this.l), clampa(this.opacity));\n  },\n  displayable() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  formatHsl() {\n    const a = clampa(this.opacity);\n    return `${a === 1 ? \"hsl(\" : \"hsla(\"}${clamph(this.h)}, ${clampt(this.s) * 100}%, ${clampt(this.l) * 100}%${a === 1 ? \")\" : `, ${a})`}`;\n  }\n}));\n\nfunction clamph(value) {\n  value = (value || 0) % 360;\n  return value < 0 ? value + 360 : value;\n}\n\nfunction clampt(value) {\n  return Math.max(0, Math.min(1, value || 0));\n}\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n", "export const radians = Math.PI / 180;\nexport const degrees = 180 / Math.PI;\n", "import define, {extend} from \"./define.js\";\nimport {Color, rgbConvert, Rgb} from \"./color.js\";\nimport {degrees, radians} from \"./math.js\";\n\n// https://observablehq.com/@mbostock/lab-and-rgb\nconst K = 18,\n    Xn = 0.96422,\n    Yn = 1,\n    Zn = 0.82521,\n    t0 = 4 / 29,\n    t1 = 6 / 29,\n    t2 = 3 * t1 * t1,\n    t3 = t1 * t1 * t1;\n\nfunction labConvert(o) {\n  if (o instanceof Lab) return new Lab(o.l, o.a, o.b, o.opacity);\n  if (o instanceof Hcl) return hcl2lab(o);\n  if (!(o instanceof Rgb)) o = rgbConvert(o);\n  var r = rgb2lrgb(o.r),\n      g = rgb2lrgb(o.g),\n      b = rgb2lrgb(o.b),\n      y = xyz2lab((0.2225045 * r + 0.7168786 * g + 0.0606169 * b) / Yn), x, z;\n  if (r === g && g === b) x = z = y; else {\n    x = xyz2lab((0.4360747 * r + 0.3850649 * g + 0.1430804 * b) / Xn);\n    z = xyz2lab((0.0139322 * r + 0.0971045 * g + 0.7141733 * b) / Zn);\n  }\n  return new Lab(116 * y - 16, 500 * (x - y), 200 * (y - z), o.opacity);\n}\n\nexport function gray(l, opacity) {\n  return new Lab(l, 0, 0, opacity == null ? 1 : opacity);\n}\n\nexport default function lab(l, a, b, opacity) {\n  return arguments.length === 1 ? labConvert(l) : new Lab(l, a, b, opacity == null ? 1 : opacity);\n}\n\nexport function Lab(l, a, b, opacity) {\n  this.l = +l;\n  this.a = +a;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Lab, lab, extend(Color, {\n  brighter(k) {\n    return new Lab(this.l + K * (k == null ? 1 : k), this.a, this.b, this.opacity);\n  },\n  darker(k) {\n    return new Lab(this.l - K * (k == null ? 1 : k), this.a, this.b, this.opacity);\n  },\n  rgb() {\n    var y = (this.l + 16) / 116,\n        x = isNaN(this.a) ? y : y + this.a / 500,\n        z = isNaN(this.b) ? y : y - this.b / 200;\n    x = Xn * lab2xyz(x);\n    y = Yn * lab2xyz(y);\n    z = Zn * lab2xyz(z);\n    return new Rgb(\n      lrgb2rgb( 3.1338561 * x - 1.6168667 * y - 0.4906146 * z),\n      lrgb2rgb(-0.9787684 * x + 1.9161415 * y + 0.0334540 * z),\n      lrgb2rgb( 0.0719453 * x - 0.2289914 * y + 1.4052427 * z),\n      this.opacity\n    );\n  }\n}));\n\nfunction xyz2lab(t) {\n  return t > t3 ? Math.pow(t, 1 / 3) : t / t2 + t0;\n}\n\nfunction lab2xyz(t) {\n  return t > t1 ? t * t * t : t2 * (t - t0);\n}\n\nfunction lrgb2rgb(x) {\n  return 255 * (x <= 0.0031308 ? 12.92 * x : 1.055 * Math.pow(x, 1 / 2.4) - 0.055);\n}\n\nfunction rgb2lrgb(x) {\n  return (x /= 255) <= 0.04045 ? x / 12.92 : Math.pow((x + 0.055) / 1.055, 2.4);\n}\n\nfunction hclConvert(o) {\n  if (o instanceof Hcl) return new Hcl(o.h, o.c, o.l, o.opacity);\n  if (!(o instanceof Lab)) o = labConvert(o);\n  if (o.a === 0 && o.b === 0) return new Hcl(NaN, 0 < o.l && o.l < 100 ? 0 : NaN, o.l, o.opacity);\n  var h = Math.atan2(o.b, o.a) * degrees;\n  return new Hcl(h < 0 ? h + 360 : h, Math.sqrt(o.a * o.a + o.b * o.b), o.l, o.opacity);\n}\n\nexport function lch(l, c, h, opacity) {\n  return arguments.length === 1 ? hclConvert(l) : new Hcl(h, c, l, opacity == null ? 1 : opacity);\n}\n\nexport function hcl(h, c, l, opacity) {\n  return arguments.length === 1 ? hclConvert(h) : new Hcl(h, c, l, opacity == null ? 1 : opacity);\n}\n\nexport function Hcl(h, c, l, opacity) {\n  this.h = +h;\n  this.c = +c;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\nfunction hcl2lab(o) {\n  if (isNaN(o.h)) return new Lab(o.l, 0, 0, o.opacity);\n  var h = o.h * radians;\n  return new Lab(o.l, Math.cos(h) * o.c, Math.sin(h) * o.c, o.opacity);\n}\n\ndefine(Hcl, hcl, extend(Color, {\n  brighter(k) {\n    return new Hcl(this.h, this.c, this.l + K * (k == null ? 1 : k), this.opacity);\n  },\n  darker(k) {\n    return new Hcl(this.h, this.c, this.l - K * (k == null ? 1 : k), this.opacity);\n  },\n  rgb() {\n    return hcl2lab(this).rgb();\n  }\n}));\n", "import define, {extend} from \"./define.js\";\nimport {Color, rgbConvert, Rgb, darker, brighter} from \"./color.js\";\nimport {degrees, radians} from \"./math.js\";\n\nvar A = -0.14861,\n    B = +1.78277,\n    C = -0.29227,\n    D = -0.90649,\n    E = +1.97294,\n    ED = E * D,\n    EB = E * B,\n    BC_DA = B * C - D * A;\n\nfunction cubehelixConvert(o) {\n  if (o instanceof Cubehelix) return new Cubehelix(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Rgb)) o = rgbConvert(o);\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      l = (BC_DA * b + ED * r - EB * g) / (BC_DA + ED - EB),\n      bl = b - l,\n      k = (E * (g - l) - C * bl) / D,\n      s = Math.sqrt(k * k + bl * bl) / (E * l * (1 - l)), // NaN if l=0 or l=1\n      h = s ? Math.atan2(k, bl) * degrees - 120 : NaN;\n  return new Cubehelix(h < 0 ? h + 360 : h, s, l, o.opacity);\n}\n\nexport default function cubehelix(h, s, l, opacity) {\n  return arguments.length === 1 ? cubehelixConvert(h) : new Cubehelix(h, s, l, opacity == null ? 1 : opacity);\n}\n\nexport function Cubehelix(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Cubehelix, cubehelix, extend(Color, {\n  brighter(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Cubehelix(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Cubehelix(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb() {\n    var h = isNaN(this.h) ? 0 : (this.h + 120) * radians,\n        l = +this.l,\n        a = isNaN(this.s) ? 0 : this.s * l * (1 - l),\n        cosh = Math.cos(h),\n        sinh = Math.sin(h);\n    return new Rgb(\n      255 * (l + a * (A * cosh + B * sinh)),\n      255 * (l + a * (C * cosh + D * sinh)),\n      255 * (l + a * (E * cosh)),\n      this.opacity\n    );\n  }\n}));\n", "import { hsl } from 'd3-color'\nimport { isNumber } from 'utils/data'\n\n/** Array of default colors */\nexport const colors = globalThis?.UNOVIS_COLORS || ['#4D8CFD', '#FF6B7E', '#F4B83E', '#A6CC74', '#00C19A', '#6859BE']\nexport const colorsDark = globalThis?.UNOVIS_COLORS_DARK || ['#4D8CFD', '#FF6B7E', '#FFC16D', '#A6CC74', '#00C19A', '#7887E0']\n\n/** Return a CSS Variable name for a given color index or string */\nexport const getCSSColorVariable = (suffix: string | number): string => {\n  return `--vis-${isNumber(suffix) ? `color${(suffix as number) % colors.length}` : suffix}`\n}\n\nexport function getLighterColor (hex: string, percentage = 0.4): string {\n  const c = hsl(hex)\n  c.l = c.l * (1 + percentage)\n  return c.formatHex()\n}\n\nexport function getDarkerColor (\n  hex: string,\n  percentageL = 0.4,\n  percentageS = 0.6\n): string {\n  const c = hsl(hex)\n  c.s = c.s * (1 - percentageS)\n  c.l = c.l * (1 - percentageL)\n  return c.formatHex()\n}\n", "import { getCSSColorVariable } from './colors'\n\ntype Pattern = {\n  id: string;\n  width?: number;\n  height?: number;\n}\n\ntype FillPattern = Pattern & {\n  svg: string;\n}\n\ntype LinePattern = Pattern & {\n  marker: string;\n  dashArray: number[];\n}\n\nexport const PATTERN_SIZE_PX = 10\n\nexport const fills: FillPattern[] = [\n  { id: 'stripes-diagonal', svg: '<path d=\"M-1,1 l2,-2 M0,10 l10,-10 M9,11 l2,-2\" stroke=\"#000\"/>' },\n  { id: 'dots', svg: '<path d=\"m0-1.5a1 1 0 010 3m10-3a1 1 0 000 3M5 3.5a1 1 0 010 3 1 1 0 010-3M0 8.5 a1 1 0 010 3m10-3a1 1 0 000 3\" fill\"#000\"/>' },\n  { id: 'stripes-vertical', svg: '<path d=\"M 5,-1 L5,11\" stroke=\"#000\"/>' },\n  { id: 'crosshatch', svg: '<path d=\"M0 0L10 10ZM10 0L0 10Z\" stroke=\"#000\"/>' },\n  { id: 'waves', svg: '<path d=\"M0 4Q2.5 1 5 4 7.5 7 10 4v2Q7.5 9 5 6 2.5 3 0 6Z\" fill=\"#000\"/>' },\n  { id: 'circles', svg: '<circle cx=\"5\" cy=\"5\" r=\"3\" stroke=\"#000\" fill=\"#fff\"/>' },\n]\nexport const lines: LinePattern[] = [\n  { id: 'circle', marker: '<circle cx=\"5\" cy=\"5\" r=\"5\"/>', dashArray: [] },\n  { id: 'triangle', marker: '<path d=\"M5,0 L10,9 L0,9Z\">', dashArray: [9, 1] },\n  { id: 'diamond', marker: '<path d=\"M 0 5 L5 0 L 10 5 L 5 10 L 0 5Z\">', dashArray: [2] },\n  { id: 'arrow', marker: '<path d=\"M4 0 0 0 6 5 0 10 4 10 10 5Z\">', dashArray: [2, 3, 8, 3] },\n  { id: 'square', marker: '<rect x=\"1\" y=\"1\" width=\"8\" height=\"8\"/>', dashArray: [6] },\n  { id: 'star', marker: '<path d=\"m2 9 3-9 3 9L0 3h10Z\"/>', dashArray: [1, 6] },\n]\n\nexport function getPatternVariable (p: Pattern): string {\n  return `vis-${`pattern-${(p as FillPattern).svg ? 'fill' : 'marker'}`}-${p.id}`\n}\n\nconst maskDef = (p: FillPattern): string =>\n  `<mask id=\"${getPatternVariable(p)}\">\n    <pattern id=\"${p.id}\" viewBox=\"0 0 10 10\" width=\"${PATTERN_SIZE_PX}\" height=\"${PATTERN_SIZE_PX}\" patternUnits=\"userSpaceOnUse\">\n      <rect width=\"100%\" height=\"100%\" fill=\"#fff\"/>\n      ${p.svg}\n    </pattern>\n    <rect x=\"-50%\" y=\"-50%\" width=\"200%\" height=\"200%\" fill=\"url(#${p.id})\"/>\n  </mask>`\n\nconst markerDef = (p: LinePattern, i: number): string =>\n  `<marker id=\"${getPatternVariable(p)}\"\n    fill=\"var(${getCSSColorVariable(i)})\"\n    markerUnits=\"userSpaceOnUse\"\n    refX=\"5\"\n    refY=\"5\"\n    markerWidth=\"${PATTERN_SIZE_PX}\"\n    markerHeight=\"${PATTERN_SIZE_PX}\">\n    ${p.marker}\n  </marker>`\n\n// // Injecting SVG defs as a single SVG element on the page\nfunction injectSVGDefs (): void {\n  const svgDefs = fills.map(maskDef).concat(lines.map(markerDef)).join('')\n  const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg')\n  svg.setAttribute('height', '100%')\n  svg.setAttribute('width', '100%')\n  svg.style.position = 'fixed'\n  svg.style.zIndex = '-99999999'\n  svg.innerHTML = `<defs>${svgDefs}</defs>`\n  document.body.appendChild(svg)\n}\n\nif (typeof window !== 'undefined') injectSVGDefs()\n", "import { injectGlobal } from '@emotion/css'\nimport { getCSSVariableValue } from 'utils/misc'\nimport { UnovisText } from 'types/text'\nimport { colors, colorsDark, getCSSColorVariable, getLighterColor, getDarkerColor } from './colors'\nimport { fills, lines, getPatternVariable } from './patterns'\n\nexport const UNOVIS_ICON_FONT_FAMILY_DEFAULT = globalThis?.UNOVIS_ICON_FONT_FAMILY || 'FontAwesome'\nexport const UNOVIS_FONT_WH_RATIO_DEFAULT: number = globalThis?.UNOVIS_FONT_W2H_RATIO_DEFAULT || 0.5\nexport const UNOVIS_TEXT_SEPARATOR_DEFAULT: string[] = globalThis?.UNOVIS_TEXT_SEPARATOR_DEFAULT || [' ', '-', '.', ',']\nexport const UNOVIS_TEXT_HYPHEN_CHARACTER_DEFAULT: string = globalThis?.UNOVIS_TEXT_HYPHEN_CHARACTER_DEFAULT || '-'\nexport const UNOVIS_TEXT_DEFAULT: UnovisText = globalThis?.UNOVIS_TEXT_DEFAULT || {\n  text: '',\n  fontSize: 12,\n  fontFamily: 'var(--vis-font-family)',\n  lineHeight: 1.25,\n  marginTop: 0,\n  marginBottom: 0,\n}\n\nexport const variables = injectGlobal`\n  :root {\n    label: vis-root-styles;\n    --vis-font-family: Inter, Arial, \"Helvetica Neue\", Helvetica, sans-serif;\n    --vis-font-wh-ratio: ${UNOVIS_FONT_WH_RATIO_DEFAULT};\n    --vis-color-main: var(${getCSSColorVariable(0)});\n    --vis-color-main-light: ${getLighterColor(colors[0])};\n    --vis-color-main-dark: ${getDarkerColor(colors[0])};\n    --vis-color-grey: #2a2a2a;\n    ${colors.map((c, i) => `${getCSSColorVariable(i)}: ${c};`)}\n    ${colorsDark.map((c, i) => `--vis-dark-color${i}: ${c};`)}\n    ${fills.map((p, i) => `\n      --${getPatternVariable(p)}: url(#${getPatternVariable(p)});\n      --vis-pattern-fill${i}: var(--${getPatternVariable(p)});\n    `)}\n    ${lines.map((p, i) => `\n      --${getPatternVariable(p)}: url(#${getPatternVariable(p)});\n      --vis-pattern-marker${i}: var(--${getPatternVariable(p)});\n      --vis-pattern-dasharray${i}: ${p.dashArray?.join(' ')};\n    `)}\n\n    body.theme-dark {\n      ${colors.map((c, i) => `${getCSSColorVariable(i)}: var(--vis-dark-color${i});`)}\n    }\n\n    body.theme-patterns {\n      ${fills.map((_, i) => `path[style*=\"fill: var(${getCSSColorVariable(i)})\"]  {\n        mask: var(--vis-pattern-fill${i});\n      }`)}\n      ${lines.map((_, i) => `\n      path[stroke=\"var(${getCSSColorVariable(i)})\"]:not([style*=\"fill\"]),\n      path[style*=\"stroke: var(${getCSSColorVariable(i)})\"]:not([style*=\"fill\"]) {\n        marker: var(--vis-pattern-marker${i});\n        stroke-dasharray: var(--vis-pattern-dasharray${i});\n      }\n    `)}\n}\n`\n\nexport function getFontWidthToHeightRatio (context: HTMLElement | SVGGElement | undefined = window?.document.body): number {\n  return context ? +getCSSVariableValue('var(--vis-font-wh-ratio)', context) : UNOVIS_FONT_WH_RATIO_DEFAULT\n}\n", "import {dispatch} from \"d3-dispatch\";\nimport {timer, timeout} from \"d3-timer\";\n\nvar emptyOn = dispatch(\"start\", \"end\", \"cancel\", \"interrupt\");\nvar emptyTween = [];\n\nexport var CREATED = 0;\nexport var SCHEDULED = 1;\nexport var STARTING = 2;\nexport var STARTED = 3;\nexport var RUNNING = 4;\nexport var ENDING = 5;\nexport var ENDED = 6;\n\nexport default function(node, name, id, index, group, timing) {\n  var schedules = node.__transition;\n  if (!schedules) node.__transition = {};\n  else if (id in schedules) return;\n  create(node, id, {\n    name: name,\n    index: index, // For context during callback.\n    group: group, // For context during callback.\n    on: emptyOn,\n    tween: emptyTween,\n    time: timing.time,\n    delay: timing.delay,\n    duration: timing.duration,\n    ease: timing.ease,\n    timer: null,\n    state: CREATED\n  });\n}\n\nexport function init(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > CREATED) throw new Error(\"too late; already scheduled\");\n  return schedule;\n}\n\nexport function set(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > STARTED) throw new Error(\"too late; already running\");\n  return schedule;\n}\n\nexport function get(node, id) {\n  var schedule = node.__transition;\n  if (!schedule || !(schedule = schedule[id])) throw new Error(\"transition not found\");\n  return schedule;\n}\n\nfunction create(node, id, self) {\n  var schedules = node.__transition,\n      tween;\n\n  // Initialize the self timer when the transition is created.\n  // Note the actual delay is not known until the first callback!\n  schedules[id] = self;\n  self.timer = timer(schedule, 0, self.time);\n\n  function schedule(elapsed) {\n    self.state = SCHEDULED;\n    self.timer.restart(start, self.delay, self.time);\n\n    // If the elapsed delay is less than our first sleep, start immediately.\n    if (self.delay <= elapsed) start(elapsed - self.delay);\n  }\n\n  function start(elapsed) {\n    var i, j, n, o;\n\n    // If the state is not SCHEDULED, then we previously errored on start.\n    if (self.state !== SCHEDULED) return stop();\n\n    for (i in schedules) {\n      o = schedules[i];\n      if (o.name !== self.name) continue;\n\n      // While this element already has a starting transition during this frame,\n      // defer starting an interrupting transition until that transition has a\n      // chance to tick (and possibly end); see d3/d3-transition#54!\n      if (o.state === STARTED) return timeout(start);\n\n      // Interrupt the active transition, if any.\n      if (o.state === RUNNING) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"interrupt\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n\n      // Cancel any pre-empted transitions.\n      else if (+i < id) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"cancel\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n    }\n\n    // Defer the first tick to end of the current frame; see d3/d3#1576.\n    // Note the transition may be canceled after start and before the first tick!\n    // Note this must be scheduled before the start event; see d3/d3-transition#16!\n    // Assuming this is successful, subsequent callbacks go straight to tick.\n    timeout(function() {\n      if (self.state === STARTED) {\n        self.state = RUNNING;\n        self.timer.restart(tick, self.delay, self.time);\n        tick(elapsed);\n      }\n    });\n\n    // Dispatch the start event.\n    // Note this must be done before the tween are initialized.\n    self.state = STARTING;\n    self.on.call(\"start\", node, node.__data__, self.index, self.group);\n    if (self.state !== STARTING) return; // interrupted\n    self.state = STARTED;\n\n    // Initialize the tween, deleting null tween.\n    tween = new Array(n = self.tween.length);\n    for (i = 0, j = -1; i < n; ++i) {\n      if (o = self.tween[i].value.call(node, node.__data__, self.index, self.group)) {\n        tween[++j] = o;\n      }\n    }\n    tween.length = j + 1;\n  }\n\n  function tick(elapsed) {\n    var t = elapsed < self.duration ? self.ease.call(null, elapsed / self.duration) : (self.timer.restart(stop), self.state = ENDING, 1),\n        i = -1,\n        n = tween.length;\n\n    while (++i < n) {\n      tween[i].call(node, t);\n    }\n\n    // Dispatch the end event.\n    if (self.state === ENDING) {\n      self.on.call(\"end\", node, node.__data__, self.index, self.group);\n      stop();\n    }\n  }\n\n  function stop() {\n    self.state = ENDED;\n    self.timer.stop();\n    delete schedules[id];\n    for (var i in schedules) return; // eslint-disable-line no-unused-vars\n    delete node.__transition;\n  }\n}\n", "import {STARTING, ENDING, ENDED} from \"./transition/schedule.js\";\n\nexport default function(node, name) {\n  var schedules = node.__transition,\n      schedule,\n      active,\n      empty = true,\n      i;\n\n  if (!schedules) return;\n\n  name = name == null ? null : name + \"\";\n\n  for (i in schedules) {\n    if ((schedule = schedules[i]).name !== name) { empty = false; continue; }\n    active = schedule.state > STARTING && schedule.state < ENDING;\n    schedule.state = ENDED;\n    schedule.timer.stop();\n    schedule.on.call(active ? \"interrupt\" : \"cancel\", node, node.__data__, schedule.index, schedule.group);\n    delete schedules[i];\n  }\n\n  if (empty) delete node.__transition;\n}\n", "import interrupt from \"../interrupt.js\";\n\nexport default function(name) {\n  return this.each(function() {\n    interrupt(this, name);\n  });\n}\n", "export function basis(t1, v0, v1, v2, v3) {\n  var t2 = t1 * t1, t3 = t2 * t1;\n  return ((1 - 3 * t1 + 3 * t2 - t3) * v0\n      + (4 - 6 * t2 + 3 * t3) * v1\n      + (1 + 3 * t1 + 3 * t2 - 3 * t3) * v2\n      + t3 * v3) / 6;\n}\n\nexport default function(values) {\n  var n = values.length - 1;\n  return function(t) {\n    var i = t <= 0 ? (t = 0) : t >= 1 ? (t = 1, n - 1) : Math.floor(t * n),\n        v1 = values[i],\n        v2 = values[i + 1],\n        v0 = i > 0 ? values[i - 1] : 2 * v1 - v2,\n        v3 = i < n - 1 ? values[i + 2] : 2 * v2 - v1;\n    return basis((t - i / n) * n, v0, v1, v2, v3);\n  };\n}\n", "import {basis} from \"./basis.js\";\n\nexport default function(values) {\n  var n = values.length;\n  return function(t) {\n    var i = Math.floor(((t %= 1) < 0 ? ++t : t) * n),\n        v0 = values[(i + n - 1) % n],\n        v1 = values[i % n],\n        v2 = values[(i + 1) % n],\n        v3 = values[(i + 2) % n];\n    return basis((t - i / n) * n, v0, v1, v2, v3);\n  };\n}\n", "export default x => () => x;\n", "import constant from \"./constant.js\";\n\nfunction linear(a, d) {\n  return function(t) {\n    return a + t * d;\n  };\n}\n\nfunction exponential(a, b, y) {\n  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {\n    return Math.pow(a + t * b, y);\n  };\n}\n\nexport function hue(a, b) {\n  var d = b - a;\n  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);\n}\n\nexport function gamma(y) {\n  return (y = +y) === 1 ? nogamma : function(a, b) {\n    return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\n  };\n}\n\nexport default function nogamma(a, b) {\n  var d = b - a;\n  return d ? linear(a, d) : constant(isNaN(a) ? b : a);\n}\n", "import {rgb as colorRgb} from \"d3-color\";\nimport basis from \"./basis.js\";\nimport basisClosed from \"./basisClosed.js\";\nimport nogamma, {gamma} from \"./color.js\";\n\nexport default (function rgbGamma(y) {\n  var color = gamma(y);\n\n  function rgb(start, end) {\n    var r = color((start = colorRgb(start)).r, (end = colorRgb(end)).r),\n        g = color(start.g, end.g),\n        b = color(start.b, end.b),\n        opacity = nogamma(start.opacity, end.opacity);\n    return function(t) {\n      start.r = r(t);\n      start.g = g(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  rgb.gamma = rgbGamma;\n\n  return rgb;\n})(1);\n\nfunction rgbSpline(spline) {\n  return function(colors) {\n    var n = colors.length,\n        r = new Array(n),\n        g = new Array(n),\n        b = new Array(n),\n        i, color;\n    for (i = 0; i < n; ++i) {\n      color = colorRgb(colors[i]);\n      r[i] = color.r || 0;\n      g[i] = color.g || 0;\n      b[i] = color.b || 0;\n    }\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    color.opacity = 1;\n    return function(t) {\n      color.r = r(t);\n      color.g = g(t);\n      color.b = b(t);\n      return color + \"\";\n    };\n  };\n}\n\nexport var rgbBasis = rgbSpline(basis);\nexport var rgbBasisClosed = rgbSpline(basisClosed);\n", "export default function(a, b) {\n  if (!b) b = [];\n  var n = a ? Math.min(b.length, a.length) : 0,\n      c = b.slice(),\n      i;\n  return function(t) {\n    for (i = 0; i < n; ++i) c[i] = a[i] * (1 - t) + b[i] * t;\n    return c;\n  };\n}\n\nexport function isNumberArray(x) {\n  return ArrayBuffer.isView(x) && !(x instanceof DataView);\n}\n", "import value from \"./value.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  return (isNumberArray(b) ? numberArray : genericArray)(a, b);\n}\n\nexport function genericArray(a, b) {\n  var nb = b ? b.length : 0,\n      na = a ? Math.min(nb, a.length) : 0,\n      x = new Array(na),\n      c = new Array(nb),\n      i;\n\n  for (i = 0; i < na; ++i) x[i] = value(a[i], b[i]);\n  for (; i < nb; ++i) c[i] = b[i];\n\n  return function(t) {\n    for (i = 0; i < na; ++i) c[i] = x[i](t);\n    return c;\n  };\n}\n", "export default function(a, b) {\n  var d = new Date;\n  return a = +a, b = +b, function(t) {\n    return d.setTime(a * (1 - t) + b * t), d;\n  };\n}\n", "export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return a * (1 - t) + b * t;\n  };\n}\n", "import value from \"./value.js\";\n\nexport default function(a, b) {\n  var i = {},\n      c = {},\n      k;\n\n  if (a === null || typeof a !== \"object\") a = {};\n  if (b === null || typeof b !== \"object\") b = {};\n\n  for (k in b) {\n    if (k in a) {\n      i[k] = value(a[k], b[k]);\n    } else {\n      c[k] = b[k];\n    }\n  }\n\n  return function(t) {\n    for (k in i) c[k] = i[k](t);\n    return c;\n  };\n}\n", "import number from \"./number.js\";\n\nvar reA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,\n    reB = new RegExp(reA.source, \"g\");\n\nfunction zero(b) {\n  return function() {\n    return b;\n  };\n}\n\nfunction one(b) {\n  return function(t) {\n    return b(t) + \"\";\n  };\n}\n\nexport default function(a, b) {\n  var bi = reA.lastIndex = reB.lastIndex = 0, // scan index for next number in b\n      am, // current match in a\n      bm, // current match in b\n      bs, // string preceding current number in b, if any\n      i = -1, // index in s\n      s = [], // string constants and placeholders\n      q = []; // number interpolators\n\n  // Coerce inputs to strings.\n  a = a + \"\", b = b + \"\";\n\n  // Interpolate pairs of numbers in a & b.\n  while ((am = reA.exec(a))\n      && (bm = reB.exec(b))) {\n    if ((bs = bm.index) > bi) { // a string precedes the next number in b\n      bs = b.slice(bi, bs);\n      if (s[i]) s[i] += bs; // coalesce with previous string\n      else s[++i] = bs;\n    }\n    if ((am = am[0]) === (bm = bm[0])) { // numbers in a & b match\n      if (s[i]) s[i] += bm; // coalesce with previous string\n      else s[++i] = bm;\n    } else { // interpolate non-matching numbers\n      s[++i] = null;\n      q.push({i: i, x: number(am, bm)});\n    }\n    bi = reB.lastIndex;\n  }\n\n  // Add remains of b.\n  if (bi < b.length) {\n    bs = b.slice(bi);\n    if (s[i]) s[i] += bs; // coalesce with previous string\n    else s[++i] = bs;\n  }\n\n  // Special optimization for only a single match.\n  // Otherwise, interpolate each of the numbers and rejoin the string.\n  return s.length < 2 ? (q[0]\n      ? one(q[0].x)\n      : zero(b))\n      : (b = q.length, function(t) {\n          for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);\n          return s.join(\"\");\n        });\n}\n", "import {color} from \"d3-color\";\nimport rgb from \"./rgb.js\";\nimport {genericArray} from \"./array.js\";\nimport date from \"./date.js\";\nimport number from \"./number.js\";\nimport object from \"./object.js\";\nimport string from \"./string.js\";\nimport constant from \"./constant.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  var t = typeof b, c;\n  return b == null || t === \"boolean\" ? constant(b)\n      : (t === \"number\" ? number\n      : t === \"string\" ? ((c = color(b)) ? (b = c, rgb) : string)\n      : b instanceof color ? rgb\n      : b instanceof Date ? date\n      : isNumberArray(b) ? numberArray\n      : Array.isArray(b) ? genericArray\n      : typeof b.valueOf !== \"function\" && typeof b.toString !== \"function\" || isNaN(b) ? object\n      : number)(a, b);\n}\n", "export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return Math.round(a * (1 - t) + b * t);\n  };\n}\n", "var degrees = 180 / Math.PI;\n\nexport var identity = {\n  translateX: 0,\n  translateY: 0,\n  rotate: 0,\n  skewX: 0,\n  scaleX: 1,\n  scaleY: 1\n};\n\nexport default function(a, b, c, d, e, f) {\n  var scaleX, scaleY, skewX;\n  if (scaleX = Math.sqrt(a * a + b * b)) a /= scaleX, b /= scaleX;\n  if (skewX = a * c + b * d) c -= a * skewX, d -= b * skewX;\n  if (scaleY = Math.sqrt(c * c + d * d)) c /= scaleY, d /= scaleY, skewX /= scaleY;\n  if (a * d < b * c) a = -a, b = -b, skewX = -skewX, scaleX = -scaleX;\n  return {\n    translateX: e,\n    translateY: f,\n    rotate: Math.atan2(b, a) * degrees,\n    skewX: Math.atan(skewX) * degrees,\n    scaleX: scaleX,\n    scaleY: scaleY\n  };\n}\n", "import decompose, {identity} from \"./decompose.js\";\n\nvar svgNode;\n\n/* eslint-disable no-undef */\nexport function parseCss(value) {\n  const m = new (typeof DOMMatrix === \"function\" ? DOMMatrix : WebKitCSSMatrix)(value + \"\");\n  return m.isIdentity ? identity : decompose(m.a, m.b, m.c, m.d, m.e, m.f);\n}\n\nexport function parseSvg(value) {\n  if (value == null) return identity;\n  if (!svgNode) svgNode = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n  svgNode.setAttribute(\"transform\", value);\n  if (!(value = svgNode.transform.baseVal.consolidate())) return identity;\n  value = value.matrix;\n  return decompose(value.a, value.b, value.c, value.d, value.e, value.f);\n}\n", "import number from \"../number.js\";\nimport {parseCss, parseSvg} from \"./parse.js\";\n\nfunction interpolateTransform(parse, pxComma, pxParen, degParen) {\n\n  function pop(s) {\n    return s.length ? s.pop() + \" \" : \"\";\n  }\n\n  function translate(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(\"translate(\", null, pxComma, null, pxParen);\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb || yb) {\n      s.push(\"translate(\" + xb + pxComma + yb + pxParen);\n    }\n  }\n\n  function rotate(a, b, s, q) {\n    if (a !== b) {\n      if (a - b > 180) b += 360; else if (b - a > 180) a += 360; // shortest path\n      q.push({i: s.push(pop(s) + \"rotate(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"rotate(\" + b + degParen);\n    }\n  }\n\n  function skewX(a, b, s, q) {\n    if (a !== b) {\n      q.push({i: s.push(pop(s) + \"skewX(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"skewX(\" + b + degParen);\n    }\n  }\n\n  function scale(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(pop(s) + \"scale(\", null, \",\", null, \")\");\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb !== 1 || yb !== 1) {\n      s.push(pop(s) + \"scale(\" + xb + \",\" + yb + \")\");\n    }\n  }\n\n  return function(a, b) {\n    var s = [], // string constants and placeholders\n        q = []; // number interpolators\n    a = parse(a), b = parse(b);\n    translate(a.translateX, a.translateY, b.translateX, b.translateY, s, q);\n    rotate(a.rotate, b.rotate, s, q);\n    skewX(a.skewX, b.skewX, s, q);\n    scale(a.scaleX, a.scaleY, b.scaleX, b.scaleY, s, q);\n    a = b = null; // gc\n    return function(t) {\n      var i = -1, n = q.length, o;\n      while (++i < n) s[(o = q[i]).i] = o.x(t);\n      return s.join(\"\");\n    };\n  };\n}\n\nexport var interpolateTransformCss = interpolateTransform(parseCss, \"px, \", \"px)\", \"deg)\");\nexport var interpolateTransformSvg = interpolateTransform(parseSvg, \", \", \")\", \")\");\n", "var epsilon2 = 1e-12;\n\nfunction cosh(x) {\n  return ((x = Math.exp(x)) + 1 / x) / 2;\n}\n\nfunction sinh(x) {\n  return ((x = Math.exp(x)) - 1 / x) / 2;\n}\n\nfunction tanh(x) {\n  return ((x = Math.exp(2 * x)) - 1) / (x + 1);\n}\n\nexport default (function zoomRho(rho, rho2, rho4) {\n\n  // p0 = [ux0, uy0, w0]\n  // p1 = [ux1, uy1, w1]\n  function zoom(p0, p1) {\n    var ux0 = p0[0], uy0 = p0[1], w0 = p0[2],\n        ux1 = p1[0], uy1 = p1[1], w1 = p1[2],\n        dx = ux1 - ux0,\n        dy = uy1 - uy0,\n        d2 = dx * dx + dy * dy,\n        i,\n        S;\n\n    // Special case for u0 ≅ u1.\n    if (d2 < epsilon2) {\n      S = Math.log(w1 / w0) / rho;\n      i = function(t) {\n        return [\n          ux0 + t * dx,\n          uy0 + t * dy,\n          w0 * Math.exp(rho * t * S)\n        ];\n      }\n    }\n\n    // General case.\n    else {\n      var d1 = Math.sqrt(d2),\n          b0 = (w1 * w1 - w0 * w0 + rho4 * d2) / (2 * w0 * rho2 * d1),\n          b1 = (w1 * w1 - w0 * w0 - rho4 * d2) / (2 * w1 * rho2 * d1),\n          r0 = Math.log(Math.sqrt(b0 * b0 + 1) - b0),\n          r1 = Math.log(Math.sqrt(b1 * b1 + 1) - b1);\n      S = (r1 - r0) / rho;\n      i = function(t) {\n        var s = t * S,\n            coshr0 = cosh(r0),\n            u = w0 / (rho2 * d1) * (coshr0 * tanh(rho * s + r0) - sinh(r0));\n        return [\n          ux0 + u * dx,\n          uy0 + u * dy,\n          w0 * coshr0 / cosh(rho * s + r0)\n        ];\n      }\n    }\n\n    i.duration = S * 1000 * rho / Math.SQRT2;\n\n    return i;\n  }\n\n  zoom.rho = function(_) {\n    var _1 = Math.max(1e-3, +_), _2 = _1 * _1, _4 = _2 * _2;\n    return zoomRho(_1, _2, _4);\n  };\n\n  return zoom;\n})(Math.SQRT2, 2, 4);\n", "import {hsl as colorHsl} from \"d3-color\";\nimport color, {hue} from \"./color.js\";\n\nfunction hsl(hue) {\n  return function(start, end) {\n    var h = hue((start = colorHsl(start)).h, (end = colorHsl(end)).h),\n        s = color(start.s, end.s),\n        l = color(start.l, end.l),\n        opacity = color(start.opacity, end.opacity);\n    return function(t) {\n      start.h = h(t);\n      start.s = s(t);\n      start.l = l(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n}\n\nexport default hsl(hue);\nexport var hslLong = hsl(color);\n", "import {hcl as colorHcl} from \"d3-color\";\nimport color, {hue} from \"./color.js\";\n\nfunction hcl(hue) {\n  return function(start, end) {\n    var h = hue((start = colorHcl(start)).h, (end = colorHcl(end)).h),\n        c = color(start.c, end.c),\n        l = color(start.l, end.l),\n        opacity = color(start.opacity, end.opacity);\n    return function(t) {\n      start.h = h(t);\n      start.c = c(t);\n      start.l = l(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n}\n\nexport default hcl(hue);\nexport var hclLong = hcl(color);\n", "import {cubehelix as colorCubehelix} from \"d3-color\";\nimport color, {hue} from \"./color.js\";\n\nfunction cubehelix(hue) {\n  return (function cubehelixGamma(y) {\n    y = +y;\n\n    function cubehelix(start, end) {\n      var h = hue((start = colorCubehelix(start)).h, (end = colorCubehelix(end)).h),\n          s = color(start.s, end.s),\n          l = color(start.l, end.l),\n          opacity = color(start.opacity, end.opacity);\n      return function(t) {\n        start.h = h(t);\n        start.s = s(t);\n        start.l = l(Math.pow(t, y));\n        start.opacity = opacity(t);\n        return start + \"\";\n      };\n    }\n\n    cubehelix.gamma = cubehelixGamma;\n\n    return cubehelix;\n  })(1);\n}\n\nexport default cubehelix(hue);\nexport var cubehelixLong = cubehelix(color);\n", "import {default as value} from \"./value.js\";\n\nexport default function piecewise(interpolate, values) {\n  if (values === undefined) values = interpolate, interpolate = value;\n  var i = 0, n = values.length - 1, v = values[0], I = new Array(n < 0 ? 0 : n);\n  while (i < n) I[i] = interpolate(v, v = values[++i]);\n  return function(t) {\n    var i = Math.max(0, Math.min(n - 1, Math.floor(t *= n)));\n    return I[i](t - i);\n  };\n}\n", "import {get, set} from \"./schedule.js\";\n\nfunction tweenRemove(id, name) {\n  var tween0, tween1;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and we’re done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = tween0 = tween;\n      for (var i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1 = tween1.slice();\n          tween1.splice(i, 1);\n          break;\n        }\n      }\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nfunction tweenFunction(id, name, value) {\n  var tween0, tween1;\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and we’re done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = (tween0 = tween).slice();\n      for (var t = {name: name, value: value}, i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1[i] = t;\n          break;\n        }\n      }\n      if (i === n) tween1.push(t);\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nexport default function(name, value) {\n  var id = this._id;\n\n  name += \"\";\n\n  if (arguments.length < 2) {\n    var tween = get(this.node(), id).tween;\n    for (var i = 0, n = tween.length, t; i < n; ++i) {\n      if ((t = tween[i]).name === name) {\n        return t.value;\n      }\n    }\n    return null;\n  }\n\n  return this.each((value == null ? tweenRemove : tweenFunction)(id, name, value));\n}\n\nexport function tweenValue(transition, name, value) {\n  var id = transition._id;\n\n  transition.each(function() {\n    var schedule = set(this, id);\n    (schedule.value || (schedule.value = {}))[name] = value.apply(this, arguments);\n  });\n\n  return function(node) {\n    return get(node, id).value[name];\n  };\n}\n", "import {color} from \"d3-color\";\nimport {interpolateNumber, interpolateRgb, interpolateString} from \"d3-interpolate\";\n\nexport default function(a, b) {\n  var c;\n  return (typeof b === \"number\" ? interpolateNumber\n      : b instanceof color ? interpolateRgb\n      : (c = color(b)) ? (b = c, interpolateRgb)\n      : interpolateString)(a, b);\n}\n", "import {interpolateTransformSvg as interpolateTransform} from \"d3-interpolate\";\nimport {namespace} from \"d3-selection\";\nimport {tweenValue} from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = this.getAttribute(name);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrConstantNS(fullname, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = this.getAttributeNS(fullname.space, fullname.local);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrFunction(name, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0, value1 = value(this), string1;\n    if (value1 == null) return void this.removeAttribute(name);\n    string0 = this.getAttribute(name);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction attrFunctionNS(fullname, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0, value1 = value(this), string1;\n    if (value1 == null) return void this.removeAttributeNS(fullname.space, fullname.local);\n    string0 = this.getAttributeNS(fullname.space, fullname.local);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name), i = fullname === \"transform\" ? interpolateTransform : interpolate;\n  return this.attrTween(name, typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)(fullname, i, tweenValue(this, \"attr.\" + name, value))\n      : value == null ? (fullname.local ? attrRemoveNS : attrRemove)(fullname)\n      : (fullname.local ? attrConstantNS : attrConstant)(fullname, i, value));\n}\n", "import {namespace} from \"d3-selection\";\n\nfunction attrInterpolate(name, i) {\n  return function(t) {\n    this.setAttribute(name, i.call(this, t));\n  };\n}\n\nfunction attrInterpolateNS(fullname, i) {\n  return function(t) {\n    this.setAttributeNS(fullname.space, fullname.local, i.call(this, t));\n  };\n}\n\nfunction attrTweenNS(fullname, value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolateNS(fullname, i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nfunction attrTween(name, value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolate(name, i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value) {\n  var key = \"attr.\" + name;\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  var fullname = namespace(name);\n  return this.tween(key, (fullname.local ? attrTweenNS : attrTween)(fullname, value));\n}\n", "import {get, init} from \"./schedule.js\";\n\nfunction delayFunction(id, value) {\n  return function() {\n    init(this, id).delay = +value.apply(this, arguments);\n  };\n}\n\nfunction delayConstant(id, value) {\n  return value = +value, function() {\n    init(this, id).delay = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? delayFunction\n          : delayConstant)(id, value))\n      : get(this.node(), id).delay;\n}\n", "import {get, set} from \"./schedule.js\";\n\nfunction durationFunction(id, value) {\n  return function() {\n    set(this, id).duration = +value.apply(this, arguments);\n  };\n}\n\nfunction durationConstant(id, value) {\n  return value = +value, function() {\n    set(this, id).duration = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? durationFunction\n          : durationConstant)(id, value))\n      : get(this.node(), id).duration;\n}\n", "import {get, set} from \"./schedule.js\";\n\nfunction easeConstant(id, value) {\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    set(this, id).ease = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each(easeConstant(id, value))\n      : get(this.node(), id).ease;\n}\n", "import {set} from \"./schedule.js\";\n\nfunction easeVarying(id, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (typeof v !== \"function\") throw new Error;\n    set(this, id).ease = v;\n  };\n}\n\nexport default function(value) {\n  if (typeof value !== \"function\") throw new Error;\n  return this.each(easeVarying(this._id, value));\n}\n", "import {matcher} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, this._name, this._id);\n}\n", "import {Transition} from \"./index.js\";\n\nexport default function(transition) {\n  if (transition._id !== this._id) throw new Error;\n\n  for (var groups0 = this._groups, groups1 = transition._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Transition(merges, this._parents, this._name, this._id);\n}\n", "import {get, set, init} from \"./schedule.js\";\n\nfunction start(name) {\n  return (name + \"\").trim().split(/^|\\s+/).every(function(t) {\n    var i = t.indexOf(\".\");\n    if (i >= 0) t = t.slice(0, i);\n    return !t || t === \"start\";\n  });\n}\n\nfunction onFunction(id, name, listener) {\n  var on0, on1, sit = start(name) ? init : set;\n  return function() {\n    var schedule = sit(this, id),\n        on = schedule.on;\n\n    // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and we’re done!\n    // Otherwise, copy-on-write.\n    if (on !== on0) (on1 = (on0 = on).copy()).on(name, listener);\n\n    schedule.on = on1;\n  };\n}\n\nexport default function(name, listener) {\n  var id = this._id;\n\n  return arguments.length < 2\n      ? get(this.node(), id).on.on(name)\n      : this.each(onFunction(id, name, listener));\n}\n", "function removeFunction(id) {\n  return function() {\n    var parent = this.parentNode;\n    for (var i in this.__transition) if (+i !== id) return;\n    if (parent) parent.removeChild(this);\n  };\n}\n\nexport default function() {\n  return this.on(\"end.remove\", removeFunction(this._id));\n}\n", "import {selector} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n        schedule(subgroup[i], name, id, i, subgroup, get(node, id));\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, name, id);\n}\n", "import {selectorAll} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        for (var children = select.call(node, node.__data__, i, group), child, inherit = get(node, id), k = 0, l = children.length; k < l; ++k) {\n          if (child = children[k]) {\n            schedule(child, name, id, k, children, inherit);\n          }\n        }\n        subgroups.push(children);\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, parents, name, id);\n}\n", "import {selection} from \"d3-selection\";\n\nvar Selection = selection.prototype.constructor;\n\nexport default function() {\n  return new Selection(this._groups, this._parents);\n}\n", "import {interpolateTransformCss as interpolateTransform} from \"d3-interpolate\";\nimport {style} from \"d3-selection\";\nimport {set} from \"./schedule.js\";\nimport {tweenValue} from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction styleNull(name, interpolate) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0 = style(this, name),\n        string1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, string10 = string1);\n  };\n}\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = style(this, name);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction styleFunction(name, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0 = style(this, name),\n        value1 = value(this),\n        string1 = value1 + \"\";\n    if (value1 == null) string1 = value1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction styleMaybeRemove(id, name) {\n  var on0, on1, listener0, key = \"style.\" + name, event = \"end.\" + key, remove;\n  return function() {\n    var schedule = set(this, id),\n        on = schedule.on,\n        listener = schedule.value[key] == null ? remove || (remove = styleRemove(name)) : undefined;\n\n    // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and we’re done!\n    // Otherwise, copy-on-write.\n    if (on !== on0 || listener0 !== listener) (on1 = (on0 = on).copy()).on(event, listener0 = listener);\n\n    schedule.on = on1;\n  };\n}\n\nexport default function(name, value, priority) {\n  var i = (name += \"\") === \"transform\" ? interpolateTransform : interpolate;\n  return value == null ? this\n      .styleTween(name, styleNull(name, i))\n      .on(\"end.style.\" + name, styleRemove(name))\n    : typeof value === \"function\" ? this\n      .styleTween(name, styleFunction(name, i, tweenValue(this, \"style.\" + name, value)))\n      .each(styleMaybeRemove(this._id, name))\n    : this\n      .styleTween(name, styleConstant(name, i, value), priority)\n      .on(\"end.style.\" + name, null);\n}\n", "function styleInterpolate(name, i, priority) {\n  return function(t) {\n    this.style.setProperty(name, i.call(this, t), priority);\n  };\n}\n\nfunction styleTween(name, value, priority) {\n  var t, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t = (i0 = i) && styleInterpolate(name, i, priority);\n    return t;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value, priority) {\n  var key = \"style.\" + (name += \"\");\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  return this.tween(key, styleTween(name, value, priority == null ? \"\" : priority));\n}\n", "import {tweenValue} from \"./tween.js\";\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var value1 = value(this);\n    this.textContent = value1 == null ? \"\" : value1;\n  };\n}\n\nexport default function(value) {\n  return this.tween(\"text\", typeof value === \"function\"\n      ? textFunction(tweenValue(this, \"text\", value))\n      : textConstant(value == null ? \"\" : value + \"\"));\n}\n", "function textInterpolate(i) {\n  return function(t) {\n    this.textContent = i.call(this, t);\n  };\n}\n\nfunction textTween(value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && textInterpolate(i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(value) {\n  var key = \"text\";\n  if (arguments.length < 1) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  return this.tween(key, textTween(value));\n}\n", "import {Transition, newId} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function() {\n  var name = this._name,\n      id0 = this._id,\n      id1 = newId();\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        var inherit = get(node, id0);\n        schedule(node, name, id1, i, group, {\n          time: inherit.time + inherit.delay + inherit.duration,\n          delay: 0,\n          duration: inherit.duration,\n          ease: inherit.ease\n        });\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id1);\n}\n", "import {set} from \"./schedule.js\";\n\nexport default function() {\n  var on0, on1, that = this, id = that._id, size = that.size();\n  return new Promise(function(resolve, reject) {\n    var cancel = {value: reject},\n        end = {value: function() { if (--size === 0) resolve(); }};\n\n    that.each(function() {\n      var schedule = set(this, id),\n          on = schedule.on;\n\n      // If this node shared a dispatch with the previous node,\n      // just assign the updated shared dispatch and we’re done!\n      // Otherwise, copy-on-write.\n      if (on !== on0) {\n        on1 = (on0 = on).copy();\n        on1._.cancel.push(cancel);\n        on1._.interrupt.push(cancel);\n        on1._.end.push(end);\n      }\n\n      schedule.on = on1;\n    });\n\n    // The selection was empty, resolve end immediately\n    if (size === 0) resolve();\n  });\n}\n", "import {selection} from \"d3-selection\";\nimport transition_attr from \"./attr.js\";\nimport transition_attrTween from \"./attrTween.js\";\nimport transition_delay from \"./delay.js\";\nimport transition_duration from \"./duration.js\";\nimport transition_ease from \"./ease.js\";\nimport transition_easeVarying from \"./easeVarying.js\";\nimport transition_filter from \"./filter.js\";\nimport transition_merge from \"./merge.js\";\nimport transition_on from \"./on.js\";\nimport transition_remove from \"./remove.js\";\nimport transition_select from \"./select.js\";\nimport transition_selectAll from \"./selectAll.js\";\nimport transition_selection from \"./selection.js\";\nimport transition_style from \"./style.js\";\nimport transition_styleTween from \"./styleTween.js\";\nimport transition_text from \"./text.js\";\nimport transition_textTween from \"./textTween.js\";\nimport transition_transition from \"./transition.js\";\nimport transition_tween from \"./tween.js\";\nimport transition_end from \"./end.js\";\n\nvar id = 0;\n\nexport function Transition(groups, parents, name, id) {\n  this._groups = groups;\n  this._parents = parents;\n  this._name = name;\n  this._id = id;\n}\n\nexport default function transition(name) {\n  return selection().transition(name);\n}\n\nexport function newId() {\n  return ++id;\n}\n\nvar selection_prototype = selection.prototype;\n\nTransition.prototype = transition.prototype = {\n  constructor: Transition,\n  select: transition_select,\n  selectAll: transition_selectAll,\n  selectChild: selection_prototype.selectChild,\n  selectChildren: selection_prototype.selectChildren,\n  filter: transition_filter,\n  merge: transition_merge,\n  selection: transition_selection,\n  transition: transition_transition,\n  call: selection_prototype.call,\n  nodes: selection_prototype.nodes,\n  node: selection_prototype.node,\n  size: selection_prototype.size,\n  empty: selection_prototype.empty,\n  each: selection_prototype.each,\n  on: transition_on,\n  attr: transition_attr,\n  attrTween: transition_attrTween,\n  style: transition_style,\n  styleTween: transition_styleTween,\n  text: transition_text,\n  textTween: transition_textTween,\n  remove: transition_remove,\n  tween: transition_tween,\n  delay: transition_delay,\n  duration: transition_duration,\n  ease: transition_ease,\n  easeVarying: transition_easeVarying,\n  end: transition_end,\n  [Symbol.iterator]: selection_prototype[Symbol.iterator]\n};\n", "export const linear = t => +t;\n", "export function cubicIn(t) {\n  return t * t * t;\n}\n\nexport function cubicOut(t) {\n  return --t * t * t + 1;\n}\n\nexport function cubicInOut(t) {\n  return ((t *= 2) <= 1 ? t * t * t : (t -= 2) * t * t + 2) / 2;\n}\n", "var exponent = 3;\n\nexport var polyIn = (function custom(e) {\n  e = +e;\n\n  function polyIn(t) {\n    return Math.pow(t, e);\n  }\n\n  polyIn.exponent = custom;\n\n  return polyIn;\n})(exponent);\n\nexport var polyOut = (function custom(e) {\n  e = +e;\n\n  function polyOut(t) {\n    return 1 - Math.pow(1 - t, e);\n  }\n\n  polyOut.exponent = custom;\n\n  return polyOut;\n})(exponent);\n\nexport var polyInOut = (function custom(e) {\n  e = +e;\n\n  function polyInOut(t) {\n    return ((t *= 2) <= 1 ? Math.pow(t, e) : 2 - Math.pow(2 - t, e)) / 2;\n  }\n\n  polyInOut.exponent = custom;\n\n  return polyInOut;\n})(exponent);\n", "var pi = Math.PI,\n    halfPi = pi / 2;\n\nexport function sinIn(t) {\n  return (+t === 1) ? 1 : 1 - Math.cos(t * halfPi);\n}\n\nexport function sinOut(t) {\n  return Math.sin(t * halfPi);\n}\n\nexport function sinInOut(t) {\n  return (1 - Math.cos(pi * t)) / 2;\n}\n", "// tpmt is two power minus ten times t scaled to [0,1]\nexport function tpmt(x) {\n  return (Math.pow(2, -10 * x) - 0.0009765625) * 1.0009775171065494;\n}\n", "var b1 = 4 / 11,\n    b2 = 6 / 11,\n    b3 = 8 / 11,\n    b4 = 3 / 4,\n    b5 = 9 / 11,\n    b6 = 10 / 11,\n    b7 = 15 / 16,\n    b8 = 21 / 22,\n    b9 = 63 / 64,\n    b0 = 1 / b1 / b1;\n\nexport function bounceIn(t) {\n  return 1 - bounceOut(1 - t);\n}\n\nexport function bounceOut(t) {\n  return (t = +t) < b1 ? b0 * t * t : t < b3 ? b0 * (t -= b2) * t + b4 : t < b6 ? b0 * (t -= b5) * t + b7 : b0 * (t -= b8) * t + b9;\n}\n\nexport function bounceInOut(t) {\n  return ((t *= 2) <= 1 ? 1 - bounceOut(1 - t) : bounceOut(t - 1) + 1) / 2;\n}\n", "var overshoot = 1.70158;\n\nexport var backIn = (function custom(s) {\n  s = +s;\n\n  function backIn(t) {\n    return (t = +t) * t * (s * (t - 1) + t);\n  }\n\n  backIn.overshoot = custom;\n\n  return backIn;\n})(overshoot);\n\nexport var backOut = (function custom(s) {\n  s = +s;\n\n  function backOut(t) {\n    return --t * t * ((t + 1) * s + t) + 1;\n  }\n\n  backOut.overshoot = custom;\n\n  return backOut;\n})(overshoot);\n\nexport var backInOut = (function custom(s) {\n  s = +s;\n\n  function backInOut(t) {\n    return ((t *= 2) < 1 ? t * t * ((s + 1) * t - s) : (t -= 2) * t * ((s + 1) * t + s) + 2) / 2;\n  }\n\n  backInOut.overshoot = custom;\n\n  return backInOut;\n})(overshoot);\n", "import {tpmt} from \"./math.js\";\n\nvar tau = 2 * Math.PI,\n    amplitude = 1,\n    period = 0.3;\n\nexport var elasticIn = (function custom(a, p) {\n  var s = Math.asin(1 / (a = Math.max(1, a))) * (p /= tau);\n\n  function elasticIn(t) {\n    return a * tpmt(-(--t)) * Math.sin((s - t) / p);\n  }\n\n  elasticIn.amplitude = function(a) { return custom(a, p * tau); };\n  elasticIn.period = function(p) { return custom(a, p); };\n\n  return elasticIn;\n})(amplitude, period);\n\nexport var elasticOut = (function custom(a, p) {\n  var s = Math.asin(1 / (a = Math.max(1, a))) * (p /= tau);\n\n  function elasticOut(t) {\n    return 1 - a * tpmt(t = +t) * Math.sin((t + s) / p);\n  }\n\n  elasticOut.amplitude = function(a) { return custom(a, p * tau); };\n  elasticOut.period = function(p) { return custom(a, p); };\n\n  return elasticOut;\n})(amplitude, period);\n\nexport var elasticInOut = (function custom(a, p) {\n  var s = Math.asin(1 / (a = Math.max(1, a))) * (p /= tau);\n\n  function elasticInOut(t) {\n    return ((t = t * 2 - 1) < 0\n        ? a * tpmt(-t) * Math.sin((s - t) / p)\n        : 2 - a * tpmt(t) * Math.sin((s + t) / p)) / 2;\n  }\n\n  elasticInOut.amplitude = function(a) { return custom(a, p * tau); };\n  elasticInOut.period = function(p) { return custom(a, p); };\n\n  return elasticInOut;\n})(amplitude, period);\n", "import {Transition, newId} from \"../transition/index.js\";\nimport schedule from \"../transition/schedule.js\";\nimport {easeCubicInOut} from \"d3-ease\";\nimport {now} from \"d3-timer\";\n\nvar defaultTiming = {\n  time: null, // Set on use.\n  delay: 0,\n  duration: 250,\n  ease: easeCubicInOut\n};\n\nfunction inherit(node, id) {\n  var timing;\n  while (!(timing = node.__transition) || !(timing = timing[id])) {\n    if (!(node = node.parentNode)) {\n      throw new Error(`transition ${id} not found`);\n    }\n  }\n  return timing;\n}\n\nexport default function(name) {\n  var id,\n      timing;\n\n  if (name instanceof Transition) {\n    id = name._id, name = name._name;\n  } else {\n    id = newId(), (timing = defaultTiming).time = now(), name = name == null ? null : name + \"\";\n  }\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        schedule(node, name, id, i, group, timing || inherit(node, id));\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id);\n}\n", "import {selection} from \"d3-selection\";\nimport selection_interrupt from \"./interrupt.js\";\nimport selection_transition from \"./transition.js\";\n\nselection.prototype.interrupt = selection_interrupt;\nselection.prototype.transition = selection_transition;\n", "import { interrupt, Transition } from 'd3-transition'\nimport { BaseType, Selection } from 'd3-selection'\nimport { ValueFn } from 'd3'\n\nexport function smartTransition<Element extends BaseType, Datum, ParentElement extends BaseType, ParentDatum> (\n  selection: Selection<Element, Datum, ParentElement, ParentDatum>,\n  duration?: number,\n  easing?: (normalizedTime: number) => number\n): Selection$Transition<Element, Datum, ParentElement, ParentDatum> {\n  selection.nodes().forEach(node => interrupt(node)) // Interrupt active transitions if any\n  if (duration) {\n    const transition = selection.transition().duration(duration)\n    if (easing) transition.ease(easing)\n    return transition\n  } else return selection\n}\n\nexport interface VisAttrStylePatch<GElement extends BaseType, Datum, PElement extends BaseType, PDatum> {\n  attr(name: string, value: null | string | number | boolean): this;\n  attr(name: string, value: ValueFn<GElement, Datum, string | number | boolean | null>): this;\n  style(name: string, value: null): this;\n  style(name: string, value: string | number | boolean, priority?: null | 'important'): this;\n  style(name: string, value: ValueFn<GElement, Datum, string | number | boolean | null>, priority?: null | 'important'): this;\n}\n\nexport type Selection$Transition<Element extends BaseType, Datum, ParentElement extends BaseType, ParentDatum> =\n  (Transition<Element, Datum, ParentElement, ParentDatum> | Selection<Element, Datum, ParentElement, ParentDatum>)\n  & VisAttrStylePatch<Element, Datum, ParentElement, ParentDatum>\n", "// Core\nimport { ContainerDefaultConfig, ContainerConfigInterface } from 'core/container/config'\nimport { ComponentCore } from 'core/component'\nimport { Tooltip } from 'components/tooltip'\nimport { Annotations } from 'components/annotations'\n\nexport interface SingleContainerConfigInterface<Datum> extends ContainerConfigInterface {\n  /** Visualization component. Default: `undefined` */\n  component?: ComponentCore<Datum>;\n  /** Tooltip component. Default: `undefined` */\n  tooltip?: Tooltip;\n  /** Annotations component. Default: `undefined` */\n  annotations?: Annotations | undefined;\n}\n\nexport const SingleContainerDefaultConfig: SingleContainerConfigInterface<unknown> = {\n  ...ContainerDefaultConfig,\n  tooltip: undefined,\n  annotations: undefined,\n}\n", "// Global CSS variables (side effects import)\nimport 'styles/index'\n\n// Core\nimport { ContainerCore } from 'core/container'\nimport { ComponentCore } from 'core/component'\nimport { ComponentConfigInterface } from 'core/component/config'\n\n// Utils\nimport { smartTransition } from 'utils/d3'\n\n// Types\nimport { Sizing, ExtendedSizeComponent } from 'types/component'\n\n// Config\nimport { SingleContainerDefaultConfig, SingleContainerConfigInterface } from './config'\n\nexport class SingleContainer<Data> extends ContainerCore {\n  protected _defaultConfig = SingleContainerDefaultConfig as SingleContainerConfigInterface<Data>\n  public component: ComponentCore<Data>\n  public config: SingleContainerConfigInterface<Data> = this._defaultConfig\n\n  constructor (element: HTMLElement, config?: SingleContainerConfigInterface<Data>, data?: Data) {\n    super(element)\n\n    if (config) {\n      this.updateContainer(config, true)\n      this.component = config.component\n    }\n\n    if (data) {\n      this.setData(data, true)\n    }\n\n    // Render if component exists and has data\n    if (this.component?.datamodel.data) this.render()\n  }\n\n  public setData (data: Data, preventRender?: boolean): void {\n    const { config } = this\n\n    if (this.component) this.component.setData(data)\n    if (!preventRender) this.render()\n    config.tooltip?.hide()\n  }\n\n  public updateContainer (containerConfig: SingleContainerConfigInterface<Data>, preventRender?: boolean): void {\n    super.updateContainer(containerConfig)\n    this._removeAllChildren()\n\n    this.component = containerConfig.component\n    if (containerConfig.sizing) this.component.sizing = containerConfig.sizing\n    this.element.appendChild(this.component.element)\n\n    const tooltip = containerConfig.tooltip\n    if (tooltip) {\n      if (!tooltip.hasContainer()) tooltip.setContainer(this._container)\n      tooltip.setComponents([this.component])\n    }\n\n    const annotations = containerConfig.annotations\n    if (annotations) {\n      this.element.appendChild(annotations.element)\n    }\n\n    // Defs\n    this.element.appendChild(this._svgDefs.node())\n    this.element.appendChild(this._svgDefsExternal.node())\n\n    if (!preventRender) this.render()\n  }\n\n  public updateComponent (componentConfig: ComponentConfigInterface, preventRender?: boolean): void {\n    this.component.setConfig(componentConfig)\n    if (!preventRender) this.render()\n  }\n\n  public update (\n    containerConfig: SingleContainerConfigInterface<Data>,\n    componentConfig?: ComponentConfigInterface,\n    data?: Data\n  ): void {\n    if (containerConfig) this.updateContainer(containerConfig, true)\n    if (componentConfig) this.updateComponent(componentConfig, true)\n    if (data) this.setData(data, true)\n    this.render()\n  }\n\n  public getFitWidthScale (): number {\n    const { config, component } = this\n\n    const extendedSizeComponent = component as ExtendedSizeComponent\n    if (!extendedSizeComponent.getWidth) return 1\n\n    const componentWidth = extendedSizeComponent.getWidth() + config.margin.left + config.margin.right\n    return this.width / componentWidth\n  }\n\n  protected _preRender (): void {\n    super._preRender()\n    this.component.setSize(this.width, this.height, this.containerWidth, this.containerHeight)\n    this.config.annotations?.setSize(this.width, this.height, this.containerWidth, this.containerHeight)\n  }\n\n  protected _render (duration?: number): void {\n    const { config, component } = this\n    super._render(duration)\n\n    component.g.attr('transform', `translate(${config.margin.left},${config.margin.top})`)\n    component.render(duration)\n    config.annotations?.render(duration)\n\n    if (config.tooltip) config.tooltip.update()\n  }\n\n  // Re-defining the `render()` function to handle different sizing techniques (`Sizing.Extend` and `Sizing.FitWidth`)\n  // Not calling `super.render()` because we don't want it to interfere with setting the SVG size here.\n  public render (duration = this.config.duration): void {\n    const { config, component } = this\n\n    if (config.sizing === Sizing.Extend || config.sizing === Sizing.FitWidth) {\n      const fitToWidth = config.sizing === Sizing.FitWidth\n      const extendedSizeComponent = component as ExtendedSizeComponent\n\n      const componentWidth = extendedSizeComponent.getWidth() + config.margin.left + config.margin.right\n      const componentHeight = extendedSizeComponent.getHeight() + config.margin.top + config.margin.bottom\n      const scale = fitToWidth ? this.getFitWidthScale() : 1\n\n      const currentWidth = this.svg.attr('width')\n      const currentHeight = this.svg.attr('height')\n      const scaledWidth = componentWidth * scale\n      const scaledHeight = componentHeight * scale\n      const animated = currentWidth || currentHeight\n\n      smartTransition(this.svg, animated ? duration : 0)\n        .attr('width', scaledWidth)\n        .attr('height', scaledHeight)\n        .attr('viewBox', `${0} ${0} ${componentWidth} ${fitToWidth ? scaledHeight : componentHeight}`)\n        .attr('preserveAspectRatio', 'xMinYMin')\n    } else {\n      this.svg\n        .attr('width', this.config.width || this.containerWidth)\n        .attr('height', this.config.height || this.containerHeight)\n    }\n\n    // Set up Resize Observer\n    if (!this._resizeObserver) this._setUpResizeObserver()\n\n    // Schedule the actual rendering in the next frame\n    cancelAnimationFrame(this._renderAnimationFrameId)\n    this._renderAnimationFrameId = requestAnimationFrame(() => {\n      this._preRender()\n      this._render(duration)\n    })\n  }\n\n  protected _onResize (): void {\n    const { config } = this\n    super._onResize()\n    config.tooltip?.hide()\n  }\n\n  public destroy (): void {\n    const { component, config } = this\n    super.destroy()\n\n    component?.destroy()\n    config.tooltip?.destroy()\n    config.annotations?.destroy()\n  }\n}\n", "export class CoreDataModel<T> {\n  protected _data: T | undefined\n\n  get data (): T {\n    return this._data\n  }\n\n  set data (value: T) {\n    this._data = value\n  }\n\n  constructor (data?: T) {\n    this.data = data\n  }\n}\n", "export enum AxisType {\n  X = 'x',\n  Y = 'y',\n}\n", "export function initRange(domain, range) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: this.range(domain); break;\n    default: this.range(range).domain(domain); break;\n  }\n  return this;\n}\n\nexport function initInterpolator(domain, interpolator) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: {\n      if (typeof domain === \"function\") this.interpolator(domain);\n      else this.range(domain);\n      break;\n    }\n    default: {\n      this.domain(domain);\n      if (typeof interpolator === \"function\") this.interpolator(interpolator);\n      else this.range(interpolator);\n      break;\n    }\n  }\n  return this;\n}\n", "import {InternMap} from \"d3-array\";\nimport {initRange} from \"./init.js\";\n\nexport const implicit = Symbol(\"implicit\");\n\nexport default function ordinal() {\n  var index = new InternMap(),\n      domain = [],\n      range = [],\n      unknown = implicit;\n\n  function scale(d) {\n    let i = index.get(d);\n    if (i === undefined) {\n      if (unknown !== implicit) return unknown;\n      index.set(d, i = domain.push(d) - 1);\n    }\n    return range[i % range.length];\n  }\n\n  scale.domain = function(_) {\n    if (!arguments.length) return domain.slice();\n    domain = [], index = new InternMap();\n    for (const value of _) {\n      if (index.has(value)) continue;\n      index.set(value, domain.push(value) - 1);\n    }\n    return scale;\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = Array.from(_), scale) : range.slice();\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  scale.copy = function() {\n    return ordinal(domain, range).unknown(unknown);\n  };\n\n  initRange.apply(scale, arguments);\n\n  return scale;\n}\n", "import {range as sequence} from \"d3-array\";\nimport {initRange} from \"./init.js\";\nimport ordinal from \"./ordinal.js\";\n\nexport default function band() {\n  var scale = ordinal().unknown(undefined),\n      domain = scale.domain,\n      ordinalRange = scale.range,\n      r0 = 0,\n      r1 = 1,\n      step,\n      bandwidth,\n      round = false,\n      paddingInner = 0,\n      paddingOuter = 0,\n      align = 0.5;\n\n  delete scale.unknown;\n\n  function rescale() {\n    var n = domain().length,\n        reverse = r1 < r0,\n        start = reverse ? r1 : r0,\n        stop = reverse ? r0 : r1;\n    step = (stop - start) / Math.max(1, n - paddingInner + paddingOuter * 2);\n    if (round) step = Math.floor(step);\n    start += (stop - start - step * (n - paddingInner)) * align;\n    bandwidth = step * (1 - paddingInner);\n    if (round) start = Math.round(start), bandwidth = Math.round(bandwidth);\n    var values = sequence(n).map(function(i) { return start + step * i; });\n    return ordinalRange(reverse ? values.reverse() : values);\n  }\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain(_), rescale()) : domain();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? ([r0, r1] = _, r0 = +r0, r1 = +r1, rescale()) : [r0, r1];\n  };\n\n  scale.rangeRound = function(_) {\n    return [r0, r1] = _, r0 = +r0, r1 = +r1, round = true, rescale();\n  };\n\n  scale.bandwidth = function() {\n    return bandwidth;\n  };\n\n  scale.step = function() {\n    return step;\n  };\n\n  scale.round = function(_) {\n    return arguments.length ? (round = !!_, rescale()) : round;\n  };\n\n  scale.padding = function(_) {\n    return arguments.length ? (paddingInner = Math.min(1, paddingOuter = +_), rescale()) : paddingInner;\n  };\n\n  scale.paddingInner = function(_) {\n    return arguments.length ? (paddingInner = Math.min(1, _), rescale()) : paddingInner;\n  };\n\n  scale.paddingOuter = function(_) {\n    return arguments.length ? (paddingOuter = +_, rescale()) : paddingOuter;\n  };\n\n  scale.align = function(_) {\n    return arguments.length ? (align = Math.max(0, Math.min(1, _)), rescale()) : align;\n  };\n\n  scale.copy = function() {\n    return band(domain(), [r0, r1])\n        .round(round)\n        .paddingInner(paddingInner)\n        .paddingOuter(paddingOuter)\n        .align(align);\n  };\n\n  return initRange.apply(rescale(), arguments);\n}\n\nfunction pointish(scale) {\n  var copy = scale.copy;\n\n  scale.padding = scale.paddingOuter;\n  delete scale.paddingInner;\n  delete scale.paddingOuter;\n\n  scale.copy = function() {\n    return pointish(copy());\n  };\n\n  return scale;\n}\n\nexport function point() {\n  return pointish(band.apply(null, arguments).paddingInner(1));\n}\n", "export default function constants(x) {\n  return function() {\n    return x;\n  };\n}\n", "export default function number(x) {\n  return +x;\n}\n", "import {bisect} from \"d3-array\";\nimport {interpolate as interpolateValue, interpolateNumber, interpolateRound} from \"d3-interpolate\";\nimport constant from \"./constant.js\";\nimport number from \"./number.js\";\n\nvar unit = [0, 1];\n\nexport function identity(x) {\n  return x;\n}\n\nfunction normalize(a, b) {\n  return (b -= (a = +a))\n      ? function(x) { return (x - a) / b; }\n      : constant(isNaN(b) ? NaN : 0.5);\n}\n\nfunction clamper(a, b) {\n  var t;\n  if (a > b) t = a, a = b, b = t;\n  return function(x) { return Math.max(a, Math.min(b, x)); };\n}\n\n// normalize(a, b)(x) takes a domain value x in [a,b] and returns the corresponding parameter t in [0,1].\n// interpolate(a, b)(t) takes a parameter t in [0,1] and returns the corresponding range value x in [a,b].\nfunction bimap(domain, range, interpolate) {\n  var d0 = domain[0], d1 = domain[1], r0 = range[0], r1 = range[1];\n  if (d1 < d0) d0 = normalize(d1, d0), r0 = interpolate(r1, r0);\n  else d0 = normalize(d0, d1), r0 = interpolate(r0, r1);\n  return function(x) { return r0(d0(x)); };\n}\n\nfunction polymap(domain, range, interpolate) {\n  var j = Math.min(domain.length, range.length) - 1,\n      d = new Array(j),\n      r = new Array(j),\n      i = -1;\n\n  // Reverse descending domains.\n  if (domain[j] < domain[0]) {\n    domain = domain.slice().reverse();\n    range = range.slice().reverse();\n  }\n\n  while (++i < j) {\n    d[i] = normalize(domain[i], domain[i + 1]);\n    r[i] = interpolate(range[i], range[i + 1]);\n  }\n\n  return function(x) {\n    var i = bisect(domain, x, 1, j) - 1;\n    return r[i](d[i](x));\n  };\n}\n\nexport function copy(source, target) {\n  return target\n      .domain(source.domain())\n      .range(source.range())\n      .interpolate(source.interpolate())\n      .clamp(source.clamp())\n      .unknown(source.unknown());\n}\n\nexport function transformer() {\n  var domain = unit,\n      range = unit,\n      interpolate = interpolateValue,\n      transform,\n      untransform,\n      unknown,\n      clamp = identity,\n      piecewise,\n      output,\n      input;\n\n  function rescale() {\n    var n = Math.min(domain.length, range.length);\n    if (clamp !== identity) clamp = clamper(domain[0], domain[n - 1]);\n    piecewise = n > 2 ? polymap : bimap;\n    output = input = null;\n    return scale;\n  }\n\n  function scale(x) {\n    return x == null || isNaN(x = +x) ? unknown : (output || (output = piecewise(domain.map(transform), range, interpolate)))(transform(clamp(x)));\n  }\n\n  scale.invert = function(y) {\n    return clamp(untransform((input || (input = piecewise(range, domain.map(transform), interpolateNumber)))(y)));\n  };\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain = Array.from(_, number), rescale()) : domain.slice();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = Array.from(_), rescale()) : range.slice();\n  };\n\n  scale.rangeRound = function(_) {\n    return range = Array.from(_), interpolate = interpolateRound, rescale();\n  };\n\n  scale.clamp = function(_) {\n    return arguments.length ? (clamp = _ ? true : identity, rescale()) : clamp !== identity;\n  };\n\n  scale.interpolate = function(_) {\n    return arguments.length ? (interpolate = _, rescale()) : interpolate;\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  return function(t, u) {\n    transform = t, untransform = u;\n    return rescale();\n  };\n}\n\nexport default function continuous() {\n  return transformer()(identity, identity);\n}\n", "export default function(x) {\n  return Math.abs(x = Math.round(x)) >= 1e21\n      ? x.toLocaleString(\"en\").replace(/,/g, \"\")\n      : x.toString(10);\n}\n\n// Computes the decimal coefficient and exponent of the specified number x with\n// significant digits p, where x is positive and p is in [1, 21] or undefined.\n// For example, formatDecimalParts(1.23) returns [\"123\", 0].\nexport function formatDecimalParts(x, p) {\n  if ((i = (x = p ? x.toExponential(p - 1) : x.toExponential()).indexOf(\"e\")) < 0) return null; // NaN, ±Infinity\n  var i, coefficient = x.slice(0, i);\n\n  // The string returned by toExponential either has the form \\d\\.\\d+e[-+]\\d+\n  // (e.g., 1.2e+3) or the form \\de[-+]\\d+ (e.g., 1e+3).\n  return [\n    coefficient.length > 1 ? coefficient[0] + coefficient.slice(2) : coefficient,\n    +x.slice(i + 1)\n  ];\n}\n", "import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport default function(x) {\n  return x = formatDecimalParts(Math.abs(x)), x ? x[1] : NaN;\n}\n", "export default function(grouping, thousands) {\n  return function(value, width) {\n    var i = value.length,\n        t = [],\n        j = 0,\n        g = grouping[0],\n        length = 0;\n\n    while (i > 0 && g > 0) {\n      if (length + g + 1 > width) g = Math.max(1, width - length);\n      t.push(value.substring(i -= g, i + g));\n      if ((length += g + 1) > width) break;\n      g = grouping[j = (j + 1) % grouping.length];\n    }\n\n    return t.reverse().join(thousands);\n  };\n}\n", "export default function(numerals) {\n  return function(value) {\n    return value.replace(/[0-9]/g, function(i) {\n      return numerals[+i];\n    });\n  };\n}\n", "// [[fill]align][sign][symbol][0][width][,][.precision][~][type]\nvar re = /^(?:(.)?([<>=^]))?([+\\-( ])?([$#])?(0)?(\\d+)?(,)?(\\.\\d+)?(~)?([a-z%])?$/i;\n\nexport default function formatSpecifier(specifier) {\n  if (!(match = re.exec(specifier))) throw new Error(\"invalid format: \" + specifier);\n  var match;\n  return new FormatSpecifier({\n    fill: match[1],\n    align: match[2],\n    sign: match[3],\n    symbol: match[4],\n    zero: match[5],\n    width: match[6],\n    comma: match[7],\n    precision: match[8] && match[8].slice(1),\n    trim: match[9],\n    type: match[10]\n  });\n}\n\nformatSpecifier.prototype = FormatSpecifier.prototype; // instanceof\n\nexport function FormatSpecifier(specifier) {\n  this.fill = specifier.fill === undefined ? \" \" : specifier.fill + \"\";\n  this.align = specifier.align === undefined ? \">\" : specifier.align + \"\";\n  this.sign = specifier.sign === undefined ? \"-\" : specifier.sign + \"\";\n  this.symbol = specifier.symbol === undefined ? \"\" : specifier.symbol + \"\";\n  this.zero = !!specifier.zero;\n  this.width = specifier.width === undefined ? undefined : +specifier.width;\n  this.comma = !!specifier.comma;\n  this.precision = specifier.precision === undefined ? undefined : +specifier.precision;\n  this.trim = !!specifier.trim;\n  this.type = specifier.type === undefined ? \"\" : specifier.type + \"\";\n}\n\nFormatSpecifier.prototype.toString = function() {\n  return this.fill\n      + this.align\n      + this.sign\n      + this.symbol\n      + (this.zero ? \"0\" : \"\")\n      + (this.width === undefined ? \"\" : Math.max(1, this.width | 0))\n      + (this.comma ? \",\" : \"\")\n      + (this.precision === undefined ? \"\" : \".\" + Math.max(0, this.precision | 0))\n      + (this.trim ? \"~\" : \"\")\n      + this.type;\n};\n", "// Trims insignificant zeros, e.g., replaces 1.2000k with 1.2k.\nexport default function(s) {\n  out: for (var n = s.length, i = 1, i0 = -1, i1; i < n; ++i) {\n    switch (s[i]) {\n      case \".\": i0 = i1 = i; break;\n      case \"0\": if (i0 === 0) i0 = i; i1 = i; break;\n      default: if (!+s[i]) break out; if (i0 > 0) i0 = 0; break;\n    }\n  }\n  return i0 > 0 ? s.slice(0, i0) + s.slice(i1 + 1) : s;\n}\n", "import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport var prefixExponent;\n\nexport default function(x, p) {\n  var d = formatDecimalParts(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1],\n      i = exponent - (prefixExponent = Math.max(-8, Math.min(8, Math.floor(exponent / 3))) * 3) + 1,\n      n = coefficient.length;\n  return i === n ? coefficient\n      : i > n ? coefficient + new Array(i - n + 1).join(\"0\")\n      : i > 0 ? coefficient.slice(0, i) + \".\" + coefficient.slice(i)\n      : \"0.\" + new Array(1 - i).join(\"0\") + formatDecimalParts(x, Math.max(0, p + i - 1))[0]; // less than 1y!\n}\n", "import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport default function(x, p) {\n  var d = formatDecimalParts(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1];\n  return exponent < 0 ? \"0.\" + new Array(-exponent).join(\"0\") + coefficient\n      : coefficient.length > exponent + 1 ? coefficient.slice(0, exponent + 1) + \".\" + coefficient.slice(exponent + 1)\n      : coefficient + new Array(exponent - coefficient.length + 2).join(\"0\");\n}\n", "import formatDecimal from \"./formatDecimal.js\";\nimport formatPrefixAuto from \"./formatPrefixAuto.js\";\nimport formatRounded from \"./formatRounded.js\";\n\nexport default {\n  \"%\": (x, p) => (x * 100).toFixed(p),\n  \"b\": (x) => Math.round(x).toString(2),\n  \"c\": (x) => x + \"\",\n  \"d\": formatDecimal,\n  \"e\": (x, p) => x.toExponential(p),\n  \"f\": (x, p) => x.toFixed(p),\n  \"g\": (x, p) => x.toPrecision(p),\n  \"o\": (x) => Math.round(x).toString(8),\n  \"p\": (x, p) => formatRounded(x * 100, p),\n  \"r\": formatRounded,\n  \"s\": formatPrefixAuto,\n  \"X\": (x) => Math.round(x).toString(16).toUpperCase(),\n  \"x\": (x) => Math.round(x).toString(16)\n};\n", "export default function(x) {\n  return x;\n}\n", "import exponent from \"./exponent.js\";\nimport formatGroup from \"./formatGroup.js\";\nimport formatNumerals from \"./formatNumerals.js\";\nimport formatSpecifier from \"./formatSpecifier.js\";\nimport formatTrim from \"./formatTrim.js\";\nimport formatTypes from \"./formatTypes.js\";\nimport {prefixExponent} from \"./formatPrefixAuto.js\";\nimport identity from \"./identity.js\";\n\nvar map = Array.prototype.map,\n    prefixes = [\"y\",\"z\",\"a\",\"f\",\"p\",\"n\",\"µ\",\"m\",\"\",\"k\",\"M\",\"G\",\"T\",\"P\",\"E\",\"Z\",\"Y\"];\n\nexport default function(locale) {\n  var group = locale.grouping === undefined || locale.thousands === undefined ? identity : formatGroup(map.call(locale.grouping, Number), locale.thousands + \"\"),\n      currencyPrefix = locale.currency === undefined ? \"\" : locale.currency[0] + \"\",\n      currencySuffix = locale.currency === undefined ? \"\" : locale.currency[1] + \"\",\n      decimal = locale.decimal === undefined ? \".\" : locale.decimal + \"\",\n      numerals = locale.numerals === undefined ? identity : formatNumerals(map.call(locale.numerals, String)),\n      percent = locale.percent === undefined ? \"%\" : locale.percent + \"\",\n      minus = locale.minus === undefined ? \"−\" : locale.minus + \"\",\n      nan = locale.nan === undefined ? \"NaN\" : locale.nan + \"\";\n\n  function newFormat(specifier) {\n    specifier = formatSpecifier(specifier);\n\n    var fill = specifier.fill,\n        align = specifier.align,\n        sign = specifier.sign,\n        symbol = specifier.symbol,\n        zero = specifier.zero,\n        width = specifier.width,\n        comma = specifier.comma,\n        precision = specifier.precision,\n        trim = specifier.trim,\n        type = specifier.type;\n\n    // The \"n\" type is an alias for \",g\".\n    if (type === \"n\") comma = true, type = \"g\";\n\n    // The \"\" type, and any invalid type, is an alias for \".12~g\".\n    else if (!formatTypes[type]) precision === undefined && (precision = 12), trim = true, type = \"g\";\n\n    // If zero fill is specified, padding goes after sign and before digits.\n    if (zero || (fill === \"0\" && align === \"=\")) zero = true, fill = \"0\", align = \"=\";\n\n    // Compute the prefix and suffix.\n    // For SI-prefix, the suffix is lazily computed.\n    var prefix = symbol === \"$\" ? currencyPrefix : symbol === \"#\" && /[boxX]/.test(type) ? \"0\" + type.toLowerCase() : \"\",\n        suffix = symbol === \"$\" ? currencySuffix : /[%p]/.test(type) ? percent : \"\";\n\n    // What format function should we use?\n    // Is this an integer type?\n    // Can this type generate exponential notation?\n    var formatType = formatTypes[type],\n        maybeSuffix = /[defgprs%]/.test(type);\n\n    // Set the default precision if not specified,\n    // or clamp the specified precision to the supported range.\n    // For significant precision, it must be in [1, 21].\n    // For fixed precision, it must be in [0, 20].\n    precision = precision === undefined ? 6\n        : /[gprs]/.test(type) ? Math.max(1, Math.min(21, precision))\n        : Math.max(0, Math.min(20, precision));\n\n    function format(value) {\n      var valuePrefix = prefix,\n          valueSuffix = suffix,\n          i, n, c;\n\n      if (type === \"c\") {\n        valueSuffix = formatType(value) + valueSuffix;\n        value = \"\";\n      } else {\n        value = +value;\n\n        // Determine the sign. -0 is not less than 0, but 1 / -0 is!\n        var valueNegative = value < 0 || 1 / value < 0;\n\n        // Perform the initial formatting.\n        value = isNaN(value) ? nan : formatType(Math.abs(value), precision);\n\n        // Trim insignificant zeros.\n        if (trim) value = formatTrim(value);\n\n        // If a negative value rounds to zero after formatting, and no explicit positive sign is requested, hide the sign.\n        if (valueNegative && +value === 0 && sign !== \"+\") valueNegative = false;\n\n        // Compute the prefix and suffix.\n        valuePrefix = (valueNegative ? (sign === \"(\" ? sign : minus) : sign === \"-\" || sign === \"(\" ? \"\" : sign) + valuePrefix;\n        valueSuffix = (type === \"s\" ? prefixes[8 + prefixExponent / 3] : \"\") + valueSuffix + (valueNegative && sign === \"(\" ? \")\" : \"\");\n\n        // Break the formatted value into the integer “value” part that can be\n        // grouped, and fractional or exponential “suffix” part that is not.\n        if (maybeSuffix) {\n          i = -1, n = value.length;\n          while (++i < n) {\n            if (c = value.charCodeAt(i), 48 > c || c > 57) {\n              valueSuffix = (c === 46 ? decimal + value.slice(i + 1) : value.slice(i)) + valueSuffix;\n              value = value.slice(0, i);\n              break;\n            }\n          }\n        }\n      }\n\n      // If the fill character is not \"0\", grouping is applied before padding.\n      if (comma && !zero) value = group(value, Infinity);\n\n      // Compute the padding.\n      var length = valuePrefix.length + value.length + valueSuffix.length,\n          padding = length < width ? new Array(width - length + 1).join(fill) : \"\";\n\n      // If the fill character is \"0\", grouping is applied after padding.\n      if (comma && zero) value = group(padding + value, padding.length ? width - valueSuffix.length : Infinity), padding = \"\";\n\n      // Reconstruct the final output based on the desired alignment.\n      switch (align) {\n        case \"<\": value = valuePrefix + value + valueSuffix + padding; break;\n        case \"=\": value = valuePrefix + padding + value + valueSuffix; break;\n        case \"^\": value = padding.slice(0, length = padding.length >> 1) + valuePrefix + value + valueSuffix + padding.slice(length); break;\n        default: value = padding + valuePrefix + value + valueSuffix; break;\n      }\n\n      return numerals(value);\n    }\n\n    format.toString = function() {\n      return specifier + \"\";\n    };\n\n    return format;\n  }\n\n  function formatPrefix(specifier, value) {\n    var f = newFormat((specifier = formatSpecifier(specifier), specifier.type = \"f\", specifier)),\n        e = Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3,\n        k = Math.pow(10, -e),\n        prefix = prefixes[8 + e / 3];\n    return function(value) {\n      return f(k * value) + prefix;\n    };\n  }\n\n  return {\n    format: newFormat,\n    formatPrefix: formatPrefix\n  };\n}\n", "import formatLocale from \"./locale.js\";\n\nvar locale;\nexport var format;\nexport var formatPrefix;\n\ndefaultLocale({\n  thousands: \",\",\n  grouping: [3],\n  currency: [\"$\", \"\"]\n});\n\nexport default function defaultLocale(definition) {\n  locale = formatLocale(definition);\n  format = locale.format;\n  formatPrefix = locale.formatPrefix;\n  return locale;\n}\n", "import exponent from \"./exponent.js\";\n\nexport default function(step) {\n  return Math.max(0, -exponent(Math.abs(step)));\n}\n", "import exponent from \"./exponent.js\";\n\nexport default function(step, value) {\n  return Math.max(0, Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3 - exponent(Math.abs(step)));\n}\n", "import exponent from \"./exponent.js\";\n\nexport default function(step, max) {\n  step = Math.abs(step), max = Math.abs(max) - step;\n  return Math.max(0, exponent(max) - exponent(step)) + 1;\n}\n", "import {tickStep} from \"d3-array\";\nimport {format, formatPrefix, formatSpecifier, precisionFixed, precisionPrefix, precisionRound} from \"d3-format\";\n\nexport default function tickFormat(start, stop, count, specifier) {\n  var step = tickStep(start, stop, count),\n      precision;\n  specifier = formatSpecifier(specifier == null ? \",f\" : specifier);\n  switch (specifier.type) {\n    case \"s\": {\n      var value = Math.max(Math.abs(start), Math.abs(stop));\n      if (specifier.precision == null && !isNaN(precision = precisionPrefix(step, value))) specifier.precision = precision;\n      return formatPrefix(specifier, value);\n    }\n    case \"\":\n    case \"e\":\n    case \"g\":\n    case \"p\":\n    case \"r\": {\n      if (specifier.precision == null && !isNaN(precision = precisionRound(step, Math.max(Math.abs(start), Math.abs(stop))))) specifier.precision = precision - (specifier.type === \"e\");\n      break;\n    }\n    case \"f\":\n    case \"%\": {\n      if (specifier.precision == null && !isNaN(precision = precisionFixed(step))) specifier.precision = precision - (specifier.type === \"%\") * 2;\n      break;\n    }\n  }\n  return format(specifier);\n}\n", "import {ticks, tickIncrement} from \"d3-array\";\nimport continuous, {copy} from \"./continuous.js\";\nimport {initRange} from \"./init.js\";\nimport tickFormat from \"./tickFormat.js\";\n\nexport function linearish(scale) {\n  var domain = scale.domain;\n\n  scale.ticks = function(count) {\n    var d = domain();\n    return ticks(d[0], d[d.length - 1], count == null ? 10 : count);\n  };\n\n  scale.tickFormat = function(count, specifier) {\n    var d = domain();\n    return tickFormat(d[0], d[d.length - 1], count == null ? 10 : count, specifier);\n  };\n\n  scale.nice = function(count) {\n    if (count == null) count = 10;\n\n    var d = domain();\n    var i0 = 0;\n    var i1 = d.length - 1;\n    var start = d[i0];\n    var stop = d[i1];\n    var prestep;\n    var step;\n    var maxIter = 10;\n\n    if (stop < start) {\n      step = start, start = stop, stop = step;\n      step = i0, i0 = i1, i1 = step;\n    }\n    \n    while (maxIter-- > 0) {\n      step = tickIncrement(start, stop, count);\n      if (step === prestep) {\n        d[i0] = start\n        d[i1] = stop\n        return domain(d);\n      } else if (step > 0) {\n        start = Math.floor(start / step) * step;\n        stop = Math.ceil(stop / step) * step;\n      } else if (step < 0) {\n        start = Math.ceil(start * step) / step;\n        stop = Math.floor(stop * step) / step;\n      } else {\n        break;\n      }\n      prestep = step;\n    }\n\n    return scale;\n  };\n\n  return scale;\n}\n\nexport default function linear() {\n  var scale = continuous();\n\n  scale.copy = function() {\n    return copy(scale, linear());\n  };\n\n  initRange.apply(scale, arguments);\n\n  return linearish(scale);\n}\n", "import {linearish} from \"./linear.js\";\nimport number from \"./number.js\";\n\nexport default function identity(domain) {\n  var unknown;\n\n  function scale(x) {\n    return x == null || isNaN(x = +x) ? unknown : x;\n  }\n\n  scale.invert = scale;\n\n  scale.domain = scale.range = function(_) {\n    return arguments.length ? (domain = Array.from(_, number), scale) : domain.slice();\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  scale.copy = function() {\n    return identity(domain).unknown(unknown);\n  };\n\n  domain = arguments.length ? Array.from(domain, number) : [0, 1];\n\n  return linearish(scale);\n}\n", "export default function nice(domain, interval) {\n  domain = domain.slice();\n\n  var i0 = 0,\n      i1 = domain.length - 1,\n      x0 = domain[i0],\n      x1 = domain[i1],\n      t;\n\n  if (x1 < x0) {\n    t = i0, i0 = i1, i1 = t;\n    t = x0, x0 = x1, x1 = t;\n  }\n\n  domain[i0] = interval.floor(x0);\n  domain[i1] = interval.ceil(x1);\n  return domain;\n}\n", "import {ticks} from \"d3-array\";\nimport {format, formatSpecifier} from \"d3-format\";\nimport nice from \"./nice.js\";\nimport {copy, transformer} from \"./continuous.js\";\nimport {initRange} from \"./init.js\";\n\nfunction transformLog(x) {\n  return Math.log(x);\n}\n\nfunction transformExp(x) {\n  return Math.exp(x);\n}\n\nfunction transformLogn(x) {\n  return -Math.log(-x);\n}\n\nfunction transformExpn(x) {\n  return -Math.exp(-x);\n}\n\nfunction pow10(x) {\n  return isFinite(x) ? +(\"1e\" + x) : x < 0 ? 0 : x;\n}\n\nfunction powp(base) {\n  return base === 10 ? pow10\n      : base === Math.E ? Math.exp\n      : x => Math.pow(base, x);\n}\n\nfunction logp(base) {\n  return base === Math.E ? Math.log\n      : base === 10 && Math.log10\n      || base === 2 && Math.log2\n      || (base = Math.log(base), x => Math.log(x) / base);\n}\n\nfunction reflect(f) {\n  return (x, k) => -f(-x, k);\n}\n\nexport function loggish(transform) {\n  const scale = transform(transformLog, transformExp);\n  const domain = scale.domain;\n  let base = 10;\n  let logs;\n  let pows;\n\n  function rescale() {\n    logs = logp(base), pows = powp(base);\n    if (domain()[0] < 0) {\n      logs = reflect(logs), pows = reflect(pows);\n      transform(transformLogn, transformExpn);\n    } else {\n      transform(transformLog, transformExp);\n    }\n    return scale;\n  }\n\n  scale.base = function(_) {\n    return arguments.length ? (base = +_, rescale()) : base;\n  };\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain(_), rescale()) : domain();\n  };\n\n  scale.ticks = count => {\n    const d = domain();\n    let u = d[0];\n    let v = d[d.length - 1];\n    const r = v < u;\n\n    if (r) ([u, v] = [v, u]);\n\n    let i = logs(u);\n    let j = logs(v);\n    let k;\n    let t;\n    const n = count == null ? 10 : +count;\n    let z = [];\n\n    if (!(base % 1) && j - i < n) {\n      i = Math.floor(i), j = Math.ceil(j);\n      if (u > 0) for (; i <= j; ++i) {\n        for (k = 1; k < base; ++k) {\n          t = i < 0 ? k / pows(-i) : k * pows(i);\n          if (t < u) continue;\n          if (t > v) break;\n          z.push(t);\n        }\n      } else for (; i <= j; ++i) {\n        for (k = base - 1; k >= 1; --k) {\n          t = i > 0 ? k / pows(-i) : k * pows(i);\n          if (t < u) continue;\n          if (t > v) break;\n          z.push(t);\n        }\n      }\n      if (z.length * 2 < n) z = ticks(u, v, n);\n    } else {\n      z = ticks(i, j, Math.min(j - i, n)).map(pows);\n    }\n    return r ? z.reverse() : z;\n  };\n\n  scale.tickFormat = (count, specifier) => {\n    if (count == null) count = 10;\n    if (specifier == null) specifier = base === 10 ? \"s\" : \",\";\n    if (typeof specifier !== \"function\") {\n      if (!(base % 1) && (specifier = formatSpecifier(specifier)).precision == null) specifier.trim = true;\n      specifier = format(specifier);\n    }\n    if (count === Infinity) return specifier;\n    const k = Math.max(1, base * count / scale.ticks().length); // TODO fast estimate?\n    return d => {\n      let i = d / pows(Math.round(logs(d)));\n      if (i * base < base - 0.5) i *= base;\n      return i <= k ? specifier(d) : \"\";\n    };\n  };\n\n  scale.nice = () => {\n    return domain(nice(domain(), {\n      floor: x => pows(Math.floor(logs(x))),\n      ceil: x => pows(Math.ceil(logs(x)))\n    }));\n  };\n\n  return scale;\n}\n\nexport default function log() {\n  const scale = loggish(transformer()).domain([1, 10]);\n  scale.copy = () => copy(scale, log()).base(scale.base());\n  initRange.apply(scale, arguments);\n  return scale;\n}\n", "import {linearish} from \"./linear.js\";\nimport {copy, transformer} from \"./continuous.js\";\nimport {initRange} from \"./init.js\";\n\nfunction transformSymlog(c) {\n  return function(x) {\n    return Math.sign(x) * Math.log1p(Math.abs(x / c));\n  };\n}\n\nfunction transformSymexp(c) {\n  return function(x) {\n    return Math.sign(x) * Math.expm1(Math.abs(x)) * c;\n  };\n}\n\nexport function symlogish(transform) {\n  var c = 1, scale = transform(transformSymlog(c), transformSymexp(c));\n\n  scale.constant = function(_) {\n    return arguments.length ? transform(transformSymlog(c = +_), transformSymexp(c)) : c;\n  };\n\n  return linearish(scale);\n}\n\nexport default function symlog() {\n  var scale = symlogish(transformer());\n\n  scale.copy = function() {\n    return copy(scale, symlog()).constant(scale.constant());\n  };\n\n  return initRange.apply(scale, arguments);\n}\n", "import {linearish} from \"./linear.js\";\nimport {copy, identity, transformer} from \"./continuous.js\";\nimport {initRange} from \"./init.js\";\n\nfunction transformPow(exponent) {\n  return function(x) {\n    return x < 0 ? -Math.pow(-x, exponent) : Math.pow(x, exponent);\n  };\n}\n\nfunction transformSqrt(x) {\n  return x < 0 ? -Math.sqrt(-x) : Math.sqrt(x);\n}\n\nfunction transformSquare(x) {\n  return x < 0 ? -x * x : x * x;\n}\n\nexport function powish(transform) {\n  var scale = transform(identity, identity),\n      exponent = 1;\n\n  function rescale() {\n    return exponent === 1 ? transform(identity, identity)\n        : exponent === 0.5 ? transform(transformSqrt, transformSquare)\n        : transform(transformPow(exponent), transformPow(1 / exponent));\n  }\n\n  scale.exponent = function(_) {\n    return arguments.length ? (exponent = +_, rescale()) : exponent;\n  };\n\n  return linearish(scale);\n}\n\nexport default function pow() {\n  var scale = powish(transformer());\n\n  scale.copy = function() {\n    return copy(scale, pow()).exponent(scale.exponent());\n  };\n\n  initRange.apply(scale, arguments);\n\n  return scale;\n}\n\nexport function sqrt() {\n  return pow.apply(null, arguments).exponent(0.5);\n}\n", "import {ascending, bisect, quantileSorted as threshold} from \"d3-array\";\nimport {initRange} from \"./init.js\";\n\nexport default function quantile() {\n  var domain = [],\n      range = [],\n      thresholds = [],\n      unknown;\n\n  function rescale() {\n    var i = 0, n = Math.max(1, range.length);\n    thresholds = new Array(n - 1);\n    while (++i < n) thresholds[i - 1] = threshold(domain, i / n);\n    return scale;\n  }\n\n  function scale(x) {\n    return x == null || isNaN(x = +x) ? unknown : range[bisect(thresholds, x)];\n  }\n\n  scale.invertExtent = function(y) {\n    var i = range.indexOf(y);\n    return i < 0 ? [NaN, NaN] : [\n      i > 0 ? thresholds[i - 1] : domain[0],\n      i < thresholds.length ? thresholds[i] : domain[domain.length - 1]\n    ];\n  };\n\n  scale.domain = function(_) {\n    if (!arguments.length) return domain.slice();\n    domain = [];\n    for (let d of _) if (d != null && !isNaN(d = +d)) domain.push(d);\n    domain.sort(ascending);\n    return rescale();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = Array.from(_), rescale()) : range.slice();\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  scale.quantiles = function() {\n    return thresholds.slice();\n  };\n\n  scale.copy = function() {\n    return quantile()\n        .domain(domain)\n        .range(range)\n        .unknown(unknown);\n  };\n\n  return initRange.apply(scale, arguments);\n}\n", "import {bisect} from \"d3-array\";\nimport {linearish} from \"./linear.js\";\nimport {initRange} from \"./init.js\";\n\nexport default function quantize() {\n  var x0 = 0,\n      x1 = 1,\n      n = 1,\n      domain = [0.5],\n      range = [0, 1],\n      unknown;\n\n  function scale(x) {\n    return x != null && x <= x ? range[bisect(domain, x, 0, n)] : unknown;\n  }\n\n  function rescale() {\n    var i = -1;\n    domain = new Array(n);\n    while (++i < n) domain[i] = ((i + 1) * x1 - (i - n) * x0) / (n + 1);\n    return scale;\n  }\n\n  scale.domain = function(_) {\n    return arguments.length ? ([x0, x1] = _, x0 = +x0, x1 = +x1, rescale()) : [x0, x1];\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (n = (range = Array.from(_)).length - 1, rescale()) : range.slice();\n  };\n\n  scale.invertExtent = function(y) {\n    var i = range.indexOf(y);\n    return i < 0 ? [NaN, NaN]\n        : i < 1 ? [x0, domain[0]]\n        : i >= n ? [domain[n - 1], x1]\n        : [domain[i - 1], domain[i]];\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : scale;\n  };\n\n  scale.thresholds = function() {\n    return domain.slice();\n  };\n\n  scale.copy = function() {\n    return quantize()\n        .domain([x0, x1])\n        .range(range)\n        .unknown(unknown);\n  };\n\n  return initRange.apply(linearish(scale), arguments);\n}\n", "import {bisect} from \"d3-array\";\nimport {initRange} from \"./init.js\";\n\nexport default function threshold() {\n  var domain = [0.5],\n      range = [0, 1],\n      unknown,\n      n = 1;\n\n  function scale(x) {\n    return x != null && x <= x ? range[bisect(domain, x, 0, n)] : unknown;\n  }\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain = Array.from(_), n = Math.min(domain.length, range.length - 1), scale) : domain.slice();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = Array.from(_), n = Math.min(domain.length, range.length - 1), scale) : range.slice();\n  };\n\n  scale.invertExtent = function(y) {\n    var i = range.indexOf(y);\n    return [domain[i - 1], domain[i]];\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  scale.copy = function() {\n    return threshold()\n        .domain(domain)\n        .range(range)\n        .unknown(unknown);\n  };\n\n  return initRange.apply(scale, arguments);\n}\n", "const t0 = new Date, t1 = new Date;\n\nexport function timeInterval(floori, offseti, count, field) {\n\n  function interval(date) {\n    return floori(date = arguments.length === 0 ? new Date : new Date(+date)), date;\n  }\n\n  interval.floor = (date) => {\n    return floori(date = new Date(+date)), date;\n  };\n\n  interval.ceil = (date) => {\n    return floori(date = new Date(date - 1)), offseti(date, 1), floori(date), date;\n  };\n\n  interval.round = (date) => {\n    const d0 = interval(date), d1 = interval.ceil(date);\n    return date - d0 < d1 - date ? d0 : d1;\n  };\n\n  interval.offset = (date, step) => {\n    return offseti(date = new Date(+date), step == null ? 1 : Math.floor(step)), date;\n  };\n\n  interval.range = (start, stop, step) => {\n    const range = [];\n    start = interval.ceil(start);\n    step = step == null ? 1 : Math.floor(step);\n    if (!(start < stop) || !(step > 0)) return range; // also handles Invalid Date\n    let previous;\n    do range.push(previous = new Date(+start)), offseti(start, step), floori(start);\n    while (previous < start && start < stop);\n    return range;\n  };\n\n  interval.filter = (test) => {\n    return timeInterval((date) => {\n      if (date >= date) while (floori(date), !test(date)) date.setTime(date - 1);\n    }, (date, step) => {\n      if (date >= date) {\n        if (step < 0) while (++step <= 0) {\n          while (offseti(date, -1), !test(date)) {} // eslint-disable-line no-empty\n        } else while (--step >= 0) {\n          while (offseti(date, +1), !test(date)) {} // eslint-disable-line no-empty\n        }\n      }\n    });\n  };\n\n  if (count) {\n    interval.count = (start, end) => {\n      t0.setTime(+start), t1.setTime(+end);\n      floori(t0), floori(t1);\n      return Math.floor(count(t0, t1));\n    };\n\n    interval.every = (step) => {\n      step = Math.floor(step);\n      return !isFinite(step) || !(step > 0) ? null\n          : !(step > 1) ? interval\n          : interval.filter(field\n              ? (d) => field(d) % step === 0\n              : (d) => interval.count(0, d) % step === 0);\n    };\n  }\n\n  return interval;\n}\n", "import {timeInterval} from \"./interval.js\";\n\nexport const millisecond = timeInterval(() => {\n  // noop\n}, (date, step) => {\n  date.setTime(+date + step);\n}, (start, end) => {\n  return end - start;\n});\n\n// An optimized implementation for this simple case.\nmillisecond.every = (k) => {\n  k = Math.floor(k);\n  if (!isFinite(k) || !(k > 0)) return null;\n  if (!(k > 1)) return millisecond;\n  return timeInterval((date) => {\n    date.setTime(Math.floor(date / k) * k);\n  }, (date, step) => {\n    date.setTime(+date + step * k);\n  }, (start, end) => {\n    return (end - start) / k;\n  });\n};\n\nexport const milliseconds = millisecond.range;\n", "export const durationSecond = 1000;\nexport const durationMinute = durationSecond * 60;\nexport const durationHour = durationMinute * 60;\nexport const durationDay = durationHour * 24;\nexport const durationWeek = durationDay * 7;\nexport const durationMonth = durationDay * 30;\nexport const durationYear = durationDay * 365;\n", "import {timeInterval} from \"./interval.js\";\nimport {durationSecond} from \"./duration.js\";\n\nexport const second = timeInterval((date) => {\n  date.setTime(date - date.getMilliseconds());\n}, (date, step) => {\n  date.setTime(+date + step * durationSecond);\n}, (start, end) => {\n  return (end - start) / durationSecond;\n}, (date) => {\n  return date.getUTCSeconds();\n});\n\nexport const seconds = second.range;\n", "import {timeInterval} from \"./interval.js\";\nimport {durationMinute, durationSecond} from \"./duration.js\";\n\nexport const timeMinute = timeInterval((date) => {\n  date.setTime(date - date.getMilliseconds() - date.getSeconds() * durationSecond);\n}, (date, step) => {\n  date.setTime(+date + step * durationMinute);\n}, (start, end) => {\n  return (end - start) / durationMinute;\n}, (date) => {\n  return date.getMinutes();\n});\n\nexport const timeMinutes = timeMinute.range;\n\nexport const utcMinute = timeInterval((date) => {\n  date.setUTCSeconds(0, 0);\n}, (date, step) => {\n  date.setTime(+date + step * durationMinute);\n}, (start, end) => {\n  return (end - start) / durationMinute;\n}, (date) => {\n  return date.getUTCMinutes();\n});\n\nexport const utcMinutes = utcMinute.range;\n", "import {timeInterval} from \"./interval.js\";\nimport {durationHour, durationMinute, durationSecond} from \"./duration.js\";\n\nexport const timeHour = timeInterval((date) => {\n  date.setTime(date - date.getMilliseconds() - date.getSeconds() * durationSecond - date.getMinutes() * durationMinute);\n}, (date, step) => {\n  date.setTime(+date + step * durationHour);\n}, (start, end) => {\n  return (end - start) / durationHour;\n}, (date) => {\n  return date.getHours();\n});\n\nexport const timeHours = timeHour.range;\n\nexport const utcHour = timeInterval((date) => {\n  date.setUTCMinutes(0, 0, 0);\n}, (date, step) => {\n  date.setTime(+date + step * durationHour);\n}, (start, end) => {\n  return (end - start) / durationHour;\n}, (date) => {\n  return date.getUTCHours();\n});\n\nexport const utcHours = utcHour.range;\n", "import {timeInterval} from \"./interval.js\";\nimport {durationDay, durationMinute} from \"./duration.js\";\n\nexport const timeDay = timeInterval(\n  date => date.setHours(0, 0, 0, 0),\n  (date, step) => date.setDate(date.getDate() + step),\n  (start, end) => (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * durationMinute) / durationDay,\n  date => date.getDate() - 1\n);\n\nexport const timeDays = timeDay.range;\n\nexport const utcDay = timeInterval((date) => {\n  date.setUTCHours(0, 0, 0, 0);\n}, (date, step) => {\n  date.setUTCDate(date.getUTCDate() + step);\n}, (start, end) => {\n  return (end - start) / durationDay;\n}, (date) => {\n  return date.getUTCDate() - 1;\n});\n\nexport const utcDays = utcDay.range;\n\nexport const unixDay = timeInterval((date) => {\n  date.setUTCHours(0, 0, 0, 0);\n}, (date, step) => {\n  date.setUTCDate(date.getUTCDate() + step);\n}, (start, end) => {\n  return (end - start) / durationDay;\n}, (date) => {\n  return Math.floor(date / durationDay);\n});\n\nexport const unixDays = unixDay.range;\n", "import {timeInterval} from \"./interval.js\";\nimport {durationMinute, durationWeek} from \"./duration.js\";\n\nfunction timeWeekday(i) {\n  return timeInterval((date) => {\n    date.setDate(date.getDate() - (date.getDay() + 7 - i) % 7);\n    date.setHours(0, 0, 0, 0);\n  }, (date, step) => {\n    date.setDate(date.getDate() + step * 7);\n  }, (start, end) => {\n    return (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * durationMinute) / durationWeek;\n  });\n}\n\nexport const timeSunday = timeWeekday(0);\nexport const timeMonday = timeWeekday(1);\nexport const timeTuesday = timeWeekday(2);\nexport const timeWednesday = timeWeekday(3);\nexport const timeThursday = timeWeekday(4);\nexport const timeFriday = timeWeekday(5);\nexport const timeSaturday = timeWeekday(6);\n\nexport const timeSundays = timeSunday.range;\nexport const timeMondays = timeMonday.range;\nexport const timeTuesdays = timeTuesday.range;\nexport const timeWednesdays = timeWednesday.range;\nexport const timeThursdays = timeThursday.range;\nexport const timeFridays = timeFriday.range;\nexport const timeSaturdays = timeSaturday.range;\n\nfunction utcWeekday(i) {\n  return timeInterval((date) => {\n    date.setUTCDate(date.getUTCDate() - (date.getUTCDay() + 7 - i) % 7);\n    date.setUTCHours(0, 0, 0, 0);\n  }, (date, step) => {\n    date.setUTCDate(date.getUTCDate() + step * 7);\n  }, (start, end) => {\n    return (end - start) / durationWeek;\n  });\n}\n\nexport const utcSunday = utcWeekday(0);\nexport const utcMonday = utcWeekday(1);\nexport const utcTuesday = utcWeekday(2);\nexport const utcWednesday = utcWeekday(3);\nexport const utcThursday = utcWeekday(4);\nexport const utcFriday = utcWeekday(5);\nexport const utcSaturday = utcWeekday(6);\n\nexport const utcSundays = utcSunday.range;\nexport const utcMondays = utcMonday.range;\nexport const utcTuesdays = utcTuesday.range;\nexport const utcWednesdays = utcWednesday.range;\nexport const utcThursdays = utcThursday.range;\nexport const utcFridays = utcFriday.range;\nexport const utcSaturdays = utcSaturday.range;\n", "import {timeInterval} from \"./interval.js\";\n\nexport const timeMonth = timeInterval((date) => {\n  date.setDate(1);\n  date.setHours(0, 0, 0, 0);\n}, (date, step) => {\n  date.setMonth(date.getMonth() + step);\n}, (start, end) => {\n  return end.getMonth() - start.getMonth() + (end.getFullYear() - start.getFullYear()) * 12;\n}, (date) => {\n  return date.getMonth();\n});\n\nexport const timeMonths = timeMonth.range;\n\nexport const utcMonth = timeInterval((date) => {\n  date.setUTCDate(1);\n  date.setUTCHours(0, 0, 0, 0);\n}, (date, step) => {\n  date.setUTCMonth(date.getUTCMonth() + step);\n}, (start, end) => {\n  return end.getUTCMonth() - start.getUTCMonth() + (end.getUTCFullYear() - start.getUTCFullYear()) * 12;\n}, (date) => {\n  return date.getUTCMonth();\n});\n\nexport const utcMonths = utcMonth.range;\n", "import {timeInterval} from \"./interval.js\";\n\nexport const timeYear = timeInterval((date) => {\n  date.setMonth(0, 1);\n  date.setHours(0, 0, 0, 0);\n}, (date, step) => {\n  date.setFullYear(date.getFullYear() + step);\n}, (start, end) => {\n  return end.getFullYear() - start.getFullYear();\n}, (date) => {\n  return date.getFullYear();\n});\n\n// An optimized implementation for this simple case.\ntimeYear.every = (k) => {\n  return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : timeInterval((date) => {\n    date.setFullYear(Math.floor(date.getFullYear() / k) * k);\n    date.setMonth(0, 1);\n    date.setHours(0, 0, 0, 0);\n  }, (date, step) => {\n    date.setFullYear(date.getFullYear() + step * k);\n  });\n};\n\nexport const timeYears = timeYear.range;\n\nexport const utcYear = timeInterval((date) => {\n  date.setUTCMonth(0, 1);\n  date.setUTCHours(0, 0, 0, 0);\n}, (date, step) => {\n  date.setUTCFullYear(date.getUTCFullYear() + step);\n}, (start, end) => {\n  return end.getUTCFullYear() - start.getUTCFullYear();\n}, (date) => {\n  return date.getUTCFullYear();\n});\n\n// An optimized implementation for this simple case.\nutcYear.every = (k) => {\n  return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : timeInterval((date) => {\n    date.setUTCFullYear(Math.floor(date.getUTCFullYear() / k) * k);\n    date.setUTCMonth(0, 1);\n    date.setUTCHours(0, 0, 0, 0);\n  }, (date, step) => {\n    date.setUTCFullYear(date.getUTCFullYear() + step * k);\n  });\n};\n\nexport const utcYears = utcYear.range;\n", "import {bisector, tickStep} from \"d3-array\";\nimport {durationDay, durationHour, durationMinute, durationMonth, durationSecond, durationWeek, durationYear} from \"./duration.js\";\nimport {millisecond} from \"./millisecond.js\";\nimport {second} from \"./second.js\";\nimport {timeMinute, utcMinute} from \"./minute.js\";\nimport {timeHour, utcHour} from \"./hour.js\";\nimport {timeDay, unixDay} from \"./day.js\";\nimport {timeSunday, utcSunday} from \"./week.js\";\nimport {timeMonth, utcMonth} from \"./month.js\";\nimport {timeYear, utcYear} from \"./year.js\";\n\nfunction ticker(year, month, week, day, hour, minute) {\n\n  const tickIntervals = [\n    [second,  1,      durationSecond],\n    [second,  5,  5 * durationSecond],\n    [second, 15, 15 * durationSecond],\n    [second, 30, 30 * durationSecond],\n    [minute,  1,      durationMinute],\n    [minute,  5,  5 * durationMinute],\n    [minute, 15, 15 * durationMinute],\n    [minute, 30, 30 * durationMinute],\n    [  hour,  1,      durationHour  ],\n    [  hour,  3,  3 * durationHour  ],\n    [  hour,  6,  6 * durationHour  ],\n    [  hour, 12, 12 * durationHour  ],\n    [   day,  1,      durationDay   ],\n    [   day,  2,  2 * durationDay   ],\n    [  week,  1,      durationWeek  ],\n    [ month,  1,      durationMonth ],\n    [ month,  3,  3 * durationMonth ],\n    [  year,  1,      durationYear  ]\n  ];\n\n  function ticks(start, stop, count) {\n    const reverse = stop < start;\n    if (reverse) [start, stop] = [stop, start];\n    const interval = count && typeof count.range === \"function\" ? count : tickInterval(start, stop, count);\n    const ticks = interval ? interval.range(start, +stop + 1) : []; // inclusive stop\n    return reverse ? ticks.reverse() : ticks;\n  }\n\n  function tickInterval(start, stop, count) {\n    const target = Math.abs(stop - start) / count;\n    const i = bisector(([,, step]) => step).right(tickIntervals, target);\n    if (i === tickIntervals.length) return year.every(tickStep(start / durationYear, stop / durationYear, count));\n    if (i === 0) return millisecond.every(Math.max(tickStep(start, stop, count), 1));\n    const [t, step] = tickIntervals[target / tickIntervals[i - 1][2] < tickIntervals[i][2] / target ? i - 1 : i];\n    return t.every(step);\n  }\n\n  return [ticks, tickInterval];\n}\n\nconst [utcTicks, utcTickInterval] = ticker(utcYear, utcMonth, utcSunday, unixDay, utcHour, utcMinute);\nconst [timeTicks, timeTickInterval] = ticker(timeYear, timeMonth, timeSunday, timeDay, timeHour, timeMinute);\n\nexport {utcTicks, utcTickInterval, timeTicks, timeTickInterval};\n", "import {\n  timeDay,\n  timeSunday,\n  timeMonday,\n  timeThursday,\n  timeYear,\n  utcDay,\n  utcSunday,\n  utcMonday,\n  utcThursday,\n  utcYear\n} from \"d3-time\";\n\nfunction localDate(d) {\n  if (0 <= d.y && d.y < 100) {\n    var date = new Date(-1, d.m, d.d, d.H, d.M, d.S, d.L);\n    date.setFullYear(d.y);\n    return date;\n  }\n  return new Date(d.y, d.m, d.d, d.H, d.M, d.S, d.L);\n}\n\nfunction utcDate(d) {\n  if (0 <= d.y && d.y < 100) {\n    var date = new Date(Date.UTC(-1, d.m, d.d, d.H, d.M, d.S, d.L));\n    date.setUTCFullYear(d.y);\n    return date;\n  }\n  return new Date(Date.UTC(d.y, d.m, d.d, d.H, d.M, d.S, d.L));\n}\n\nfunction newDate(y, m, d) {\n  return {y: y, m: m, d: d, H: 0, M: 0, S: 0, L: 0};\n}\n\nexport default function formatLocale(locale) {\n  var locale_dateTime = locale.dateTime,\n      locale_date = locale.date,\n      locale_time = locale.time,\n      locale_periods = locale.periods,\n      locale_weekdays = locale.days,\n      locale_shortWeekdays = locale.shortDays,\n      locale_months = locale.months,\n      locale_shortMonths = locale.shortMonths;\n\n  var periodRe = formatRe(locale_periods),\n      periodLookup = formatLookup(locale_periods),\n      weekdayRe = formatRe(locale_weekdays),\n      weekdayLookup = formatLookup(locale_weekdays),\n      shortWeekdayRe = formatRe(locale_shortWeekdays),\n      shortWeekdayLookup = formatLookup(locale_shortWeekdays),\n      monthRe = formatRe(locale_months),\n      monthLookup = formatLookup(locale_months),\n      shortMonthRe = formatRe(locale_shortMonths),\n      shortMonthLookup = formatLookup(locale_shortMonths);\n\n  var formats = {\n    \"a\": formatShortWeekday,\n    \"A\": formatWeekday,\n    \"b\": formatShortMonth,\n    \"B\": formatMonth,\n    \"c\": null,\n    \"d\": formatDayOfMonth,\n    \"e\": formatDayOfMonth,\n    \"f\": formatMicroseconds,\n    \"g\": formatYearISO,\n    \"G\": formatFullYearISO,\n    \"H\": formatHour24,\n    \"I\": formatHour12,\n    \"j\": formatDayOfYear,\n    \"L\": formatMilliseconds,\n    \"m\": formatMonthNumber,\n    \"M\": formatMinutes,\n    \"p\": formatPeriod,\n    \"q\": formatQuarter,\n    \"Q\": formatUnixTimestamp,\n    \"s\": formatUnixTimestampSeconds,\n    \"S\": formatSeconds,\n    \"u\": formatWeekdayNumberMonday,\n    \"U\": formatWeekNumberSunday,\n    \"V\": formatWeekNumberISO,\n    \"w\": formatWeekdayNumberSunday,\n    \"W\": formatWeekNumberMonday,\n    \"x\": null,\n    \"X\": null,\n    \"y\": formatYear,\n    \"Y\": formatFullYear,\n    \"Z\": formatZone,\n    \"%\": formatLiteralPercent\n  };\n\n  var utcFormats = {\n    \"a\": formatUTCShortWeekday,\n    \"A\": formatUTCWeekday,\n    \"b\": formatUTCShortMonth,\n    \"B\": formatUTCMonth,\n    \"c\": null,\n    \"d\": formatUTCDayOfMonth,\n    \"e\": formatUTCDayOfMonth,\n    \"f\": formatUTCMicroseconds,\n    \"g\": formatUTCYearISO,\n    \"G\": formatUTCFullYearISO,\n    \"H\": formatUTCHour24,\n    \"I\": formatUTCHour12,\n    \"j\": formatUTCDayOfYear,\n    \"L\": formatUTCMilliseconds,\n    \"m\": formatUTCMonthNumber,\n    \"M\": formatUTCMinutes,\n    \"p\": formatUTCPeriod,\n    \"q\": formatUTCQuarter,\n    \"Q\": formatUnixTimestamp,\n    \"s\": formatUnixTimestampSeconds,\n    \"S\": formatUTCSeconds,\n    \"u\": formatUTCWeekdayNumberMonday,\n    \"U\": formatUTCWeekNumberSunday,\n    \"V\": formatUTCWeekNumberISO,\n    \"w\": formatUTCWeekdayNumberSunday,\n    \"W\": formatUTCWeekNumberMonday,\n    \"x\": null,\n    \"X\": null,\n    \"y\": formatUTCYear,\n    \"Y\": formatUTCFullYear,\n    \"Z\": formatUTCZone,\n    \"%\": formatLiteralPercent\n  };\n\n  var parses = {\n    \"a\": parseShortWeekday,\n    \"A\": parseWeekday,\n    \"b\": parseShortMonth,\n    \"B\": parseMonth,\n    \"c\": parseLocaleDateTime,\n    \"d\": parseDayOfMonth,\n    \"e\": parseDayOfMonth,\n    \"f\": parseMicroseconds,\n    \"g\": parseYear,\n    \"G\": parseFullYear,\n    \"H\": parseHour24,\n    \"I\": parseHour24,\n    \"j\": parseDayOfYear,\n    \"L\": parseMilliseconds,\n    \"m\": parseMonthNumber,\n    \"M\": parseMinutes,\n    \"p\": parsePeriod,\n    \"q\": parseQuarter,\n    \"Q\": parseUnixTimestamp,\n    \"s\": parseUnixTimestampSeconds,\n    \"S\": parseSeconds,\n    \"u\": parseWeekdayNumberMonday,\n    \"U\": parseWeekNumberSunday,\n    \"V\": parseWeekNumberISO,\n    \"w\": parseWeekdayNumberSunday,\n    \"W\": parseWeekNumberMonday,\n    \"x\": parseLocaleDate,\n    \"X\": parseLocaleTime,\n    \"y\": parseYear,\n    \"Y\": parseFullYear,\n    \"Z\": parseZone,\n    \"%\": parseLiteralPercent\n  };\n\n  // These recursive directive definitions must be deferred.\n  formats.x = newFormat(locale_date, formats);\n  formats.X = newFormat(locale_time, formats);\n  formats.c = newFormat(locale_dateTime, formats);\n  utcFormats.x = newFormat(locale_date, utcFormats);\n  utcFormats.X = newFormat(locale_time, utcFormats);\n  utcFormats.c = newFormat(locale_dateTime, utcFormats);\n\n  function newFormat(specifier, formats) {\n    return function(date) {\n      var string = [],\n          i = -1,\n          j = 0,\n          n = specifier.length,\n          c,\n          pad,\n          format;\n\n      if (!(date instanceof Date)) date = new Date(+date);\n\n      while (++i < n) {\n        if (specifier.charCodeAt(i) === 37) {\n          string.push(specifier.slice(j, i));\n          if ((pad = pads[c = specifier.charAt(++i)]) != null) c = specifier.charAt(++i);\n          else pad = c === \"e\" ? \" \" : \"0\";\n          if (format = formats[c]) c = format(date, pad);\n          string.push(c);\n          j = i + 1;\n        }\n      }\n\n      string.push(specifier.slice(j, i));\n      return string.join(\"\");\n    };\n  }\n\n  function newParse(specifier, Z) {\n    return function(string) {\n      var d = newDate(1900, undefined, 1),\n          i = parseSpecifier(d, specifier, string += \"\", 0),\n          week, day;\n      if (i != string.length) return null;\n\n      // If a UNIX timestamp is specified, return it.\n      if (\"Q\" in d) return new Date(d.Q);\n      if (\"s\" in d) return new Date(d.s * 1000 + (\"L\" in d ? d.L : 0));\n\n      // If this is utcParse, never use the local timezone.\n      if (Z && !(\"Z\" in d)) d.Z = 0;\n\n      // The am-pm flag is 0 for AM, and 1 for PM.\n      if (\"p\" in d) d.H = d.H % 12 + d.p * 12;\n\n      // If the month was not specified, inherit from the quarter.\n      if (d.m === undefined) d.m = \"q\" in d ? d.q : 0;\n\n      // Convert day-of-week and week-of-year to day-of-year.\n      if (\"V\" in d) {\n        if (d.V < 1 || d.V > 53) return null;\n        if (!(\"w\" in d)) d.w = 1;\n        if (\"Z\" in d) {\n          week = utcDate(newDate(d.y, 0, 1)), day = week.getUTCDay();\n          week = day > 4 || day === 0 ? utcMonday.ceil(week) : utcMonday(week);\n          week = utcDay.offset(week, (d.V - 1) * 7);\n          d.y = week.getUTCFullYear();\n          d.m = week.getUTCMonth();\n          d.d = week.getUTCDate() + (d.w + 6) % 7;\n        } else {\n          week = localDate(newDate(d.y, 0, 1)), day = week.getDay();\n          week = day > 4 || day === 0 ? timeMonday.ceil(week) : timeMonday(week);\n          week = timeDay.offset(week, (d.V - 1) * 7);\n          d.y = week.getFullYear();\n          d.m = week.getMonth();\n          d.d = week.getDate() + (d.w + 6) % 7;\n        }\n      } else if (\"W\" in d || \"U\" in d) {\n        if (!(\"w\" in d)) d.w = \"u\" in d ? d.u % 7 : \"W\" in d ? 1 : 0;\n        day = \"Z\" in d ? utcDate(newDate(d.y, 0, 1)).getUTCDay() : localDate(newDate(d.y, 0, 1)).getDay();\n        d.m = 0;\n        d.d = \"W\" in d ? (d.w + 6) % 7 + d.W * 7 - (day + 5) % 7 : d.w + d.U * 7 - (day + 6) % 7;\n      }\n\n      // If a time zone is specified, all fields are interpreted as UTC and then\n      // offset according to the specified time zone.\n      if (\"Z\" in d) {\n        d.H += d.Z / 100 | 0;\n        d.M += d.Z % 100;\n        return utcDate(d);\n      }\n\n      // Otherwise, all fields are in local time.\n      return localDate(d);\n    };\n  }\n\n  function parseSpecifier(d, specifier, string, j) {\n    var i = 0,\n        n = specifier.length,\n        m = string.length,\n        c,\n        parse;\n\n    while (i < n) {\n      if (j >= m) return -1;\n      c = specifier.charCodeAt(i++);\n      if (c === 37) {\n        c = specifier.charAt(i++);\n        parse = parses[c in pads ? specifier.charAt(i++) : c];\n        if (!parse || ((j = parse(d, string, j)) < 0)) return -1;\n      } else if (c != string.charCodeAt(j++)) {\n        return -1;\n      }\n    }\n\n    return j;\n  }\n\n  function parsePeriod(d, string, i) {\n    var n = periodRe.exec(string.slice(i));\n    return n ? (d.p = periodLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n  }\n\n  function parseShortWeekday(d, string, i) {\n    var n = shortWeekdayRe.exec(string.slice(i));\n    return n ? (d.w = shortWeekdayLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n  }\n\n  function parseWeekday(d, string, i) {\n    var n = weekdayRe.exec(string.slice(i));\n    return n ? (d.w = weekdayLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n  }\n\n  function parseShortMonth(d, string, i) {\n    var n = shortMonthRe.exec(string.slice(i));\n    return n ? (d.m = shortMonthLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n  }\n\n  function parseMonth(d, string, i) {\n    var n = monthRe.exec(string.slice(i));\n    return n ? (d.m = monthLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n  }\n\n  function parseLocaleDateTime(d, string, i) {\n    return parseSpecifier(d, locale_dateTime, string, i);\n  }\n\n  function parseLocaleDate(d, string, i) {\n    return parseSpecifier(d, locale_date, string, i);\n  }\n\n  function parseLocaleTime(d, string, i) {\n    return parseSpecifier(d, locale_time, string, i);\n  }\n\n  function formatShortWeekday(d) {\n    return locale_shortWeekdays[d.getDay()];\n  }\n\n  function formatWeekday(d) {\n    return locale_weekdays[d.getDay()];\n  }\n\n  function formatShortMonth(d) {\n    return locale_shortMonths[d.getMonth()];\n  }\n\n  function formatMonth(d) {\n    return locale_months[d.getMonth()];\n  }\n\n  function formatPeriod(d) {\n    return locale_periods[+(d.getHours() >= 12)];\n  }\n\n  function formatQuarter(d) {\n    return 1 + ~~(d.getMonth() / 3);\n  }\n\n  function formatUTCShortWeekday(d) {\n    return locale_shortWeekdays[d.getUTCDay()];\n  }\n\n  function formatUTCWeekday(d) {\n    return locale_weekdays[d.getUTCDay()];\n  }\n\n  function formatUTCShortMonth(d) {\n    return locale_shortMonths[d.getUTCMonth()];\n  }\n\n  function formatUTCMonth(d) {\n    return locale_months[d.getUTCMonth()];\n  }\n\n  function formatUTCPeriod(d) {\n    return locale_periods[+(d.getUTCHours() >= 12)];\n  }\n\n  function formatUTCQuarter(d) {\n    return 1 + ~~(d.getUTCMonth() / 3);\n  }\n\n  return {\n    format: function(specifier) {\n      var f = newFormat(specifier += \"\", formats);\n      f.toString = function() { return specifier; };\n      return f;\n    },\n    parse: function(specifier) {\n      var p = newParse(specifier += \"\", false);\n      p.toString = function() { return specifier; };\n      return p;\n    },\n    utcFormat: function(specifier) {\n      var f = newFormat(specifier += \"\", utcFormats);\n      f.toString = function() { return specifier; };\n      return f;\n    },\n    utcParse: function(specifier) {\n      var p = newParse(specifier += \"\", true);\n      p.toString = function() { return specifier; };\n      return p;\n    }\n  };\n}\n\nvar pads = {\"-\": \"\", \"_\": \" \", \"0\": \"0\"},\n    numberRe = /^\\s*\\d+/, // note: ignores next directive\n    percentRe = /^%/,\n    requoteRe = /[\\\\^$*+?|[\\]().{}]/g;\n\nfunction pad(value, fill, width) {\n  var sign = value < 0 ? \"-\" : \"\",\n      string = (sign ? -value : value) + \"\",\n      length = string.length;\n  return sign + (length < width ? new Array(width - length + 1).join(fill) + string : string);\n}\n\nfunction requote(s) {\n  return s.replace(requoteRe, \"\\\\$&\");\n}\n\nfunction formatRe(names) {\n  return new RegExp(\"^(?:\" + names.map(requote).join(\"|\") + \")\", \"i\");\n}\n\nfunction formatLookup(names) {\n  return new Map(names.map((name, i) => [name.toLowerCase(), i]));\n}\n\nfunction parseWeekdayNumberSunday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 1));\n  return n ? (d.w = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekdayNumberMonday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 1));\n  return n ? (d.u = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberSunday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.U = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberISO(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.V = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberMonday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.W = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseFullYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 4));\n  return n ? (d.y = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.y = +n[0] + (+n[0] > 68 ? 1900 : 2000), i + n[0].length) : -1;\n}\n\nfunction parseZone(d, string, i) {\n  var n = /^(Z)|([+-]\\d\\d)(?::?(\\d\\d))?/.exec(string.slice(i, i + 6));\n  return n ? (d.Z = n[1] ? 0 : -(n[2] + (n[3] || \"00\")), i + n[0].length) : -1;\n}\n\nfunction parseQuarter(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 1));\n  return n ? (d.q = n[0] * 3 - 3, i + n[0].length) : -1;\n}\n\nfunction parseMonthNumber(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.m = n[0] - 1, i + n[0].length) : -1;\n}\n\nfunction parseDayOfMonth(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.d = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseDayOfYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 3));\n  return n ? (d.m = 0, d.d = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseHour24(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.H = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMinutes(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.M = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseSeconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.S = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMilliseconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 3));\n  return n ? (d.L = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMicroseconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 6));\n  return n ? (d.L = Math.floor(n[0] / 1000), i + n[0].length) : -1;\n}\n\nfunction parseLiteralPercent(d, string, i) {\n  var n = percentRe.exec(string.slice(i, i + 1));\n  return n ? i + n[0].length : -1;\n}\n\nfunction parseUnixTimestamp(d, string, i) {\n  var n = numberRe.exec(string.slice(i));\n  return n ? (d.Q = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseUnixTimestampSeconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i));\n  return n ? (d.s = +n[0], i + n[0].length) : -1;\n}\n\nfunction formatDayOfMonth(d, p) {\n  return pad(d.getDate(), p, 2);\n}\n\nfunction formatHour24(d, p) {\n  return pad(d.getHours(), p, 2);\n}\n\nfunction formatHour12(d, p) {\n  return pad(d.getHours() % 12 || 12, p, 2);\n}\n\nfunction formatDayOfYear(d, p) {\n  return pad(1 + timeDay.count(timeYear(d), d), p, 3);\n}\n\nfunction formatMilliseconds(d, p) {\n  return pad(d.getMilliseconds(), p, 3);\n}\n\nfunction formatMicroseconds(d, p) {\n  return formatMilliseconds(d, p) + \"000\";\n}\n\nfunction formatMonthNumber(d, p) {\n  return pad(d.getMonth() + 1, p, 2);\n}\n\nfunction formatMinutes(d, p) {\n  return pad(d.getMinutes(), p, 2);\n}\n\nfunction formatSeconds(d, p) {\n  return pad(d.getSeconds(), p, 2);\n}\n\nfunction formatWeekdayNumberMonday(d) {\n  var day = d.getDay();\n  return day === 0 ? 7 : day;\n}\n\nfunction formatWeekNumberSunday(d, p) {\n  return pad(timeSunday.count(timeYear(d) - 1, d), p, 2);\n}\n\nfunction dISO(d) {\n  var day = d.getDay();\n  return (day >= 4 || day === 0) ? timeThursday(d) : timeThursday.ceil(d);\n}\n\nfunction formatWeekNumberISO(d, p) {\n  d = dISO(d);\n  return pad(timeThursday.count(timeYear(d), d) + (timeYear(d).getDay() === 4), p, 2);\n}\n\nfunction formatWeekdayNumberSunday(d) {\n  return d.getDay();\n}\n\nfunction formatWeekNumberMonday(d, p) {\n  return pad(timeMonday.count(timeYear(d) - 1, d), p, 2);\n}\n\nfunction formatYear(d, p) {\n  return pad(d.getFullYear() % 100, p, 2);\n}\n\nfunction formatYearISO(d, p) {\n  d = dISO(d);\n  return pad(d.getFullYear() % 100, p, 2);\n}\n\nfunction formatFullYear(d, p) {\n  return pad(d.getFullYear() % 10000, p, 4);\n}\n\nfunction formatFullYearISO(d, p) {\n  var day = d.getDay();\n  d = (day >= 4 || day === 0) ? timeThursday(d) : timeThursday.ceil(d);\n  return pad(d.getFullYear() % 10000, p, 4);\n}\n\nfunction formatZone(d) {\n  var z = d.getTimezoneOffset();\n  return (z > 0 ? \"-\" : (z *= -1, \"+\"))\n      + pad(z / 60 | 0, \"0\", 2)\n      + pad(z % 60, \"0\", 2);\n}\n\nfunction formatUTCDayOfMonth(d, p) {\n  return pad(d.getUTCDate(), p, 2);\n}\n\nfunction formatUTCHour24(d, p) {\n  return pad(d.getUTCHours(), p, 2);\n}\n\nfunction formatUTCHour12(d, p) {\n  return pad(d.getUTCHours() % 12 || 12, p, 2);\n}\n\nfunction formatUTCDayOfYear(d, p) {\n  return pad(1 + utcDay.count(utcYear(d), d), p, 3);\n}\n\nfunction formatUTCMilliseconds(d, p) {\n  return pad(d.getUTCMilliseconds(), p, 3);\n}\n\nfunction formatUTCMicroseconds(d, p) {\n  return formatUTCMilliseconds(d, p) + \"000\";\n}\n\nfunction formatUTCMonthNumber(d, p) {\n  return pad(d.getUTCMonth() + 1, p, 2);\n}\n\nfunction formatUTCMinutes(d, p) {\n  return pad(d.getUTCMinutes(), p, 2);\n}\n\nfunction formatUTCSeconds(d, p) {\n  return pad(d.getUTCSeconds(), p, 2);\n}\n\nfunction formatUTCWeekdayNumberMonday(d) {\n  var dow = d.getUTCDay();\n  return dow === 0 ? 7 : dow;\n}\n\nfunction formatUTCWeekNumberSunday(d, p) {\n  return pad(utcSunday.count(utcYear(d) - 1, d), p, 2);\n}\n\nfunction UTCdISO(d) {\n  var day = d.getUTCDay();\n  return (day >= 4 || day === 0) ? utcThursday(d) : utcThursday.ceil(d);\n}\n\nfunction formatUTCWeekNumberISO(d, p) {\n  d = UTCdISO(d);\n  return pad(utcThursday.count(utcYear(d), d) + (utcYear(d).getUTCDay() === 4), p, 2);\n}\n\nfunction formatUTCWeekdayNumberSunday(d) {\n  return d.getUTCDay();\n}\n\nfunction formatUTCWeekNumberMonday(d, p) {\n  return pad(utcMonday.count(utcYear(d) - 1, d), p, 2);\n}\n\nfunction formatUTCYear(d, p) {\n  return pad(d.getUTCFullYear() % 100, p, 2);\n}\n\nfunction formatUTCYearISO(d, p) {\n  d = UTCdISO(d);\n  return pad(d.getUTCFullYear() % 100, p, 2);\n}\n\nfunction formatUTCFullYear(d, p) {\n  return pad(d.getUTCFullYear() % 10000, p, 4);\n}\n\nfunction formatUTCFullYearISO(d, p) {\n  var day = d.getUTCDay();\n  d = (day >= 4 || day === 0) ? utcThursday(d) : utcThursday.ceil(d);\n  return pad(d.getUTCFullYear() % 10000, p, 4);\n}\n\nfunction formatUTCZone() {\n  return \"+0000\";\n}\n\nfunction formatLiteralPercent() {\n  return \"%\";\n}\n\nfunction formatUnixTimestamp(d) {\n  return +d;\n}\n\nfunction formatUnixTimestampSeconds(d) {\n  return Math.floor(+d / 1000);\n}\n", "import formatLocale from \"./locale.js\";\n\nvar locale;\nexport var timeFormat;\nexport var timeParse;\nexport var utcFormat;\nexport var utcParse;\n\ndefaultLocale({\n  dateTime: \"%x, %X\",\n  date: \"%-m/%-d/%Y\",\n  time: \"%-I:%M:%S %p\",\n  periods: [\"AM\", \"PM\"],\n  days: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"],\n  shortDays: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"],\n  months: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\n  shortMonths: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"]\n});\n\nexport default function defaultLocale(definition) {\n  locale = formatLocale(definition);\n  timeFormat = locale.format;\n  timeParse = locale.parse;\n  utcFormat = locale.utcFormat;\n  utcParse = locale.utcParse;\n  return locale;\n}\n", "import {utcFormat} from \"./defaultLocale.js\";\n\nexport var isoSpecifier = \"%Y-%m-%dT%H:%M:%S.%LZ\";\n\nfunction formatIsoNative(date) {\n  return date.toISOString();\n}\n\nvar formatIso = Date.prototype.toISOString\n    ? formatIsoNative\n    : utcFormat(isoSpecifier);\n\nexport default formatIso;\n", "import {isoSpecifier} from \"./isoFormat.js\";\nimport {utcParse} from \"./defaultLocale.js\";\n\nfunction parseIsoNative(string) {\n  var date = new Date(string);\n  return isNaN(date) ? null : date;\n}\n\nvar parseIso = +new Date(\"2000-01-01T00:00:00.000Z\")\n    ? parseIsoNative\n    : utcParse(isoSpecifier);\n\nexport default parseIso;\n", "import {timeYear, timeMonth, timeWeek, timeDay, timeHour, timeMinute, timeSecond, timeTicks, timeTickInterval} from \"d3-time\";\nimport {timeFormat} from \"d3-time-format\";\nimport continuous, {copy} from \"./continuous.js\";\nimport {initRange} from \"./init.js\";\nimport nice from \"./nice.js\";\n\nfunction date(t) {\n  return new Date(t);\n}\n\nfunction number(t) {\n  return t instanceof Date ? +t : +new Date(+t);\n}\n\nexport function calendar(ticks, tickInterval, year, month, week, day, hour, minute, second, format) {\n  var scale = continuous(),\n      invert = scale.invert,\n      domain = scale.domain;\n\n  var formatMillisecond = format(\".%L\"),\n      formatSecond = format(\":%S\"),\n      formatMinute = format(\"%I:%M\"),\n      formatHour = format(\"%I %p\"),\n      formatDay = format(\"%a %d\"),\n      formatWeek = format(\"%b %d\"),\n      formatMonth = format(\"%B\"),\n      formatYear = format(\"%Y\");\n\n  function tickFormat(date) {\n    return (second(date) < date ? formatMillisecond\n        : minute(date) < date ? formatSecond\n        : hour(date) < date ? formatMinute\n        : day(date) < date ? formatHour\n        : month(date) < date ? (week(date) < date ? formatDay : formatWeek)\n        : year(date) < date ? formatMonth\n        : formatYear)(date);\n  }\n\n  scale.invert = function(y) {\n    return new Date(invert(y));\n  };\n\n  scale.domain = function(_) {\n    return arguments.length ? domain(Array.from(_, number)) : domain().map(date);\n  };\n\n  scale.ticks = function(interval) {\n    var d = domain();\n    return ticks(d[0], d[d.length - 1], interval == null ? 10 : interval);\n  };\n\n  scale.tickFormat = function(count, specifier) {\n    return specifier == null ? tickFormat : format(specifier);\n  };\n\n  scale.nice = function(interval) {\n    var d = domain();\n    if (!interval || typeof interval.range !== \"function\") interval = tickInterval(d[0], d[d.length - 1], interval == null ? 10 : interval);\n    return interval ? domain(nice(d, interval)) : scale;\n  };\n\n  scale.copy = function() {\n    return copy(scale, calendar(ticks, tickInterval, year, month, week, day, hour, minute, second, format));\n  };\n\n  return scale;\n}\n\nexport default function time() {\n  return initRange.apply(calendar(timeTicks, timeTickInterval, timeYear, timeMonth, timeWeek, timeDay, timeHour, timeMinute, timeSecond, timeFormat).domain([new Date(2000, 0, 1), new Date(2000, 0, 2)]), arguments);\n}\n", "import {utcYear, utcMonth, utcWeek, utcDay, utcHour, utcMinute, utcSecond, utcTicks, utcTickInterval} from \"d3-time\";\nimport {utcFormat} from \"d3-time-format\";\nimport {calendar} from \"./time.js\";\nimport {initRange} from \"./init.js\";\n\nexport default function utcTime() {\n  return initRange.apply(calendar(utcTicks, utcTickInterval, utcYear, utcMonth, utcWeek, utcDay, utcHour, utcMinute, utcSecond, utcFormat).domain([Date.UTC(2000, 0, 1), Date.UTC(2000, 0, 2)]), arguments);\n}\n", "import {interpolate, interpolateRound} from \"d3-interpolate\";\nimport {identity} from \"./continuous.js\";\nimport {initInterpolator} from \"./init.js\";\nimport {linearish} from \"./linear.js\";\nimport {loggish} from \"./log.js\";\nimport {symlogish} from \"./symlog.js\";\nimport {powish} from \"./pow.js\";\n\nfunction transformer() {\n  var x0 = 0,\n      x1 = 1,\n      t0,\n      t1,\n      k10,\n      transform,\n      interpolator = identity,\n      clamp = false,\n      unknown;\n\n  function scale(x) {\n    return x == null || isNaN(x = +x) ? unknown : interpolator(k10 === 0 ? 0.5 : (x = (transform(x) - t0) * k10, clamp ? Math.max(0, Math.min(1, x)) : x));\n  }\n\n  scale.domain = function(_) {\n    return arguments.length ? ([x0, x1] = _, t0 = transform(x0 = +x0), t1 = transform(x1 = +x1), k10 = t0 === t1 ? 0 : 1 / (t1 - t0), scale) : [x0, x1];\n  };\n\n  scale.clamp = function(_) {\n    return arguments.length ? (clamp = !!_, scale) : clamp;\n  };\n\n  scale.interpolator = function(_) {\n    return arguments.length ? (interpolator = _, scale) : interpolator;\n  };\n\n  function range(interpolate) {\n    return function(_) {\n      var r0, r1;\n      return arguments.length ? ([r0, r1] = _, interpolator = interpolate(r0, r1), scale) : [interpolator(0), interpolator(1)];\n    };\n  }\n\n  scale.range = range(interpolate);\n\n  scale.rangeRound = range(interpolateRound);\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  return function(t) {\n    transform = t, t0 = t(x0), t1 = t(x1), k10 = t0 === t1 ? 0 : 1 / (t1 - t0);\n    return scale;\n  };\n}\n\nexport function copy(source, target) {\n  return target\n      .domain(source.domain())\n      .interpolator(source.interpolator())\n      .clamp(source.clamp())\n      .unknown(source.unknown());\n}\n\nexport default function sequential() {\n  var scale = linearish(transformer()(identity));\n\n  scale.copy = function() {\n    return copy(scale, sequential());\n  };\n\n  return initInterpolator.apply(scale, arguments);\n}\n\nexport function sequentialLog() {\n  var scale = loggish(transformer()).domain([1, 10]);\n\n  scale.copy = function() {\n    return copy(scale, sequentialLog()).base(scale.base());\n  };\n\n  return initInterpolator.apply(scale, arguments);\n}\n\nexport function sequentialSymlog() {\n  var scale = symlogish(transformer());\n\n  scale.copy = function() {\n    return copy(scale, sequentialSymlog()).constant(scale.constant());\n  };\n\n  return initInterpolator.apply(scale, arguments);\n}\n\nexport function sequentialPow() {\n  var scale = powish(transformer());\n\n  scale.copy = function() {\n    return copy(scale, sequentialPow()).exponent(scale.exponent());\n  };\n\n  return initInterpolator.apply(scale, arguments);\n}\n\nexport function sequentialSqrt() {\n  return sequentialPow.apply(null, arguments).exponent(0.5);\n}\n", "import {interpolate, interpolateRound, piecewise} from \"d3-interpolate\";\nimport {identity} from \"./continuous.js\";\nimport {initInterpolator} from \"./init.js\";\nimport {linearish} from \"./linear.js\";\nimport {loggish} from \"./log.js\";\nimport {copy} from \"./sequential.js\";\nimport {symlogish} from \"./symlog.js\";\nimport {powish} from \"./pow.js\";\n\nfunction transformer() {\n  var x0 = 0,\n      x1 = 0.5,\n      x2 = 1,\n      s = 1,\n      t0,\n      t1,\n      t2,\n      k10,\n      k21,\n      interpolator = identity,\n      transform,\n      clamp = false,\n      unknown;\n\n  function scale(x) {\n    return isNaN(x = +x) ? unknown : (x = 0.5 + ((x = +transform(x)) - t1) * (s * x < s * t1 ? k10 : k21), interpolator(clamp ? Math.max(0, Math.min(1, x)) : x));\n  }\n\n  scale.domain = function(_) {\n    return arguments.length ? ([x0, x1, x2] = _, t0 = transform(x0 = +x0), t1 = transform(x1 = +x1), t2 = transform(x2 = +x2), k10 = t0 === t1 ? 0 : 0.5 / (t1 - t0), k21 = t1 === t2 ? 0 : 0.5 / (t2 - t1), s = t1 < t0 ? -1 : 1, scale) : [x0, x1, x2];\n  };\n\n  scale.clamp = function(_) {\n    return arguments.length ? (clamp = !!_, scale) : clamp;\n  };\n\n  scale.interpolator = function(_) {\n    return arguments.length ? (interpolator = _, scale) : interpolator;\n  };\n\n  function range(interpolate) {\n    return function(_) {\n      var r0, r1, r2;\n      return arguments.length ? ([r0, r1, r2] = _, interpolator = piecewise(interpolate, [r0, r1, r2]), scale) : [interpolator(0), interpolator(0.5), interpolator(1)];\n    };\n  }\n\n  scale.range = range(interpolate);\n\n  scale.rangeRound = range(interpolateRound);\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  return function(t) {\n    transform = t, t0 = t(x0), t1 = t(x1), t2 = t(x2), k10 = t0 === t1 ? 0 : 0.5 / (t1 - t0), k21 = t1 === t2 ? 0 : 0.5 / (t2 - t1), s = t1 < t0 ? -1 : 1;\n    return scale;\n  };\n}\n\nexport default function diverging() {\n  var scale = linearish(transformer()(identity));\n\n  scale.copy = function() {\n    return copy(scale, diverging());\n  };\n\n  return initInterpolator.apply(scale, arguments);\n}\n\nexport function divergingLog() {\n  var scale = loggish(transformer()).domain([0.1, 1, 10]);\n\n  scale.copy = function() {\n    return copy(scale, divergingLog()).base(scale.base());\n  };\n\n  return initInterpolator.apply(scale, arguments);\n}\n\nexport function divergingSymlog() {\n  var scale = symlogish(transformer());\n\n  scale.copy = function() {\n    return copy(scale, divergingSymlog()).constant(scale.constant());\n  };\n\n  return initInterpolator.apply(scale, arguments);\n}\n\nexport function divergingPow() {\n  var scale = powish(transformer());\n\n  scale.copy = function() {\n    return copy(scale, divergingPow()).exponent(scale.exponent());\n  };\n\n  return initInterpolator.apply(scale, arguments);\n}\n\nexport function divergingSqrt() {\n  return divergingPow.apply(null, arguments).exponent(0.5);\n}\n", "import {\n  scaleLinear,\n  scalePow,\n  scaleSqrt,\n  scaleLog,\n  scaleSymlog,\n  scaleIdentity,\n  scaleTime,\n  scaleUtc,\n  scaleSequential,\n  scaleDiverging,\n  scaleQuantize,\n  scaleQuantile,\n  scaleThreshold,\n  scaleOrdinal,\n  scaleBand,\n  scalePoint,\n  ScaleLinear,\n  ScalePower,\n  ScaleLogarithmic,\n  ScaleSymLog,\n  ScaleTime,\n} from 'd3-scale'\n// Todo Ordinal Scales: ScaleOrdinal, ScaleBand, ScalePoint, ScaleThreshold, ScaleQuantile, ScaleQuantize, ScaleDiverging, ScaleSequential\n\nexport type ContinuousScale = ScaleLinear<number, number> | ScalePower<number, number> | ScaleLogarithmic<number, number> | ScaleSymLog<number, number> | ScaleTime<number, number>\n\nexport const Scale = {\n  scaleLinear,\n  scalePow,\n  scaleSqrt,\n  scaleLog,\n  scaleSymlog,\n  scaleIdentity,\n  scaleTime,\n  scaleUtc,\n  scaleSequential,\n  scaleDiverging,\n  scaleQuantize,\n  scaleQuantile,\n  scaleThreshold,\n  scaleOrdinal,\n  scaleBand,\n  scalePoint,\n}\n\nexport enum ScaleDimension {\n  X = 'x',\n  Y = 'y',\n}\n", "export enum Direction {\n  West = 'west',\n  East = 'east',\n  North = 'north',\n  South = 'south',\n}\n", "// Core\nimport { XYComponentCore } from 'core/xy-component'\nimport { ContainerDefaultConfig, ContainerConfigInterface } from 'core/container/config'\n\n// Components\nimport { Annotations } from 'components/annotations'\nimport { Tooltip } from 'components/tooltip'\nimport { Axis } from 'components/axis'\nimport { Crosshair } from 'components/crosshair'\n\n// Types\nimport { ContinuousScale } from 'types/scale'\nimport { Direction } from 'types/direction'\n\nexport interface XYContainerConfigInterface<Datum> extends ContainerConfigInterface {\n  /** An array of visualization components. Default: `[]` */\n  components?: XYComponentCore<Datum>[];\n\n  /** Scale for X dimension, e.g. Scale.scaleLinear().\n   * If set, this value will override the components' xScale and they will have a single shared xScale instance.\n   * By default the components have their own scale instances but their `domain` and `range` values are synchronized.\n   * Default: `undefined` */\n  xScale?: ContinuousScale;\n  /** Scale domain (data extent) for X dimension. By default this value is calculated automatically based on data. */\n  xDomain?: [number | undefined, number | undefined];\n  /** Constraint the minimum value of the X scale domain. Useful when the data is plotted along the X axis.\n   * For example, imagine that you have a chart with dynamic data that has negative values. When values are small\n   * (let's say in the range of [-0.01, 0]), you might still want the chart to display some meaningful value range (e.g. [-1, 0]). That can\n   * be achieved by setting `xDomainMinConstraint` to `[undefined, -1]`. In addition to that, if you want to cut off the\n   * values that are too low (let's say lower than -100), you can set the constraint to `[-100, -1]`\n   * Default: `undefined` */\n  xDomainMinConstraint?: [number | undefined, number | undefined];\n  /** Constraint the minimum value of the X scale domain. Useful when the data is plotted along the X axis.\n   * For example, imagine that you have a chart with dynamic data. When values are small\n   * (let's say < 0.01), you might still want the chart to display some meaningful value range (e.g. [0, 1]). That can\n   * be achieved by setting `xDomainMaxConstraint` to `[1, undefined]`. In addition to that, if you want to cut off the\n   * values that are too high (let's say higher than 100), you can set the constraint to `[1, 100]`\n   * Default: `undefined` */\n  xDomainMaxConstraint?: [number | undefined, number | undefined];\n  /** Force set the X scale range (in the screen space). By default the range is calculated automatically based on the\n   * chart's set up */\n  xRange?: [number, number];\n\n  /** Scale for Y dimension, e.g. Scale.scaleLinear().\n   * If set, this value will override the components' yScale and they will have a single shared yScale instance.\n   * By default the components have their own scale instances but their `domain` and `range` values are synchronized.\n   * Default: `undefined` */\n  yScale?: ContinuousScale;\n  /** Scale domain (data extent) for Y dimension. By default this value is calculated automatically based on data. */\n  yDomain?: [number | undefined, number | undefined];\n  /** Constraint the minimum value of the Y scale domain.\n   * For example, imagine that you have a chart with dynamic data that has negative values. When values are small\n   * (let's say in the range of [-0.01, 0]), you might still want the chart to display some meaningful value range (e.g. [-1, 0]). That can\n   * be achieved by setting `yDomainMinConstraint` to `[undefined, -1]`. In addition to that, if you want to cut off the\n   * values that are too low (let's say lower than -100), you can set the constraint to `[-100, -1]`\n   * Default: `undefined` */\n  yDomainMinConstraint?: [number | undefined, number | undefined];\n  /** Constraint the minimum value of the Y scale domain.\n   * For example, imagine that you have a chart with dynamic data. When values are small\n   * (let's say < 0.01), you might still want the chart to display some meaningful value range (e.g. [0, 1]). That can\n   * be achieved by setting `yDomainMaxConstraint` to `[1, undefined]`. In addition to that, if you want to cut off the\n   * values that are too high (let's say higher than 100), you can set the constraint to `[1, 100]`\n   * Default: `undefined` */\n  yDomainMaxConstraint?: [number | undefined, number | undefined];\n  /** Force set the Y scale range (in the screen space). By default the range is calculated automatically based on the\n   * chart's set up */\n  yRange?: [number, number];\n  /** Y Axis direction. Default: `Direction.North` */\n  yDirection?: Direction.South | Direction.North | string;\n\n  /** X Axis component instance. Default: `undefined` */\n  xAxis?: Axis<Datum>;\n  /** Y Axis component instance. Default: `undefined` */\n  yAxis?: Axis<Datum>;\n  /** Enables automatic calculation of chart margins based on the size of the axes. Default: `true` */\n  autoMargin?: boolean;\n  /** Tooltip component. Default: `undefined` */\n  tooltip?: Tooltip | undefined;\n  /** Crosshair component. Default: `undefined` */\n  crosshair?: Crosshair<Datum> | undefined;\n  /** Prevents the chart domain from being empty (when domain's min and max values are equal).\n   *  That usually happens when all the data values are equal or when there's no data.\n   *  Setting to `true` will automatically extend the domain by `+1` when the domain is empty (domain start equals domain end).\n   *  Setting to `null` will extend the empty X domain, but only when there's no data.\n   *  Setting to `false` will keep the domain as is.\n   *  Default: `null` */\n  preventEmptyDomain?: boolean | null;\n  /** Sets the Y scale domain based on the current X scale domain (not the whole dataset). Default: `false` */\n  scaleByDomain?: boolean;\n  /** Annotations component. Default: `undefined` */\n  annotations?: Annotations | undefined;\n}\n\n\nexport const XYContainerDefaultConfig: XYContainerConfigInterface<unknown> = {\n  ...ContainerDefaultConfig,\n  components: [],\n  tooltip: undefined,\n  crosshair: undefined,\n  annotations: undefined,\n  xAxis: undefined,\n  yAxis: undefined,\n  autoMargin: true,\n\n  xScale: undefined,\n  xDomain: undefined,\n  xDomainMinConstraint: undefined,\n  xDomainMaxConstraint: undefined,\n  xRange: undefined,\n\n  yScale: undefined,\n  yDomain: undefined,\n  yDomainMinConstraint: undefined,\n  yDomainMaxConstraint: undefined,\n  yRange: undefined,\n  yDirection: Direction.North,\n\n  preventEmptyDomain: null,\n  scaleByDomain: false,\n}\n\n", "import { css } from '@emotion/css'\nimport { extent, merge as mergeArrays } from 'd3-array'\nimport { Selection } from 'd3-selection'\n\n// Global CSS variables (side effects import)\nimport 'styles/index'\n\n// Core\nimport { ContainerCore } from 'core/container'\nimport { XYComponentCore } from 'core/xy-component'\nimport { XYComponentConfigInterface } from 'core/xy-component/config'\n\n// Data Model\nimport { CoreDataModel } from 'data-models/core'\n\n// Types\nimport { Spacing } from 'types/spacing'\nimport { AxisType } from 'components/axis/types'\nimport { ScaleDimension } from 'types/scale'\nimport { Direction } from 'types/direction'\n\n// Utils\nimport { clamp, clean, flatten } from 'utils/data'\nimport { guid } from 'utils/misc'\n\n// Config\nimport { XYContainerDefaultConfig, XYContainerConfigInterface } from './config'\nimport {\n  AreaConfigInterface,\n  BrushConfigInterface,\n  LineConfigInterface,\n  ScatterConfigInterface,\n  StackedBarConfigInterface,\n  TimelineConfigInterface,\n} from '../../components'\n\nexport type XYConfigInterface<Datum> = XYComponentConfigInterface<Datum>\n| StackedBarConfigInterface<Datum>\n| LineConfigInterface<Datum>\n| ScatterConfigInterface<Datum>\n| BrushConfigInterface<Datum>\n| TimelineConfigInterface<Datum>\n| AreaConfigInterface<Datum>\n\nexport class XYContainer<Datum> extends ContainerCore {\n  protected _defaultConfig = XYContainerDefaultConfig as XYContainerConfigInterface<Datum>\n  protected _svgDefs: Selection<SVGDefsElement, unknown, null, undefined>\n  public datamodel: CoreDataModel<Datum[]> = new CoreDataModel()\n  public config: XYContainerConfigInterface<Datum> = this._defaultConfig\n  private _clipPath: Selection<SVGClipPathElement, unknown, null, undefined>\n  private _clipPathId = guid()\n  private _axisMargin: Spacing = { top: 0, bottom: 0, left: 0, right: 0 }\n  private _firstRender = true\n\n  constructor (element: HTMLElement, config?: XYContainerConfigInterface<Datum>, data?: Datum[]) {\n    super(element)\n\n    this._clipPath = this.svg.append('clipPath')\n      .attr('id', this._clipPathId)\n    this._clipPath.append('rect')\n\n    // When the base tag is specified on the HTML head,\n    //  Safari fails to find the corresponding filter URL.\n    //  We have to provide tull url in order to fix that\n    const highlightFilterId = 'saturate'\n    const baseUrl = window.location.href.replace(window.location.hash, '')\n    this.svg.attr('class', css`\n      --highlight-filter-id: url(${baseUrl}#${highlightFilterId}); // defining a css variable\n    `)\n\n    this._svgDefs.append('filter')\n      .attr('id', highlightFilterId)\n      .attr('filterUnits', 'objectBoundingBox')\n      .html('<feColorMatrix type=\"saturate\" in=\"SourceGraphic\" values=\"1.35\"/>')\n\n    if (config) {\n      this.updateContainer(config, true)\n    }\n\n    if (data) {\n      this.setData(data, true)\n    }\n\n    // Render if there are axes or components with data\n    if (\n      this.config.xAxis ||\n      this.config.yAxis ||\n      this.components?.some(c => c.datamodel.data)\n    ) {\n      this.render()\n    }\n\n    // Force re-render axes when fonts are loaded\n    (document as any).fonts?.ready.then(() => {\n      if (!this._firstRender) this._renderAxes(0)\n    })\n  }\n\n  get components (): XYComponentCore<Datum>[] {\n    return this.config.components\n  }\n\n  // Overriding ContainerCore default get width method to work with axis auto margin\n  get width (): number {\n    const margin = this._getMargin()\n    return clamp(this.containerWidth - margin.left - margin.right, 0, Number.POSITIVE_INFINITY)\n  }\n\n  // Overriding ContainerCore default get height method to work with axis auto margin\n  get height (): number {\n    const margin = this._getMargin()\n\n    return clamp(this.containerHeight - margin.top - margin.bottom, 0, Number.POSITIVE_INFINITY)\n  }\n\n  public setData (data: Datum[], preventRender?: boolean): void {\n    const { components, config } = this\n    if (!data) return\n    this.datamodel.data = data\n\n    components.forEach((c) => {\n      c.setData(data)\n    })\n\n    config.crosshair?.setData(data)\n    config.xAxis?.setData(data)\n    config.yAxis?.setData(data)\n    config.tooltip?.hide()\n    if (!preventRender) this.render()\n  }\n\n  public updateContainer (containerConfig: XYContainerConfigInterface<Datum>, preventRender?: boolean): void {\n    super.updateContainer(containerConfig)\n    this._removeAllChildren()\n\n    // If there were any new components added we need to pass them data\n    this.setData(this.datamodel.data, true)\n\n    // Set up the axes\n    if (containerConfig.xAxis) {\n      this.config.xAxis.config.type = AxisType.X\n      this.element.appendChild(containerConfig.xAxis.element)\n    }\n    if (containerConfig.yAxis) {\n      this.config.yAxis.config.type = AxisType.Y\n      this.element.appendChild(containerConfig.yAxis.element)\n    }\n\n    // Re-insert elements to the DOM\n    for (const c of this.components) {\n      this.element.appendChild(c.element)\n    }\n\n    // Set up the tooltip\n    const tooltip = containerConfig.tooltip\n    if (tooltip) {\n      if (!tooltip.hasContainer()) tooltip.setContainer(this._container)\n      tooltip.setComponents(this.components)\n    }\n\n    // Set up the crosshair\n    const crosshair = containerConfig.crosshair\n    if (crosshair) {\n      crosshair.setContainer(this.svg)\n      crosshair.tooltip = tooltip\n\n      this.element.appendChild(crosshair.element)\n    }\n\n    // Set up annotations\n    const annotations = containerConfig.annotations\n    if (annotations) {\n      this.element.appendChild(annotations.element)\n    }\n\n    // Clipping path\n    this.element.appendChild(this._clipPath.node())\n\n    // Defs\n    this.element.appendChild(this._svgDefs.node())\n    this.element.appendChild(this._svgDefsExternal.node())\n\n    // Rendering\n    if (!preventRender) this.render()\n  }\n\n  public updateComponents (componentConfigs: XYConfigInterface<Datum>[], preventRender?: boolean): void {\n    const { config } = this\n\n    this.components.forEach((c, i) => {\n      const componentConfig = componentConfigs[i]\n      if (componentConfig) {\n        c.setConfig(componentConfigs[i])\n      }\n    })\n\n    this._updateScales(...this.components, config.xAxis, config.yAxis, config.crosshair)\n    if (!preventRender) this.render()\n  }\n\n  public update (containerConfig: XYContainerConfigInterface<Datum>, componentConfigs?: XYComponentConfigInterface<Datum>[], data?: Datum[]): void {\n    if (data) this.datamodel.data = data // Just updating the data model because the `updateContainer` method has the `setData` step inside\n    if (containerConfig) this.updateContainer(containerConfig, true)\n    if (componentConfigs) this.updateComponents(componentConfigs, true)\n    this.render()\n  }\n\n  protected _preRender (): void {\n    const { config } = this\n    super._preRender()\n\n    // Calculate extra margin required to fit the axes\n    if (config.autoMargin) {\n      this._setAutoMargin()\n    }\n\n    // Pass size to the components\n    const components = clean([...this.components, config.xAxis, config.yAxis, config.crosshair, config.annotations])\n    for (const c of components) {\n      c.setSize(this.width, this.height, this.containerWidth, this.containerHeight)\n    }\n\n    // Update Scales of all the components at once to calculate required paddings and sync them\n    this._updateScales(...this.components, config.xAxis, config.yAxis, config.crosshair)\n  }\n\n  protected _render (customDuration?: number): void {\n    const { config } = this\n    super._render()\n\n    // Get chart total margin after auto margin calculations\n    const margin = this._getMargin()\n\n    // Render components\n    for (const c of this.components) {\n      c.g.attr('transform', `translate(${margin.left},${margin.top})`)\n        .style('clip-path', c.clippable ? `url(#${this._clipPathId})` : null)\n        .style('-webkit-clip-path', c.clippable ? `url(#${this._clipPathId})` : null)\n\n      c.render(customDuration)\n    }\n\n    this._renderAxes(this._firstRender ? 0 : customDuration)\n\n    // Clip RectsetSize\n    // Extending the clipping path to allow small overflow (e.g. Line will looks better that way when it touches the edges)\n    const clipPathExtension = 2\n    this._clipPath.select('rect')\n      .attr('x', -clipPathExtension)\n      .attr('y', -clipPathExtension)\n      .attr('width', this.width + 2 * clipPathExtension)\n      .attr('height', this.height + 2 * clipPathExtension)\n\n    // Tooltip\n    config.tooltip?.update() // Re-bind events\n\n    // Crosshair\n    const crosshair = config.crosshair\n    if (crosshair) {\n      // Pass accessors\n      const yAccessors = this.components.filter(c => !c.stacked).map(c => c.config.y)\n      const yStackedAccessors = this.components.filter(c => c.stacked).map(c => c.config.y)\n      const baselineComponentConfig = this.components.find(c => (c.config as AreaConfigInterface<Datum>).baseline)?.config as AreaConfigInterface<Datum>\n      const baselineAccessor = baselineComponentConfig?.baseline\n\n      crosshair.accessors = {\n        x: this.components[0]?.config.x,\n        y: flatten(yAccessors),\n        yStacked: flatten(yStackedAccessors),\n        baseline: baselineAccessor,\n      }\n\n      crosshair.g.attr('transform', `translate(${margin.left},${margin.top})`)\n        .style('clip-path', `url(#${this._clipPathId})`)\n        .style('-webkit-clip-path', `url(#${this._clipPathId})`)\n      crosshair.hide()\n    }\n\n    config.annotations?.g.attr('transform', `translate(${margin.left},${margin.top})`)\n    config.annotations?.render()\n\n    this._firstRender = false\n  }\n\n  private _updateScales<T extends XYComponentCore<Datum>> (...components: T[]): void {\n    const c = clean(components || this.components)\n    this._setScales(...c)\n    this._updateScalesDomain(...c)\n    this._updateScalesRange(...c)\n  }\n\n  private _setScales<T extends XYComponentCore<Datum>> (...components: T[]): void {\n    const { config } = this\n    if (!components) return\n\n    // Set the X and Y scales\n    if (config.xScale) components.forEach(c => c.setScale(ScaleDimension.X, config.xScale))\n    if (config.yScale) components.forEach(c => c.setScale(ScaleDimension.Y, config.yScale))\n  }\n\n  private _updateScalesDomain<T extends XYComponentCore<Datum>> (...components: T[]): void {\n    const { config } = this\n    if (!components) return\n\n    const componentsWithDomain = components.filter(c => !c.config.excludeFromDomainCalculation)\n\n    // Loop over all the dimensions\n    Object.values(ScaleDimension).forEach((dimension: ScaleDimension) => {\n      const [min, max] = extent(\n        mergeArrays(\n          componentsWithDomain.map(c => c.getDataExtent(dimension, config.scaleByDomain))\n        ) as number[]\n      ) // Components with undefined dimension accessors will return [undefined, undefined] but d3.extent will take care of that\n\n      const configuredDomain = dimension === ScaleDimension.Y ? config.yDomain : config.xDomain\n      const configuredDomainMinConstraint = dimension === ScaleDimension.Y ? config.yDomainMinConstraint : config.xDomainMinConstraint\n      const configuredDomainMaxConstraint = dimension === ScaleDimension.Y ? config.yDomainMaxConstraint : config.xDomainMaxConstraint\n      const domainMin = configuredDomain?.[0] ?? min ?? 0\n      const domainMax = configuredDomain?.[1] ?? max ?? 1\n      const domain = [\n        clamp(domainMin, configuredDomainMinConstraint?.[0] ?? Number.NEGATIVE_INFINITY, configuredDomainMinConstraint?.[1] ?? Number.POSITIVE_INFINITY),\n        clamp(domainMax, configuredDomainMaxConstraint?.[0] ?? Number.NEGATIVE_INFINITY, configuredDomainMaxConstraint?.[1] ?? Number.POSITIVE_INFINITY),\n      ]\n\n      // Extend the X and Y domains if they're empty and `preventEmptyDomain` was explicitly set to `true`\n      // or just the X domain if there is no data provided and `preventEmptyDomain` set to `null`\n      if (domain[0] === domain[1]) {\n        const hasDataProvided = componentsWithDomain.some(c => c.datamodel.data?.length > 0)\n        if (config.preventEmptyDomain || (config.preventEmptyDomain === null && (!hasDataProvided || dimension === ScaleDimension.Y))) {\n          domain[1] = domain[0] + 1\n        }\n      }\n\n      components.forEach(c => c.setScaleDomain(dimension, domain))\n    })\n  }\n\n  private _updateScalesRange<T extends XYComponentCore<Datum>> (...components: T[]): void {\n    const { config } = this\n    if (!components) return\n\n    // Set initial scale range\n    const isYDirectionSouth = config.yDirection === Direction.South\n    const xRange: [number, number] = [config.padding.left ?? 0, this.width - (config.padding.right ?? 0)]\n    const yRange: [number, number] = [this.height - (config.padding.bottom ?? 0), config.padding.top ?? 0]\n    if (isYDirectionSouth) yRange.reverse()\n\n    for (const c of components) {\n      c.setSize(this.width, this.height, this.containerWidth, this.containerHeight)\n      c.setScaleRange(ScaleDimension.X, config.xRange ?? xRange)\n      c.setScaleRange(ScaleDimension.Y, config.yRange ?? yRange)\n    }\n\n    // Get and combine bleed\n    const bleed = components.map(c => c.bleed).reduce((bleed, b) => {\n      for (const key of Object.keys(bleed)) {\n        const k = key as keyof Spacing\n        if (bleed[k] < b[k]) bleed[k] = b[k]\n      }\n      return bleed\n    }, { top: 0, bottom: 0, left: 0, right: 0 })\n\n    // Update scale range\n    for (const c of components) {\n      c.setScaleRange(ScaleDimension.X, [xRange[0] + bleed.left, xRange[1] - bleed.right])\n      c.setScaleRange(\n        ScaleDimension.Y,\n        isYDirectionSouth\n          ? [yRange[0] + bleed.top, yRange[1] - bleed.bottom] // if Y axis is directed downwards\n          : [yRange[0] - bleed.bottom, yRange[1] + bleed.top] // if Y axis is directed upwards\n      )\n    }\n  }\n\n  private _renderAxes (duration: number): void {\n    const { config: { xAxis, yAxis } } = this\n    const margin = this._getMargin()\n\n    const axes = clean([xAxis, yAxis])\n    axes.forEach(axis => {\n      const offset = axis.getOffset(margin)\n      axis.g.attr('transform', `translate(${offset.left},${offset.top})`)\n      axis.render(duration)\n    })\n  }\n\n  private _setAutoMargin (): void {\n    const { config: { xAxis, yAxis } } = this\n\n    // At first we need to set the domain to the scales\n    const components = clean([...this.components, xAxis, yAxis])\n    this._setScales(...components)\n    this._updateScalesDomain(...components)\n\n    // Calculate margin required by the axes\n    // We do two iterations on the first render, because the amount and size of ticks can change\n    //    after new margin are calculated and applied (axes dimensions will change).\n    //    That's needed for correct label placement.\n    const numIterations = this._firstRender ? 2 : 1\n    for (let i = 0; i < numIterations; i += 1) {\n      const axisMargin: Spacing = { top: 0, bottom: 0, left: 0, right: 0 }\n      this._updateScalesRange(...components)\n      const axes = clean([xAxis, yAxis])\n      axes.forEach(axis => {\n        axis.preRender()\n\n        const m = axis.getRequiredMargin()\n        if (axisMargin.top < m.top) axisMargin.top = m.top\n        if (axisMargin.bottom < m.bottom) axisMargin.bottom = m.bottom\n        if (axisMargin.left < m.left) axisMargin.left = m.left\n        if (axisMargin.right < m.right) axisMargin.right = m.right\n      })\n      this._axisMargin = axisMargin\n    }\n  }\n\n  private _getMargin (): Spacing {\n    const { config: { margin } } = this\n\n    return {\n      top: margin.top + this._axisMargin.top,\n      bottom: margin.bottom + this._axisMargin.bottom,\n      left: margin.left + this._axisMargin.left,\n      right: margin.right + this._axisMargin.right,\n    }\n  }\n\n  public destroy (): void {\n    const { components, config: { tooltip, crosshair, annotations, xAxis, yAxis } } = this\n    super.destroy()\n\n    for (const c of components) c?.destroy()\n    tooltip?.destroy()\n    crosshair?.destroy()\n    annotations?.destroy()\n    xAxis?.destroy()\n    yAxis?.destroy()\n  }\n}\n", "/* eslint-disable no-irregular-whitespace */\nimport { VisEventCallback, VisEventType } from 'core/component/types'\n\nexport interface ComponentConfigInterface {\n  /** Animation duration of the data update transitions in milliseconds. Default: `600` */\n  duration?: number;\n  /** Events configuration. An object containing properties in the following format:\n   *\n   * ```\n   * {\n   *   [selectorString]: {\n   *       [eventType]: callbackFunction\n   *   }\n   * }\n   * ```\n   * e.g.:\n   * ```\n   * {\n   *   [Area.selectors.area]: {\n   *     click: (d) => console.log(\"Clicked Area\", d)\n   *   }\n   * }\n   * ```\n   */\n  events?: {\n    [selector: string]: {\n      [eventType in VisEventType]?: VisEventCallback;\n    };\n  };\n  /** You can set every SVG and HTML visualization object to have a custom DOM attributes, which is useful\n   * when you want to do unit or end-to-end testing. Attributes configuration object has the following structure:\n   *\n   * ```\n   * {\n   *   [selectorString]: {\n   *       [attributeName]: attribute constant value or accessor function\n   *   }\n   * }\n   * ```\n   * e.g.:\n   * ```\n   * {\n   *   [Area.selectors.area]: {\n   *     \"test-value\": d => d.value\n   *   }\n   * }\n   * ```\n   */\n  attributes?: {\n    [selector: string]: {\n      [attr: string]: string | number | boolean | ((datum: any) => string | number | boolean);\n    };\n  };\n}\n\nexport const ComponentDefaultConfig: ComponentConfigInterface = {\n  duration: 600,\n  events: {},\n  attributes: {},\n}\n", "import { select, Selection, ValueFn } from 'd3-selection'\nimport { Transition } from 'd3-transition'\n\n// Core\nimport { CoreDataModel } from 'data-models/core'\n\n// Utils\nimport { merge, throttle } from 'utils/data'\nimport { guid } from 'utils/misc'\n\n// Types\nimport { ComponentType, Sizing } from 'types/component'\nimport { Spacing } from 'types/spacing'\n\n// Local Types\nimport { VisEventCallback, VisEventType } from './types'\n\n// Config\nimport { ComponentDefaultConfig, ComponentConfigInterface } from './config'\n\nexport class ComponentCore<\n  CoreDatum,\n  ConfigInterface extends ComponentConfigInterface = ComponentConfigInterface,\n> {\n  public element: SVGGElement | HTMLElement\n  public type: ComponentType = ComponentType.SVG\n  public g: Selection<SVGGElement, unknown, null, undefined> | Selection<HTMLElement, unknown, null, undefined>\n  public config: ConfigInterface\n  public prevConfig: ConfigInterface\n  public datamodel: CoreDataModel<CoreDatum> = new CoreDataModel()\n  public sizing: Sizing | string = Sizing.Fit // Supported by SingleContainer and a subset of components only (Sankey)\n  public uid: string\n\n  protected events: {\n    [selector: string]: {\n      [eventType in VisEventType]?: VisEventCallback;\n    };\n  } = {}\n\n  /** Default configuration */\n  protected _defaultConfig: ConfigInterface = ComponentDefaultConfig as ConfigInterface\n  /** Component width in pixels. This property is set automatically by the container. */\n  protected _width = 400\n  /** Component height in pixels. This property is set automatically by the container. */\n  protected _height = 200\n  /** Container width in pixels. This property is set automatically by the container. */\n  protected _containerWidth: number | undefined = undefined\n  /** Container height in pixels. This property is set automatically by the container. */\n  protected _containerHeight: number | undefined = undefined\n\n  _setUpComponentEventsThrottled = throttle(this._setUpComponentEvents, 500)\n  _setCustomAttributesThrottled = throttle(this._setCustomAttributes, 500)\n\n  constructor (type = ComponentType.SVG) {\n    if (type === ComponentType.SVG) {\n      this.element = document.createElementNS('http://www.w3.org/2000/svg', 'g')\n    } else {\n      this.element = document.createElement('div')\n    }\n    this.uid = guid()\n    this.g = select(this.element) as Selection<SVGGElement, unknown, null, undefined> | Selection<HTMLElement, unknown, null, undefined>\n\n    // Setting the root class if available\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore\n    // eslint-disable-next-line dot-notation\n    const rootClass = this.constructor?.['selectors']?.root as string\n    if (rootClass) this.g.attr('class', rootClass)\n  }\n\n  setConfig (config: ConfigInterface): void {\n    this.prevConfig = this.config // Store the previous config instance\n    this.config = merge(this._defaultConfig, config)\n  }\n\n  setData (data: CoreDatum): void {\n    this.datamodel.data = data\n  }\n\n  setSize (width: number, height: number, containerWidth: number, containerHeight: number): void {\n    if (isFinite(width)) this._width = width\n    if (isFinite(height)) this._height = height\n    if (isFinite(containerWidth)) this._containerWidth = containerWidth\n    if (isFinite(containerHeight)) this._containerHeight = containerHeight\n  }\n\n  render (duration = this.config.duration): void {\n    this._render(duration)\n\n    // While transition is in progress, we add the 'animating' attribute to the component's SVG group\n    const ANIMATING_ATTR = 'animating'\n    if (duration) {\n      this.g.attr(ANIMATING_ATTR, '')\n      const transition = this.g\n        .transition(ANIMATING_ATTR)\n        .duration(duration) as Transition<SVGGElement | HTMLElement, unknown, null, undefined>\n\n      transition.on('end interrupt', () => {\n        this.g.attr(ANIMATING_ATTR, null)\n      })\n    }\n    this._setUpComponentEventsThrottled()\n    this._setCustomAttributesThrottled()\n  }\n\n  get bleed (): Spacing {\n    return { top: 0, bottom: 0, left: 0, right: 0 }\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\n  _render (duration = this.config.duration): void {\n  }\n\n  private _setCustomAttributes (): void {\n    const attributeMap = this.config.attributes\n\n    Object.keys(attributeMap).forEach(className => {\n      Object.keys(attributeMap[className]).forEach(attr => {\n        const selection = (this.g as Selection<SVGGElement | HTMLElement, unknown, null, undefined>)\n          .selectAll<SVGGElement | HTMLElement, unknown>(`.${className}`)\n\n        selection.attr(attr, attributeMap[className][attr] as ValueFn<SVGGElement | HTMLElement, unknown, string | number | boolean>)\n      })\n    })\n  }\n\n  private _setUpComponentEvents (): void {\n    // Set up default events\n    this._bindEvents(this.events)\n\n    // Set up user-defined events\n    this._bindEvents(this.config.events, '.user')\n  }\n\n  private _bindEvents (events = this.events, suffix = ''): void {\n    Object.keys(events).forEach(className => {\n      Object.keys(events[className]).forEach(eventType => {\n        const selection = (this.g as Selection<SVGGElement | HTMLElement, unknown, null, undefined>)\n          .selectAll<SVGGElement | HTMLElement, unknown>(`.${className}`)\n        selection.on(eventType + suffix, (event: MouseEvent & WheelEvent & PointerEvent & TouchEvent, d) => {\n          const els = selection.nodes()\n          const i = els.indexOf(event.currentTarget as SVGGElement | HTMLElement)\n          const eventFunction = events[className][eventType as VisEventType]\n          return eventFunction?.(d, event, i, els)\n        })\n      })\n    })\n  }\n\n  public destroy (): void {\n    this.g?.remove()\n    this.element = undefined\n  }\n\n  public isDestroyed (): boolean {\n    return !this.element\n  }\n}\n", "// Core\nimport { CoreDataModel } from './core'\n\nexport class SeriesDataModel<Datum> extends CoreDataModel<Datum[]> {\n  constructor (data?: Datum[]) {\n    super(data)\n  }\n\n  get data (): Datum[] {\n    return this._data ?? []\n  }\n\n  set data (data: Datum[]) {\n    if (Array.isArray(data)) this._data = data\n  }\n}\n", "import { ContinuousScale } from 'types/scale'\n\n// Types\nimport { ColorAccessor, NumericAccessor } from 'types/accessor'\n\n// Config\nimport { ComponentDefaultConfig, ComponentConfigInterface } from '../component/config'\n\nexport interface XYComponentConfigInterface<Datum> extends ComponentConfigInterface {\n  /** Accessor function for getting the values along the X axis. Default: `undefined` */\n  x: NumericAccessor<Datum>;\n  /** A single of multiple accessor functions for getting the values along the Y axis. Default: `undefined` */\n  y: NumericAccessor<Datum> | NumericAccessor<Datum>[];\n  /** Accessor function for getting the unique data record id. Used for more persistent data updates. Default: `(d, i) => d.id ?? i` */\n  id?: ((d: Datum, i: number, ...any: any[]) => string);\n  /** Component color accessor function. Default: `d => d.color` */\n  color?: ColorAccessor<Datum> | ColorAccessor<Datum[]>;\n  /** Scale for X dimension, e.g. Scale.scaleLinear(). If you set xScale you'll be responsible for setting it's `domain` and `range` as well.\n   * Only continuous scales are supported.\n   * Default: `undefined`\n  */\n  xScale?: ContinuousScale;\n  /** Scale for Y dimension, e.g. Scale.scaleLinear(). If you set yScale you'll be responsible for setting it's `domain` and `range` as well.\n   * Only continuous scales are supported.\n   * Default: `undefined`\n  */\n  yScale?: ContinuousScale;\n  /** Identifies whether the component should be excluded from overall X and Y domain calculations or not.\n   * This property can be useful when you want pass individual data to a component and you don't want it to affect\n   * the scales of the chart.\n   * Default: `false`\n  */\n  excludeFromDomainCalculation?: boolean;\n}\n\nexport const XYComponentDefaultConfig: XYComponentConfigInterface<unknown> = {\n  ...ComponentDefaultConfig,\n  x: undefined,\n  y: undefined,\n  id: (d: unknown, i: number): string => (d as { id: string }).id ?? `${i}`,\n  color: (d: unknown | unknown[]): string => (d as { color: string }).color,\n  xScale: undefined,\n  yScale: undefined,\n  excludeFromDomainCalculation: false,\n}\n", "import { Selection } from 'd3-selection'\n\n// Core\nimport { ComponentCore } from 'core/component'\nimport { SeriesDataModel } from 'data-models/series'\n\n// Utils\nimport { filterDataByRange, getExtent, isArray } from 'utils/data'\n\n// Types\nimport { NumericAccessor } from 'types/accessor'\nimport { ContinuousScale, Scale, ScaleDimension } from 'types/scale'\n\n// Config\nimport { XYComponentDefaultConfig, XYComponentConfigInterface } from './config'\n\nexport class XYComponentCore<\n  Datum,\n  ConfigInterface extends Partial<XYComponentConfigInterface<Datum>> = Partial<XYComponentConfigInterface<Datum>>,\n> extends ComponentCore<Datum[], ConfigInterface> {\n  public element: SVGGraphicsElement\n  public g: Selection<SVGGElement, unknown, null, undefined>\n  public config: ConfigInterface\n  public prevConfig: ConfigInterface\n  public datamodel: SeriesDataModel<Datum> = new SeriesDataModel()\n\n  /** Clippable components can be affected by a clipping path (set up in the container) */\n  public clippable = true\n\n  /** Identifies whether the component displayed stacked data (eg StackedBar, Area) */\n  public stacked = false\n\n  protected _defaultConfig: ConfigInterface = XYComponentDefaultConfig as ConfigInterface\n\n  private _xScale: ContinuousScale = Scale.scaleLinear()\n  private _yScale: ContinuousScale = Scale.scaleLinear()\n\n  get xScale (): ContinuousScale {\n    return this.config.xScale || this._xScale\n  }\n\n  get yScale (): ContinuousScale {\n    return this.config.yScale || this._yScale\n  }\n\n  setConfig (config: ConfigInterface): void {\n    // We don't allow changing scales after the component has been initialized\n    if (this.config?.xScale) config.xScale = this.config.xScale\n    if (this.config?.yScale) config.yScale = this.config.yScale\n\n    super.setConfig(config)\n  }\n\n  setScaleDomain (dimension: ScaleDimension, domain: number[]): void {\n    if (dimension === ScaleDimension.X) this._xScale?.domain(domain)\n    if (dimension === ScaleDimension.Y) this._yScale?.domain(domain)\n  }\n\n  setScaleRange (dimension: ScaleDimension, range: number[]): void {\n    if (dimension === ScaleDimension.X) this._xScale?.range(range)\n    if (dimension === ScaleDimension.Y) this._yScale?.range(range)\n  }\n\n  setScale (dimension: ScaleDimension, scale: ContinuousScale): void {\n    if (scale && (dimension === ScaleDimension.X)) this._xScale = scale\n    if (scale && (dimension === ScaleDimension.Y)) this._yScale = scale\n  }\n\n  getDataExtent (dimension: ScaleDimension, scaleByVisibleData: boolean): number[] {\n    const { config, datamodel } = this\n\n    switch (dimension) {\n      case ScaleDimension.X: return this.getXDataExtent()\n      case ScaleDimension.Y: return this.getYDataExtent(scaleByVisibleData)\n      default: return getExtent(datamodel.data, config[dimension])\n    }\n  }\n\n  getXDataExtent (): number[] {\n    const { config, datamodel } = this\n    return getExtent(datamodel.data, config.x)\n  }\n\n  getYDataExtent (scaleByVisibleData: boolean): number[] {\n    const { config, datamodel } = this\n\n    const data = scaleByVisibleData ? filterDataByRange(datamodel.data, this.xScale.domain() as [number, number], config.x) : datamodel.data\n    const yAccessors = (isArray(config.y) ? config.y : [config.y]) as NumericAccessor<Datum>[]\n    return getExtent(data, ...yAccessors)\n  }\n}\n", "export enum Position {\n  Top = 'top',\n  Bottom = 'bottom',\n  Left = 'left',\n  Right = 'right',\n  Center = 'center',\n  Auto = 'auto',\n}\n\nexport enum PositionStrategy {\n  Absolute = 'absolute',\n  Fixed = 'fixed',\n}\n\nexport enum Arrangement {\n  Inside = 'inside',\n  Outside = 'outside',\n}\n\nexport enum Orientation {\n  Horizontal = 'horizontal',\n  Vertical = 'vertical',\n}\n", "/* eslint-disable no-irregular-whitespace */\nimport { ComponentCore } from 'core/component'\n\n// Types\nimport { Position } from 'types/position'\n\nexport interface TooltipConfigInterface {\n  /** An array of visualization components to interact with. Default: `[]` */\n  components?: ComponentCore<unknown>[];\n  /** Container to where the Tooltip component should be inserted. Default: `undefined` */\n  container?: HTMLElement;\n  /** Follow the mouse cursor. If `true`, the tooltip can't be hovered over\n   * even when `allowHover` is set to `true`. Default: `true` */\n  followCursor?: boolean;\n  /** Allow the tooltip to be hovered over and interacted with when `followCursor` is set to `false`.\n   * Default: `true` */\n  allowHover?: boolean;\n  /** Horizontal placement of the tooltip. Default: `Position.Auto` */\n  horizontalPlacement?: Position | string | undefined;\n  /** Horizontal shift of the tooltip in pixels. Works only with\n   * `horizontalPlacement` set to `Position.Left` or `Position.Right`.\n   * Default: `0` */\n  horizontalShift?: number;\n  /** Vertical placement of the tooltip. Default: `Position.Top` */\n  verticalPlacement?: Position | string | undefined;\n  /** Vertical shift of the tooltip in pixels. Works only with\n   * `verticalPlacement` set to `Position.Top` or `Position.Bottom`.\n   * Default: `0` */\n  verticalShift?: number;\n  /** Defines the content of the tooltip and hovering over which elements should trigger it.\n   * An object containing properties in the following format:\n   *\n   * ```\n   * {\n   *   [selectorString]: (d: unknown) => string | HTMLElement\n   * }\n   * ```\n   * e.g.:\n   * ```\n   * {\n   *   [Area.selectors.area]: (d: AreaDatum[]) => `<div>${d.value.toString()}</div>\n   * }\n   * ```\n   */\n  triggers?: {\n    [selector: string]: ((data: any, i: number, elements: (HTMLElement | SVGElement)[]) => string | HTMLElement | undefined | null | void) | undefined | null;\n  };\n  /** Custom DOM attributes for the tooltip. Useful when you need to refer to a specific tooltip instance\n   * by using a CSS selector. Attributes configuration object has the following structure:\n   *\n   * ```\n   * {\n   *   [attributeName]: attribute value\n   * }\n   * ```\n   * e.g.:\n   * ```\n   * {\n   *   'type': 'area-tooltip',\n   *   'value': 42\n   * }\n   * ```\n   */\n  attributes?: { [attr: string]: string | number | boolean };\n  /** Custom class name for the tooltip. Default: `undefined` */\n  className?: string;\n}\n\nexport const TooltipDefaultConfig: TooltipConfigInterface = {\n  components: [],\n  container: undefined,\n  followCursor: true,\n  allowHover: true,\n  horizontalPlacement: Position.Auto,\n  horizontalShift: 0,\n  verticalPlacement: Position.Top,\n  verticalShift: 0,\n  attributes: {},\n  triggers: {},\n  className: undefined,\n}\n\n", "import { css, injectGlobal } from '@emotion/css'\n\nexport const root = css`\n  label: tooltip;\n  display: inline-block;\n  left: 0;\n  bottom: 0;\n  min-width: max-content;\n  position: absolute;\n  opacity: 0;\n  transition: opacity;\n  transition-duration: var(--vis-tooltip-transition-duration);\n  z-index: 999999;\n  padding: var(--vis-tooltip-padding);\n  color: var(--vis-tooltip-text-color);\n  border-radius: var(--vis-tooltip-border-radius);\n  box-shadow: var(--vis-tooltip-box-shadow);\n  border: solid 1px var(--vis-tooltip-border-color);\n  background-color: var(--vis-tooltip-background-color);\n  backdrop-filter: var(--vis-tooltip-backdrop-filter);\n`\n\n/**\n * @deprecated This selector is deprecated and will be removed in future versions. Use `root` instead.\n */\nexport const tooltip = root\n\nexport const variables = injectGlobal`\n  :root {\n    --vis-tooltip-background-color: rgba(255, 255, 255, 0.95);\n    --vis-tooltip-border-color: #e5e9f7;\n    --vis-tooltip-text-color: #000;\n    --vis-tooltip-shadow-color: rgba(172, 179, 184, 0.35);\n    --vis-tooltip-backdrop-filter: none;\n    --vis-tooltip-padding: 10px 15px;\n    --vis-tooltip-border-radius: 5px;\n    --vis-tooltip-transition-duration: 300ms;\n    --vis-tooltip-box-shadow: none;\n\n    --vis-dark-tooltip-background-color: rgba(30,30,30, 0.95);\n    --vis-dark-tooltip-text-color: #e5e9f7;\n    --vis-dark-tooltip-border-color: var(--vis-color-grey);\n    --vis-dark-tooltip-shadow-color: rgba(0,0,0, 0.95);\n  }\n\n  body.theme-dark ${`.${root}`} {\n    --vis-tooltip-background-color: var(--vis-dark-tooltip-background-color);\n    --vis-tooltip-text-color: var(--vis-dark-tooltip-text-color);\n    --vis-tooltip-border-color: var(--vis-dark-tooltip-border-color);\n    --vis-tooltip-shadow-color: var(--vis-dark-tooltip-shadow-color);\n  }\n\n  body.theme-dark {\n    --vis-tooltip-background-color: rgba(30,30,30, 0.95);\n    --vis-tooltip-text-color: #e5e9f7;\n    --vis-tooltip-border-color: var(--vis-color-grey);\n    --vis-tooltip-shadow-color: rgba(0,0,0, 0.95);\n  }\n`\n\nexport const positionFixed = css`\n  bottom: unset;\n  position: fixed;\n`\n\nexport const show = css`\n  opacity: 1;\n`\n\nexport const hidden = css`\n  display: none;\n`\n\nexport const nonInteractive = css`\n  label: non-interactive;\n  pointer-events: none;\n  user-select: none;\n`\n", "import { select, Selection, pointer } from 'd3-selection'\n\n// Core\nimport { ComponentCore } from 'core/component'\n\n// Types\nimport { Position } from 'types/position'\n\n// Utils\nimport { merge, throttle } from 'utils/data'\n\n// Config\nimport { TooltipDefaultConfig, TooltipConfigInterface } from './config'\n\n// Style\nimport * as s from './style'\n\nexport class Tooltip {\n  element: HTMLElement\n  div: Selection<HTMLElement, unknown, null, undefined>\n  protected _defaultConfig = TooltipDefaultConfig as TooltipConfigInterface\n  public config: TooltipConfigInterface = this._defaultConfig\n  prevConfig: TooltipConfigInterface\n  components: ComponentCore<unknown>[]\n  static selectors = s\n  private _setUpEventsThrottled = throttle(this._setUpEvents, 500)\n  private _setContainerPositionThrottled = throttle(this._setContainerPosition, 500)\n  private _isShown = false\n  private _container: HTMLElement\n  private _mutationObserver: MutationObserver\n  private _hoveredElement: HTMLElement | SVGElement\n  private _position: [number, number]\n  private _overriddenHorizontalPlacement: Position.Left | Position.Right | string | undefined\n\n  constructor (config: TooltipConfigInterface = {}) {\n    this.element = document.createElement('div')\n    this.div = select(this.element).attr('class', s.root)\n\n    this.setConfig(config)\n    this.components = this.config.components\n\n    // Set up MutationObserver to automatically re-position the tooltip\n    // if the content has been dynamically changed\n    this._mutationObserver = new MutationObserver(() => {\n      if (!this._isShown) return\n\n      // Handle changes to the content of this.div\n      // Add your logic here\n      if (!this.config.followCursor && this._hoveredElement) {\n        this.placeByElement(this._hoveredElement)\n      } else if (this._position) {\n        this.place({ x: this._position[0], y: this._position[1] })\n      }\n    })\n\n    this._mutationObserver.observe(this.div.node(), { childList: true, subtree: true })\n  }\n\n  public setConfig (config: TooltipConfigInterface): void {\n    this.prevConfig = this.config\n    this.config = merge(this._defaultConfig, config)\n\n    // Reset `this._overriddenHorizontalPlacement` if the `horizontalPlacement` has changed\n    if (this.prevConfig.horizontalPlacement !== this.config.horizontalPlacement) {\n      this.overrideHorizontalPlacement(undefined)\n    }\n\n    if (this.config.container && (this.config.container !== this.prevConfig?.container)) {\n      this.setContainer(this.config.container)\n    }\n\n    this._setUpAttributes()\n  }\n\n  public setContainer (container: HTMLElement): void {\n    this.element.parentNode?.removeChild(this.element)\n\n    this._container = container\n    this._container.appendChild(this.element)\n\n    this._setContainerPositionThrottled()\n  }\n\n  public getContainer (): HTMLElement {\n    return this._container\n  }\n\n  public hasContainer (): boolean {\n    return !!this._container && this._container.isConnected\n  }\n\n  public setComponents (components: ComponentCore<unknown>[]): void {\n    this.components = components\n  }\n\n  public update (): void {\n    if (!this._container) return\n\n    this._setUpEventsThrottled()\n  }\n\n  /** Show the tooltip by providing content and position */\n  public show (html: string | HTMLElement | null | void, pos: { x: number; y: number }): void {\n    this.render(html)\n    this.place(pos)\n  }\n\n  /** Hide the tooltip */\n  public hide (): void {\n    this.div\n      .classed(s.show, false) // The `show` class triggers the opacity transition\n      .on('transitionend', () => {\n        // We hide the element once the transition completes\n        // This ensures container overflow will not occur when the window is resized\n        this.div.classed(s.hidden, !this._isShown)\n      })\n\n    this._isShown = false\n  }\n\n  /** Simply displays the tooltip with its previous content on position */\n  public display (): void {\n    this.div\n      .classed(s.hidden, false) // The `hidden` class sets `display: none;`\n      .classed(s.show, true) // The `show` class triggers the opacity transition\n\n    this._isShown = true\n  }\n\n  public place (pos: { x: number; y: number }): void {\n    this._position = [pos.x, pos.y]\n\n    if (!this.hasContainer()) {\n      console.warn('Unovis | Tooltip: Container was not set or is not initialized yet')\n      return\n    }\n\n    const { config } = this\n    const tooltipWidth = this.element.offsetWidth\n    const tooltipHeight = this.element.offsetHeight\n\n    const horizontalPlacement = this._overriddenHorizontalPlacement ||\n      (config.horizontalPlacement === Position.Auto\n        ? Position.Center\n        : config.horizontalPlacement)\n\n    const verticalPlacement = config.verticalPlacement === Position.Auto\n      ? ((pos.y - tooltipHeight) < 0 ? Position.Bottom : Position.Top)\n      : config.verticalPlacement\n\n    // Todo: Get rid of the hardcoded margin in version 2.0\n    // Can be simply replaced with `verticalShift` and `horizontalShift`\n    // but it'll be a breaking change\n    const margin = 5\n    const translateX = horizontalPlacement === Position.Left ? -tooltipWidth - margin - config.horizontalShift\n      : horizontalPlacement === Position.Center ? -tooltipWidth / 2\n        : margin + config.horizontalShift\n\n    const translateY = verticalPlacement === Position.Bottom ? margin + config.verticalShift\n      : verticalPlacement === Position.Center ? -tooltipHeight / 2\n        : -margin - config.verticalShift - tooltipHeight\n\n    // translateX and translateY variables shift the tooltip from the default position (above the cursor, centred horizontally)\n    const [top, left] = this._constraintPosToContainer(pos.x + translateX, pos.y + translateY, tooltipWidth, tooltipHeight)\n    this._applyPosition(top, left, tooltipHeight)\n  }\n\n  public placeByElement (hoveredElement: SVGElement | HTMLElement): void {\n    const { config } = this\n\n    // Store the hovered element and the event for future reference,\n    // i.e. to re-position the tooltip if the content has been changed\n    // by something else and it was captured by the MutationObserver\n    this._hoveredElement = hoveredElement\n\n    // Todo: Get rid of the hardcoded margin in version 2.0\n    // Can be simply replaced with `verticalShift` and `horizontalShift`\n    // but it'll be a breaking change\n    const margin = 5\n    const tooltipWidth = this.element.offsetWidth\n    const tooltipHeight = this.element.offsetHeight\n    const isContainerBody = this.isContainerBody()\n    const containerWidth = isContainerBody ? window.innerWidth : this._container.scrollWidth\n    const hoveredElementRect = hoveredElement.getBoundingClientRect()\n\n    // We use D3's point transformation to get the correct position of the element by pretending it's a pointer event\n    // See more: https://github.com/d3/d3-selection/blob/main/src/pointer.js\n    const elementPos = isContainerBody ? [hoveredElementRect.x, hoveredElementRect.y] : pointer({\n      clientX: hoveredElementRect.x,\n      clientY: hoveredElementRect.y,\n      pageX: hoveredElementRect.x,\n      pageY: hoveredElementRect.y,\n    }, this._container)\n\n    const horizontalPlacement = this._overriddenHorizontalPlacement || (\n      config.horizontalPlacement === Position.Auto\n        ? (elementPos[0] - tooltipWidth < 0 ? Position.Right\n          : elementPos[0] + tooltipWidth > containerWidth ? Position.Left : Position.Center)\n        : config.horizontalPlacement\n    )\n\n    let translateX = 0\n    switch (horizontalPlacement) {\n      case Position.Left:\n        translateX = -tooltipWidth - margin - config.horizontalShift\n        break\n      case Position.Right:\n        translateX = hoveredElementRect.width + margin + config.horizontalShift\n        break\n      case Position.Center:\n      default:\n        translateX = (-tooltipWidth + hoveredElementRect.width) / 2\n        break\n    }\n\n    const verticalPlacement = config.verticalPlacement === Position.Auto\n      ? (horizontalPlacement !== Position.Center ? Position.Center\n        : elementPos[1] - tooltipHeight < 0 ? Position.Bottom : Position.Top)\n      : config.verticalPlacement\n\n    let translateY = -tooltipHeight\n    switch (verticalPlacement) {\n      case Position.Center:\n        translateY += (tooltipHeight + hoveredElementRect.height) / 2\n        break\n      case Position.Bottom:\n        translateY += tooltipHeight + hoveredElementRect.height + margin + config.verticalShift\n        break\n      case Position.Top:\n      default:\n        translateY += -margin - config.verticalShift\n        break\n    }\n\n    const [top, left] = this._constraintPosToContainer(elementPos[0] + translateX, elementPos[1] + translateY, tooltipWidth, tooltipHeight)\n    this._applyPosition(top, left, tooltipHeight)\n  }\n\n  public isContainerBody (): boolean {\n    return this._container === document.body\n  }\n\n  /** Allows to override the horizontal placement of the tooltip which is useful when you want to define custom positioning behavior.\n   * This method has been added for Crosshair to allow it position tooltip left or right of the crosshair line\n   * (see the `_showTooltip` method of the Crosshair component).\n   */\n  public overrideHorizontalPlacement (placement: Position.Left | Position.Right | string | undefined): void {\n    this._overriddenHorizontalPlacement = placement\n  }\n\n  public render (html: string | HTMLElement | null | void): void {\n    const { config, prevConfig } = this\n    if (html instanceof HTMLElement) {\n      const node = this.div.select(':first-child').node()\n      if (node !== html) this.div.html('').append(() => html)\n    } else if (html) {\n      this.div.html(html)\n    }\n\n    this.div\n      .classed(config.className ?? '', Boolean(config.className))\n      .classed(s.nonInteractive, !config.allowHover || config.followCursor)\n\n    // Remove the previous class name if it was set\n    if (prevConfig?.className && prevConfig.className !== config.className) {\n      this.div.classed(prevConfig.className, false)\n    }\n\n    this.display()\n  }\n\n  private _applyPosition (x: number, y: number, tooltipHeight: number): void {\n    const isContainerBody = this.isContainerBody()\n    const containerHeight = isContainerBody ? window.innerHeight : this._container.scrollHeight\n\n    this.div\n      .classed(s.positionFixed, isContainerBody)\n      .style('top', isContainerBody ? `${y}px` : 'unset')\n      .style('bottom', !isContainerBody ? `${containerHeight - y - tooltipHeight}px` : 'unset')\n      .style('left', `${x}px`)\n  }\n\n  private _constraintPosToContainer (top: number, left: number, tooltipWidth: number, tooltipHeight: number): [number, number] {\n    const isContainerBody = this.isContainerBody()\n    const containerHeight = isContainerBody ? window.innerHeight : this._container.scrollHeight\n    const containerWidth = isContainerBody ? window.innerWidth : this._container.scrollWidth\n\n    // // Constraint to container\n    const paddingX = 10\n    const hitRight = top > (containerWidth - tooltipWidth - paddingX)\n    const hitLeft = top < paddingX\n    const constrainedLeft = hitRight ? containerWidth - tooltipWidth - paddingX\n      : hitLeft ? paddingX : top\n\n    const paddingY = 10\n    const hitBottom = left > (containerHeight - tooltipHeight - paddingY)\n    const hitTop = left < paddingY\n    const constrainedTop = hitBottom ? containerHeight - tooltipHeight - paddingY\n      : hitTop ? paddingY : left\n\n    return [\n      containerWidth < tooltipWidth ? 0 : constrainedLeft,\n      containerHeight < tooltipHeight ? 0 : constrainedTop,\n    ]\n  }\n\n  private _setContainerPosition (): void {\n    // Tooltip position calculation relies on the parent position\n    // If it's not set (static), we set it to `relative` (not a good practice)\n    if (this._container !== document.body && getComputedStyle(this._container)?.position === 'static') {\n      this._container.style.position = 'relative'\n    }\n  }\n\n  private _setUpEvents (): void {\n    const { config } = this\n\n    // We use the Event Delegation pattern to set up Tooltip events\n    // Every component will have single `mousemove` and `mouseleave` event listener functions, where we'll check\n    // the `path` of the event and trigger corresponding callbacks\n    this.components.forEach(component => {\n      const selection = select(component.element)\n      selection\n        .on('mousemove.tooltip', (e: MouseEvent) => {\n          const path: (HTMLElement | SVGGElement)[] = (e.composedPath && e.composedPath()) || (e as any).path || [e.target]\n\n          // Go through all of the configured triggers\n          for (const className of Object.keys(config.triggers)) {\n            const template = config.triggers[className]\n            if (!template) continue // Skip if the trigger is not configured\n\n            const els = selection.selectAll<HTMLElement | SVGGElement, unknown>(`.${className}`).nodes()\n\n            // Go through all of the elements in the event path (from the deepest element upwards)\n            for (const el of path) {\n              if (el === selection.node()) break // Break on the component's level (usually the `<g>` element)\n              if (el.classList.contains(className)) { // If there's a match, show the tooltip\n                const i = els.indexOf(el)\n                const d = select(el).datum()\n                const content = template(d, i, els)\n                const [x, y] = this.isContainerBody() ? [e.clientX, e.clientY] : pointer(e, this._container)\n                if (content === null) {\n                  // If the content is `null`, we hide the tooltip\n                  this.hide()\n                } else {\n                  // Otherwise we show the tooltip, but don't render the content if it's `undefined` or\n                  // an empty string. This way we can allow it to work with things like `createPortal` in React\n                  this.render(content)\n                  if (config.followCursor) this.place({ x, y })\n                  else this.placeByElement(el)\n                }\n\n                // Stop propagation to prevent other interfering events from being triggered, e.g. Crosshair\n                e.stopPropagation()\n\n                // Stop looking for other matches\n                return\n              }\n            }\n          }\n\n          // Hide the tooltip if the event didn't pass through any of the configured triggers.\n          // We use the `this._isShown` condition as a little performance optimization tweak\n          // (we don't want the tooltip to update its class on every mouse movement, see `this.hide()`).\n          if (this._isShown) this.hide()\n        })\n        .on('mouseleave.tooltip', (e: MouseEvent) => {\n          e.stopPropagation() // Stop propagation to prevent other interfering events from being triggered, e.g. Crosshair\n          this.hide()\n        })\n    })\n\n    // Set up Tooltip hover\n    if (config.allowHover && !config.followCursor) {\n      this.div\n        .on('mouseenter.tooltip', this.display.bind(this))\n        .on('mouseleave.tooltip', this.hide.bind(this))\n    } else {\n      this.div\n        .on('mouseenter.tooltip', null)\n        .on('mouseleave.tooltip', null)\n    }\n  }\n\n  private _setUpAttributes (): void {\n    const attributesMap = this.config.attributes\n    if (!attributesMap) return\n\n    Object.keys(attributesMap).forEach(attr => {\n      this.div.attr(attr, attributesMap[attr])\n    })\n  }\n\n  public destroy (): void {\n    this._mutationObserver.disconnect()\n    this.div?.remove()\n  }\n}\n", "export default function(x) {\n  return function constant() {\n    return x;\n  };\n}\n", "export const abs = Math.abs;\nexport const atan2 = Math.atan2;\nexport const cos = Math.cos;\nexport const max = Math.max;\nexport const min = Math.min;\nexport const sin = Math.sin;\nexport const sqrt = Math.sqrt;\n\nexport const epsilon = 1e-12;\nexport const pi = Math.PI;\nexport const halfPi = pi / 2;\nexport const tau = 2 * pi;\n\nexport function acos(x) {\n  return x > 1 ? 0 : x < -1 ? pi : Math.acos(x);\n}\n\nexport function asin(x) {\n  return x >= 1 ? halfPi : x <= -1 ? -halfPi : Math.asin(x);\n}\n", "const pi = Math.PI,\n    tau = 2 * pi,\n    epsilon = 1e-6,\n    tauEpsilon = tau - epsilon;\n\nfunction append(strings) {\n  this._ += strings[0];\n  for (let i = 1, n = strings.length; i < n; ++i) {\n    this._ += arguments[i] + strings[i];\n  }\n}\n\nfunction appendRound(digits) {\n  let d = Math.floor(digits);\n  if (!(d >= 0)) throw new Error(`invalid digits: ${digits}`);\n  if (d > 15) return append;\n  const k = 10 ** d;\n  return function(strings) {\n    this._ += strings[0];\n    for (let i = 1, n = strings.length; i < n; ++i) {\n      this._ += Math.round(arguments[i] * k) / k + strings[i];\n    }\n  };\n}\n\nexport class Path {\n  constructor(digits) {\n    this._x0 = this._y0 = // start of current subpath\n    this._x1 = this._y1 = null; // end of current subpath\n    this._ = \"\";\n    this._append = digits == null ? append : appendRound(digits);\n  }\n  moveTo(x, y) {\n    this._append`M${this._x0 = this._x1 = +x},${this._y0 = this._y1 = +y}`;\n  }\n  closePath() {\n    if (this._x1 !== null) {\n      this._x1 = this._x0, this._y1 = this._y0;\n      this._append`Z`;\n    }\n  }\n  lineTo(x, y) {\n    this._append`L${this._x1 = +x},${this._y1 = +y}`;\n  }\n  quadraticCurveTo(x1, y1, x, y) {\n    this._append`Q${+x1},${+y1},${this._x1 = +x},${this._y1 = +y}`;\n  }\n  bezierCurveTo(x1, y1, x2, y2, x, y) {\n    this._append`C${+x1},${+y1},${+x2},${+y2},${this._x1 = +x},${this._y1 = +y}`;\n  }\n  arcTo(x1, y1, x2, y2, r) {\n    x1 = +x1, y1 = +y1, x2 = +x2, y2 = +y2, r = +r;\n\n    // Is the radius negative? Error.\n    if (r < 0) throw new Error(`negative radius: ${r}`);\n\n    let x0 = this._x1,\n        y0 = this._y1,\n        x21 = x2 - x1,\n        y21 = y2 - y1,\n        x01 = x0 - x1,\n        y01 = y0 - y1,\n        l01_2 = x01 * x01 + y01 * y01;\n\n    // Is this path empty? Move to (x1,y1).\n    if (this._x1 === null) {\n      this._append`M${this._x1 = x1},${this._y1 = y1}`;\n    }\n\n    // Or, is (x1,y1) coincident with (x0,y0)? Do nothing.\n    else if (!(l01_2 > epsilon));\n\n    // Or, are (x0,y0), (x1,y1) and (x2,y2) collinear?\n    // Equivalently, is (x1,y1) coincident with (x2,y2)?\n    // Or, is the radius zero? Line to (x1,y1).\n    else if (!(Math.abs(y01 * x21 - y21 * x01) > epsilon) || !r) {\n      this._append`L${this._x1 = x1},${this._y1 = y1}`;\n    }\n\n    // Otherwise, draw an arc!\n    else {\n      let x20 = x2 - x0,\n          y20 = y2 - y0,\n          l21_2 = x21 * x21 + y21 * y21,\n          l20_2 = x20 * x20 + y20 * y20,\n          l21 = Math.sqrt(l21_2),\n          l01 = Math.sqrt(l01_2),\n          l = r * Math.tan((pi - Math.acos((l21_2 + l01_2 - l20_2) / (2 * l21 * l01))) / 2),\n          t01 = l / l01,\n          t21 = l / l21;\n\n      // If the start tangent is not coincident with (x0,y0), line to.\n      if (Math.abs(t01 - 1) > epsilon) {\n        this._append`L${x1 + t01 * x01},${y1 + t01 * y01}`;\n      }\n\n      this._append`A${r},${r},0,0,${+(y01 * x20 > x01 * y20)},${this._x1 = x1 + t21 * x21},${this._y1 = y1 + t21 * y21}`;\n    }\n  }\n  arc(x, y, r, a0, a1, ccw) {\n    x = +x, y = +y, r = +r, ccw = !!ccw;\n\n    // Is the radius negative? Error.\n    if (r < 0) throw new Error(`negative radius: ${r}`);\n\n    let dx = r * Math.cos(a0),\n        dy = r * Math.sin(a0),\n        x0 = x + dx,\n        y0 = y + dy,\n        cw = 1 ^ ccw,\n        da = ccw ? a0 - a1 : a1 - a0;\n\n    // Is this path empty? Move to (x0,y0).\n    if (this._x1 === null) {\n      this._append`M${x0},${y0}`;\n    }\n\n    // Or, is (x0,y0) not coincident with the previous point? Line to (x0,y0).\n    else if (Math.abs(this._x1 - x0) > epsilon || Math.abs(this._y1 - y0) > epsilon) {\n      this._append`L${x0},${y0}`;\n    }\n\n    // Is this arc empty? We’re done.\n    if (!r) return;\n\n    // Does the angle go the wrong way? Flip the direction.\n    if (da < 0) da = da % tau + tau;\n\n    // Is this a complete circle? Draw two arcs to complete the circle.\n    if (da > tauEpsilon) {\n      this._append`A${r},${r},0,1,${cw},${x - dx},${y - dy}A${r},${r},0,1,${cw},${this._x1 = x0},${this._y1 = y0}`;\n    }\n\n    // Is this arc non-empty? Draw an arc!\n    else if (da > epsilon) {\n      this._append`A${r},${r},0,${+(da >= pi)},${cw},${this._x1 = x + r * Math.cos(a1)},${this._y1 = y + r * Math.sin(a1)}`;\n    }\n  }\n  rect(x, y, w, h) {\n    this._append`M${this._x0 = this._x1 = +x},${this._y0 = this._y1 = +y}h${w = +w}v${+h}h${-w}Z`;\n  }\n  toString() {\n    return this._;\n  }\n}\n\nexport function path() {\n  return new Path;\n}\n\n// Allow instanceof d3.path\npath.prototype = Path.prototype;\n\nexport function pathRound(digits = 3) {\n  return new Path(+digits);\n}\n", "import {Path} from \"d3-path\";\n\nexport function withPath(shape) {\n  let digits = 3;\n\n  shape.digits = function(_) {\n    if (!arguments.length) return digits;\n    if (_ == null) {\n      digits = null;\n    } else {\n      const d = Math.floor(_);\n      if (!(d >= 0)) throw new RangeError(`invalid digits: ${_}`);\n      digits = d;\n    }\n    return shape;\n  };\n\n  return () => new Path(digits);\n}\n", "import constant from \"./constant.js\";\nimport {abs, acos, asin, atan2, cos, epsilon, halfPi, max, min, pi, sin, sqrt, tau} from \"./math.js\";\nimport {withPath} from \"./path.js\";\n\nfunction arcInnerRadius(d) {\n  return d.innerRadius;\n}\n\nfunction arcOuterRadius(d) {\n  return d.outerRadius;\n}\n\nfunction arcStartAngle(d) {\n  return d.startAngle;\n}\n\nfunction arcEndAngle(d) {\n  return d.endAngle;\n}\n\nfunction arcPadAngle(d) {\n  return d && d.padAngle; // Note: optional!\n}\n\nfunction intersect(x0, y0, x1, y1, x2, y2, x3, y3) {\n  var x10 = x1 - x0, y10 = y1 - y0,\n      x32 = x3 - x2, y32 = y3 - y2,\n      t = y32 * x10 - x32 * y10;\n  if (t * t < epsilon) return;\n  t = (x32 * (y0 - y2) - y32 * (x0 - x2)) / t;\n  return [x0 + t * x10, y0 + t * y10];\n}\n\n// Compute perpendicular offset line of length rc.\n// http://mathworld.wolfram.com/Circle-LineIntersection.html\nfunction cornerTangents(x0, y0, x1, y1, r1, rc, cw) {\n  var x01 = x0 - x1,\n      y01 = y0 - y1,\n      lo = (cw ? rc : -rc) / sqrt(x01 * x01 + y01 * y01),\n      ox = lo * y01,\n      oy = -lo * x01,\n      x11 = x0 + ox,\n      y11 = y0 + oy,\n      x10 = x1 + ox,\n      y10 = y1 + oy,\n      x00 = (x11 + x10) / 2,\n      y00 = (y11 + y10) / 2,\n      dx = x10 - x11,\n      dy = y10 - y11,\n      d2 = dx * dx + dy * dy,\n      r = r1 - rc,\n      D = x11 * y10 - x10 * y11,\n      d = (dy < 0 ? -1 : 1) * sqrt(max(0, r * r * d2 - D * D)),\n      cx0 = (D * dy - dx * d) / d2,\n      cy0 = (-D * dx - dy * d) / d2,\n      cx1 = (D * dy + dx * d) / d2,\n      cy1 = (-D * dx + dy * d) / d2,\n      dx0 = cx0 - x00,\n      dy0 = cy0 - y00,\n      dx1 = cx1 - x00,\n      dy1 = cy1 - y00;\n\n  // Pick the closer of the two intersection points.\n  // TODO Is there a faster way to determine which intersection to use?\n  if (dx0 * dx0 + dy0 * dy0 > dx1 * dx1 + dy1 * dy1) cx0 = cx1, cy0 = cy1;\n\n  return {\n    cx: cx0,\n    cy: cy0,\n    x01: -ox,\n    y01: -oy,\n    x11: cx0 * (r1 / r - 1),\n    y11: cy0 * (r1 / r - 1)\n  };\n}\n\nexport default function() {\n  var innerRadius = arcInnerRadius,\n      outerRadius = arcOuterRadius,\n      cornerRadius = constant(0),\n      padRadius = null,\n      startAngle = arcStartAngle,\n      endAngle = arcEndAngle,\n      padAngle = arcPadAngle,\n      context = null,\n      path = withPath(arc);\n\n  function arc() {\n    var buffer,\n        r,\n        r0 = +innerRadius.apply(this, arguments),\n        r1 = +outerRadius.apply(this, arguments),\n        a0 = startAngle.apply(this, arguments) - halfPi,\n        a1 = endAngle.apply(this, arguments) - halfPi,\n        da = abs(a1 - a0),\n        cw = a1 > a0;\n\n    if (!context) context = buffer = path();\n\n    // Ensure that the outer radius is always larger than the inner radius.\n    if (r1 < r0) r = r1, r1 = r0, r0 = r;\n\n    // Is it a point?\n    if (!(r1 > epsilon)) context.moveTo(0, 0);\n\n    // Or is it a circle or annulus?\n    else if (da > tau - epsilon) {\n      context.moveTo(r1 * cos(a0), r1 * sin(a0));\n      context.arc(0, 0, r1, a0, a1, !cw);\n      if (r0 > epsilon) {\n        context.moveTo(r0 * cos(a1), r0 * sin(a1));\n        context.arc(0, 0, r0, a1, a0, cw);\n      }\n    }\n\n    // Or is it a circular or annular sector?\n    else {\n      var a01 = a0,\n          a11 = a1,\n          a00 = a0,\n          a10 = a1,\n          da0 = da,\n          da1 = da,\n          ap = padAngle.apply(this, arguments) / 2,\n          rp = (ap > epsilon) && (padRadius ? +padRadius.apply(this, arguments) : sqrt(r0 * r0 + r1 * r1)),\n          rc = min(abs(r1 - r0) / 2, +cornerRadius.apply(this, arguments)),\n          rc0 = rc,\n          rc1 = rc,\n          t0,\n          t1;\n\n      // Apply padding? Note that since r1 ≥ r0, da1 ≥ da0.\n      if (rp > epsilon) {\n        var p0 = asin(rp / r0 * sin(ap)),\n            p1 = asin(rp / r1 * sin(ap));\n        if ((da0 -= p0 * 2) > epsilon) p0 *= (cw ? 1 : -1), a00 += p0, a10 -= p0;\n        else da0 = 0, a00 = a10 = (a0 + a1) / 2;\n        if ((da1 -= p1 * 2) > epsilon) p1 *= (cw ? 1 : -1), a01 += p1, a11 -= p1;\n        else da1 = 0, a01 = a11 = (a0 + a1) / 2;\n      }\n\n      var x01 = r1 * cos(a01),\n          y01 = r1 * sin(a01),\n          x10 = r0 * cos(a10),\n          y10 = r0 * sin(a10);\n\n      // Apply rounded corners?\n      if (rc > epsilon) {\n        var x11 = r1 * cos(a11),\n            y11 = r1 * sin(a11),\n            x00 = r0 * cos(a00),\n            y00 = r0 * sin(a00),\n            oc;\n\n        // Restrict the corner radius according to the sector angle. If this\n        // intersection fails, it’s probably because the arc is too small, so\n        // disable the corner radius entirely.\n        if (da < pi) {\n          if (oc = intersect(x01, y01, x00, y00, x11, y11, x10, y10)) {\n            var ax = x01 - oc[0],\n                ay = y01 - oc[1],\n                bx = x11 - oc[0],\n                by = y11 - oc[1],\n                kc = 1 / sin(acos((ax * bx + ay * by) / (sqrt(ax * ax + ay * ay) * sqrt(bx * bx + by * by))) / 2),\n                lc = sqrt(oc[0] * oc[0] + oc[1] * oc[1]);\n            rc0 = min(rc, (r0 - lc) / (kc - 1));\n            rc1 = min(rc, (r1 - lc) / (kc + 1));\n          } else {\n            rc0 = rc1 = 0;\n          }\n        }\n      }\n\n      // Is the sector collapsed to a line?\n      if (!(da1 > epsilon)) context.moveTo(x01, y01);\n\n      // Does the sector’s outer ring have rounded corners?\n      else if (rc1 > epsilon) {\n        t0 = cornerTangents(x00, y00, x01, y01, r1, rc1, cw);\n        t1 = cornerTangents(x11, y11, x10, y10, r1, rc1, cw);\n\n        context.moveTo(t0.cx + t0.x01, t0.cy + t0.y01);\n\n        // Have the corners merged?\n        if (rc1 < rc) context.arc(t0.cx, t0.cy, rc1, atan2(t0.y01, t0.x01), atan2(t1.y01, t1.x01), !cw);\n\n        // Otherwise, draw the two corners and the ring.\n        else {\n          context.arc(t0.cx, t0.cy, rc1, atan2(t0.y01, t0.x01), atan2(t0.y11, t0.x11), !cw);\n          context.arc(0, 0, r1, atan2(t0.cy + t0.y11, t0.cx + t0.x11), atan2(t1.cy + t1.y11, t1.cx + t1.x11), !cw);\n          context.arc(t1.cx, t1.cy, rc1, atan2(t1.y11, t1.x11), atan2(t1.y01, t1.x01), !cw);\n        }\n      }\n\n      // Or is the outer ring just a circular arc?\n      else context.moveTo(x01, y01), context.arc(0, 0, r1, a01, a11, !cw);\n\n      // Is there no inner ring, and it’s a circular sector?\n      // Or perhaps it’s an annular sector collapsed due to padding?\n      if (!(r0 > epsilon) || !(da0 > epsilon)) context.lineTo(x10, y10);\n\n      // Does the sector’s inner ring (or point) have rounded corners?\n      else if (rc0 > epsilon) {\n        t0 = cornerTangents(x10, y10, x11, y11, r0, -rc0, cw);\n        t1 = cornerTangents(x01, y01, x00, y00, r0, -rc0, cw);\n\n        context.lineTo(t0.cx + t0.x01, t0.cy + t0.y01);\n\n        // Have the corners merged?\n        if (rc0 < rc) context.arc(t0.cx, t0.cy, rc0, atan2(t0.y01, t0.x01), atan2(t1.y01, t1.x01), !cw);\n\n        // Otherwise, draw the two corners and the ring.\n        else {\n          context.arc(t0.cx, t0.cy, rc0, atan2(t0.y01, t0.x01), atan2(t0.y11, t0.x11), !cw);\n          context.arc(0, 0, r0, atan2(t0.cy + t0.y11, t0.cx + t0.x11), atan2(t1.cy + t1.y11, t1.cx + t1.x11), cw);\n          context.arc(t1.cx, t1.cy, rc0, atan2(t1.y11, t1.x11), atan2(t1.y01, t1.x01), !cw);\n        }\n      }\n\n      // Or is the inner ring just a circular arc?\n      else context.arc(0, 0, r0, a10, a00, cw);\n    }\n\n    context.closePath();\n\n    if (buffer) return context = null, buffer + \"\" || null;\n  }\n\n  arc.centroid = function() {\n    var r = (+innerRadius.apply(this, arguments) + +outerRadius.apply(this, arguments)) / 2,\n        a = (+startAngle.apply(this, arguments) + +endAngle.apply(this, arguments)) / 2 - pi / 2;\n    return [cos(a) * r, sin(a) * r];\n  };\n\n  arc.innerRadius = function(_) {\n    return arguments.length ? (innerRadius = typeof _ === \"function\" ? _ : constant(+_), arc) : innerRadius;\n  };\n\n  arc.outerRadius = function(_) {\n    return arguments.length ? (outerRadius = typeof _ === \"function\" ? _ : constant(+_), arc) : outerRadius;\n  };\n\n  arc.cornerRadius = function(_) {\n    return arguments.length ? (cornerRadius = typeof _ === \"function\" ? _ : constant(+_), arc) : cornerRadius;\n  };\n\n  arc.padRadius = function(_) {\n    return arguments.length ? (padRadius = _ == null ? null : typeof _ === \"function\" ? _ : constant(+_), arc) : padRadius;\n  };\n\n  arc.startAngle = function(_) {\n    return arguments.length ? (startAngle = typeof _ === \"function\" ? _ : constant(+_), arc) : startAngle;\n  };\n\n  arc.endAngle = function(_) {\n    return arguments.length ? (endAngle = typeof _ === \"function\" ? _ : constant(+_), arc) : endAngle;\n  };\n\n  arc.padAngle = function(_) {\n    return arguments.length ? (padAngle = typeof _ === \"function\" ? _ : constant(+_), arc) : padAngle;\n  };\n\n  arc.context = function(_) {\n    return arguments.length ? ((context = _ == null ? null : _), arc) : context;\n  };\n\n  return arc;\n}\n", "export var slice = Array.prototype.slice;\n\nexport default function(x) {\n  return typeof x === \"object\" && \"length\" in x\n    ? x // Array, TypedArray, NodeList, array-like\n    : Array.from(x); // Map, Set, iterable, string, or anything else\n}\n", "function Linear(context) {\n  this._context = context;\n}\n\nLinear.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; // falls through\n      default: this._context.lineTo(x, y); break;\n    }\n  }\n};\n\nexport default function(context) {\n  return new Linear(context);\n}\n", "export function x(p) {\n  return p[0];\n}\n\nexport function y(p) {\n  return p[1];\n}\n", "import array from \"./array.js\";\nimport constant from \"./constant.js\";\nimport curveLinear from \"./curve/linear.js\";\nimport {withPath} from \"./path.js\";\nimport {x as pointX, y as pointY} from \"./point.js\";\n\nexport default function(x, y) {\n  var defined = constant(true),\n      context = null,\n      curve = curveLinear,\n      output = null,\n      path = withPath(line);\n\n  x = typeof x === \"function\" ? x : (x === undefined) ? pointX : constant(x);\n  y = typeof y === \"function\" ? y : (y === undefined) ? pointY : constant(y);\n\n  function line(data) {\n    var i,\n        n = (data = array(data)).length,\n        d,\n        defined0 = false,\n        buffer;\n\n    if (context == null) output = curve(buffer = path());\n\n    for (i = 0; i <= n; ++i) {\n      if (!(i < n && defined(d = data[i], i, data)) === defined0) {\n        if (defined0 = !defined0) output.lineStart();\n        else output.lineEnd();\n      }\n      if (defined0) output.point(+x(d, i, data), +y(d, i, data));\n    }\n\n    if (buffer) return output = null, buffer + \"\" || null;\n  }\n\n  line.x = function(_) {\n    return arguments.length ? (x = typeof _ === \"function\" ? _ : constant(+_), line) : x;\n  };\n\n  line.y = function(_) {\n    return arguments.length ? (y = typeof _ === \"function\" ? _ : constant(+_), line) : y;\n  };\n\n  line.defined = function(_) {\n    return arguments.length ? (defined = typeof _ === \"function\" ? _ : constant(!!_), line) : defined;\n  };\n\n  line.curve = function(_) {\n    return arguments.length ? (curve = _, context != null && (output = curve(context)), line) : curve;\n  };\n\n  line.context = function(_) {\n    return arguments.length ? (_ == null ? context = output = null : output = curve(context = _), line) : context;\n  };\n\n  return line;\n}\n", "import array from \"./array.js\";\nimport constant from \"./constant.js\";\nimport curveLinear from \"./curve/linear.js\";\nimport line from \"./line.js\";\nimport {withPath} from \"./path.js\";\nimport {x as pointX, y as pointY} from \"./point.js\";\n\nexport default function(x0, y0, y1) {\n  var x1 = null,\n      defined = constant(true),\n      context = null,\n      curve = curveLinear,\n      output = null,\n      path = withPath(area);\n\n  x0 = typeof x0 === \"function\" ? x0 : (x0 === undefined) ? pointX : constant(+x0);\n  y0 = typeof y0 === \"function\" ? y0 : (y0 === undefined) ? constant(0) : constant(+y0);\n  y1 = typeof y1 === \"function\" ? y1 : (y1 === undefined) ? pointY : constant(+y1);\n\n  function area(data) {\n    var i,\n        j,\n        k,\n        n = (data = array(data)).length,\n        d,\n        defined0 = false,\n        buffer,\n        x0z = new Array(n),\n        y0z = new Array(n);\n\n    if (context == null) output = curve(buffer = path());\n\n    for (i = 0; i <= n; ++i) {\n      if (!(i < n && defined(d = data[i], i, data)) === defined0) {\n        if (defined0 = !defined0) {\n          j = i;\n          output.areaStart();\n          output.lineStart();\n        } else {\n          output.lineEnd();\n          output.lineStart();\n          for (k = i - 1; k >= j; --k) {\n            output.point(x0z[k], y0z[k]);\n          }\n          output.lineEnd();\n          output.areaEnd();\n        }\n      }\n      if (defined0) {\n        x0z[i] = +x0(d, i, data), y0z[i] = +y0(d, i, data);\n        output.point(x1 ? +x1(d, i, data) : x0z[i], y1 ? +y1(d, i, data) : y0z[i]);\n      }\n    }\n\n    if (buffer) return output = null, buffer + \"\" || null;\n  }\n\n  function arealine() {\n    return line().defined(defined).curve(curve).context(context);\n  }\n\n  area.x = function(_) {\n    return arguments.length ? (x0 = typeof _ === \"function\" ? _ : constant(+_), x1 = null, area) : x0;\n  };\n\n  area.x0 = function(_) {\n    return arguments.length ? (x0 = typeof _ === \"function\" ? _ : constant(+_), area) : x0;\n  };\n\n  area.x1 = function(_) {\n    return arguments.length ? (x1 = _ == null ? null : typeof _ === \"function\" ? _ : constant(+_), area) : x1;\n  };\n\n  area.y = function(_) {\n    return arguments.length ? (y0 = typeof _ === \"function\" ? _ : constant(+_), y1 = null, area) : y0;\n  };\n\n  area.y0 = function(_) {\n    return arguments.length ? (y0 = typeof _ === \"function\" ? _ : constant(+_), area) : y0;\n  };\n\n  area.y1 = function(_) {\n    return arguments.length ? (y1 = _ == null ? null : typeof _ === \"function\" ? _ : constant(+_), area) : y1;\n  };\n\n  area.lineX0 =\n  area.lineY0 = function() {\n    return arealine().x(x0).y(y0);\n  };\n\n  area.lineY1 = function() {\n    return arealine().x(x0).y(y1);\n  };\n\n  area.lineX1 = function() {\n    return arealine().x(x1).y(y0);\n  };\n\n  area.defined = function(_) {\n    return arguments.length ? (defined = typeof _ === \"function\" ? _ : constant(!!_), area) : defined;\n  };\n\n  area.curve = function(_) {\n    return arguments.length ? (curve = _, context != null && (output = curve(context)), area) : curve;\n  };\n\n  area.context = function(_) {\n    return arguments.length ? (_ == null ? context = output = null : output = curve(context = _), area) : context;\n  };\n\n  return area;\n}\n", "export default function(a, b) {\n  return b < a ? -1 : b > a ? 1 : b >= a ? 0 : NaN;\n}\n", "export default function(d) {\n  return d;\n}\n", "import array from \"./array.js\";\nimport constant from \"./constant.js\";\nimport descending from \"./descending.js\";\nimport identity from \"./identity.js\";\nimport {tau} from \"./math.js\";\n\nexport default function() {\n  var value = identity,\n      sortValues = descending,\n      sort = null,\n      startAngle = constant(0),\n      endAngle = constant(tau),\n      padAngle = constant(0);\n\n  function pie(data) {\n    var i,\n        n = (data = array(data)).length,\n        j,\n        k,\n        sum = 0,\n        index = new Array(n),\n        arcs = new Array(n),\n        a0 = +startAngle.apply(this, arguments),\n        da = Math.min(tau, Math.max(-tau, endAngle.apply(this, arguments) - a0)),\n        a1,\n        p = Math.min(Math.abs(da) / n, padAngle.apply(this, arguments)),\n        pa = p * (da < 0 ? -1 : 1),\n        v;\n\n    for (i = 0; i < n; ++i) {\n      if ((v = arcs[index[i] = i] = +value(data[i], i, data)) > 0) {\n        sum += v;\n      }\n    }\n\n    // Optionally sort the arcs by previously-computed values or by data.\n    if (sortValues != null) index.sort(function(i, j) { return sortValues(arcs[i], arcs[j]); });\n    else if (sort != null) index.sort(function(i, j) { return sort(data[i], data[j]); });\n\n    // Compute the arcs! They are stored in the original data's order.\n    for (i = 0, k = sum ? (da - n * pa) / sum : 0; i < n; ++i, a0 = a1) {\n      j = index[i], v = arcs[j], a1 = a0 + (v > 0 ? v * k : 0) + pa, arcs[j] = {\n        data: data[j],\n        index: i,\n        value: v,\n        startAngle: a0,\n        endAngle: a1,\n        padAngle: p\n      };\n    }\n\n    return arcs;\n  }\n\n  pie.value = function(_) {\n    return arguments.length ? (value = typeof _ === \"function\" ? _ : constant(+_), pie) : value;\n  };\n\n  pie.sortValues = function(_) {\n    return arguments.length ? (sortValues = _, sort = null, pie) : sortValues;\n  };\n\n  pie.sort = function(_) {\n    return arguments.length ? (sort = _, sortValues = null, pie) : sort;\n  };\n\n  pie.startAngle = function(_) {\n    return arguments.length ? (startAngle = typeof _ === \"function\" ? _ : constant(+_), pie) : startAngle;\n  };\n\n  pie.endAngle = function(_) {\n    return arguments.length ? (endAngle = typeof _ === \"function\" ? _ : constant(+_), pie) : endAngle;\n  };\n\n  pie.padAngle = function(_) {\n    return arguments.length ? (padAngle = typeof _ === \"function\" ? _ : constant(+_), pie) : padAngle;\n  };\n\n  return pie;\n}\n", "import curveLinear from \"./linear.js\";\n\nexport var curveRadialLinear = curveRadial(curveLinear);\n\nfunction Radial(curve) {\n  this._curve = curve;\n}\n\nRadial.prototype = {\n  areaStart: function() {\n    this._curve.areaStart();\n  },\n  areaEnd: function() {\n    this._curve.areaEnd();\n  },\n  lineStart: function() {\n    this._curve.lineStart();\n  },\n  lineEnd: function() {\n    this._curve.lineEnd();\n  },\n  point: function(a, r) {\n    this._curve.point(r * Math.sin(a), r * -Math.cos(a));\n  }\n};\n\nexport default function curveRadial(curve) {\n\n  function radial(context) {\n    return new Radial(curve(context));\n  }\n\n  radial._curve = curve;\n\n  return radial;\n}\n", "import curveRadial, {curveRadialLinear} from \"./curve/radial.js\";\nimport line from \"./line.js\";\n\nexport function lineRadial(l) {\n  var c = l.curve;\n\n  l.angle = l.x, delete l.x;\n  l.radius = l.y, delete l.y;\n\n  l.curve = function(_) {\n    return arguments.length ? c(curveRadial(_)) : c()._curve;\n  };\n\n  return l;\n}\n\nexport default function() {\n  return lineRadial(line().curve(curveRadialLinear));\n}\n", "import curveRadial, {curveRadialLinear} from \"./curve/radial.js\";\nimport area from \"./area.js\";\nimport {lineRadial} from \"./lineRadial.js\";\n\nexport default function() {\n  var a = area().curve(curveRadialLinear),\n      c = a.curve,\n      x0 = a.lineX0,\n      x1 = a.lineX1,\n      y0 = a.lineY0,\n      y1 = a.lineY1;\n\n  a.angle = a.x, delete a.x;\n  a.startAngle = a.x0, delete a.x0;\n  a.endAngle = a.x1, delete a.x1;\n  a.radius = a.y, delete a.y;\n  a.innerRadius = a.y0, delete a.y0;\n  a.outerRadius = a.y1, delete a.y1;\n  a.lineStartAngle = function() { return lineRadial(x0()); }, delete a.lineX0;\n  a.lineEndAngle = function() { return lineRadial(x1()); }, delete a.lineX1;\n  a.lineInnerRadius = function() { return lineRadial(y0()); }, delete a.lineY0;\n  a.lineOuterRadius = function() { return lineRadial(y1()); }, delete a.lineY1;\n\n  a.curve = function(_) {\n    return arguments.length ? c(curveRadial(_)) : c()._curve;\n  };\n\n  return a;\n}\n", "import {min, sqrt} from \"../math.js\";\n\nconst sqrt3 = sqrt(3);\n\nexport default {\n  draw(context, size) {\n    const r = sqrt(size + min(size / 28, 0.75)) * 0.59436;\n    const t = r / 2;\n    const u = t * sqrt3;\n    context.moveTo(0, r);\n    context.lineTo(0, -r);\n    context.moveTo(-u, -t);\n    context.lineTo(u, t);\n    context.moveTo(-u, t);\n    context.lineTo(u, -t);\n  }\n};\n", "import {pi, sqrt, tau} from \"../math.js\";\n\nexport default {\n  draw(context, size) {\n    const r = sqrt(size / pi);\n    context.moveTo(r, 0);\n    context.arc(0, 0, r, 0, tau);\n  }\n};\n", "import {sqrt} from \"../math.js\";\n\nexport default {\n  draw(context, size) {\n    const r = sqrt(size / 5) / 2;\n    context.moveTo(-3 * r, -r);\n    context.lineTo(-r, -r);\n    context.lineTo(-r, -3 * r);\n    context.lineTo(r, -3 * r);\n    context.lineTo(r, -r);\n    context.lineTo(3 * r, -r);\n    context.lineTo(3 * r, r);\n    context.lineTo(r, r);\n    context.lineTo(r, 3 * r);\n    context.lineTo(-r, 3 * r);\n    context.lineTo(-r, r);\n    context.lineTo(-3 * r, r);\n    context.closePath();\n  }\n};\n", "import {sqrt} from \"../math.js\";\n\nconst tan30 = sqrt(1 / 3);\nconst tan30_2 = tan30 * 2;\n\nexport default {\n  draw(context, size) {\n    const y = sqrt(size / tan30_2);\n    const x = y * tan30;\n    context.moveTo(0, -y);\n    context.lineTo(x, 0);\n    context.lineTo(0, y);\n    context.lineTo(-x, 0);\n    context.closePath();\n  }\n};\n", "import {sqrt} from \"../math.js\";\n\nexport default {\n  draw(context, size) {\n    const w = sqrt(size);\n    const x = -w / 2;\n    context.rect(x, x, w, w);\n  }\n};\n", "import {sin, cos, sqrt, pi, tau} from \"../math.js\";\n\nconst ka = 0.89081309152928522810;\nconst kr = sin(pi / 10) / sin(7 * pi / 10);\nconst kx = sin(tau / 10) * kr;\nconst ky = -cos(tau / 10) * kr;\n\nexport default {\n  draw(context, size) {\n    const r = sqrt(size * ka);\n    const x = kx * r;\n    const y = ky * r;\n    context.moveTo(0, -r);\n    context.lineTo(x, y);\n    for (let i = 1; i < 5; ++i) {\n      const a = tau * i / 5;\n      const c = cos(a);\n      const s = sin(a);\n      context.lineTo(s * r, -c * r);\n      context.lineTo(c * x - s * y, s * x + c * y);\n    }\n    context.closePath();\n  }\n};\n", "import {sqrt} from \"../math.js\";\n\nconst sqrt3 = sqrt(3);\n\nexport default {\n  draw(context, size) {\n    const y = -sqrt(size / (sqrt3 * 3));\n    context.moveTo(0, y * 2);\n    context.lineTo(-sqrt3 * y, -y);\n    context.lineTo(sqrt3 * y, -y);\n    context.closePath();\n  }\n};\n", "import {sqrt} from \"../math.js\";\n\nconst sqrt3 = sqrt(3);\n\nexport default {\n  draw(context, size) {\n    const s = sqrt(size) * 0.6824;\n    const t = s  / 2;\n    const u = (s * sqrt3) / 2; // cos(Math.PI / 6)\n    context.moveTo(0, -s);\n    context.lineTo(u, t);\n    context.lineTo(-u, t);\n    context.closePath();\n  }\n};\n", "import {sqrt} from \"../math.js\";\n\nconst c = -0.5;\nconst s = sqrt(3) / 2;\nconst k = 1 / sqrt(12);\nconst a = (k / 2 + 1) * 3;\n\nexport default {\n  draw(context, size) {\n    const r = sqrt(size / a);\n    const x0 = r / 2, y0 = r * k;\n    const x1 = x0, y1 = r * k + r;\n    const x2 = -x1, y2 = y1;\n    context.moveTo(x0, y0);\n    context.lineTo(x1, y1);\n    context.lineTo(x2, y2);\n    context.lineTo(c * x0 - s * y0, s * x0 + c * y0);\n    context.lineTo(c * x1 - s * y1, s * x1 + c * y1);\n    context.lineTo(c * x2 - s * y2, s * x2 + c * y2);\n    context.lineTo(c * x0 + s * y0, c * y0 - s * x0);\n    context.lineTo(c * x1 + s * y1, c * y1 - s * x1);\n    context.lineTo(c * x2 + s * y2, c * y2 - s * x2);\n    context.closePath();\n  }\n};\n", "import constant from \"./constant.js\";\nimport {withPath} from \"./path.js\";\nimport asterisk from \"./symbol/asterisk.js\";\nimport circle from \"./symbol/circle.js\";\nimport cross from \"./symbol/cross.js\";\nimport diamond from \"./symbol/diamond.js\";\nimport diamond2 from \"./symbol/diamond2.js\";\nimport plus from \"./symbol/plus.js\";\nimport square from \"./symbol/square.js\";\nimport square2 from \"./symbol/square2.js\";\nimport star from \"./symbol/star.js\";\nimport triangle from \"./symbol/triangle.js\";\nimport triangle2 from \"./symbol/triangle2.js\";\nimport wye from \"./symbol/wye.js\";\nimport times from \"./symbol/times.js\";\n\n// These symbols are designed to be filled.\nexport const symbolsFill = [\n  circle,\n  cross,\n  diamond,\n  square,\n  star,\n  triangle,\n  wye\n];\n\n// These symbols are designed to be stroked (with a width of 1.5px and round caps).\nexport const symbolsStroke = [\n  circle,\n  plus,\n  times,\n  triangle2,\n  asterisk,\n  square2,\n  diamond2\n];\n\nexport default function Symbol(type, size) {\n  let context = null,\n      path = withPath(symbol);\n\n  type = typeof type === \"function\" ? type : constant(type || circle);\n  size = typeof size === \"function\" ? size : constant(size === undefined ? 64 : +size);\n\n  function symbol() {\n    let buffer;\n    if (!context) context = buffer = path();\n    type.apply(this, arguments).draw(context, +size.apply(this, arguments));\n    if (buffer) return context = null, buffer + \"\" || null;\n  }\n\n  symbol.type = function(_) {\n    return arguments.length ? (type = typeof _ === \"function\" ? _ : constant(_), symbol) : type;\n  };\n\n  symbol.size = function(_) {\n    return arguments.length ? (size = typeof _ === \"function\" ? _ : constant(+_), symbol) : size;\n  };\n\n  symbol.context = function(_) {\n    return arguments.length ? (context = _ == null ? null : _, symbol) : context;\n  };\n\n  return symbol;\n}\n", "export default function() {}\n", "export function point(that, x, y) {\n  that._context.bezierCurveTo(\n    (2 * that._x0 + that._x1) / 3,\n    (2 * that._y0 + that._y1) / 3,\n    (that._x0 + 2 * that._x1) / 3,\n    (that._y0 + 2 * that._y1) / 3,\n    (that._x0 + 4 * that._x1 + x) / 6,\n    (that._y0 + 4 * that._y1 + y) / 6\n  );\n}\n\nexport function Basis(context) {\n  this._context = context;\n}\n\nBasis.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 =\n    this._y0 = this._y1 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 3: point(this, this._x1, this._y1); // falls through\n      case 2: this._context.lineTo(this._x1, this._y1); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; this._context.lineTo((5 * this._x0 + this._x1) / 6, (5 * this._y0 + this._y1) / 6); // falls through\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = x;\n    this._y0 = this._y1, this._y1 = y;\n  }\n};\n\nexport default function(context) {\n  return new Basis(context);\n}\n", "import noop from \"../noop.js\";\nimport {point} from \"./basis.js\";\n\nfunction BasisClosed(context) {\n  this._context = context;\n}\n\nBasisClosed.prototype = {\n  areaStart: noop,\n  areaEnd: noop,\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 = this._x3 = this._x4 =\n    this._y0 = this._y1 = this._y2 = this._y3 = this._y4 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 1: {\n        this._context.moveTo(this._x2, this._y2);\n        this._context.closePath();\n        break;\n      }\n      case 2: {\n        this._context.moveTo((this._x2 + 2 * this._x3) / 3, (this._y2 + 2 * this._y3) / 3);\n        this._context.lineTo((this._x3 + 2 * this._x2) / 3, (this._y3 + 2 * this._y2) / 3);\n        this._context.closePath();\n        break;\n      }\n      case 3: {\n        this.point(this._x2, this._y2);\n        this.point(this._x3, this._y3);\n        this.point(this._x4, this._y4);\n        break;\n      }\n    }\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._x2 = x, this._y2 = y; break;\n      case 1: this._point = 2; this._x3 = x, this._y3 = y; break;\n      case 2: this._point = 3; this._x4 = x, this._y4 = y; this._context.moveTo((this._x0 + 4 * this._x1 + x) / 6, (this._y0 + 4 * this._y1 + y) / 6); break;\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = x;\n    this._y0 = this._y1, this._y1 = y;\n  }\n};\n\nexport default function(context) {\n  return new BasisClosed(context);\n}\n", "import {point} from \"./basis.js\";\n\nfunction BasisOpen(context) {\n  this._context = context;\n}\n\nBasisOpen.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 =\n    this._y0 = this._y1 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line || (this._line !== 0 && this._point === 3)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; var x0 = (this._x0 + 4 * this._x1 + x) / 6, y0 = (this._y0 + 4 * this._y1 + y) / 6; this._line ? this._context.lineTo(x0, y0) : this._context.moveTo(x0, y0); break;\n      case 3: this._point = 4; // falls through\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = x;\n    this._y0 = this._y1, this._y1 = y;\n  }\n};\n\nexport default function(context) {\n  return new BasisOpen(context);\n}\n", "import {Basis} from \"./basis.js\";\n\nfunction Bundle(context, beta) {\n  this._basis = new Basis(context);\n  this._beta = beta;\n}\n\nBundle.prototype = {\n  lineStart: function() {\n    this._x = [];\n    this._y = [];\n    this._basis.lineStart();\n  },\n  lineEnd: function() {\n    var x = this._x,\n        y = this._y,\n        j = x.length - 1;\n\n    if (j > 0) {\n      var x0 = x[0],\n          y0 = y[0],\n          dx = x[j] - x0,\n          dy = y[j] - y0,\n          i = -1,\n          t;\n\n      while (++i <= j) {\n        t = i / j;\n        this._basis.point(\n          this._beta * x[i] + (1 - this._beta) * (x0 + t * dx),\n          this._beta * y[i] + (1 - this._beta) * (y0 + t * dy)\n        );\n      }\n    }\n\n    this._x = this._y = null;\n    this._basis.lineEnd();\n  },\n  point: function(x, y) {\n    this._x.push(+x);\n    this._y.push(+y);\n  }\n};\n\nexport default (function custom(beta) {\n\n  function bundle(context) {\n    return beta === 1 ? new Basis(context) : new Bundle(context, beta);\n  }\n\n  bundle.beta = function(beta) {\n    return custom(+beta);\n  };\n\n  return bundle;\n})(0.85);\n", "export function point(that, x, y) {\n  that._context.bezierCurveTo(\n    that._x1 + that._k * (that._x2 - that._x0),\n    that._y1 + that._k * (that._y2 - that._y0),\n    that._x2 + that._k * (that._x1 - x),\n    that._y2 + that._k * (that._y1 - y),\n    that._x2,\n    that._y2\n  );\n}\n\nexport function Cardinal(context, tension) {\n  this._context = context;\n  this._k = (1 - tension) / 6;\n}\n\nCardinal.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 =\n    this._y0 = this._y1 = this._y2 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 2: this._context.lineTo(this._x2, this._y2); break;\n      case 3: point(this, this._x1, this._y1); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; this._x1 = x, this._y1 = y; break;\n      case 2: this._point = 3; // falls through\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(tension) {\n\n  function cardinal(context) {\n    return new Cardinal(context, tension);\n  }\n\n  cardinal.tension = function(tension) {\n    return custom(+tension);\n  };\n\n  return cardinal;\n})(0);\n", "import noop from \"../noop.js\";\nimport {point} from \"./cardinal.js\";\n\nexport function CardinalClosed(context, tension) {\n  this._context = context;\n  this._k = (1 - tension) / 6;\n}\n\nCardinalClosed.prototype = {\n  areaStart: noop,\n  areaEnd: noop,\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 = this._x3 = this._x4 = this._x5 =\n    this._y0 = this._y1 = this._y2 = this._y3 = this._y4 = this._y5 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 1: {\n        this._context.moveTo(this._x3, this._y3);\n        this._context.closePath();\n        break;\n      }\n      case 2: {\n        this._context.lineTo(this._x3, this._y3);\n        this._context.closePath();\n        break;\n      }\n      case 3: {\n        this.point(this._x3, this._y3);\n        this.point(this._x4, this._y4);\n        this.point(this._x5, this._y5);\n        break;\n      }\n    }\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._x3 = x, this._y3 = y; break;\n      case 1: this._point = 2; this._context.moveTo(this._x4 = x, this._y4 = y); break;\n      case 2: this._point = 3; this._x5 = x, this._y5 = y; break;\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(tension) {\n\n  function cardinal(context) {\n    return new CardinalClosed(context, tension);\n  }\n\n  cardinal.tension = function(tension) {\n    return custom(+tension);\n  };\n\n  return cardinal;\n})(0);\n", "import {point} from \"./cardinal.js\";\n\nexport function CardinalOpen(context, tension) {\n  this._context = context;\n  this._k = (1 - tension) / 6;\n}\n\nCardinalOpen.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 =\n    this._y0 = this._y1 = this._y2 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line || (this._line !== 0 && this._point === 3)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; this._line ? this._context.lineTo(this._x2, this._y2) : this._context.moveTo(this._x2, this._y2); break;\n      case 3: this._point = 4; // falls through\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(tension) {\n\n  function cardinal(context) {\n    return new CardinalOpen(context, tension);\n  }\n\n  cardinal.tension = function(tension) {\n    return custom(+tension);\n  };\n\n  return cardinal;\n})(0);\n", "import {epsilon} from \"../math.js\";\nimport {Cardinal} from \"./cardinal.js\";\n\nexport function point(that, x, y) {\n  var x1 = that._x1,\n      y1 = that._y1,\n      x2 = that._x2,\n      y2 = that._y2;\n\n  if (that._l01_a > epsilon) {\n    var a = 2 * that._l01_2a + 3 * that._l01_a * that._l12_a + that._l12_2a,\n        n = 3 * that._l01_a * (that._l01_a + that._l12_a);\n    x1 = (x1 * a - that._x0 * that._l12_2a + that._x2 * that._l01_2a) / n;\n    y1 = (y1 * a - that._y0 * that._l12_2a + that._y2 * that._l01_2a) / n;\n  }\n\n  if (that._l23_a > epsilon) {\n    var b = 2 * that._l23_2a + 3 * that._l23_a * that._l12_a + that._l12_2a,\n        m = 3 * that._l23_a * (that._l23_a + that._l12_a);\n    x2 = (x2 * b + that._x1 * that._l23_2a - x * that._l12_2a) / m;\n    y2 = (y2 * b + that._y1 * that._l23_2a - y * that._l12_2a) / m;\n  }\n\n  that._context.bezierCurveTo(x1, y1, x2, y2, that._x2, that._y2);\n}\n\nfunction CatmullRom(context, alpha) {\n  this._context = context;\n  this._alpha = alpha;\n}\n\nCatmullRom.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 =\n    this._y0 = this._y1 = this._y2 = NaN;\n    this._l01_a = this._l12_a = this._l23_a =\n    this._l01_2a = this._l12_2a = this._l23_2a =\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 2: this._context.lineTo(this._x2, this._y2); break;\n      case 3: this.point(this._x2, this._y2); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n\n    if (this._point) {\n      var x23 = this._x2 - x,\n          y23 = this._y2 - y;\n      this._l23_a = Math.sqrt(this._l23_2a = Math.pow(x23 * x23 + y23 * y23, this._alpha));\n    }\n\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; // falls through\n      default: point(this, x, y); break;\n    }\n\n    this._l01_a = this._l12_a, this._l12_a = this._l23_a;\n    this._l01_2a = this._l12_2a, this._l12_2a = this._l23_2a;\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(alpha) {\n\n  function catmullRom(context) {\n    return alpha ? new CatmullRom(context, alpha) : new Cardinal(context, 0);\n  }\n\n  catmullRom.alpha = function(alpha) {\n    return custom(+alpha);\n  };\n\n  return catmullRom;\n})(0.5);\n", "import {CardinalClosed} from \"./cardinalClosed.js\";\nimport noop from \"../noop.js\";\nimport {point} from \"./catmullRom.js\";\n\nfunction CatmullRomClosed(context, alpha) {\n  this._context = context;\n  this._alpha = alpha;\n}\n\nCatmullRomClosed.prototype = {\n  areaStart: noop,\n  areaEnd: noop,\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 = this._x3 = this._x4 = this._x5 =\n    this._y0 = this._y1 = this._y2 = this._y3 = this._y4 = this._y5 = NaN;\n    this._l01_a = this._l12_a = this._l23_a =\n    this._l01_2a = this._l12_2a = this._l23_2a =\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 1: {\n        this._context.moveTo(this._x3, this._y3);\n        this._context.closePath();\n        break;\n      }\n      case 2: {\n        this._context.lineTo(this._x3, this._y3);\n        this._context.closePath();\n        break;\n      }\n      case 3: {\n        this.point(this._x3, this._y3);\n        this.point(this._x4, this._y4);\n        this.point(this._x5, this._y5);\n        break;\n      }\n    }\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n\n    if (this._point) {\n      var x23 = this._x2 - x,\n          y23 = this._y2 - y;\n      this._l23_a = Math.sqrt(this._l23_2a = Math.pow(x23 * x23 + y23 * y23, this._alpha));\n    }\n\n    switch (this._point) {\n      case 0: this._point = 1; this._x3 = x, this._y3 = y; break;\n      case 1: this._point = 2; this._context.moveTo(this._x4 = x, this._y4 = y); break;\n      case 2: this._point = 3; this._x5 = x, this._y5 = y; break;\n      default: point(this, x, y); break;\n    }\n\n    this._l01_a = this._l12_a, this._l12_a = this._l23_a;\n    this._l01_2a = this._l12_2a, this._l12_2a = this._l23_2a;\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(alpha) {\n\n  function catmullRom(context) {\n    return alpha ? new CatmullRomClosed(context, alpha) : new CardinalClosed(context, 0);\n  }\n\n  catmullRom.alpha = function(alpha) {\n    return custom(+alpha);\n  };\n\n  return catmullRom;\n})(0.5);\n", "import {CardinalOpen} from \"./cardinalOpen.js\";\nimport {point} from \"./catmullRom.js\";\n\nfunction CatmullRomOpen(context, alpha) {\n  this._context = context;\n  this._alpha = alpha;\n}\n\nCatmullRomOpen.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 =\n    this._y0 = this._y1 = this._y2 = NaN;\n    this._l01_a = this._l12_a = this._l23_a =\n    this._l01_2a = this._l12_2a = this._l23_2a =\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line || (this._line !== 0 && this._point === 3)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n\n    if (this._point) {\n      var x23 = this._x2 - x,\n          y23 = this._y2 - y;\n      this._l23_a = Math.sqrt(this._l23_2a = Math.pow(x23 * x23 + y23 * y23, this._alpha));\n    }\n\n    switch (this._point) {\n      case 0: this._point = 1; break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; this._line ? this._context.lineTo(this._x2, this._y2) : this._context.moveTo(this._x2, this._y2); break;\n      case 3: this._point = 4; // falls through\n      default: point(this, x, y); break;\n    }\n\n    this._l01_a = this._l12_a, this._l12_a = this._l23_a;\n    this._l01_2a = this._l12_2a, this._l12_2a = this._l23_2a;\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(alpha) {\n\n  function catmullRom(context) {\n    return alpha ? new CatmullRomOpen(context, alpha) : new CardinalOpen(context, 0);\n  }\n\n  catmullRom.alpha = function(alpha) {\n    return custom(+alpha);\n  };\n\n  return catmullRom;\n})(0.5);\n", "import noop from \"../noop.js\";\n\nfunction LinearClosed(context) {\n  this._context = context;\n}\n\nLinearClosed.prototype = {\n  areaStart: noop,\n  areaEnd: noop,\n  lineStart: function() {\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._point) this._context.closePath();\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    if (this._point) this._context.lineTo(x, y);\n    else this._point = 1, this._context.moveTo(x, y);\n  }\n};\n\nexport default function(context) {\n  return new LinearClosed(context);\n}\n", "function sign(x) {\n  return x < 0 ? -1 : 1;\n}\n\n// Calculate the slopes of the tangents (Hermite-type interpolation) based on\n// the following paper: Steffen, M. 1990. A Simple Method for Monotonic\n// Interpolation in One Dimension. Astronomy and Astrophysics, Vol. 239, NO.\n// NOV(II), P. 443, 1990.\nfunction slope3(that, x2, y2) {\n  var h0 = that._x1 - that._x0,\n      h1 = x2 - that._x1,\n      s0 = (that._y1 - that._y0) / (h0 || h1 < 0 && -0),\n      s1 = (y2 - that._y1) / (h1 || h0 < 0 && -0),\n      p = (s0 * h1 + s1 * h0) / (h0 + h1);\n  return (sign(s0) + sign(s1)) * Math.min(Math.abs(s0), Math.abs(s1), 0.5 * Math.abs(p)) || 0;\n}\n\n// Calculate a one-sided slope.\nfunction slope2(that, t) {\n  var h = that._x1 - that._x0;\n  return h ? (3 * (that._y1 - that._y0) / h - t) / 2 : t;\n}\n\n// According to https://en.wikipedia.org/wiki/Cubic_Hermite_spline#Representations\n// \"you can express cubic Hermite interpolation in terms of cubic Bézier curves\n// with respect to the four values p0, p0 + m0 / 3, p1 - m1 / 3, p1\".\nfunction point(that, t0, t1) {\n  var x0 = that._x0,\n      y0 = that._y0,\n      x1 = that._x1,\n      y1 = that._y1,\n      dx = (x1 - x0) / 3;\n  that._context.bezierCurveTo(x0 + dx, y0 + dx * t0, x1 - dx, y1 - dx * t1, x1, y1);\n}\n\nfunction MonotoneX(context) {\n  this._context = context;\n}\n\nMonotoneX.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 =\n    this._y0 = this._y1 =\n    this._t0 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 2: this._context.lineTo(this._x1, this._y1); break;\n      case 3: point(this, this._t0, slope2(this, this._t0)); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    var t1 = NaN;\n\n    x = +x, y = +y;\n    if (x === this._x1 && y === this._y1) return; // Ignore coincident points.\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; point(this, slope2(this, t1 = slope3(this, x, y)), t1); break;\n      default: point(this, this._t0, t1 = slope3(this, x, y)); break;\n    }\n\n    this._x0 = this._x1, this._x1 = x;\n    this._y0 = this._y1, this._y1 = y;\n    this._t0 = t1;\n  }\n}\n\nfunction MonotoneY(context) {\n  this._context = new ReflectContext(context);\n}\n\n(MonotoneY.prototype = Object.create(MonotoneX.prototype)).point = function(x, y) {\n  MonotoneX.prototype.point.call(this, y, x);\n};\n\nfunction ReflectContext(context) {\n  this._context = context;\n}\n\nReflectContext.prototype = {\n  moveTo: function(x, y) { this._context.moveTo(y, x); },\n  closePath: function() { this._context.closePath(); },\n  lineTo: function(x, y) { this._context.lineTo(y, x); },\n  bezierCurveTo: function(x1, y1, x2, y2, x, y) { this._context.bezierCurveTo(y1, x1, y2, x2, y, x); }\n};\n\nexport function monotoneX(context) {\n  return new MonotoneX(context);\n}\n\nexport function monotoneY(context) {\n  return new MonotoneY(context);\n}\n", "function Natural(context) {\n  this._context = context;\n}\n\nNatural.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x = [];\n    this._y = [];\n  },\n  lineEnd: function() {\n    var x = this._x,\n        y = this._y,\n        n = x.length;\n\n    if (n) {\n      this._line ? this._context.lineTo(x[0], y[0]) : this._context.moveTo(x[0], y[0]);\n      if (n === 2) {\n        this._context.lineTo(x[1], y[1]);\n      } else {\n        var px = controlPoints(x),\n            py = controlPoints(y);\n        for (var i0 = 0, i1 = 1; i1 < n; ++i0, ++i1) {\n          this._context.bezierCurveTo(px[0][i0], py[0][i0], px[1][i0], py[1][i0], x[i1], y[i1]);\n        }\n      }\n    }\n\n    if (this._line || (this._line !== 0 && n === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n    this._x = this._y = null;\n  },\n  point: function(x, y) {\n    this._x.push(+x);\n    this._y.push(+y);\n  }\n};\n\n// See https://www.particleincell.com/2012/bezier-splines/ for derivation.\nfunction controlPoints(x) {\n  var i,\n      n = x.length - 1,\n      m,\n      a = new Array(n),\n      b = new Array(n),\n      r = new Array(n);\n  a[0] = 0, b[0] = 2, r[0] = x[0] + 2 * x[1];\n  for (i = 1; i < n - 1; ++i) a[i] = 1, b[i] = 4, r[i] = 4 * x[i] + 2 * x[i + 1];\n  a[n - 1] = 2, b[n - 1] = 7, r[n - 1] = 8 * x[n - 1] + x[n];\n  for (i = 1; i < n; ++i) m = a[i] / b[i - 1], b[i] -= m, r[i] -= m * r[i - 1];\n  a[n - 1] = r[n - 1] / b[n - 1];\n  for (i = n - 2; i >= 0; --i) a[i] = (r[i] - a[i + 1]) / b[i];\n  b[n - 1] = (x[n] + a[n - 1]) / 2;\n  for (i = 0; i < n - 1; ++i) b[i] = 2 * x[i + 1] - a[i + 1];\n  return [a, b];\n}\n\nexport default function(context) {\n  return new Natural(context);\n}\n", "function Step(context, t) {\n  this._context = context;\n  this._t = t;\n}\n\nStep.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x = this._y = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (0 < this._t && this._t < 1 && this._point === 2) this._context.lineTo(this._x, this._y);\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    if (this._line >= 0) this._t = 1 - this._t, this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; // falls through\n      default: {\n        if (this._t <= 0) {\n          this._context.lineTo(this._x, y);\n          this._context.lineTo(x, y);\n        } else {\n          var x1 = this._x * (1 - this._t) + x * this._t;\n          this._context.lineTo(x1, this._y);\n          this._context.lineTo(x1, y);\n        }\n        break;\n      }\n    }\n    this._x = x, this._y = y;\n  }\n};\n\nexport default function(context) {\n  return new Step(context, 0.5);\n}\n\nexport function stepBefore(context) {\n  return new Step(context, 0);\n}\n\nexport function stepAfter(context) {\n  return new Step(context, 1);\n}\n", "function ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n  return arr2;\n}\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) {\n  var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n\n  if (!it) {\n    if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function () {};\n\n      return {\n        s: F,\n        n: function () {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function (e) {\n          throw e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function () {\n      it = it.call(o);\n    },\n    n: function () {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function (e) {\n      didErr = true;\n      err = e;\n    },\n    f: function () {\n      try {\n        if (!normalCompletion && it.return != null) it.return();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}\n\n/**\n * de Casteljau's algorithm for drawing and splitting bezier curves.\n * Inspired by https://pomax.github.io/bezierinfo/\n *\n * @param {Number[][]} points Array of [x,y] points: [start, control1, control2, ..., end]\n *   The original segment to split.\n * @param {Number} t Where to split the curve (value between [0, 1])\n * @return {Object} An object { left, right } where left is the segment from 0..t and\n *   right is the segment from t..1.\n */\nfunction decasteljau(points, t) {\n  var left = [];\n  var right = [];\n\n  function decasteljauRecurse(points, t) {\n    if (points.length === 1) {\n      left.push(points[0]);\n      right.push(points[0]);\n    } else {\n      var newPoints = Array(points.length - 1);\n\n      for (var i = 0; i < newPoints.length; i++) {\n        if (i === 0) {\n          left.push(points[0]);\n        }\n\n        if (i === newPoints.length - 1) {\n          right.push(points[i + 1]);\n        }\n\n        newPoints[i] = [(1 - t) * points[i][0] + t * points[i + 1][0], (1 - t) * points[i][1] + t * points[i + 1][1]];\n      }\n\n      decasteljauRecurse(newPoints, t);\n    }\n  }\n\n  if (points.length) {\n    decasteljauRecurse(points, t);\n  }\n\n  return {\n    left: left,\n    right: right.reverse()\n  };\n}\n/**\n * Convert segments represented as points back into a command object\n *\n * @param {Number[][]} points Array of [x,y] points: [start, control1, control2, ..., end]\n *   Represents a segment\n * @return {Object} A command object representing the segment.\n */\n\n\nfunction pointsToCommand(points) {\n  var command = {};\n\n  if (points.length === 4) {\n    command.x2 = points[2][0];\n    command.y2 = points[2][1];\n  }\n\n  if (points.length >= 3) {\n    command.x1 = points[1][0];\n    command.y1 = points[1][1];\n  }\n\n  command.x = points[points.length - 1][0];\n  command.y = points[points.length - 1][1];\n\n  if (points.length === 4) {\n    // start, control1, control2, end\n    command.type = 'C';\n  } else if (points.length === 3) {\n    // start, control, end\n    command.type = 'Q';\n  } else {\n    // start, end\n    command.type = 'L';\n  }\n\n  return command;\n}\n/**\n * Runs de Casteljau's algorithm enough times to produce the desired number of segments.\n *\n * @param {Number[][]} points Array of [x,y] points for de Casteljau (the initial segment to split)\n * @param {Number} segmentCount Number of segments to split the original into\n * @return {Number[][][]} Array of segments\n */\n\n\nfunction splitCurveAsPoints(points, segmentCount) {\n  segmentCount = segmentCount || 2;\n  var segments = [];\n  var remainingCurve = points;\n  var tIncrement = 1 / segmentCount; // x-----x-----x-----x\n  // t=  0.33   0.66   1\n  // x-----o-----------x\n  // r=  0.33\n  //       x-----o-----x\n  // r=         0.5  (0.33 / (1 - 0.33))  === tIncrement / (1 - (tIncrement * (i - 1))\n  // x-----x-----x-----x----x\n  // t=  0.25   0.5   0.75  1\n  // x-----o----------------x\n  // r=  0.25\n  //       x-----o----------x\n  // r=         0.33  (0.25 / (1 - 0.25))\n  //             x-----o----x\n  // r=         0.5  (0.25 / (1 - 0.5))\n\n  for (var i = 0; i < segmentCount - 1; i++) {\n    var tRelative = tIncrement / (1 - tIncrement * i);\n    var split = decasteljau(remainingCurve, tRelative);\n    segments.push(split.left);\n    remainingCurve = split.right;\n  } // last segment is just to the end from the last point\n\n\n  segments.push(remainingCurve);\n  return segments;\n}\n/**\n * Convert command objects to arrays of points, run de Casteljau's algorithm on it\n * to split into to the desired number of segments.\n *\n * @param {Object} commandStart The start command object\n * @param {Object} commandEnd The end command object\n * @param {Number} segmentCount The number of segments to create\n * @return {Object[]} An array of commands representing the segments in sequence\n */\n\n\nfunction splitCurve(commandStart, commandEnd, segmentCount) {\n  var points = [[commandStart.x, commandStart.y]];\n\n  if (commandEnd.x1 != null) {\n    points.push([commandEnd.x1, commandEnd.y1]);\n  }\n\n  if (commandEnd.x2 != null) {\n    points.push([commandEnd.x2, commandEnd.y2]);\n  }\n\n  points.push([commandEnd.x, commandEnd.y]);\n  return splitCurveAsPoints(points, segmentCount).map(pointsToCommand);\n}\n\nvar commandTokenRegex = /[MLCSTQAHVZmlcstqahv]|-?[\\d.e+-]+/g;\n/**\n * List of params for each command type in a path `d` attribute\n */\n\nvar typeMap = {\n  M: ['x', 'y'],\n  L: ['x', 'y'],\n  H: ['x'],\n  V: ['y'],\n  C: ['x1', 'y1', 'x2', 'y2', 'x', 'y'],\n  S: ['x2', 'y2', 'x', 'y'],\n  Q: ['x1', 'y1', 'x', 'y'],\n  T: ['x', 'y'],\n  A: ['rx', 'ry', 'xAxisRotation', 'largeArcFlag', 'sweepFlag', 'x', 'y'],\n  Z: []\n}; // Add lower case entries too matching uppercase (e.g. 'm' == 'M')\n\nObject.keys(typeMap).forEach(function (key) {\n  typeMap[key.toLowerCase()] = typeMap[key];\n});\n\nfunction arrayOfLength(length, value) {\n  var array = Array(length);\n\n  for (var i = 0; i < length; i++) {\n    array[i] = value;\n  }\n\n  return array;\n}\n/**\n * Converts a command object to a string to be used in a `d` attribute\n * @param {Object} command A command object\n * @return {String} The string for the `d` attribute\n */\n\n\nfunction commandToString(command) {\n  return \"\".concat(command.type).concat(typeMap[command.type].map(function (p) {\n    return command[p];\n  }).join(','));\n}\n/**\n * Converts command A to have the same type as command B.\n *\n * e.g., L0,5 -> C0,5,0,5,0,5\n *\n * Uses these rules:\n * x1 <- x\n * x2 <- x\n * y1 <- y\n * y2 <- y\n * rx <- 0\n * ry <- 0\n * xAxisRotation <- read from B\n * largeArcFlag <- read from B\n * sweepflag <- read from B\n *\n * @param {Object} aCommand Command object from path `d` attribute\n * @param {Object} bCommand Command object from path `d` attribute to match against\n * @return {Object} aCommand converted to type of bCommand\n */\n\n\nfunction convertToSameType(aCommand, bCommand) {\n  var conversionMap = {\n    x1: 'x',\n    y1: 'y',\n    x2: 'x',\n    y2: 'y'\n  };\n  var readFromBKeys = ['xAxisRotation', 'largeArcFlag', 'sweepFlag']; // convert (but ignore M types)\n\n  if (aCommand.type !== bCommand.type && bCommand.type.toUpperCase() !== 'M') {\n    var aConverted = {};\n    Object.keys(bCommand).forEach(function (bKey) {\n      var bValue = bCommand[bKey]; // first read from the A command\n\n      var aValue = aCommand[bKey]; // if it is one of these values, read from B no matter what\n\n      if (aValue === undefined) {\n        if (readFromBKeys.includes(bKey)) {\n          aValue = bValue;\n        } else {\n          // if it wasn't in the A command, see if an equivalent was\n          if (aValue === undefined && conversionMap[bKey]) {\n            aValue = aCommand[conversionMap[bKey]];\n          } // if it doesn't have a converted value, use 0\n\n\n          if (aValue === undefined) {\n            aValue = 0;\n          }\n        }\n      }\n\n      aConverted[bKey] = aValue;\n    }); // update the type to match B\n\n    aConverted.type = bCommand.type;\n    aCommand = aConverted;\n  }\n\n  return aCommand;\n}\n/**\n * Interpolate between command objects commandStart and commandEnd segmentCount times.\n * If the types are L, Q, or C then the curves are split as per de Casteljau's algorithm.\n * Otherwise we just copy commandStart segmentCount - 1 times, finally ending with commandEnd.\n *\n * @param {Object} commandStart Command object at the beginning of the segment\n * @param {Object} commandEnd Command object at the end of the segment\n * @param {Number} segmentCount The number of segments to split this into. If only 1\n *   Then [commandEnd] is returned.\n * @return {Object[]} Array of ~segmentCount command objects between commandStart and\n *   commandEnd. (Can be segmentCount+1 objects if commandStart is type M).\n */\n\n\nfunction splitSegment(commandStart, commandEnd, segmentCount) {\n  var segments = []; // line, quadratic bezier, or cubic bezier\n\n  if (commandEnd.type === 'L' || commandEnd.type === 'Q' || commandEnd.type === 'C') {\n    segments = segments.concat(splitCurve(commandStart, commandEnd, segmentCount)); // general case - just copy the same point\n  } else {\n    var copyCommand = _extends({}, commandStart); // convert M to L\n\n\n    if (copyCommand.type === 'M') {\n      copyCommand.type = 'L';\n    }\n\n    segments = segments.concat(arrayOfLength(segmentCount - 1).map(function () {\n      return copyCommand;\n    }));\n    segments.push(commandEnd);\n  }\n\n  return segments;\n}\n/**\n * Extends an array of commandsToExtend to the length of the referenceCommands by\n * splitting segments until the number of commands match. Ensures all the actual\n * points of commandsToExtend are in the extended array.\n *\n * @param {Object[]} commandsToExtend The command object array to extend\n * @param {Object[]} referenceCommands The command object array to match in length\n * @param {Function} excludeSegment a function that takes a start command object and\n *   end command object and returns true if the segment should be excluded from splitting.\n * @return {Object[]} The extended commandsToExtend array\n */\n\n\nfunction extend(commandsToExtend, referenceCommands, excludeSegment) {\n  // compute insertion points:\n  // number of segments in the path to extend\n  var numSegmentsToExtend = commandsToExtend.length - 1; // number of segments in the reference path.\n\n  var numReferenceSegments = referenceCommands.length - 1; // this value is always between [0, 1].\n\n  var segmentRatio = numSegmentsToExtend / numReferenceSegments; // create a map, mapping segments in referenceCommands to how many points\n  // should be added in that segment (should always be >= 1 since we need each\n  // point itself).\n  // 0 = segment 0-1, 1 = segment 1-2, n-1 = last vertex\n\n  var countPointsPerSegment = arrayOfLength(numReferenceSegments).reduce(function (accum, d, i) {\n    var insertIndex = Math.floor(segmentRatio * i); // handle excluding segments\n\n    if (excludeSegment && insertIndex < commandsToExtend.length - 1 && excludeSegment(commandsToExtend[insertIndex], commandsToExtend[insertIndex + 1])) {\n      // set the insertIndex to the segment that this point should be added to:\n      // round the insertIndex essentially so we split half and half on\n      // neighbouring segments. hence the segmentRatio * i < 0.5\n      var addToPriorSegment = segmentRatio * i % 1 < 0.5; // only skip segment if we already have 1 point in it (can't entirely remove a segment)\n\n      if (accum[insertIndex]) {\n        // TODO - Note this is a naive algorithm that should work for most d3-area use cases\n        // but if two adjacent segments are supposed to be skipped, this will not perform as\n        // expected. Could be updated to search for nearest segment to place the point in, but\n        // will only do that if necessary.\n        // add to the prior segment\n        if (addToPriorSegment) {\n          if (insertIndex > 0) {\n            insertIndex -= 1; // not possible to add to previous so adding to next\n          } else if (insertIndex < commandsToExtend.length - 1) {\n            insertIndex += 1;\n          } // add to next segment\n\n        } else if (insertIndex < commandsToExtend.length - 1) {\n          insertIndex += 1; // not possible to add to next so adding to previous\n        } else if (insertIndex > 0) {\n          insertIndex -= 1;\n        }\n      }\n    }\n\n    accum[insertIndex] = (accum[insertIndex] || 0) + 1;\n    return accum;\n  }, []); // extend each segment to have the correct number of points for a smooth interpolation\n\n  var extended = countPointsPerSegment.reduce(function (extended, segmentCount, i) {\n    // if last command, just add `segmentCount` number of times\n    if (i === commandsToExtend.length - 1) {\n      var lastCommandCopies = arrayOfLength(segmentCount, _extends({}, commandsToExtend[commandsToExtend.length - 1])); // convert M to L\n\n      if (lastCommandCopies[0].type === 'M') {\n        lastCommandCopies.forEach(function (d) {\n          d.type = 'L';\n        });\n      }\n\n      return extended.concat(lastCommandCopies);\n    } // otherwise, split the segment segmentCount times.\n\n\n    return extended.concat(splitSegment(commandsToExtend[i], commandsToExtend[i + 1], segmentCount));\n  }, []); // add in the very first point since splitSegment only adds in the ones after it\n\n  extended.unshift(commandsToExtend[0]);\n  return extended;\n}\n/**\n * Takes a path `d` string and converts it into an array of command\n * objects. Drops the `Z` character.\n *\n * @param {String|null} d A path `d` string\n */\n\n\nfunction pathCommandsFromString(d) {\n  // split into valid tokens\n  var tokens = (d || '').match(commandTokenRegex) || [];\n  var commands = [];\n  var commandArgs;\n  var command; // iterate over each token, checking if we are at a new command\n  // by presence in the typeMap\n\n  for (var i = 0; i < tokens.length; ++i) {\n    commandArgs = typeMap[tokens[i]]; // new command found:\n\n    if (commandArgs) {\n      command = {\n        type: tokens[i]\n      }; // add each of the expected args for this command:\n\n      for (var a = 0; a < commandArgs.length; ++a) {\n        command[commandArgs[a]] = +tokens[i + a + 1];\n      } // need to increment our token index appropriately since\n      // we consumed token args\n\n\n      i += commandArgs.length;\n      commands.push(command);\n    }\n  }\n\n  return commands;\n}\n/**\n * Interpolate from A to B by extending A and B during interpolation to have\n * the same number of points. This allows for a smooth transition when they\n * have a different number of points.\n *\n * Ignores the `Z` command in paths unless both A and B end with it.\n *\n * This function works directly with arrays of command objects instead of with\n * path `d` strings (see interpolatePath for working with `d` strings).\n *\n * @param {Object[]} aCommandsInput Array of path commands\n * @param {Object[]} bCommandsInput Array of path commands\n * @param {(Function|Object)} interpolateOptions\n * @param {Function} interpolateOptions.excludeSegment a function that takes a start command object and\n *   end command object and returns true if the segment should be excluded from splitting.\n * @param {Boolean} interpolateOptions.snapEndsToInput a boolean indicating whether end of input should\n *   be sourced from input argument or computed.\n * @returns {Function} Interpolation function that maps t ([0, 1]) to an array of path commands.\n */\n\nfunction interpolatePathCommands(aCommandsInput, bCommandsInput, interpolateOptions) {\n  // make a copy so we don't mess with the input arrays\n  var aCommands = aCommandsInput == null ? [] : aCommandsInput.slice();\n  var bCommands = bCommandsInput == null ? [] : bCommandsInput.slice();\n\n  var _ref = _typeof(interpolateOptions) === 'object' ? interpolateOptions : {\n    excludeSegment: interpolateOptions,\n    snapEndsToInput: true\n  },\n      excludeSegment = _ref.excludeSegment,\n      snapEndsToInput = _ref.snapEndsToInput; // both input sets are empty, so we don't interpolate\n\n\n  if (!aCommands.length && !bCommands.length) {\n    return function nullInterpolator() {\n      return [];\n    };\n  } // do we add Z during interpolation? yes if both have it. (we'd expect both to have it or not)\n\n\n  var addZ = (aCommands.length === 0 || aCommands[aCommands.length - 1].type === 'Z') && (bCommands.length === 0 || bCommands[bCommands.length - 1].type === 'Z'); // we temporarily remove Z\n\n  if (aCommands.length > 0 && aCommands[aCommands.length - 1].type === 'Z') {\n    aCommands.pop();\n  }\n\n  if (bCommands.length > 0 && bCommands[bCommands.length - 1].type === 'Z') {\n    bCommands.pop();\n  } // if A is empty, treat it as if it used to contain just the first point\n  // of B. This makes it so the line extends out of from that first point.\n\n\n  if (!aCommands.length) {\n    aCommands.push(bCommands[0]); // otherwise if B is empty, treat it as if it contains the first point\n    // of A. This makes it so the line retracts into the first point.\n  } else if (!bCommands.length) {\n    bCommands.push(aCommands[0]);\n  } // extend to match equal size\n\n\n  var numPointsToExtend = Math.abs(bCommands.length - aCommands.length);\n\n  if (numPointsToExtend !== 0) {\n    // B has more points than A, so add points to A before interpolating\n    if (bCommands.length > aCommands.length) {\n      aCommands = extend(aCommands, bCommands, excludeSegment); // else if A has more points than B, add more points to B\n    } else if (bCommands.length < aCommands.length) {\n      bCommands = extend(bCommands, aCommands, excludeSegment);\n    }\n  } // commands have same length now.\n  // convert commands in A to the same type as those in B\n\n\n  aCommands = aCommands.map(function (aCommand, i) {\n    return convertToSameType(aCommand, bCommands[i]);\n  }); // create mutable interpolated command objects\n\n  var interpolatedCommands = aCommands.map(function (aCommand) {\n    return _objectSpread2({}, aCommand);\n  });\n\n  if (addZ) {\n    interpolatedCommands.push({\n      type: 'Z'\n    });\n    aCommands.push({\n      type: 'Z'\n    }); // required for when returning at t == 0\n  }\n\n  return function pathCommandInterpolator(t) {\n    // at 1 return the final value without the extensions used during interpolation\n    if (t === 1 && snapEndsToInput) {\n      return bCommandsInput == null ? [] : bCommandsInput;\n    } // work with aCommands directly since interpolatedCommands are mutated\n\n\n    if (t === 0) {\n      return aCommands;\n    } // interpolate the commands using the mutable interpolated command objs\n\n\n    for (var i = 0; i < interpolatedCommands.length; ++i) {\n      // if (interpolatedCommands[i].type === 'Z') continue;\n      var aCommand = aCommands[i];\n      var bCommand = bCommands[i];\n      var interpolatedCommand = interpolatedCommands[i];\n\n      var _iterator = _createForOfIteratorHelper(typeMap[interpolatedCommand.type]),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var arg = _step.value;\n          interpolatedCommand[arg] = (1 - t) * aCommand[arg] + t * bCommand[arg]; // do not use floats for flags (#27), round to integer\n\n          if (arg === 'largeArcFlag' || arg === 'sweepFlag') {\n            interpolatedCommand[arg] = Math.round(interpolatedCommand[arg]);\n          }\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n    }\n\n    return interpolatedCommands;\n  };\n}\n/** @typedef InterpolateOptions  */\n\n/**\n * Interpolate from A to B by extending A and B during interpolation to have\n * the same number of points. This allows for a smooth transition when they\n * have a different number of points.\n *\n * Ignores the `Z` character in paths unless both A and B end with it.\n *\n * @param {String} a The `d` attribute for a path\n * @param {String} b The `d` attribute for a path\n * @param {((command1, command2) => boolean|{\n *   excludeSegment?: (command1, command2) => boolean;\n *   snapEndsToInput?: boolean\n * })} interpolateOptions The excludeSegment function or an options object\n *    - interpolateOptions.excludeSegment a function that takes a start command object and\n *      end command object and returns true if the segment should be excluded from splitting.\n *    - interpolateOptions.snapEndsToInput a boolean indicating whether end of input should\n *      be sourced from input argument or computed.\n * @returns {Function} Interpolation function that maps t ([0, 1]) to a path `d` string.\n */\n\nfunction interpolatePath(a, b, interpolateOptions) {\n  var aCommands = pathCommandsFromString(a);\n  var bCommands = pathCommandsFromString(b);\n\n  var _ref2 = _typeof(interpolateOptions) === 'object' ? interpolateOptions : {\n    excludeSegment: interpolateOptions,\n    snapEndsToInput: true\n  },\n      excludeSegment = _ref2.excludeSegment,\n      snapEndsToInput = _ref2.snapEndsToInput;\n\n  if (!aCommands.length && !bCommands.length) {\n    return function nullInterpolator() {\n      return '';\n    };\n  }\n\n  var commandInterpolator = interpolatePathCommands(aCommands, bCommands, {\n    excludeSegment: excludeSegment,\n    snapEndsToInput: snapEndsToInput\n  });\n  return function pathStringInterpolator(t) {\n    // at 1 return the final value without the extensions used during interpolation\n    if (t === 1 && snapEndsToInput) {\n      return b == null ? '' : b;\n    }\n\n    var interpolatedCommands = commandInterpolator(t); // convert to a string (fastest concat: https://jsperf.com/join-concat/150)\n\n    var interpolatedString = '';\n\n    var _iterator2 = _createForOfIteratorHelper(interpolatedCommands),\n        _step2;\n\n    try {\n      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n        var interpolatedCommand = _step2.value;\n        interpolatedString += commandToString(interpolatedCommand);\n      }\n    } catch (err) {\n      _iterator2.e(err);\n    } finally {\n      _iterator2.f();\n    }\n\n    return interpolatedString;\n  };\n}\n\nexport { interpolatePath, interpolatePathCommands, pathCommandsFromString };\n", "import { color } from 'd3-color'\n\n// Core\nimport { getCSSColorVariable } from 'styles/colors'\n\n// Utils\nimport { ColorAccessor, StringAccessor } from 'types/accessor'\nimport { getString, isNumber } from 'utils/data'\nimport { isStringCSSVariable, getCSSVariableValue } from 'utils/misc'\n\ntype RGBColor = { r: number; g: number; b: number }\n\n/** Retrieves color from the data if provided, fallbacks to CSS variables if the index was passed */\nexport function getColor<T> (\n  d: T,\n  accessor: ColorAccessor<T>,\n  index?: number,\n  dontFallbackToCssVar?: boolean\n): string | null {\n  if (Array.isArray(accessor) && isFinite(index)) return accessor[index % accessor.length]\n\n  const value = getString(d, accessor as StringAccessor<T>, index)\n  return (value || ((isNumber(index) && !dontFallbackToCssVar) ? `var(${getCSSColorVariable(index)})` : null))\n}\n\nexport function hexToRgb (hex: string): RGBColor {\n  const parsed = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex)\n  return parsed ? {\n    r: parseInt(parsed[1], 16),\n    g: parseInt(parsed[2], 16),\n    b: parseInt(parsed[3], 16),\n  } : { r: 0, g: 0, b: 0 }\n}\n\nexport function rgbToBrightness (rgb: RGBColor): number {\n  return (0.2126 * rgb.r + 0.7152 * rgb.g + 0.0722 * rgb.b) / 255\n}\n\nexport function hexToBrightness (hex: string): number {\n  const rgb = hexToRgb(hex)\n  return rgbToBrightness(rgb)\n}\n\nexport function getHexValue (s: string, context: HTMLElement | SVGElement): string {\n  const hex = isStringCSSVariable(s) ? getCSSVariableValue(s, context) : s\n  return color(hex)?.formatHex()\n}\n\nexport function rgbaToRgb (rgba: string, backgroundColor?: string): RGBColor {\n  const rgb = color(rgba)?.rgb()\n  if (!rgb || rgb.opacity === 1) return rgb\n  const alpha = 1 - rgb.opacity\n  const bg = color(backgroundColor ?? '#fff').rgb()\n  return {\n    r: Math.round((rgb.opacity * (rgb.r / 255) + (alpha * (bg.r / 255))) * 255),\n    g: Math.round((rgb.opacity * (rgb.g / 255) + (alpha * (bg.g / 255))) * 255),\n    b: Math.round((rgb.opacity * (rgb.b / 255) + (alpha * (bg.b / 255))) * 255),\n  }\n}\n", "import {\n  curveBasis,\n  curveBasisClosed,\n  curveBasisOpen,\n  curveBundle,\n  curveCardinal,\n  curveCardinalClosed,\n  curveCardinalOpen,\n  curveCatmullRom,\n  curveCatmullRomClosed,\n  curveCatmullRomOpen,\n  curveLinear,\n  curveLinearClosed,\n  curveMonotoneX,\n  curveMonotoneY,\n  curveNatural,\n  curveStep,\n  curveStepAfter,\n  curveStepBefore,\n} from 'd3-shape'\n\nexport enum CurveType {\n  Basis = 'basis',\n  BasisClosed = 'basisClosed',\n  BasisOpen = 'basisOpen',\n  Bundle = 'bundle',\n  Cardinal = 'cardinal',\n  CardinalClosed = 'cardinalClosed',\n  CardinalOpen = 'cardinalOpen',\n  CatmullRom = 'catmullRom',\n  CatmullRomClosed = 'catmullRomClosed',\n  CatmullRomOpen = 'catmullRomOpen',\n  Linear = 'linear',\n  LinearClosed = 'linearClosed',\n  MonotoneX = 'monotoneX',\n  MonotoneY = 'monotoneY',\n  Natural = 'natural',\n  Step = 'step',\n  StepAfter = 'stepAfter',\n  StepBefore = 'stepBefore',\n}\n\nexport const Curve = {\n  [CurveType.Basis]: curveBasis,\n  [CurveType.BasisClosed]: curveBasisClosed,\n  [CurveType.BasisOpen]: curveBasisOpen,\n  [CurveType.Bundle]: curveBundle,\n  [CurveType.Cardinal]: curveCardinal,\n  [CurveType.CardinalClosed]: curveCardinalClosed,\n  [CurveType.CardinalOpen]: curveCardinalOpen,\n  [CurveType.CatmullRom]: curveCatmullRom,\n  [CurveType.CatmullRomClosed]: curveCatmullRomClosed,\n  [CurveType.CatmullRomOpen]: curveCatmullRomOpen,\n  [CurveType.Linear]: curveLinear,\n  [CurveType.LinearClosed]: curveLinearClosed,\n  [CurveType.MonotoneX]: curveMonotoneX,\n  [CurveType.MonotoneY]: curveMonotoneY,\n  [CurveType.Natural]: curveNatural,\n  [CurveType.Step]: curveStep,\n  [CurveType.StepAfter]: curveStepAfter,\n  [CurveType.StepBefore]: curveStepBefore,\n}\n", "import { XYComponentConfigInterface, XYComponentDefaultConfig } from 'core/xy-component/config'\n\n// Types\nimport { CurveType } from 'types/curve'\nimport { ColorAccessor, GenericAccessor, StringAccessor } from 'types/accessor'\n\nexport interface LineConfigInterface<Datum> extends XYComponentConfigInterface<Datum> {\n  /** Line color accessor function. The whole data array will be passed as the first argument. Default: `undefined` */\n  color?: ColorAccessor<Datum[]>;\n  /** Curve type from the CurveType enum. Default: `CurveType.MonotoneX` */\n  curveType?: CurveType;\n  /** Line width in pixels. Default: `2` */\n  lineWidth?: number;\n  /** Line dash array, see SVG's stroke-dasharray. Default: `undefined` */\n  lineDashArray?: GenericAccessor<number[], Datum[]>;\n  /** When a data point has an `undefined`, `NaN`, or other no-data value, they'll be replaced with a value specified here.\n   * Setting this property to `undefined` will lead to having the line break when there's no data, and continue when\n   * the data appears again. If you set it to `null`, the values will be treated as numerical `0` values and the line\n   * won't break; however if the whole dataset consists of only `null`s, the line won't be displayed.\n   * Default: `undefined`\n  */\n  fallbackValue?: number | undefined | null;\n  /** Highlight line on hover. Default: `false` */\n  highlightOnHover?: boolean;\n  /** Optional link cursor. Default: `null` */\n  cursor?: StringAccessor<Datum[]>;\n  /** Enable interpolated line where data points are missing or fallbackValue is used.\n   * You can customize the line's appearance with `--vis-line-gapfill-stroke-dasharray`\n   * and `--vis-line-gapfill-stroke-opacity` CSS variables.\n   * Default: `false` */\n  interpolateMissingData?: boolean;\n}\n\nexport const LineDefaultConfig: LineConfigInterface<unknown> = {\n  ...XYComponentDefaultConfig,\n  curveType: CurveType.MonotoneX,\n  lineWidth: 2,\n  lineDashArray: undefined,\n  fallbackValue: undefined,\n  highlightOnHover: false,\n  cursor: null,\n  interpolateMissingData: false,\n}\n", "import { css, injectGlobal } from '@emotion/css'\n\nexport const globalStyles = injectGlobal`\n  :root {\n    --vis-line-cursor: default;\n    --vis-line-stroke-dasharray: none;\n    --vis-line-stroke-dashoffset: 0;\n\n    --vis-line-gapfill-stroke-dasharray: 2 3;\n    --vis-line-gapfill-stroke-opacity: 0.8;\n    --vis-line-gapfill-stroke-dashoffset: 0;\n  }\n`\n\nexport const root = css`\n  label: line-component;\n`\n\nexport const line = css`\n  label: line;\n  transition: opacity 200ms;\n  cursor: var(--vis-line-cursor);\n`\n\nexport const linePath = css`\n  label: linePath;\n  fill: none;\n  stroke-dasharray: var(--vis-line-stroke-dasharray);\n  stroke-dashoffset: var(--vis-line-stroke-dashoffset);\n`\n\nexport const lineSelectionHelper = css`\n  label: lineSelectionHelper;\n  fill: none;\n  stroke: rgba(0, 0, 0, 0);\n  stroke-width: 8px;\n`\n\nexport const dim = css`\n  opacity: 0.2;\n`\n\nexport const interpolatedPath = css`\n  label: interpolated-path;\n  fill: none;\n  stroke-dasharray: var(--vis-line-gapfill-stroke-dasharray);\n  stroke-dashoffset: var(--vis-line-gapfill-stroke-dashoffset);\n  stroke-opacity: var(--vis-line-gapfill-stroke-opacity);\n`\n", "import { select } from 'd3-selection'\nimport { Transition } from 'd3-transition'\nimport { CurveFactoryLineOnly, Line as LineGenInterface, line } from 'd3-shape'\nimport { interpolatePath } from 'd3-interpolate-path'\n\n// Core\nimport { XYComponentCore } from 'core/xy-component'\n\n// Utils\nimport { getNumber, getString, getValue, isArray, isNumber } from 'utils/data'\nimport { smartTransition } from 'utils/d3'\nimport { getColor } from 'utils/color'\n\n// Types\nimport { NumericAccessor } from 'types/accessor'\nimport { Spacing } from 'types/spacing'\nimport { Curve, CurveType } from 'types/curve'\nimport { Direction } from 'types/direction'\n\n// Local Types\nimport { LineData, LineDatum } from './types'\n\n// Config\nimport { LineDefaultConfig, LineConfigInterface } from './config'\n\n// Styles\nimport * as s from './style'\n\nexport class Line<Datum> extends XYComponentCore<Datum, LineConfigInterface<Datum>> {\n  static selectors = s\n  protected _defaultConfig = LineDefaultConfig as LineConfigInterface<Datum>\n  public config: LineConfigInterface<Datum> = this._defaultConfig\n  lineGen: LineGenInterface<{ x: number; y: number; defined: boolean }>\n  curve: CurveFactoryLineOnly = Curve[CurveType.MonotoneX]\n  events = {\n    [Line.selectors.line]: {\n      mouseover: this._highlight.bind(this),\n      mouseleave: this._resetHighlight.bind(this),\n    },\n  }\n\n  constructor (config?: LineConfigInterface<Datum>) {\n    super()\n    if (config) this.setConfig(config)\n  }\n\n  get bleed (): Spacing {\n    const { config: { lineWidth } } = this\n    const yDomain = this.yScale.domain() as [number, number]\n    const yDirection = this.yScale.range()[0] > this.yScale.range()[1]\n      ? Direction.North\n      : Direction.South\n    const isYDirectionSouth = yDirection === Direction.South\n\n    const isLineThick = lineWidth > 3\n    const isLineVeryThick = lineWidth >= 10\n    return {\n      top: !isLineVeryThick && (\n        (!isYDirectionSouth && (yDomain[1] === 0)) || (isYDirectionSouth && (yDomain[0] === 0))\n      ) ? 0 : lineWidth / 2,\n      bottom: !isLineVeryThick && (\n        (!isYDirectionSouth && (yDomain[0] === 0)) || (isYDirectionSouth && (yDomain[1] === 0))\n      ) ? 0 : lineWidth / 2,\n      left: isLineThick ? lineWidth / 2 : 0,\n      right: isLineThick ? lineWidth / 2 : 0,\n    }\n  }\n\n  _render (customDuration?: number): void {\n    super._render(customDuration)\n    const { config, datamodel: { data } } = this\n    const duration = isNumber(customDuration) ? customDuration : config.duration\n\n    this.curve = Curve[config.curveType]\n    this.lineGen = line<{ x: number; y: number; defined: boolean }>()\n      .x(d => d.x)\n      .y(d => d.y)\n      .defined(d => d.defined)\n      .curve(this.curve)\n\n    const yAccessors = (isArray(config.y) ? config.y : [config.y]) as NumericAccessor<Datum>[]\n    const lineDataX = data.map((d, i) => this.xScale(getNumber(d, config.x, i)))\n    const lineData: LineData[] = yAccessors.map(a => {\n      const ld: LineDatum[] = data.map((d, i) => {\n        const rawValue = getNumber(d, a, i)\n\n        // If `rawValue` is not numerical or if it's not finite (`NaN`, `undefined`, ...), we replace it with `config.fallbackValue`\n        const value = (isNumber(rawValue) || (rawValue === null)) && isFinite(rawValue) ? rawValue : config.fallbackValue\n        const defined = config.interpolateMissingData\n          ? (isNumber(rawValue) || (rawValue === null)) && isFinite(rawValue)\n          : isFinite(value)\n\n        return {\n          x: lineDataX[i],\n          y: this.yScale(value ?? 0),\n          defined,\n          value,\n        }\n      })\n      const defined = ld.reduce((def, d) => (d.defined || def), false)\n\n      let validGap = false\n      const gaps = ld.reduce((acc, d, i) => {\n        // Gaps include fallback values if configured.\n        if (!d.defined && isFinite(config.fallbackValue)) {\n          acc.push({ ...d, defined: true })\n        }\n\n        if (!d.defined && !validGap) validGap = true\n\n        const isEndpoint = (i > 0 && !ld[i - 1].defined) || (i < ld.length - 1 && !ld[i + 1].defined)\n        if (d.defined && isEndpoint) {\n          // If no undefined points have been found since the last endpoint, we insert one to enforce breaks between adjacent gaps.\n          if (!validGap) acc.push({ ...d, defined: false })\n          acc.push(d)\n          validGap = false\n        }\n        return acc\n      }, [])\n\n      // If the line consists only of `null` values, we'll still render it but it'll be invisible.\n      // Such trick allows us to have better animated transitions.\n      const visible = defined && ld.some(d => d.value !== null)\n      return {\n        values: ld,\n        defined,\n        gaps,\n        visible,\n      }\n    })\n\n    const lines = this.g\n      .selectAll<SVGGElement, LineData>(`.${s.line}`)\n      .data(lineData)\n\n    const linesEnter = lines.enter().append('g')\n      .attr('class', s.line)\n\n    linesEnter\n      .append('path')\n      .attr('class', s.linePath)\n      .attr('stroke', (d, i) => getColor(data, config.color, i))\n      .attr('stroke-opacity', 0)\n      .attr('stroke-width', config.lineWidth)\n\n    linesEnter\n      .append('path')\n      .attr('class', s.lineSelectionHelper)\n      .attr('d', this._emptyPath())\n\n    linesEnter.append('path')\n      .attr('class', s.interpolatedPath)\n      .attr('d', this._emptyPath())\n      .style('opacity', 0)\n\n    const linesMerged = linesEnter.merge(lines)\n    linesMerged.style('cursor', (d, i) => getString(data, config.cursor, i))\n    linesMerged.each((d, i, elements) => {\n      const group = select(elements[i])\n      const linePath = group.select<SVGPathElement>(`.${s.linePath}`)\n      const lineSelectionHelper = group.select(`.${s.lineSelectionHelper}`)\n      const lineGaps = group.select(`.${s.interpolatedPath}`)\n\n      const isLineVisible = d.visible\n      const dashArray = getValue<Datum[], number[]>(data, config.lineDashArray, i)\n      const transition = smartTransition(linePath, duration)\n        .attr('stroke', getColor(data, config.color, i))\n        .attr('stroke-width', config.lineWidth)\n        .attr('stroke-opacity', isLineVisible ? 1 : 0)\n        .style('stroke-dasharray', dashArray?.join(' ') ?? null) // We use `.style` because there's also a default CSS-variable for stroke-dasharray\n\n      const hasUndefinedSegments = d.values.some(d => !d.defined)\n      const svgPathD = this.lineGen(d.values)\n\n      if (duration && !hasUndefinedSegments) {\n        const previous = linePath.attr('d') || this._emptyPath()\n        const next = svgPathD || this._emptyPath()\n        const t = transition as Transition<SVGPathElement, LineData, SVGGElement, LineData>\n        t.attrTween('d', () => interpolatePath(previous, next))\n      } else if (d.visible) {\n        transition.attr('d', svgPathD)\n      }\n\n      lineSelectionHelper\n        .attr('d', svgPathD)\n        .attr('visibility', isLineVisible ? null : 'hidden')\n\n      if (hasUndefinedSegments && config.interpolateMissingData) {\n        smartTransition(lineGaps, duration)\n          .attr('d', this.lineGen(d.gaps))\n          .attr('stroke', getColor(data, config.color, i))\n          .attr('stroke-width', config.lineWidth - 1)\n          .style('opacity', 1)\n      } else {\n        lineGaps.transition()\n          .duration(duration)\n          .style('opacity', 0)\n      }\n    })\n\n    smartTransition(lines.exit(), duration)\n      .style('opacity', 0)\n      .remove()\n  }\n\n  private _emptyPath (): string {\n    const xRange = this.xScale.range()\n    const yRange = this.yScale.range()\n    return `M${xRange[0]},${yRange[0]} L${xRange[1]},${yRange[0]}`\n  }\n\n  private _highlight (datum: Datum): void {\n    const { config } = this\n\n    if (config.highlightOnHover) {\n      this.g\n        .selectAll(`.${s.line}`)\n        .classed(s.dim, d => d !== datum)\n    }\n  }\n\n  private _resetHighlight (): void {\n    const { config } = this\n\n    if (config.highlightOnHover) {\n      this.g\n        .selectAll(`.${s.line}`)\n        .classed(s.dim, false)\n    }\n  }\n}\n", "import { range, min, max } from 'd3-array'\nimport { line, curveCardinal, curveCardinalClosed } from 'd3-shape'\nimport { Path } from 'd3-path'\n\n// Utils\nimport { clamp } from 'utils/data'\n\nexport type RoundedRectPathOptions = {\n  x: number;\n  y: number;\n  w: number;\n  h: number;\n  r: number;\n  tl: boolean;\n  tr: boolean;\n  bl: boolean;\n  br: boolean;\n}\n\n/*\n * Generate SVG path for rectangle with rounded corners\n *\n * @param {Object} props - Configuration object\n * @param {Number} props.x - Rect top left X coordinate\n * @param {Number} props.y - Rect top left Y coordinate\n * @param {Number} props.w - Rect width\n * @param {Number} props.h - Rect height\n * @param {Bool} [props.tl=false] - Round top left corner\n * @param {Bool} [props.tr=false] - Round top right corner\n * @param {Bool} [props.bl=false] - Round bottom left corner\n * @param {Bool} [props.br=false] - Round bottom right corner\n * @param {Number} [props.r=0] - Corner Radius\n * @return {String} Path string for the `d` attribute\n */\nexport function roundedRectPath ({\n  x,\n  y,\n  w,\n  h,\n  tl = false,\n  tr = false,\n  bl = false,\n  br = false,\n  r = 0,\n}: RoundedRectPathOptions): string {\n  let path\n  path = `M${x + r},${y}h${w - 2 * r}`\n\n  let roundedR = tr ? r : 0\n  let angularR = tr ? 0 : r\n  path += `a${roundedR},${roundedR} 0 0 1 ${roundedR},${roundedR}`\n  path += `h${angularR}v${angularR}`\n  path += `v${h - 2 * r}`\n\n  roundedR = br ? r : 0\n  angularR = br ? 0 : r\n  path += `a${roundedR},${roundedR} 0 0 1 ${-roundedR},${roundedR}`\n  path += `v${angularR}h${-angularR}`\n  path += `h${2 * r - w}`\n\n  roundedR = bl ? r : 0\n  angularR = bl ? 0 : r\n  path += `a${roundedR},${roundedR} 0 0 1 ${-roundedR},${-roundedR}`\n  path += `h${-angularR}v${-angularR}`\n  path += `v${2 * r - h}`\n\n  roundedR = tl ? r : 0\n  angularR = tl ? 0 : r\n  path += `a${roundedR},${roundedR} 0 0 1 ${roundedR},${-roundedR}`\n  path += `v${-angularR}h${angularR}`\n\n  path += 'z'\n  return path\n}\n\nexport function polygon (size: number, n = 6, endAngle = 2 * Math.PI, open = false): string {\n  const r = n === 4 ? Math.sqrt(0.5) * size : size / 3.6 * 2\n  const deltaAngle = n === 4 ? Math.PI / 4 : 0 // rotate to 45 grads if shape is a rectangle\n  const shiftedEndAngle = endAngle - deltaAngle\n\n  const completion = (shiftedEndAngle < 0 ? endAngle : shiftedEndAngle) / (2 * Math.PI)\n  const nSegments = Math.ceil(n * completion)\n\n  const centerAngle = 1 / n * Math.PI * 2 //          /\\\n  const baseAngle = (Math.PI - centerAngle) / 2 //   /__\\\n\n  const data = range(nSegments + (shiftedEndAngle >= 0 ? 1 : 0))\n    .map((d, i) => {\n      const isLastSegment = i === nSegments || (nSegments === 1 && shiftedEndAngle < 0)\n      let mult = isLastSegment ? ((completion * n) % 1 || 1) : 1 // Handle partial shape\n      if (shiftedEndAngle < 0) {\n        mult += 0.5\n      }\n      const angle = centerAngle * (i - 1 + mult)\n\n      let radius\n      if (isLastSegment) {\n        const thirdAngle = Math.PI - baseAngle - centerAngle * mult\n        radius = r * Math.sin(baseAngle) / Math.sin(thirdAngle) // Law of sines\n      } else {\n        radius = r\n      }\n\n      return {\n        x: Math.sin(angle + deltaAngle) * radius,\n        y: -Math.cos(angle + deltaAngle) * radius,\n      }\n    })\n\n  if (n === 4) {\n    const angle = centerAngle * (-1 + 0.5)\n    const thirdAngle = Math.PI * 0.5\n    const radius = r * Math.sin(baseAngle) / Math.sin(thirdAngle) // Law of sines\n    data.unshift({\n      x: Math.sin(angle + deltaAngle) * radius,\n      y: -Math.cos(angle + deltaAngle) * radius,\n    })\n  }\n\n  const path = line<any>()\n    /* eslint-disable-next-line dot-notation */\n    .x(d => d['x'])\n    /* eslint-disable-next-line dot-notation */\n    .y(d => d['y'])\n    .curve((open ? curveCardinal : curveCardinalClosed).tension(0.95))\n\n  return path(data)\n}\n\nexport function circlePath (cx: number, cy: number, r: number): string {\n  return `\n    M ${cx} ${cy}\n    m ${-r}, 0\n    a ${r},${r} 0 1,1 ${r * 2},0\n    a ${r},${r} 0 1,1 ${-r * 2},0`\n}\n\nexport type ScoreRectPathOptions = {\n  x: number;\n  y: number;\n  w: number;\n  h: number;\n  r: number;\n  score: number;\n}\n\nexport function scoreRectPath ({ x, y, w, h, r = 0, score = 1 }: ScoreRectPathOptions): string {\n  let path\n  const side = 1 / 4\n  const halfSide = side / 2\n  let part = score\n\n  //    8 1\n  //    - -\n  // 7 |   | 2\n  // 6 |   | 3\n  //    - -\n  //    5 4\n\n  // 1\n  const hLength = min([w * 0.5 * (part / halfSide) + r, w * 0.5 - r])\n  path = `M${x + w * 0.5},${y}h${hLength}`\n\n  // 2, 3\n  part = score - 1 / 8\n  if (part > 0) {\n    path += `a${r},${r} 0 0 1 ${r},${r}`\n    const vLength = clamp(h * (part / side) - r, 0, h - 2 * r)\n    path += `v${vLength}`\n  }\n\n  // 4, 5\n  part = score - 3 / 8\n  if (part > 0) {\n    path += `a${r},${r} 0 0 1 ${-r},${r}`\n    const hLength = clamp(r - w * (part / side), 2 * r - w, 0)\n    path += `h${hLength}`\n  }\n\n  // 6, 7\n  part = score - 5 / 8\n  if (part > 0) {\n    path += `a${r},${r} 0 0 1 ${-r},${-r}`\n    const vLength = clamp(r - h * (part / side), 2 * r - h, 0)\n    path += `v${vLength}`\n  }\n\n  // 8\n  part = score - 7 / 8\n  if (part > 0) {\n    path += `a${r},${r} 0 0 1 ${r},${-r}`\n    const hLength = max([w * 0.5 * (part / halfSide) - r, 0])\n    path += `h${hLength}`\n  }\n\n  return path\n}\n\n/*\n * Replace L path command with arc with specified radius\n * @param {String} path - the path string\n * @param {number} r - radius in pixels\n * @returns {String} new path string\n */\nexport function convertLineToArc (path: Path | string, r: number): string {\n  return path.toString().replace(/L(?<x>-?\\d*\\.?\\d*),(?<y>-?\\d+\\.?\\d*)/gm, (_, x, y) => `A ${r} ${r} 0 0 0 ${x} ${y}`)\n}\n", "import { XYComponentConfigInterface, XYComponentDefaultConfig } from 'core/xy-component/config'\n\n// Types\nimport { ColorAccessor, StringAccessor } from 'types/accessor'\nimport { Orientation } from 'types/position'\n\nexport interface StackedBarConfigInterface<Datum> extends XYComponentConfigInterface<Datum> {\n  /** Bar color accessor function. Default: `d => d.color` */\n  color?: ColorAccessor<Datum>;\n  /** Force set bar width in pixels. Default: `undefined` */\n  barWidth?: number;\n  /** Maximum bar width for dynamic sizing. Default: `undefined` */\n  barMaxWidth?: number;\n  /** Expected step between the bars in the X axis units.\n   * Needed to correctly calculate the width of the bars when there are gaps in the data.\n   * Default: `undefined` */\n  dataStep?: number;\n  /** Fractional padding between the bars in the range of [0,1). Default: `0` */\n  barPadding?: number;\n  /** Rounded corners for top bars. Boolean or number (to set the radius in pixels). Default: `2` */\n  roundedCorners?: number | boolean;\n  /** Configurable bar cursor when hovering over. Default: `null` */\n  cursor?: StringAccessor<Datum>;\n  /** Sets the minimum bar height to 1 pixel for better visibility of small values. Default: `false` */\n  barMinHeight1Px?: boolean;\n  /** Base value to test data existence when `barMinHeight1Px` is set to `true`.\n   * Everything equal to barMinHeightZeroValue will not be rendered on the chart.\n   * Default: `null` */\n  barMinHeightZeroValue?: any;\n  /** Chart orientation: `Orientation.Vertical` or `Orientation.Horizontal`. Default `Orientation.Vertical` */\n  orientation?: Orientation | string;\n}\n\nexport const StackedBarDefaultConfig: StackedBarConfigInterface<unknown> = {\n  ...XYComponentDefaultConfig,\n  color: undefined,\n  barMaxWidth: undefined,\n  barWidth: undefined,\n  dataStep: undefined,\n  barPadding: 0.0,\n  roundedCorners: 2,\n  cursor: null,\n  barMinHeight1Px: false,\n  barMinHeightZeroValue: null,\n  orientation: Orientation.Vertical,\n}\n\n", "import { css, injectGlobal } from '@emotion/css'\n\nexport const root = css`\n  label: stacked-bar-component;\n`\n\nexport const globalStyles = injectGlobal`\n  :root {\n    --vis-stacked-bar-cursor: default;\n    --vis-stacked-bar-fill-color: var(--vis-color-main);\n    --vis-stacked-bar-stroke-color: none;\n    --vis-stacked-bar-stroke-width: 0px;\n    --vis-stacked-bar-hover-stroke-width: none;\n    --vis-stacked-bar-hover-stroke-color: none;\n\n    /* Dark Theme */\n    --vis-dark-stacked-bar-stroke-color: none;\n  }\n\n  body.theme-dark ${`.${root}`} {\n    --vis-stacked-bar-stroke-color: var(--vis-dark-stacked-bar-stroke-color);\n  }\n`\n\nexport const bar = css`\n  label: bar;\n  fill: var(--vis-stacked-bar-fill-color);\n  stroke: var(--vis-stacked-bar-stroke-color);\n  stroke-width: var(--vis-stacked-bar-stroke-width);\n  cursor: var(--vis-stacked-bar-cursor);\n\n  &:hover {\n    stroke-width: var(--vis-stacked-bar-hover-stroke-width);\n    stroke: var(--vis-stacked-bar-hover-stroke-color);\n  }\n`\n\nexport const barGroup = css`\n  label: barGroup;\n`\n\nexport const barGroupExit = css`\n  label: barGroupExit;\n`\n", "import { min, max } from 'd3-array'\n\n// Core\nimport { XYComponentCore } from 'core/xy-component'\n\n// Utils\nimport { isNumber, isArray, isEmpty, clamp, getStackedExtent, getString, getNumber, getStackedData, getExtent } from 'utils/data'\nimport { roundedRectPath } from 'utils/path'\nimport { smartTransition } from 'utils/d3'\nimport { getColor } from 'utils/color'\n\n// Types\nimport { ContinuousScale } from 'types/scale'\nimport { NumericAccessor } from 'types/accessor'\nimport { Spacing } from 'types/spacing'\nimport { Orientation } from 'types/position'\n\n// Local Types\nimport { StackedBarDataRecord } from './types'\n\n// Config\nimport { StackedBarDefaultConfig, StackedBarConfigInterface } from './config'\n\n// Styles\nimport * as s from './style'\n\nexport class StackedBar<Datum> extends XYComponentCore<Datum, StackedBarConfigInterface<Datum>> {\n  static selectors = s\n  protected _defaultConfig = StackedBarDefaultConfig as StackedBarConfigInterface<Datum>\n  public config: StackedBarConfigInterface<Datum> = this._defaultConfig\n\n  getAccessors = (): NumericAccessor<Datum>[] => (isArray(this.config.y) ? this.config.y : [this.config.y])\n  stacked = true\n  events = {}\n  private _prevNegative: boolean[] | undefined // To help guessing the bar direction when an accessor was set to null or 0\n  private _barData: Datum[] = []\n\n  constructor (config?: StackedBarConfigInterface<Datum>) {\n    super()\n    if (config) this.setConfig(config)\n  }\n\n  get bleed (): Spacing {\n    this._barData = this._getVisibleData()\n    if (this._barData.length === 0) return { top: 0, bottom: 0, left: 0, right: 0 }\n\n    // By default, horizontal orientation is \"flipped\", i.e. the `yDirection` of `XYContainer` is set to `Direction.North`\n    const isHorizontalAndFlipped = !this.isVertical() && (this.dataScale.range()[0] > this.dataScale.range()[1])\n    const dataDomain = this.dataScale.domain()\n    const halfGroupWidth = this._getBarWidth() / 2\n\n    const dataScaleValues = this._barData.map((d, i) => getNumber(d, this.config.x, i))\n    const firstDataValue = min(dataScaleValues)\n    const lastDataValue = max(dataScaleValues)\n    const firstValuePx = this.dataScale(firstDataValue)\n    const lastValuePx = this.dataScale(lastDataValue)\n\n    const dataDomainRequiredStart = this.dataScale.invert(firstValuePx + (isHorizontalAndFlipped ? halfGroupWidth : -halfGroupWidth))\n    const dataDomainRequiredEnd = this.dataScale.invert(lastValuePx + (isHorizontalAndFlipped ? -halfGroupWidth : halfGroupWidth))\n    const bleedPxStart = dataDomainRequiredStart <= dataDomain[0] ? this.dataScale(dataDomain[0]) - this.dataScale(dataDomainRequiredStart) : 0\n    const bleedPxEnd = dataDomainRequiredEnd > dataDomain[1] ? this.dataScale(dataDomainRequiredEnd) - this.dataScale(dataDomain[1]) : 0\n\n    return {\n      top: this.isVertical() ? 0 : (isHorizontalAndFlipped ? -bleedPxEnd : bleedPxStart),\n      bottom: this.isVertical() ? 0 : (isHorizontalAndFlipped ? -bleedPxStart : bleedPxEnd),\n      left: this.isVertical() ? bleedPxStart : 0,\n      right: this.isVertical() ? bleedPxEnd : 0,\n    }\n  }\n\n  private get dataScale (): ContinuousScale {\n    return this.isVertical() ? this.xScale : this.yScale\n  }\n\n  private get valueScale (): ContinuousScale {\n    return this.isVertical() ? this.yScale : this.xScale\n  }\n\n  private isVertical (): boolean {\n    return this.config.orientation === Orientation.Vertical\n  }\n\n  _render (customDuration?: number): void {\n    const { config } = this\n    const duration = isNumber(customDuration) ? customDuration : config.duration\n\n    const yAccessors = this.getAccessors()\n    const stacked = getStackedData(this._barData, 0, yAccessors, this._prevNegative)\n    this._prevNegative = stacked.map(s => !!s.isMostlyNegative)\n\n    const barGroups = this.g\n      .selectAll<SVGGElement, Datum>(`.${s.barGroup}`)\n      .data(this._barData, (d, i) => `${getString(d, config.id, i) ?? i}`)\n\n    const getBarGroupsTransform = (d: Datum, i: number): string => {\n      const v = this.dataScale(getNumber(d, config.x, i))\n      const x = this.isVertical() ? v : 0\n      const y = this.isVertical() ? 0 : v\n      return `translate(${x},${y})`\n    }\n\n    const barGroupsEnter = barGroups.enter().append('g')\n      .attr('class', s.barGroup)\n      .attr('transform', getBarGroupsTransform)\n      .style('opacity', 1)\n\n    const barGroupsMerged = barGroupsEnter.merge(barGroups)\n    smartTransition(barGroupsMerged, duration)\n      .attr('transform', getBarGroupsTransform)\n      .style('opacity', 1)\n\n    const barGroupExit = barGroups.exit()\n      .attr('class', s.barGroupExit)\n\n    smartTransition(barGroupExit, duration)\n      .style('opacity', 0)\n      .remove()\n\n    // Animate bars from exiting groups going down\n    smartTransition(barGroupExit.selectAll(`.${s.bar}`), duration)\n      .attr('transform', this.isVertical()\n        ? `translate(0,${this._height / 3})`\n        : `translate(${this._width / 6},0)`\n      )\n\n    // Render Bars\n    const bars = barGroupsMerged\n      .selectAll<SVGPathElement, StackedBarDataRecord<Datum>>(`.${s.bar}`)\n      .data((d, j) => stacked.map((s, stackIndex) =>\n        ({\n          ...d,\n          _index: j,\n          _stacked: s[j],\n          // Ending bar if the next stack is not the same as the current one\n          _ending: (stackIndex === stacked.length - 1) ||\n            ((stackIndex <= stacked.length - 1) && stacked[stackIndex + 1][j][0] !== s[j][1]),\n        }))\n      )\n\n    const barsEnter = bars.enter().append('path')\n      .attr('class', s.bar)\n      .attr('d', (d, j) => this._getBarPath(d, j, true))\n      .style('fill', (d, j) => getColor(d, config.color, j))\n\n    const barsMerged = barsEnter.merge(bars)\n\n    smartTransition(barsMerged, duration)\n      .attr('d', (d, j) => this._getBarPath(d, j))\n      .style('fill', (d, j) => getColor(d, config.color, j))\n      .style('cursor', (d, j) => getString(d, config.cursor, j))\n\n    smartTransition(bars.exit(), duration)\n      .style('opacity', 0)\n      .remove()\n  }\n\n  _getBarWidth (): number {\n    const { config, datamodel: { data } } = this\n    if (isEmpty(data)) return 0\n    if (config.barWidth) return min([config.barWidth, config.barMaxWidth])\n\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore\n    const isOrdinal = this.dataScale.bandwidth\n    const domain = (this.dataScale.domain ? this.dataScale.domain() : []) as number[]\n    const domainLength = isOrdinal ? domain.length : domain[1] - domain[0]\n\n    // If the dataStep property is provided the amount of data elements is calculates as domainLength / dataStep\n    //   otherwise we get the number of data elements within the domain range\n    // Or if the scale is ordinal we use data.length\n    let dataSize = (1 + domainLength / config.dataStep) ||\n        (!isOrdinal && data.filter((d, i) => {\n          const value = getNumber(d, config.x, i)\n          return (value >= domain[0]) && (value <= domain[1])\n        }).length) ||\n        data.length\n\n    // We increase the dataSize by 1 to take into account possible additional domain space\n    if (!isOrdinal && dataSize >= 2) dataSize += 1\n\n    const c = dataSize < 2 ? 1 : 1 - config.barPadding\n    const barWidth = c * (this.isVertical() ? this._width : this._height) / dataSize\n\n    return min([barWidth, config.barMaxWidth])\n  }\n\n  _getVisibleData (): Datum[] {\n    const { config, datamodel: { data } } = this\n\n    const groupWidth = this._getBarWidth()\n    const halfGroupWidthPx = data.length < 2 ? 0 : groupWidth / 2\n\n    const scale = this.dataScale\n    const halfGroupWidth = Math.abs((scale.invert(halfGroupWidthPx) as number) - (scale.invert(0) as number))\n    const filtered = data?.filter((d, i) => {\n      const v = getNumber(d, config.x, i)\n      const domain: number[] | Date[] = scale.domain()\n      const domainMin = +domain[0]\n      const domainMax = +domain[1]\n      return (v >= (domainMin - halfGroupWidth)) && (v <= (domainMax + halfGroupWidth))\n    })\n\n    return filtered\n  }\n\n  _getBarPath (d: StackedBarDataRecord<Datum>, accessorIndex: number, isEntering = false): string {\n    const { config } = this\n    const yAccessors = this.getAccessors()\n    const barWidth = this._getBarWidth()\n\n    const isNegative = d._stacked[1] < 0\n    const isEnding = d._ending // The most top bar or, if the value is negative, the most bottom bar\n    const value = getNumber(d, yAccessors[accessorIndex], d._index)\n    const height = isEntering ? 0 : Math.abs(this.valueScale(d._stacked[0]) - this.valueScale(d._stacked[1]))\n    const h = !isEntering && config.barMinHeight1Px && (height < 1) && isFinite(value) && (value !== config.barMinHeightZeroValue) ? 1 : height\n    const y = isEntering\n      ? this.valueScale(0)\n      : this.valueScale(isNegative ? d._stacked[0] : d._stacked[1]) - (height < 1 && config.barMinHeight1Px ? 1 : 0)\n\n    const x = -barWidth / 2\n    const width = barWidth\n\n    const cornerRadius = config.roundedCorners\n      ? isNumber(config.roundedCorners) ? +config.roundedCorners : width / 2\n      : 0\n    const cornerRadiusClamped = clamp(cornerRadius, 0, Math.min(height, width) / 2)\n    const isNorthDirected = this.yScale.range()[0] > this.yScale.range()[1]\n\n    return roundedRectPath({\n      x: this.isVertical() ? x : y - h,\n      y: this.isVertical() ? y + (isNorthDirected ? 0 : -h) : x,\n      w: this.isVertical() ? width : h,\n      h: this.isVertical() ? h : width,\n      tl: isEnding && (this.isVertical()\n        ? (!isNegative && isNorthDirected) || (isNegative && !isNorthDirected)\n        : isNegative\n      ),\n      tr: isEnding && (this.isVertical()\n        ? (!isNegative && isNorthDirected) || (isNegative && !isNorthDirected)\n        : !isNegative\n      ),\n      br: isEnding && (this.isVertical()\n        ? (isNegative && isNorthDirected) || (!isNegative && !isNorthDirected)\n        : !isNegative\n      ),\n      bl: isEnding && (this.isVertical()\n        ? (isNegative && isNorthDirected) || (!isNegative && !isNorthDirected)\n        : isNegative\n      ),\n      r: cornerRadiusClamped,\n    })\n  }\n\n  getValueScaleExtent (scaleByVisibleData: boolean): number[] {\n    const { datamodel } = this\n    const yAccessors = this.getAccessors()\n\n    const data = scaleByVisibleData ? this._getVisibleData() : datamodel.data\n    return getStackedExtent(data, ...yAccessors)\n  }\n\n  getDataScaleExtent (): number[] {\n    const { config, datamodel } = this\n    return getExtent(datamodel.data, config.x)\n  }\n\n  getYDataExtent (scaleByVisibleData: boolean): number[] {\n    return this.isVertical() ? this.getValueScaleExtent(scaleByVisibleData) : this.getDataScaleExtent()\n  }\n\n  getXDataExtent (): number[] {\n    return this.isVertical() ? this.getDataScaleExtent() : this.getValueScaleExtent(false)\n  }\n}\n", "import { XYComponentConfigInterface, XYComponentDefaultConfig } from 'core/xy-component/config'\n\n// Types\nimport { ColorAccessor, StringAccessor } from 'types/accessor'\nimport { Orientation } from 'types/position'\n\nexport interface GroupedBarConfigInterface<Datum> extends XYComponentConfigInterface<Datum> {\n  /** Bar color accessor function. Default: `d => d.color` */\n  color?: ColorAccessor<Datum>;\n  /** Force set the group width in pixels. Default: `undefined` */\n  groupWidth?: number;\n  /** Maximum group width for dynamic sizing. Limits the groupWidth property from the top. Default: `undefined` */\n  groupMaxWidth?: number;\n  /** Expected step between the bar groups in the X axis units.\n   * Needed to correctly calculate the width of the bar groups when there are gaps in the data.\n   * Default: `undefined` */\n  dataStep?: number;\n  /** Fractional padding between the groups in the range of [0,1). Default: `0.05` */\n  groupPadding?: number;\n  /** Fractional padding between the bars in the range of [0,1). Default: `0` */\n  barPadding?: number;\n  /** Rounded bar corners. Boolean or number (to set the radius in pixels explicitly). Default: `2` */\n  roundedCorners?: number | boolean;\n  /** Sets the minimum bar height for better visibility of small values. Default: `1` */\n  barMinHeight?: number;\n  /** Configurable bar cursor when hovering over. Default: `null` */\n  cursor?: StringAccessor<Datum>;\n  /** Chart orientation: `Orientation.Vertical` or `Orientation.Horizontal`. Default `Orientation.Vertical` */\n  orientation?: Orientation | string;\n}\n\nexport const GroupedBarDefaultConfig: GroupedBarConfigInterface<unknown> = {\n  ...XYComponentDefaultConfig,\n  color: undefined,\n  groupMaxWidth: undefined,\n  groupWidth: undefined,\n  dataStep: undefined,\n  groupPadding: 0.05,\n  barPadding: 0.0,\n  roundedCorners: 2,\n  barMinHeight: 2,\n  cursor: null,\n  orientation: Orientation.Vertical,\n}\n", "import { css, injectGlobal } from '@emotion/css'\n\nexport const root = css`\n  label: grouped-bar-component;\n`\n\nexport const globalStyles = injectGlobal`\n  :root {\n    --vis-grouped-bar-cursor: default;\n    --vis-grouped-bar-fill-color: var(--vis-color-main);\n    --vis-grouped-bar-stroke-color: none;\n    --vis-grouped-bar-stroke-width: 0px;\n    --vis-grouped-bar-hover-stroke-width: 1px;\n    --vis-grouped-bar-hover-stroke-color: none;\n\n\n    /* Dark Theme */\n    --vis-dark-grouped-bar-stroke-color: none;\n  }\n\n  body.theme-dark ${`.${root}`} {\n    --vis-grouped-bar-stroke-color: var(--vis-dark-grouped-bar-stroke-color);\n  }\n`\n\nexport const bar = css`\n  label: bar;\n  fill: var(--vis-grouped-bar-fill-color);\n  stroke: var(--vis-grouped-bar-stroke-color);\n  stroke-width: var(--vis-grouped-bar-stroke-width);\n  cursor: var(--vis-grouped-bar-cursor);\n\n  &:hover {\n    stroke-width: var(--vis-grouped-bar-hover-stroke-width);\n    stroke: var(--vis-grouped-bar-hover-stroke-color);\n  }\n`\n\nexport const barGroup = css`\n  label: barGroup;\n`\n\nexport const barGroupExit = css`\n  label: barGroupExit;\n`\n", "import { scaleBand } from 'd3-scale'\nimport { min, max, range } from 'd3-array'\n\n// Core\nimport { XYComponentCore } from 'core/xy-component'\n\n// Utils\nimport { clamp, getExtent, getMax, getMin, getNumber, getString, isArray, isEmpty, isNumber } from 'utils/data'\nimport { roundedRectPath } from 'utils/path'\nimport { smartTransition } from 'utils/d3'\nimport { getColor } from 'utils/color'\n\n// Types\nimport { NumericAccessor } from 'types/accessor'\nimport { Spacing } from 'types/spacing'\nimport { Direction } from 'types/direction'\nimport { Orientation } from 'types/position'\nimport { ContinuousScale } from 'types/scale'\n\n// Config\nimport { GroupedBarDefaultConfig, GroupedBarConfigInterface } from './config'\n\n// Styles\nimport * as s from './style'\n\nexport class GroupedBar<Datum> extends XYComponentCore<Datum, GroupedBarConfigInterface<Datum>> {\n  static selectors = s\n  protected _defaultConfig = GroupedBarDefaultConfig as GroupedBarConfigInterface<Datum>\n  public config: GroupedBarConfigInterface<Datum> = this._defaultConfig\n\n  getAccessors = (): NumericAccessor<Datum>[] =>\n    isArray(this.config.y) ? this.config.y : [this.config.y]\n\n  protected events = {\n  }\n\n  private _barData: Datum[] = []\n\n  constructor (config?: GroupedBarConfigInterface<Datum>) {\n    super()\n    if (config) this.setConfig(config)\n  }\n\n  get bleed (): Spacing {\n    this._barData = this._getVisibleData()\n    if (this._barData.length === 0) return { top: 0, bottom: 0, left: 0, right: 0 }\n\n    // By default, horizontal orientation is \"flipped\", i.e. the `yDirection` of `XYContainer` is set to `Direction.North`\n    const isHorizontalAndFlipped = !this.isVertical() && (this.dataScale.range()[0] > this.dataScale.range()[1])\n    const dataDomain = this.dataScale.domain()\n    const halfGroupWidth = this._getGroupWidth() / 2\n\n    const dataScaleValues = this._barData.map((d, i) => getNumber(d, this.config.x, i))\n    const firstDataValue = min(dataScaleValues)\n    const lastDataValue = max(dataScaleValues)\n    const firstValuePx = this.dataScale(firstDataValue)\n    const lastValuePx = this.dataScale(lastDataValue)\n\n    const dataDomainRequiredStart = this.dataScale.invert(firstValuePx + (isHorizontalAndFlipped ? halfGroupWidth : -halfGroupWidth))\n    const dataDomainRequiredEnd = this.dataScale.invert(lastValuePx + (isHorizontalAndFlipped ? -halfGroupWidth : halfGroupWidth))\n    const bleedPxStart = dataDomainRequiredStart <= dataDomain[0] ? this.dataScale(dataDomain[0]) - this.dataScale(dataDomainRequiredStart) : 0\n    const bleedPxEnd = dataDomainRequiredEnd > dataDomain[1] ? this.dataScale(dataDomainRequiredEnd) - this.dataScale(dataDomain[1]) : 0\n\n    return {\n      top: this.isVertical() ? 0 : (isHorizontalAndFlipped ? -bleedPxEnd : bleedPxStart),\n      bottom: this.isVertical() ? 0 : (isHorizontalAndFlipped ? -bleedPxStart : bleedPxEnd),\n      left: this.isVertical() ? bleedPxStart : 0,\n      right: this.isVertical() ? bleedPxEnd : 0,\n    }\n  }\n\n  private get dataScale (): ContinuousScale {\n    return this.isVertical() ? this.xScale : this.yScale\n  }\n\n  private get valueScale (): ContinuousScale {\n    return this.isVertical() ? this.yScale : this.xScale\n  }\n\n  private isVertical (): boolean {\n    return this.config.orientation === Orientation.Vertical\n  }\n\n  _render (customDuration?: number): void {\n    const { config } = this\n    const duration = isNumber(customDuration)\n      ? customDuration\n      : config.duration\n    const groupWidth = this._getGroupWidth()\n\n    const yAccessors = this.getAccessors()\n    const innerBandScaleRange = [-groupWidth / 2, groupWidth / 2] as [\n      number,\n      number,\n    ]\n    const innerBandScale = scaleBand<number>()\n      .domain(range(yAccessors.length))\n      .range(innerBandScaleRange)\n      .paddingInner(config.barPadding)\n      .paddingOuter(config.barPadding)\n\n    const barGroups = this.g\n      .selectAll<SVGGElement, Datum>(`.${s.barGroup}`)\n      .data(this._barData, (d, i) => `${getString(d, config.id, i) ?? i}`)\n\n    const getBarGroupsTransform = (d: Datum, i: number): string => {\n      const v = this.dataScale(getNumber(d, config.x, i))\n      const x = this.isVertical() ? v : 0\n      const y = this.isVertical() ? 0 : v\n      return `translate(${x},${y})`\n    }\n\n    const barGroupsEnter = barGroups\n      .enter()\n      .append('g')\n      .attr('class', s.barGroup)\n      .attr('transform', getBarGroupsTransform)\n      .style('opacity', 1)\n\n    const barGroupsMerged = barGroupsEnter.merge(barGroups)\n    smartTransition(barGroupsMerged, duration)\n      .attr('transform', getBarGroupsTransform)\n      .style('opacity', 1)\n\n    const barGroupExit = barGroups.exit().attr('class', s.barGroupExit)\n    smartTransition(barGroupExit, duration).style('opacity', 0).remove()\n\n    // Animate exiting bars going down\n    smartTransition(barGroupExit.selectAll<SVGPathElement, Datum>(`.${s.bar}`), duration)\n      .attr('transform', (d, i, e) => {\n        return this.isVertical()\n          ? `translate(0,${this.yScale(0)}) scale(1,0)`\n          : `translate(${this.xScale(0)},0) scale(0,1)`\n      })\n\n    const barWidth = innerBandScale.bandwidth()\n    const bars = barGroupsMerged\n      .selectAll<SVGPathElement, Datum>(`.${s.bar}`)\n      .data((d) => yAccessors.map(() => d))\n\n    const valueAxisDirection = this._getValueAxisDirection()\n    const barsEnter = bars\n      .enter()\n      .append('path')\n      .attr('class', s.bar)\n      .attr('d', (d, i) => {\n        const x = innerBandScale(i)\n        const y = this.valueScale(0)\n        const width = barWidth\n        const height = 0\n        return this._getBarPath(x, y, width, height, false, valueAxisDirection)\n      })\n      .style('fill', (d, i) => getColor(d, config.color, i))\n\n    const barsMerged = barsEnter.merge(bars)\n    smartTransition(barsMerged, duration)\n      .attr('d', (d, j) => {\n        const x = innerBandScale(j)\n        const width = barWidth\n\n        // Todo: Find a way to pass the datum index to `getNumber` below\n        const value = getNumber(d, yAccessors[j])\n        const isNegative = value < 0\n        let y = isNegative ? this.valueScale(0) : this.valueScale(value || 0)\n        let height = Math.abs(this.valueScale(0) - this.valueScale(value)) || 0\n\n        // Optionally set minimum bar height\n        if (height < config.barMinHeight) {\n          const dir = valueAxisDirection === Direction.North ? -1 : 1\n          y = this.valueScale(0) + dir * config.barMinHeight\n          height = config.barMinHeight\n        }\n        return this._getBarPath(x, y, width, height, isNegative, valueAxisDirection)\n      })\n      .style('fill', (d, i) => getColor(d, config.color, i))\n      .style('cursor', (d, i) => getString(d, config.cursor, i))\n\n    smartTransition(bars.exit(), duration).remove()\n  }\n\n  _getValueAxisDirection (): Direction.North | Direction.South {\n    return this.valueScale.range()[0] > this.valueScale.range()[1]\n      ? Direction.North\n      : Direction.South\n  }\n\n  _getVisibleData (): Datum[] {\n    const {\n      config,\n      datamodel: { data },\n    } = this\n    const groupWidth = this._getGroupWidth()\n    const halfGroupWidth = data.length < 2 ? 0 : groupWidth / 2\n\n    const dataScale = this.dataScale\n    const xHalfGroupWidth = Math.abs(\n      (dataScale.invert(halfGroupWidth) as number) -\n        (dataScale.invert(0) as number)\n    )\n    const filtered = data?.filter((d, i) => {\n      const v = getNumber(d, config.x, i)\n      const domain: number[] | Date[] = dataScale.domain()\n      const domainMin = +domain[0]\n      const domainMax = +domain[1]\n      return (\n        v >= domainMin - xHalfGroupWidth && v <= domainMax + xHalfGroupWidth\n      )\n    })\n\n    return filtered\n  }\n\n  _getBarPath (\n    x: number,\n    y: number,\n    width: number,\n    height: number,\n    isNegative: boolean,\n    direction: Direction.North | Direction.South\n  ): string {\n    const { config } = this\n\n    const cornerRadius = config.roundedCorners\n      ? isNumber(config.roundedCorners)\n        ? +config.roundedCorners\n        : width / 2\n      : 0\n    const cornerRadiusClamped = clamp(\n      cornerRadius,\n      0,\n      Math.min(height, width) / 2\n    )\n\n    const isNorthDirected = direction === Direction.North\n    const roundedTop = this.isVertical() && isNegative !== isNorthDirected\n    const roundedBottom = this.isVertical() && isNegative === isNorthDirected\n    const roundedLeft = !this.isVertical() && isNegative\n    const roundedRight = !this.isVertical() && !isNegative\n\n    return roundedRectPath({\n      x: this.isVertical() ? x : y + (isNorthDirected ? 0 : -height),\n      y: this.isVertical() ? y + (isNorthDirected ? 0 : -height) : x,\n      w: this.isVertical() ? width : height,\n      h: this.isVertical() ? height : width,\n      tl: roundedTop || roundedLeft,\n      tr: roundedTop || roundedRight,\n      bl: roundedBottom || roundedLeft,\n      br: roundedBottom || roundedRight,\n      r: cornerRadiusClamped,\n    })\n  }\n\n  _getGroupWidth (): number {\n    const {\n      config,\n      datamodel: { data },\n    } = this\n    if (isEmpty(data)) return 0\n    if (config.groupWidth) { return min([config.groupWidth, config.groupMaxWidth]) }\n\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore\n    const isOrdinal = this.dataScale.bandwidth\n    const domain = (\n      this.dataScale.domain ? this.dataScale.domain() : []\n    ) as number[]\n    const domainLength = isOrdinal ? domain.length : domain[1] - domain[0]\n\n    // If the dataStep property is provided the amount of data elements is calculates as domainLength / dataStep\n    //   otherwise we get the number of data elements within the domain range\n    // Or if the scale is ordinal we use data.length\n    let dataSize =\n      1 + domainLength / config.dataStep ||\n      (!isOrdinal &&\n        data.filter((d, i) => {\n          const value = getNumber(d, config.x, i)\n          return value >= domain[0] && value <= domain[1]\n        }).length) ||\n      data.length\n\n    // We increase the dataSize by 1 to take into account possible additional domain space\n    if (!isOrdinal && dataSize >= 2) dataSize += 1\n\n    const c = dataSize < 2 ? 1 : 1 - config.groupPadding\n    const groupWidth =\n      (c * (this.isVertical() ? this._width : this._height)) / dataSize\n    return min([groupWidth, config.groupMaxWidth])\n  }\n\n  getValueScaleExtent (scaleByVisibleData: boolean): number[] {\n    const { datamodel } = this\n    const yAccessors = this.getAccessors()\n\n    const data = scaleByVisibleData ? this._getVisibleData() : datamodel.data\n    const min = getMin(data, ...yAccessors)\n    const max = getMax(data, ...yAccessors)\n    return [min > 0 ? 0 : min, max < 0 ? 0 : max]\n  }\n\n\n  getDataScaleExtent (): number[] {\n    const { config, datamodel } = this\n    return getExtent(datamodel.data, config.x)\n  }\n\n  getYDataExtent (scaleByVisibleData: boolean): number[] {\n    return this.isVertical()\n      ? this.getValueScaleExtent(scaleByVisibleData)\n      : this.getDataScaleExtent()\n  }\n\n  getXDataExtent (): number[] {\n    return this.isVertical()\n      ? this.getDataScaleExtent()\n      : this.getValueScaleExtent(false)\n  }\n}\n", "export default function(x) {\n  return x;\n}\n", "import identity from \"./identity.js\";\n\nvar top = 1,\n    right = 2,\n    bottom = 3,\n    left = 4,\n    epsilon = 1e-6;\n\nfunction translateX(x) {\n  return \"translate(\" + x + \",0)\";\n}\n\nfunction translateY(y) {\n  return \"translate(0,\" + y + \")\";\n}\n\nfunction number(scale) {\n  return d => +scale(d);\n}\n\nfunction center(scale, offset) {\n  offset = Math.max(0, scale.bandwidth() - offset * 2) / 2;\n  if (scale.round()) offset = Math.round(offset);\n  return d => +scale(d) + offset;\n}\n\nfunction entering() {\n  return !this.__axis;\n}\n\nfunction axis(orient, scale) {\n  var tickArguments = [],\n      tickValues = null,\n      tickFormat = null,\n      tickSizeInner = 6,\n      tickSizeOuter = 6,\n      tickPadding = 3,\n      offset = typeof window !== \"undefined\" && window.devicePixelRatio > 1 ? 0 : 0.5,\n      k = orient === top || orient === left ? -1 : 1,\n      x = orient === left || orient === right ? \"x\" : \"y\",\n      transform = orient === top || orient === bottom ? translateX : translateY;\n\n  function axis(context) {\n    var values = tickValues == null ? (scale.ticks ? scale.ticks.apply(scale, tickArguments) : scale.domain()) : tickValues,\n        format = tickFormat == null ? (scale.tickFormat ? scale.tickFormat.apply(scale, tickArguments) : identity) : tickFormat,\n        spacing = Math.max(tickSizeInner, 0) + tickPadding,\n        range = scale.range(),\n        range0 = +range[0] + offset,\n        range1 = +range[range.length - 1] + offset,\n        position = (scale.bandwidth ? center : number)(scale.copy(), offset),\n        selection = context.selection ? context.selection() : context,\n        path = selection.selectAll(\".domain\").data([null]),\n        tick = selection.selectAll(\".tick\").data(values, scale).order(),\n        tickExit = tick.exit(),\n        tickEnter = tick.enter().append(\"g\").attr(\"class\", \"tick\"),\n        line = tick.select(\"line\"),\n        text = tick.select(\"text\");\n\n    path = path.merge(path.enter().insert(\"path\", \".tick\")\n        .attr(\"class\", \"domain\")\n        .attr(\"stroke\", \"currentColor\"));\n\n    tick = tick.merge(tickEnter);\n\n    line = line.merge(tickEnter.append(\"line\")\n        .attr(\"stroke\", \"currentColor\")\n        .attr(x + \"2\", k * tickSizeInner));\n\n    text = text.merge(tickEnter.append(\"text\")\n        .attr(\"fill\", \"currentColor\")\n        .attr(x, k * spacing)\n        .attr(\"dy\", orient === top ? \"0em\" : orient === bottom ? \"0.71em\" : \"0.32em\"));\n\n    if (context !== selection) {\n      path = path.transition(context);\n      tick = tick.transition(context);\n      line = line.transition(context);\n      text = text.transition(context);\n\n      tickExit = tickExit.transition(context)\n          .attr(\"opacity\", epsilon)\n          .attr(\"transform\", function(d) { return isFinite(d = position(d)) ? transform(d + offset) : this.getAttribute(\"transform\"); });\n\n      tickEnter\n          .attr(\"opacity\", epsilon)\n          .attr(\"transform\", function(d) { var p = this.parentNode.__axis; return transform((p && isFinite(p = p(d)) ? p : position(d)) + offset); });\n    }\n\n    tickExit.remove();\n\n    path\n        .attr(\"d\", orient === left || orient === right\n            ? (tickSizeOuter ? \"M\" + k * tickSizeOuter + \",\" + range0 + \"H\" + offset + \"V\" + range1 + \"H\" + k * tickSizeOuter : \"M\" + offset + \",\" + range0 + \"V\" + range1)\n            : (tickSizeOuter ? \"M\" + range0 + \",\" + k * tickSizeOuter + \"V\" + offset + \"H\" + range1 + \"V\" + k * tickSizeOuter : \"M\" + range0 + \",\" + offset + \"H\" + range1));\n\n    tick\n        .attr(\"opacity\", 1)\n        .attr(\"transform\", function(d) { return transform(position(d) + offset); });\n\n    line\n        .attr(x + \"2\", k * tickSizeInner);\n\n    text\n        .attr(x, k * spacing)\n        .text(format);\n\n    selection.filter(entering)\n        .attr(\"fill\", \"none\")\n        .attr(\"font-size\", 10)\n        .attr(\"font-family\", \"sans-serif\")\n        .attr(\"text-anchor\", orient === right ? \"start\" : orient === left ? \"end\" : \"middle\");\n\n    selection\n        .each(function() { this.__axis = position; });\n  }\n\n  axis.scale = function(_) {\n    return arguments.length ? (scale = _, axis) : scale;\n  };\n\n  axis.ticks = function() {\n    return tickArguments = Array.from(arguments), axis;\n  };\n\n  axis.tickArguments = function(_) {\n    return arguments.length ? (tickArguments = _ == null ? [] : Array.from(_), axis) : tickArguments.slice();\n  };\n\n  axis.tickValues = function(_) {\n    return arguments.length ? (tickValues = _ == null ? null : Array.from(_), axis) : tickValues && tickValues.slice();\n  };\n\n  axis.tickFormat = function(_) {\n    return arguments.length ? (tickFormat = _, axis) : tickFormat;\n  };\n\n  axis.tickSize = function(_) {\n    return arguments.length ? (tickSizeInner = tickSizeOuter = +_, axis) : tickSizeInner;\n  };\n\n  axis.tickSizeInner = function(_) {\n    return arguments.length ? (tickSizeInner = +_, axis) : tickSizeInner;\n  };\n\n  axis.tickSizeOuter = function(_) {\n    return arguments.length ? (tickSizeOuter = +_, axis) : tickSizeOuter;\n  };\n\n  axis.tickPadding = function(_) {\n    return arguments.length ? (tickPadding = +_, axis) : tickPadding;\n  };\n\n  axis.offset = function(_) {\n    return arguments.length ? (offset = +_, axis) : offset;\n  };\n\n  return axis;\n}\n\nexport function axisTop(scale) {\n  return axis(top, scale);\n}\n\nexport function axisRight(scale) {\n  return axis(right, scale);\n}\n\nexport function axisBottom(scale) {\n  return axis(bottom, scale);\n}\n\nexport function axisLeft(scale) {\n  return axis(left, scale);\n}\n", "export enum TrimMode {\n  Start = 'start',\n  Middle = 'middle',\n  End = 'end',\n}\n\nexport enum VerticalAlign {\n  Top = 'top',\n  Middle = 'middle',\n  Bottom = 'bottom',\n}\n\nexport enum FitMode {\n  Wrap = 'wrap',\n  Trim = 'trim',\n}\n\nexport enum TextAlign {\n  Left = 'left',\n  Center = 'center',\n  Right = 'right',\n}\n\nexport type UnovisText = {\n  // The text content to be displayed.\n  text: string;\n  // The font size of the text in pixels.\n  fontSize: number;\n  // The font family of the text (optional). Default: `'var(--vis-font-family)'`.\n  fontFamily?: string;\n  // The font weight of the text (optional)`.\n  fontWeight?: number;\n  // The color of the text (optional).\n  color?: string;\n  // The line height scaling factor for the text (optional).\n  lineHeight?: number;\n  // The top margin of the text block in pixels (optional).\n  marginTop?: number;\n  // The bottom margin of the text block in pixels (optional).\n  marginBottom?: number;\n  // The font width-to-height ratio (optional).\n  fontWidthToHeightRatio?: number;\n}\n\nexport type UnovisWrappedText = UnovisText & {\n  // An array of text lines, where each element represents a single line of text.\n  _lines: string[];\n  // Maximum width of any line of text in this text block\n  _maxWidth: number;\n  // Estimated height of this text block\n  _estimatedHeight: number;\n}\n\nexport type UnovisTextOptions = {\n  // Optional X coordinates of the text.\n  x?: number;\n  // Optional Y coordinates of the text.\n  y?: number;\n  // The maximum width of the text in pixels.\n  width?: number;\n  // The word separator(s) used to split the text into words.\n  separator?: string | string[];\n  // The vertical alignment of the text ('top', 'middle', or 'bottom').\n  verticalAlign?: VerticalAlign | string;\n  // The horizontal text alignment ('left', 'center', or 'right').\n  textAlign?: TextAlign | string;\n  // Text rotation\n  textRotationAngle?: number;\n  // Whether to use a fast estimation method or a more accurate one for text calculations.\n  fastMode?: boolean;\n  // Force word break if they don't fit into the width\n  wordBreak?: boolean;\n}\n\nexport type UnovisTextFrameOptions = UnovisTextOptions & {\n  height?: number;\n}\n\n", "import { TextAlign } from 'types/text'\n\nexport type TransformValues = {\n  translate: {\n    x: number;\n    y: number;\n  };\n  scale: {\n    x: number;\n    y: number;\n  };\n}\n\n/**\n * Converts a TextAlign value into an SVG text-anchor attribute value.\n *\n * @param {TextAlign | string} textAlign - The TextAlign value to convert.\n * @returns {'start' | 'middle' | 'end'} The corresponding text-anchor attribute value. Defaults to 'start' if an invalid TextAlign value is provided.\n */\nexport function getTextAnchorFromTextAlign (textAlign: TextAlign | string): 'start' | 'middle' | 'end' {\n  switch (textAlign) {\n    case TextAlign.Center:\n      return 'middle'\n    case TextAlign.Right:\n      return 'end'\n    case TextAlign.Left:\n    default:\n      return 'start'\n  }\n}\n\n\n", "import { Selection } from 'd3-selection'\nimport { sum } from 'd3-array'\nimport striptags from 'striptags'\n\n// Types\nimport { TextAlign, TrimMode, UnovisText, UnovisTextFrameOptions, UnovisTextOptions, UnovisWrappedText, VerticalAlign } from 'types/text'\n\n// Utils\nimport { flatten, isArray, merge } from 'utils/data'\nimport { getTextAnchorFromTextAlign } from 'types/svg'\n\n// Styles\nimport { getFontWidthToHeightRatio, UNOVIS_TEXT_DEFAULT, UNOVIS_TEXT_SEPARATOR_DEFAULT, UNOVIS_TEXT_HYPHEN_CHARACTER_DEFAULT } from 'styles/index'\n\n/**\n * Converts a kebab-case string to camelCase.\n *\n * @param {string} str - The kebab-case string to be converted.\n * @returns {string} The resulting camelCase string.\n */\nexport function kebabCaseToCamel (str: string): string {\n  return str.replace(/-([a-z])/g, (_, letter) => letter.toUpperCase())\n}\n\n/**\n * Converts a given string to kebab-case.\n * @param {string} str - The input string to be converted to kebab-case.\n * @returns {string} - The kebab-cased string.\n */\nexport function kebabCase (str: string): string {\n  return str.match(/[A-Z]{2,}(?=[A-Z][a-z0-9]*|\\b)|[A-Z]?[a-z0-9]*|[A-Z]|[0-9]+/g)\n    ?.filter(Boolean)\n    .map(x => x.toLowerCase())\n    .join('-')\n}\n\nexport function escapeStringKeepHash (str: string): string {\n  return str\n    .replace(/['\"]/g, '&#39;') // Escapes quotes with &#39;\n    // eslint-disable-next-line no-control-regex\n    .replace(/\\u0000/g, '\\\\0') // Escapes null characters\n    .replace(/\\n/g, '\\\\n') // Escapes new lines\n    .replace(/\\r/g, '\\\\r') // Escapes carriage returns\n    .replace(/\\v/g, '\\\\v') // Escapes vertical tabs\n    .replace(/\\t/g, '\\\\t') // Escapes horizontal tabs\n    .replace(/\\f/g, '\\\\f') // Escapes form feeds\n}\n\n/**\n * Trims the input string from the start, leaving only the specified maximum length.\n * @param {string} str - The input string to be trimmed.\n * @param {number} [maxLength=15] - The maximum allowed length of the trimmed string.\n * @returns {string} - The trimmed string.\n */\nexport function trimStringStart (str: string | undefined, maxLength = 15): string {\n  if (!str) return ''\n  return str.length > maxLength ? `…${str.substr(str.length - maxLength, maxLength)}` : str\n}\n\n/**\n * Trims the input string from the middle, leaving only the specified maximum length.\n * @param {string} str - The input string to be trimmed.\n * @param {number} [maxLength=15] - The maximum allowed length of the trimmed string.\n * @returns {string} - The trimmed string.\n */\nexport function trimStringMiddle (str: string | undefined, maxLength = 15): string {\n  if (!str) return ''\n\n  const dist = Math.floor((maxLength - 3) / 2)\n  return str.length > maxLength ? `${str.substr(0, dist)}…${str.substr(-dist, dist)}` : str\n}\n\n/**\n * Trims the input string from the end, leaving only the specified maximum length.\n * @param {string} str - The input string to be trimmed.\n * @param {number} [maxLength=15] - The maximum allowed length of the trimmed string.\n * @returns {string} - The trimmed string.\n */\nexport function trimStringEnd (str: string | undefined, maxLength = 15): string {\n  if (!str) return ''\n\n  return str.length > maxLength ? `${str.substr(0, maxLength)}…` : str\n}\n\n/**\n * Trims the input string according to the specified trim mode.\n * @param {string} str - The input string to be trimmed.\n * @param {number} [length=15] - The maximum allowed length of the trimmed string.\n * @param {TrimMode} [type=TrimMode.Middle] - The trim mode to be applied.\n * @returns {string} - The trimmed string.\n */\nexport function trimString (str: string | undefined, length = 15, type = TrimMode.Middle): string {\n  if (!str) return ''\n\n  let result = trimStringEnd(str, length)\n  if (type === TrimMode.Start) result = trimStringStart(str, length)\n  else if (type === TrimMode.Middle) result = trimStringMiddle(str, length)\n  return result\n}\n\n/**\n * Splits the input string according to the specified separators.\n * @param {string} text - The input string to be split.\n * @param {string[]} [separators=[' ']] - The array of separators to be used for splitting.\n * @returns {string[]} - The array of split words.\n */\nexport function splitString (text: string, separators = [' ']): string[] {\n  let result = [text] as Array<string | string[]>\n  for (let i = 0; i < separators.length; i++) {\n    const sep = separators[i]\n    result.forEach((d, index) => {\n      const separated = (d as string).split(sep)\n      const words = separated.map((word, j) => `${word}${j === separated.length - 1 ? '' : sep}`)\n      result[index] = words\n    })\n    result = flatten(result)\n  }\n\n  return result as string[]\n}\n\n/**\n * Wraps an SVG text element to fit within the specified width.\n * @param {Selection<SVGTextElement, any, SVGElement, any>} textElement - The SVG text element to be wrapped.\n * @param {number} width - The maximum allowed width for the text element.\n * @param {(string | string[])} [separator=[' ', '-', '.', ',']] - The separator(s) to be used for wrapping.\n */\nexport function wrapSVGText (\n  textElement: Selection<SVGTextElement, any, SVGElement, any>,\n  width: number,\n  separator: string | string[] = [' ', '-', '.', ',']\n): void {\n  const text = textElement.text()\n  if (!text) return\n\n  // Wrap\n  const separators = (isArray(separator) ? separator : [separator]) as string[]\n  const words = splitString(text, separators)\n  const x = parseFloat(textElement.attr('x')) || 0\n\n  textElement.text('')\n  let tspan = textElement.append('tspan').attr('x', x)\n  let tspanContent = `${words[0]}`\n  tspan.text(tspanContent)\n\n  words.forEach((word, i) => {\n    if (i === 0) return\n\n    const tspanText = `${tspanContent}${word}`\n    tspan.text(tspanText)\n    const tspanWidth = tspan.node().getComputedTextLength()\n    if (tspanWidth > width) {\n      tspan.text(tspanContent.trim())\n\n      tspan = textElement.append('tspan')\n        .attr('x', x)\n        .attr('dy', '1.2em')\n        .text(word)\n\n      tspanContent = word\n    } else tspanContent += word\n  })\n}\n\n/**\n * Trims an SVG text element based on the specified max width, trim type, and other options.\n * @param {Selection<SVGTextElement, any, SVGElement, any>} svgTextSelection - The D3 selection of the SVG text element to be trimmed.\n * @param {number} [maxWidth=50] - The maximum width of the text element.\n * @param {TrimMode} [trimType=TrimMode.Middle] - The type of trim (start, middle, or end).\n * @param {boolean} [fastMode=true] - Whether to use a fast estimation method for text length calculation.\n * @param {number} [fontSize=0] - The font size of the text.\n * @param {number} [fontWidthToHeightRatio=getFontWidthToHeightRatio()] - The font width to height ratio.\n * @returns {boolean} True if the text was trimmed, false otherwise.\n */\nexport function trimSVGText (\n  svgTextSelection: Selection<SVGTextElement, any, SVGElement, any>,\n  maxWidth = 50,\n  trimType = TrimMode.Middle,\n  fastMode = true,\n  fontSize = +window.getComputedStyle(svgTextSelection.node())?.fontSize || 0,\n  fontWidthToHeightRatio = getFontWidthToHeightRatio()\n): boolean {\n  const text = svgTextSelection.text()\n  const textLength = text.length\n\n  const textWidth = fastMode ? fontSize * textLength * fontWidthToHeightRatio : svgTextSelection.node().getComputedTextLength()\n  const tolerance = 1.1\n  const maxCharacters = Math.ceil(textLength * maxWidth / (tolerance * textWidth))\n  if (maxCharacters < textLength) {\n    svgTextSelection.text(trimString(text, maxCharacters, trimType))\n    return true\n  }\n\n  return false\n}\n\n/**\n * Estimates the length of a string in pixels.\n * @param {string} str - The string to be measured.\n * @param {number} fontSize - The font size of the string.\n * @param {number} [fontWidthToHeightRatio=getFontWidthToHeightRatio()] - The font width to height ratio.\n * @returns {number} The estimated length of the string in pixels.\n */\nexport function estimateStringPixelLength (\n  str: string,\n  fontSize: number,\n  fontWidthToHeightRatio = getFontWidthToHeightRatio()\n): number {\n  return str.length * fontSize * fontWidthToHeightRatio || 0\n}\n\n/**\n * Calculates the precise length of a string in pixels.\n * @param {string} str - The string to be measured.\n * @param {string} [fontFamily] - The font family of the string.\n * @param {(string | number)} [fontSize] - The font size of the string.\n * @returns {number} The precise length of the string in pixels.\n */\nexport function getPreciseStringLengthPx (str: string, fontFamily?: string, fontSize?: string | number): number {\n  const svgNS = 'http://www.w3.org/2000/svg'\n  const svg = document.createElementNS(svgNS, 'svg')\n  const text = document.createElementNS(svgNS, 'text')\n\n  text.textContent = str\n  text.setAttribute('font-size', `${fontSize}`)\n  text.setAttribute('font-family', fontFamily)\n\n  svg.appendChild(text)\n  document.body.appendChild(svg)\n  const length = text.getComputedTextLength()\n  document.body.removeChild(svg)\n\n  return length\n}\n\n/**\n * Estimates the dimensions of an SVG text element.\n *\n * @export\n * @param {Selection<SVGTextElement, any, SVGElement, any>} svgTextSelection - The D3 selection of the SVG text element.\n * @param {number} fontSize - The font size.\n * @param {number} [dy=0.32] - The line height scaling factor.\n * @param {boolean} [fastMode=true] - Whether to use a fast estimation method or a more accurate one.\n * @param {number} [fontWidthToHeightRatio] - The font width-to-height ratio.\n * @returns {{width: number, height: number}} - The estimated dimensions of the text element.\n */\nexport function estimateTextSize (\n  svgTextSelection: Selection<SVGTextElement, any, SVGElement, any>,\n  fontSize: number,\n  dy = 0.32,\n  fastMode = true,\n  fontWidthToHeightRatio?: number\n): { width: number; height: number } {\n  fontWidthToHeightRatio = fontWidthToHeightRatio || getFontWidthToHeightRatio()\n  const tspanSelection = svgTextSelection.selectAll('tspan')\n\n  const lines = tspanSelection.size() || 1\n  const height = svgTextSelection.text() ? 0.85 * fontSize * lines * (1 + dy) - dy : 0\n\n  let width = 0\n  if (tspanSelection.empty()) {\n    const textLength = svgTextSelection.text().length\n    width = fastMode ? fontSize * textLength * fontWidthToHeightRatio : svgTextSelection.node().getComputedTextLength()\n  } else {\n    for (const tspan of tspanSelection.nodes()) {\n      const tspanTextLength = (tspan as SVGTSpanElement).textContent.length\n      const w = fastMode ? fontSize * tspanTextLength * fontWidthToHeightRatio : (tspan as SVGTSpanElement).getComputedTextLength()\n      if (w > width) width = w\n    }\n  }\n\n  return { width, height }\n}\n\n/**\n * Breaks a text block into lines based on the specified width.\n *\n * @param {UnovisText} textBlock - The text block to break into lines.\n * @param {number | undefined} [width=undefined] - The maximum width of a line in pixels.\n * @param {(number | undefined)} [height=undefined] - The height limit for the wrapped text in pixels.\n * @param {boolean} [fastMode=true] - Whether to use a fast estimation method or a more accurate one.\n * @param {string | string[]} [separator] - The word separators.\n * @returns {string[]} - The text split into lines.\n */\nfunction breakTextIntoLines (\n  textBlock: UnovisText,\n  width: number | undefined = undefined,\n  fastMode = true,\n  separator: string | string[] = UNOVIS_TEXT_SEPARATOR_DEFAULT,\n  wordBreak = false\n): string[] {\n  const text = `${textBlock.text}`\n  if (!text) return []\n  const separators = Array.isArray(separator) ? separator : [separator]\n\n  const splitByNewLine = text.split('\\n')\n  return splitByNewLine.map((str) => {\n    const lines: string[] = []\n    if (!width) return [str]\n\n    const words = splitString(str, separators)\n    let line = ''\n    for (let i = 0; i < words.length; i += 1) {\n      const textLengthPx = fastMode\n        ? estimateStringPixelLength(line + words[i], textBlock.fontSize, textBlock.fontWidthToHeightRatio)\n        : getPreciseStringLengthPx(line + words[i], textBlock.fontFamily, textBlock.fontSize)\n\n      if (textLengthPx < width || i === 0) {\n        line += words[i]\n      } else {\n        lines.push(line.trim())\n        line = words[i]\n      }\n\n      // Word break functionality\n      const minCharactersOnLine = 2\n      if (wordBreak) {\n        while (line.trim().length > minCharactersOnLine) {\n          const subLineLengthPx = fastMode\n            ? estimateStringPixelLength(line, textBlock.fontSize, textBlock.fontWidthToHeightRatio)\n            : getPreciseStringLengthPx(line, textBlock.fontFamily, textBlock.fontSize)\n\n          if (subLineLengthPx > width) {\n            let breakIndex = (line.trim()).length - minCharactersOnLine // Place at least `minCharactersOnLine` characters onto the next line\n            while (breakIndex > 0) {\n              const subLine = `${line.substring(0, breakIndex)}${UNOVIS_TEXT_HYPHEN_CHARACTER_DEFAULT}` // Use hyphen when force breaking words\n              const subLinePx = fastMode\n                ? estimateStringPixelLength(subLine, textBlock.fontSize, textBlock.fontWidthToHeightRatio)\n                : getPreciseStringLengthPx(subLine, textBlock.fontFamily, textBlock.fontSize)\n\n              // If the subline is less than the width, or just one character left, break the line\n              if (subLinePx <= width || breakIndex === 1) {\n                lines.push(subLine.trim())\n                line = line.substring(breakIndex)\n                break\n              }\n              breakIndex--\n            }\n          } else {\n            break\n          }\n        }\n      }\n    }\n\n    // Adding the final line after the loop\n    if (line) lines.push(line.trim())\n\n    return lines\n  }).flat()\n}\n\n/**\n * Wraps a text or array of texts to fit within specified width and height, if provided.\n *\n * @export\n * @param {UnovisText | UnovisText[]} text - The text or array of texts to wrap.\n * @param {number | undefined} [width=undefined] - The maximum width of a line in pixels.\n * @param {boolean} [fastMode=true] - Whether to use a fast estimation method or a more accurate one.\n * @param {string | string[]} [separator] - The word separators.\n * @returns {UnovisWrappedText[]} - The wrapped texts.\n */\nexport function getWrappedText (\n  text: UnovisText | UnovisText[],\n  width: number | undefined = undefined,\n  height: number | undefined = undefined,\n  fastMode = true,\n  separator: string | string[] = UNOVIS_TEXT_SEPARATOR_DEFAULT,\n  wordBreak = false\n): UnovisWrappedText[] {\n  // Merge input text with default values and convert it to an array if it's not already\n  const textArrays = Array.isArray(text) ? text.map(t => merge(UNOVIS_TEXT_DEFAULT, t)) : [merge(UNOVIS_TEXT_DEFAULT, text)]\n\n  // Break input text into lines based on width and separator\n  const textWrapped: Array<string[]> = textArrays.map(block => breakTextIntoLines(block, width, fastMode, separator, wordBreak))\n\n  const firstBlock = textArrays[0]\n  let h = -firstBlock.fontSize * (firstBlock.lineHeight - 1)\n  const blocks: UnovisWrappedText[] = []\n\n  // Process each text block and its lines based on height limit\n  textArrays.forEach((text, i) => {\n    let lines = textWrapped[i]\n\n    const prevBlock = i > 0 ? blocks[i - 1] : undefined\n    const prevBlockMarginBottomPx = prevBlock ? prevBlock.marginBottom : 0\n    const marginTopPx = text.marginTop\n    const effectiveMarginPx = Math.max(prevBlockMarginBottomPx, marginTopPx)\n\n    h += effectiveMarginPx\n    const dh = text.fontSize * text.lineHeight\n    let maxWidth = 0\n    // Iterate over lines and handle text overflow based on the height limit if provided\n    for (let k = 0; k < lines.length; k += 1) {\n      let line = lines[k]\n      h += dh\n\n      const lineWithEllipsis = `${line} …`\n      const textLengthPx = fastMode\n        ? estimateStringPixelLength(lineWithEllipsis, text.fontSize, text.fontWidthToHeightRatio)\n        : getPreciseStringLengthPx(lineWithEllipsis, text.fontFamily, text.fontSize)\n\n      maxWidth = Math.max(textLengthPx, maxWidth)\n      if (height && (h + dh) > height && (k !== lines.length - 1)) {\n        // Remove hyphen character from the end of the line if it's there\n        const lastCharacter = line.charAt(line.length - 1)\n        if (lastCharacter === UNOVIS_TEXT_HYPHEN_CHARACTER_DEFAULT) {\n          line = line.substr(0, lines[k].length - 1)\n        }\n\n        if (textLengthPx < width) {\n          lines[k] = lineWithEllipsis\n        } else {\n          lines[k] = `${lines[k].substr(0, lines[k].length - 2)}…`\n        }\n\n        lines = lines.slice(0, k + 1)\n        break\n      }\n    }\n\n    // Create wrapped text block with its calculated properties\n    blocks.push({ ...text, _lines: lines, _estimatedHeight: h - (prevBlock?._estimatedHeight || 0), _maxWidth: Math.max(maxWidth, prevBlock?._maxWidth ?? 0) })\n  })\n\n  return blocks\n}\n\n\n/**\n * Renders a text or array of texts to SVG tspan strings.\n *\n * @param {UnovisWrappedText[]} blocks - The wrapped text blocks.\n * @param {number} [x=0] - The x-coordinate for the tspan elements.\n * @param {number} [y] - The y-coordinate for the tspan elements.\n * @returns {string[]} - The SVG tspan strings.\n */\nfunction renderTextToTspanStrings (blocks: UnovisWrappedText[], x = 0, y?: number): string[] {\n  return blocks.map((b, i) => {\n    const prevBlock = i > 0 ? blocks[i - 1] : undefined\n    const prevBlockMarginBottomEm = prevBlock ? prevBlock.marginBottom / prevBlock.fontSize : 0\n    const marginTopEm = b.marginTop / b.fontSize\n    const marginEm = Math.max(prevBlockMarginBottomEm, marginTopEm)\n    const attributes = {\n      fontSize: b.fontSize,\n      fontFamily: b.fontFamily,\n      fontWeight: b.fontWeight,\n      fill: b.color,\n      y: (i === 0) && y,\n    }\n\n    const attributesString = Object.entries(attributes)\n      .filter(([_, value]) => value)\n      .map(([key, value]) => `${kebabCase(key)}=\"${escapeStringKeepHash(value.toString())}\"`)\n      .join(' ')\n\n    return `<tspan xmlns=\"http://www.w3.org/2000/svg\" ${attributesString}>${b._lines.map((line, k) => {\n      let dy: number\n      if (i === 0 && k === 0) dy = 0.8 + marginEm\n      else if (k === 0) dy = marginEm + b.lineHeight\n      else dy = b.lineHeight\n\n      return `<tspan x=\"${x}\" dy=\"${dy}em\">${line.length ? line : ' '}</tspan>`\n    }).join('')}</tspan>`\n  })\n}\n\n/**\n * Estimates the height of wrapped text blocks.\n *\n * @export\n * @param {UnovisWrappedText[]} blocks - The wrapped text blocks.\n * @returns {number} - The estimated height of the wrapped text blocks.\n */\nexport function estimateWrappedTextHeight (blocks: UnovisWrappedText[]): number {\n  return sum(blocks, b => b._estimatedHeight)\n}\n\nexport const allowedSvgTextTags = ['text', 'tspan', 'textPath', 'altGlyph', 'altGlyphDef', 'altGlyphItem', 'glyphRef', 'textRef', 'textArea']\n\n/**\n * Renders a text or array of texts to an SVG text element.\n * Calling this function will replace the contents of the specified SVG text element.\n *\n * @export\n * @param {SVGTextElement} textElement - The SVG text element to render the text into.\n * @param {UnovisText | UnovisText[]} text - The text or array of texts to render.\n * @param {UnovisTextOptions} options - The text options.\n */\nexport function renderTextToSvgTextElement (\n  textElement: SVGTextElement,\n  text: UnovisText | UnovisText[],\n  options: UnovisTextOptions,\n  trimmed?: boolean\n): void {\n  const wrappedText = getWrappedText(text, options.width, undefined, options.fastMode, options.separator, options.wordBreak)\n  const textElementX = options.x ?? +textElement.getAttribute('x')\n  const textElementY = options.y ?? +textElement.getAttribute('y')\n  const x = textElementX ?? 0\n  let y = textElementY ?? 0\n  if (options.textAlign) {\n    textElement.setAttribute('text-anchor', getTextAnchorFromTextAlign(options.textAlign))\n  }\n\n  if (options.verticalAlign && options.verticalAlign !== VerticalAlign.Top) {\n    const height = estimateWrappedTextHeight(wrappedText)\n    const dy = options.verticalAlign === VerticalAlign.Middle ? -height / 2\n      : options.verticalAlign === VerticalAlign.Bottom ? -height : 0\n\n    y += dy\n  }\n  if (options.textRotationAngle) {\n    textElement.setAttribute('transform', `rotate(${(options.textRotationAngle === 0 || options.textRotationAngle) ? options.textRotationAngle : 0} ${x} ${y})`)\n  } else {\n    textElement.removeAttribute('transform')\n  }\n\n  if (!trimmed) {\n    const parser = new DOMParser()\n    textElement.textContent = ''\n    wrappedText.forEach(block => {\n      const svgCode = renderTextToTspanStrings([block], x, y).join('')\n      const svgCodeSanitized = striptags(svgCode, allowedSvgTextTags)\n      const parsedSvgCode = parser.parseFromString(svgCodeSanitized, 'image/svg+xml').firstChild\n      textElement.appendChild(parsedSvgCode)\n    })\n  }\n}\n\n/**\n * Renders a text or array of texts into a frame.\n * Calling this function will replace the contents of the specified SVG group.\n *\n * @export\n * @param {SVGGElement} group - The SVG group element to render the text into.\n * @param {UnovisText | UnovisText[]} text - The text or array of texts to render.\n * @param {UnovisTextFrameOptions} frameOptions - The text frame options.\n */\nexport function renderTextIntoFrame (\n  group: SVGGElement,\n  text: UnovisText | UnovisText[],\n  frameOptions: UnovisTextFrameOptions\n): void {\n  const wrappedText = getWrappedText(text, frameOptions.width, frameOptions.height, frameOptions.fastMode, frameOptions.separator, frameOptions.wordBreak)\n\n  const x = frameOptions.textAlign === TextAlign.Center ? frameOptions.width / 2\n    : frameOptions.textAlign === TextAlign.Right ? frameOptions.width : 0\n\n  let y = 0\n  const height = estimateWrappedTextHeight(wrappedText)\n\n  // If the frame has height, the text will be vertically aligned within the frame.\n  // If not, the text will be aligned against the `y` position of the frame.\n  const dh = frameOptions.height - height\n  y = frameOptions.verticalAlign === VerticalAlign.Middle ? dh / 2\n    : frameOptions.verticalAlign === VerticalAlign.Bottom ? dh : 0\n\n\n  const translate = (frameOptions.x || frameOptions.y)\n    ? `transform=\"translate(${frameOptions.x ?? 0},${frameOptions.y ?? 0})\"`\n    : ''\n\n  const svgCode =\n  `<text\n    xmlns=\"http://www.w3.org/2000/svg\"\n    text-anchor=\"${getTextAnchorFromTextAlign(frameOptions.textAlign)}\"\n    ${translate}\n  >\n    ${renderTextToTspanStrings(wrappedText, x, y).join('')}\n  </text>`\n\n  const parser = new DOMParser()\n  const svgCodeSanitized = striptags(svgCode, allowedSvgTextTags)\n  const parsedSvgCode = parser.parseFromString(svgCodeSanitized, 'image/svg+xml').firstChild\n\n  group.textContent = ''\n  group.appendChild(parsedSvgCode)\n}\n", "import { XYComponentConfigInterface, XYComponentDefaultConfig } from 'core/xy-component/config'\n\n// Types\nimport { AxisType } from 'components/axis/types'\nimport { Position } from 'types/position'\nimport { FitMode, TrimMode, TextAlign } from 'types/text'\n\n// We extend partial XY config interface because x and y properties are optional for Axis\nexport interface AxisConfigInterface<Datum> extends Partial<XYComponentConfigInterface<Datum>> {\n  /** Axis position: `Position.Top`, `Position.Bottom`, `Position.Right` or `Position.Left`. Default: `undefined` */\n  position?: Position | string;\n  /** Axis type: `AxisType.X` or `AxisType.Y` */\n  type?: AxisType | string;\n  /** Extend the axis domain line to be full width or full height. Default: `true` */\n  fullSize?: boolean;\n  /** Axis label. Default: `undefined` */\n  label?: string;\n  /** Font size of the axis label as CSS string. Default: `null` */\n  labelFontSize?: string | null;\n  /** Distance between the axis and the label in pixels. Default: `8` */\n  labelMargin?: number;\n  /** Font color of the axis label as CSS string. Default: `null` */\n  labelColor?: string | null;\n  /** Sets whether to draw the grid lines or not. Default: `true` */\n  gridLine?: boolean;\n  /** Sets whether to draw the tick lines or not. Default: `true` */\n  tickLine?: boolean;\n  /** Sets whether to draw the domain line or not. Default: `true` */\n  domainLine?: boolean;\n  /** Draw only the min and max axis ticks. Default: `false` */\n  minMaxTicksOnly?: boolean;\n  /** Draw only the min and max axis ticks, when the chart\n   * width is less than the specified value.\n   * Default: `250` */\n  minMaxTicksOnlyWhenWidthIsLess?: number;\n  /** Tick label formatter function. Default: `undefined` */\n  tickFormat?: ((tick: number, i: number, ticks: number[]) => string) | ((tick: Date, i: number, ticks: Date[]) => string);\n  /** Explicitly set tick values. Default: `undefined` */\n  tickValues?: number[];\n  /** Set the approximate number of axis ticks (will be passed to D3's axis constructor). Default: `undefined` */\n  numTicks?: number;\n  /** Tick text fit mode: `FitMode.Wrap` or `FitMode.Trim`. Default: `FitMode.Wrap`. */\n  tickTextFitMode?: FitMode | string;\n  /** Maximum width in pixels for the tick text to be wrapped or trimmed. Default: `undefined` */\n  tickTextWidth?: number;\n  /** Tick text wrapping separator. String or array of strings. Default: `undefined` */\n  tickTextSeparator?: string | string[];\n  /** Force word break for ticks when they don't fit. Default: `false` */\n  tickTextForceWordBreak?: boolean;\n  /** Tick text trim mode: `TrimMode.Start`, `TrimMode.Middle` or `TrimMode.End`. Default: `TrimMode.Middle` */\n  tickTextTrimType?: TrimMode | string;\n  /** Font size of the tick text as CSS string. Default: `null` */\n  tickTextFontSize?: string | null;\n  /** Text alignment for ticks: `TextAlign.Left`, `TextAlign.Center` or `TextAlign.Right`. Default: `undefined` */\n  tickTextAlign?: TextAlign | string;\n  /** Font color of the tick text as CSS string. Default: `null` */\n  tickTextColor?: string | null;\n  /** Text rotation angle for ticks. Default: `undefined` */\n  tickTextAngle?: number;\n  /** Hide tick labels that overlap with each other.\n   * To define overlapping, a simple bounding box collision detection algorithm is used.\n   * Which means the result won't be accurate when `tickTextAngle` is specified.\n   * Default: `undefined` */\n  tickTextHideOverlapping?: boolean;\n  /** The spacing in pixels between the tick and it's label. Default: `8` */\n  tickPadding?: number;\n}\n\nexport const AxisDefaultConfig: AxisConfigInterface<unknown> = {\n  ...XYComponentDefaultConfig,\n  position: undefined,\n  type: undefined,\n  label: undefined,\n  labelFontSize: null,\n  gridLine: true,\n  tickLine: true,\n  domainLine: true,\n  numTicks: undefined,\n  minMaxTicksOnly: false,\n  minMaxTicksOnlyWhenWidthIsLess: 250,\n  tickTextWidth: undefined,\n  tickTextSeparator: undefined,\n  tickTextForceWordBreak: false,\n  tickTextTrimType: TrimMode.Middle,\n  tickTextFitMode: FitMode.Wrap,\n  tickTextFontSize: null,\n  tickTextAlign: undefined,\n  tickTextColor: null,\n  tickTextAngle: undefined,\n  labelMargin: 8,\n  labelColor: null,\n  tickFormat: undefined,\n  tickValues: undefined,\n  fullSize: true,\n  tickPadding: 8,\n  tickTextHideOverlapping: undefined,\n}\n", "import { css, injectGlobal } from '@emotion/css'\n\nexport const root = css`\n  label: axis-component;\n`\n\nexport const globalStyles = injectGlobal`\n  :root {\n    // Undefined by default to allow proper fallback to var(--vis-font-family)\n    /* --vis-axis-font-family: */\n    --vis-axis-tick-color: #e8e9ef;\n    /* --vis-axis-domain-color: // Undefined by default to allow fallback to var(--vis-axis-tick-color) */\n    --vis-axis-grid-color: #e8e9ef;\n    --vis-axis-label-color: #6c778c;\n    --vis-axis-tick-label-color: #6c778c;\n    --vis-axis-tick-label-font-size: 12px;\n    --vis-axis-tick-label-cursor: default;\n    --vis-axis-tick-label-text-decoration: none;\n    --vis-axis-label-font-size: 14px;\n    --vis-axis-tick-line-width: 1px;\n    --vis-axis-tick-label-hide-transition: opacity 400ms ease-in-out;\n    --vis-axis-grid-line-width: 1px;\n    /* --vis-axis-domain-line-width: // Undefined by default to allow fallback to var(--vis-axis-grid-line-width) */\n\n    --vis-dark-axis-tick-color: #6c778c;\n    /* --vis-dark-axis-domain-color: // Undefined by default to allow fallback to var(--vis-dark-axis-tick-color) */\n    --vis-dark-axis-tick-label-color: #e8e9ef;\n    --vis-dark-axis-grid-color: #6c778c;\n    --vis-dark-axis-label-color: #fefefe;\n  }\n\n  body.theme-dark ${`.${root}`} {\n    --vis-axis-tick-color: var(--vis-dark-axis-tick-color);\n    --vis-axis-domain-color: var(--vis-dark-axis-domain-color);\n    --vis-axis-tick-label-color: var(--vis-dark-axis-tick-label-color);\n    --vis-axis-grid-color: var(--vis-dark-axis-grid-color);\n    --vis-axis-label-color: var(--vis-dark-axis-label-color);\n  }\n`\n\nexport const hideTickLine = css`\n  label: hide-tick-line;\n`\n\nexport const hideDomain = css`\n  label: hide-domain;\n`\n\nexport const axis = css`\n  label: axis;\n\n  user-select: none;\n\n  .domain {\n    stroke: var(--vis-axis-domain-color, var(--vis-axis-tick-color));\n    stroke-width: var(--vis-axis-domain-line-width, var(--vis-axis-grid-line-width));\n  }\n\n  &${`.${hideTickLine}`} {\n    .tick > line {\n      opacity: 0;\n    }\n  }\n\n  &${`.${hideDomain}`} {\n    .domain {\n      opacity: 0;\n    }\n  }\n`\n\nexport const grid = css`\n  label: grid;\n\n  .domain {\n    opacity: 0;\n  }\n\n  line {\n    stroke: var(--vis-axis-grid-color);\n    stroke-width: var(--vis-axis-grid-line-width);\n  }\n`\n\nexport const tick = css`\n  label: tick;\n\n  stroke: none;\n  font-size: var(--vis-axis-tick-label-font-size);\n\n  line {\n    stroke: var(--vis-axis-tick-color);\n    stroke-width: var(--vis-axis-tick-line-width);\n  }\n\n  text {\n    fill: var(--vis-axis-tick-label-color);\n    cursor: var(--vis-axis-tick-label-cursor);\n    font-family: var(--vis-axis-font-family, var(--vis-font-family));\n    text-decoration: var(--vis-axis-tick-label-text-decoration);\n    stroke: none;\n  }\n`\n\nexport const label = css`\n  label: label;\n  fill: var(--vis-axis-label-color);\n  font-size: var(--vis-axis-label-font-size);\n  font-family: var(--vis-axis-font-family, var(--vis-font-family));\n  text-anchor: middle;\n`\n\nexport const tickLabel = css`\n  label: tick-label;\n`\n\nexport const tickLabelHideable = css`\n  label: tick-label-hideable;\n  opacity: 0;\n  transition: var(--vis-axis-tick-label-hide-transition);\n`\n", "import { select, Selection } from 'd3-selection'\nimport { interrupt } from 'd3-transition'\nimport { Axis as D3Axis, axisBottom, axisLeft, axisRight, axisTop } from 'd3-axis'\n\n// Core\nimport { XYComponentCore } from 'core/xy-component'\n\n// Types\nimport { Position } from 'types/position'\nimport { ContinuousScale } from 'types/scale'\nimport { Spacing } from 'types/spacing'\nimport { FitMode, TextAlign, TrimMode, UnovisText, UnovisTextOptions, VerticalAlign } from 'types/text'\n\n// Utils\nimport { smartTransition } from 'utils/d3'\nimport { renderTextToSvgTextElement, trimSVGText } from 'utils/text'\nimport { isEqual } from 'utils/data'\nimport { rectIntersect } from 'utils/misc'\n\n// Local Types\nimport { AxisType } from './types'\n\n// Config\nimport { AxisDefaultConfig, AxisConfigInterface } from './config'\n\n// Styles\nimport * as s from './style'\n\nexport class Axis<Datum> extends XYComponentCore<Datum, AxisConfigInterface<Datum>> {\n  static selectors = s\n  protected _defaultConfig: AxisConfigInterface<Datum> = AxisDefaultConfig\n  public config: AxisConfigInterface<Datum> = this._defaultConfig\n  private axisGroup: Selection<SVGGElement, unknown, SVGGElement, unknown>\n  private gridGroup: Selection<SVGGElement, unknown, SVGGElement, unknown>\n\n  private _axisRawBBox: DOMRect\n  private _axisSizeBBox: SVGRect\n  private _requiredMargin: Spacing\n  private _defaultNumTicks = 3\n  private _collideTickLabelsAnimFrameId: ReturnType<typeof requestAnimationFrame>\n\n  protected events = {}\n\n  constructor (config?: AxisConfigInterface<Datum>) {\n    super()\n    if (config) this.setConfig(config)\n    this.axisGroup = this.g.append('g')\n    this.gridGroup = this.g.append('g')\n      .attr('class', s.grid)\n  }\n\n  /** Renders axis to an invisible grouped to calculate automatic chart margins */\n  public preRender (): void {\n    const { config } = this\n    const axisRenderHelperGroup = this.g.append('g').attr('opacity', 0)\n\n    this._renderAxis(axisRenderHelperGroup, 0)\n\n    // Store axis raw BBox (without the label) for further label positioning (see _renderAxisLabel)\n    this._axisRawBBox = axisRenderHelperGroup.node().getBBox()\n\n    // Align tick text\n    if (config.tickTextAlign) this._alignTickLabels()\n\n    // Render label and store total axis size and required margins\n    this._renderAxisLabel(axisRenderHelperGroup)\n    this._axisSizeBBox = this._getAxisSize(axisRenderHelperGroup)\n    this._requiredMargin = this._getRequiredMargin(this._axisSizeBBox)\n\n    axisRenderHelperGroup.remove()\n  }\n\n  public getPosition (): Position {\n    const { config: { type, position } } = this\n    return (position ?? ((type === AxisType.X) ? Position.Bottom : Position.Left)) as Position\n  }\n\n  private _getAxisSize (selection: Selection<SVGGElement, unknown, SVGGElement, undefined>): SVGRect {\n    const bBox = selection.node().getBBox()\n    return bBox\n  }\n\n  private _getRequiredMargin (axisSize = this._axisSizeBBox): Spacing {\n    const { config: { type, position } } = this\n\n    switch (type) {\n      case AxisType.X: {\n        const tolerancePx = 1\n        const xEnd = this._axisSizeBBox.x + this._axisSizeBBox.width\n\n        const left = this._axisSizeBBox.x < 0 ? Math.abs(this._axisSizeBBox.x) : 0\n        const right = (xEnd - this._width) > tolerancePx ? xEnd - this._width : 0\n\n        switch (position) {\n          case Position.Top: return { top: axisSize.height, left, right }\n          case Position.Bottom: default: return { bottom: axisSize.height, left, right }\n        }\n      }\n      case AxisType.Y: {\n        const bleedY = axisSize.height > this._height ? (axisSize.height - this._height) / 2 : 0\n        const top = bleedY\n        const bottom = bleedY\n\n        switch (position) {\n          case Position.Right: return { right: axisSize.width, top, bottom }\n          case Position.Left: default: return { left: axisSize.width, top, bottom }\n        }\n      }\n    }\n  }\n\n  getRequiredMargin (): Spacing {\n    return this._requiredMargin\n  }\n\n  /** Calculates axis transform:translate offset based on passed container margins */\n  getOffset (containerMargin: Spacing): {left: number; top: number} {\n    const { config: { type, position } } = this\n\n    switch (type) {\n      case AxisType.X:\n        switch (position) {\n          case Position.Top: return { top: containerMargin.top, left: containerMargin.left }\n          case Position.Bottom: default: return { top: containerMargin.top + this._height, left: containerMargin.left }\n        }\n      case AxisType.Y:\n        switch (position) {\n          case Position.Right: return { top: containerMargin.top, left: containerMargin.left + this._width }\n          case Position.Left: default: return { top: containerMargin.top, left: containerMargin.left }\n        }\n    }\n  }\n\n  public _render (duration = this.config.duration, selection = this.axisGroup): void {\n    const { config } = this\n\n    this._renderAxis(selection, duration)\n    this._renderAxisLabel(selection)\n\n    if (config.gridLine) {\n      const gridGen = this._buildGrid().tickFormat(() => '')\n      gridGen.tickValues(this._getConfiguredTickValues())\n      // Interrupting all active transitions first to prevent them from being stuck.\n      // Somehow we see it happening in Angular apps.\n      this.gridGroup.selectAll('*').interrupt()\n      smartTransition(this.gridGroup, duration).call(gridGen).style('opacity', 1)\n    } else {\n      smartTransition(this.gridGroup, duration).style('opacity', 0)\n    }\n\n    if (config.tickTextAlign) this._alignTickLabels()\n\n    this._resolveTickLabelOverlap(selection)\n  }\n\n  private _buildAxis (): D3Axis<any> {\n    const { config: { type, position, tickPadding } } = this\n\n    const ticks = this._getNumTicks()\n    switch (type) {\n      case AxisType.X:\n        switch (position) {\n          case Position.Top: return axisTop(this.xScale).ticks(ticks).tickPadding(tickPadding)\n          case Position.Bottom: default: return axisBottom(this.xScale).ticks(ticks).tickPadding(tickPadding)\n        }\n      case AxisType.Y:\n        switch (position) {\n          case Position.Right: return axisRight(this.yScale).ticks(ticks).tickPadding(tickPadding)\n          case Position.Left: default: return axisLeft(this.yScale).ticks(ticks).tickPadding(tickPadding)\n        }\n    }\n  }\n\n  private _buildGrid (): D3Axis<any> {\n    const { config: { type, position } } = this\n\n    const ticks = this._getNumTicks()\n    switch (type) {\n      case AxisType.X:\n        switch (position) {\n          case Position.Top: return axisTop(this.xScale).ticks(ticks * 2).tickSize(-this._height).tickSizeOuter(0)\n          case Position.Bottom: default: return axisBottom(this.xScale).ticks(ticks * 2).tickSize(-this._height).tickSizeOuter(0)\n        }\n      case AxisType.Y:\n        switch (position) {\n          case Position.Right: return axisRight(this.yScale).ticks(ticks * 2).tickSize(-this._width).tickSizeOuter(0)\n          case Position.Left: default: return axisLeft(this.yScale).ticks(ticks * 2).tickSize(-this._width).tickSizeOuter(0)\n        }\n    }\n  }\n\n  private _renderAxis (selection = this.axisGroup, duration = this.config.duration): void {\n    const { config } = this\n\n    const axisGen = this._buildAxis()\n    const tickValues: (number[] | Date[]) = this._getConfiguredTickValues() || axisGen.scale<ContinuousScale>().ticks(this._getNumTicks())\n    axisGen.tickValues(tickValues)\n\n    // Interrupting all active transitions first to prevent them from being stuck.\n    // Somehow we see it happening in Angular apps.\n    selection.selectAll('*').interrupt()\n    smartTransition(selection, duration).call(axisGen)\n\n    const ticks = selection.selectAll<SVGGElement, number | Date>('g.tick')\n\n    ticks\n      .classed(s.tick, true)\n      .style('font-size', config.tickTextFontSize)\n\n    // Selecting the <text> elements of the ticks to apply formatting. By default, this selection\n    // will include exiting elements, so we're filtering them out.\n    const tickText = selection.selectAll<SVGTextElement, number | Date>('g.tick > text')\n      .filter(tickValue => tickValues.some((t: number | Date) => isEqual(tickValue, t))) // We use isEqual to compare Dates\n      .classed(s.tickLabel, true)\n      .classed(s.tickLabelHideable, Boolean(config.tickTextHideOverlapping))\n      .style('fill', config.tickTextColor) as Selection<SVGTextElement, number, SVGGElement, unknown> | Selection<SVGTextElement, Date, SVGGElement, unknown>\n\n\n    // We interrupt the transition on tick's <text> to make it 'wrappable'\n    tickText.nodes().forEach(node => interrupt(node))\n\n    tickText.each((value: number | Date, i: number, elements: ArrayLike<SVGTextElement>) => {\n      let text = config.tickFormat?.(value as (number & Date), i, tickValues as (number & Date)[]) ?? `${value}`\n      const textElement = elements[i] as SVGTextElement\n      const textMaxWidth = config.tickTextWidth || (config.type === AxisType.X ? this._containerWidth / (ticks.size() + 1) : this._containerWidth / 5)\n      const styleDeclaration = getComputedStyle(textElement)\n      const fontSize = Number.parseFloat(styleDeclaration.fontSize)\n      const fontFamily = styleDeclaration.fontFamily\n      const textOptions: UnovisTextOptions = {\n        verticalAlign: config.type === AxisType.X ? VerticalAlign.Top : VerticalAlign.Middle,\n        width: textMaxWidth,\n        textRotationAngle: config.tickTextAngle,\n        separator: config.tickTextSeparator,\n        wordBreak: config.tickTextForceWordBreak,\n      }\n\n      if (config.tickTextFitMode === FitMode.Trim) {\n        const textElementSelection = select<SVGTextElement, string>(textElement).text(text)\n        trimSVGText(textElementSelection, textMaxWidth, config.tickTextTrimType as TrimMode, true, fontSize, 0.58)\n        text = select<SVGTextElement, string>(textElement).text()\n      }\n\n      const textBlock: UnovisText = { text, fontFamily, fontSize }\n      renderTextToSvgTextElement(textElement, textBlock, textOptions)\n    })\n\n    selection\n      .classed(s.axis, true)\n      .classed(s.hideTickLine, !config.tickLine)\n      .classed(s.hideDomain, !config.domainLine)\n\n    if (config.fullSize) {\n      const path = this._getFullDomainPath(0)\n      smartTransition(selection.select('.domain'), duration).attr('d', path)\n    }\n  }\n\n  private _resolveTickLabelOverlap (selection = this.axisGroup): void {\n    const { config } = this\n    const tickTextSelection = selection.selectAll<SVGTextElement, number | Date>('g.tick > text')\n\n    if (!config.tickTextHideOverlapping) {\n      tickTextSelection.style('opacity', null)\n      return\n    }\n\n    cancelAnimationFrame(this._collideTickLabelsAnimFrameId)\n    // Colliding labels in the next frame to prevent forced reflow\n    this._collideTickLabelsAnimFrameId = requestAnimationFrame(() => {\n      this._collideTickLabels(tickTextSelection)\n    })\n  }\n\n  private _collideTickLabels (selection: Selection<SVGTextElement, number | Date, SVGGElement, unknown>): void {\n    type SVGOverlappingTextElement = SVGTextElement & {\n      _visible: boolean;\n    }\n\n    // Reset visibility of all labels\n    selection.each((d, i, elements) => {\n      const node = elements[i] as SVGOverlappingTextElement\n      node._visible = true\n    })\n\n    // We do three iterations because not all overlapping labels can be resolved in the first iteration\n    const numIterations = 3\n    for (let i = 0; i < numIterations; i += 1) {\n    // Run collision detection and set labels visibility\n      selection.each((d, i, elements) => {\n        const label1 = elements[i] as SVGOverlappingTextElement\n        const isLabel1Visible = label1._visible\n        if (!isLabel1Visible) return\n\n        // Calculate bounding rect of point's label\n        const label1BoundingRect = label1.getBoundingClientRect()\n\n        for (let j = i + 1; j < elements.length; j += 1) {\n          if (i === j) continue\n          const label2 = elements[j] as SVGOverlappingTextElement\n          const isLabel2Visible = label2._visible\n          if (isLabel2Visible) {\n            const label2BoundingRect = label2.getBoundingClientRect()\n            const intersect = rectIntersect(label1BoundingRect, label2BoundingRect, -5)\n            if (intersect) {\n              label2._visible = false\n              break\n            }\n          }\n        }\n      })\n    }\n\n    // Hide the overlapping labels\n    selection.each((d, i, elements) => {\n      const label = elements[i] as SVGOverlappingTextElement\n      select(label).style('opacity', label._visible ? 1 : 0)\n    })\n  }\n\n  private _getNumTicks (): number {\n    const { config: { type, numTicks } } = this\n\n    if (numTicks) return numTicks\n\n    if (type === AxisType.X) {\n      const xRange = this.xScale.range() as [number, number]\n      const width = xRange[1] - xRange[0]\n      return Math.floor(width / 175)\n    }\n\n    if (type === AxisType.Y) {\n      const yRange = this.yScale.range() as [number, number]\n      const height = Math.abs(yRange[0] - yRange[1])\n      return Math.pow(height, 0.85) / 25\n    }\n\n    return this._defaultNumTicks\n  }\n\n  private _getConfiguredTickValues (): number[] | null {\n    const { config } = this\n    const scale = config.type === AxisType.X ? this.xScale : this.yScale\n    const scaleDomain = scale?.domain() as [number, number]\n\n    if (config.tickValues) {\n      return config.tickValues.filter(v => (v >= scaleDomain[0]) && (v <= scaleDomain[1]))\n    }\n\n    if (config.minMaxTicksOnly || (config.type === AxisType.X && this._width < config.minMaxTicksOnlyWhenWidthIsLess)) {\n      return scaleDomain as number[]\n    }\n\n    return null\n  }\n\n  private _getFullDomainPath (tickSize = 0): string {\n    const { config: { type } } = this\n    switch (type) {\n      case AxisType.X: return `M0.5, ${tickSize} V0.5 H${this._width + 0.5} V${tickSize}`\n      case AxisType.Y: return `M${-tickSize}, ${this._height + 0.5} H0.5 V0.5 H${-tickSize}`\n    }\n  }\n\n  private _renderAxisLabel (selection = this.axisGroup): void {\n    const { type, label, labelMargin, labelFontSize } = this.config\n\n    // Remove the old label first to calculate the axis size properly\n    selection.selectAll(`.${s.label}`).remove()\n\n    // Calculate label position and rotation\n    const axisPosition = this.getPosition()\n    // We always use this.axisRenderHelperGroup to calculate the size of the axis because\n    //    this.axisGroup will give us incorrect values due to animation\n    const { width: axisWidth, height: axisHeight } = this._axisRawBBox ?? selection.node().getBBox()\n\n    const offsetX = type === AxisType.X ? this._width / 2 : (-1) ** (+(axisPosition === Position.Left)) * axisWidth\n    const offsetY = type === AxisType.X ? (-1) ** (+(axisPosition === Position.Top)) * axisHeight : this._height / 2\n\n    const marginX = type === AxisType.X ? 0 : (-1) ** (+(axisPosition === Position.Left)) * labelMargin\n    const marginY = type === AxisType.X ? (-1) ** (+(axisPosition === Position.Top)) * labelMargin : 0\n\n    const rotation = type === AxisType.Y ? -90 : 0\n    // Append new label\n    selection\n      .append('text')\n      .attr('class', s.label)\n      .text(label)\n      .attr('dy', `${this._getLabelDY()}em`)\n      .attr('transform', `translate(${offsetX + marginX},${offsetY + marginY}) rotate(${rotation})`)\n      .style('font-size', labelFontSize)\n      .style('fill', this.config.labelColor)\n  }\n\n  private _getLabelDY (): number {\n    const { type, position } = this.config\n    switch (type) {\n      case AxisType.X:\n        switch (position) {\n          case Position.Top: return 0\n          case Position.Bottom: default: return 0.75\n        }\n      case AxisType.Y:\n        switch (position) {\n          case Position.Right: return 0.75\n          case Position.Left: default: return -0.25\n        }\n    }\n  }\n\n  private _alignTickLabels (): void {\n    const { config: { type, tickTextAlign, tickTextAngle, position } } = this\n    const tickText = this.g.selectAll('g.tick > text')\n\n    const textAnchor = this._getTickTextAnchor(tickTextAlign as TextAlign)\n    const translateX = type === AxisType.X\n      ? 0\n      : this._getYTickTextTranslate(tickTextAlign as TextAlign, position as Position)\n\n    const translateValue = tickTextAngle ? `translate(${translateX},0) rotate(${tickTextAngle})` : `translate(${translateX},0)`\n    tickText\n      .attr('transform', translateValue)\n      .attr('text-anchor', textAnchor)\n  }\n\n  private _getTickTextAnchor (textAlign: TextAlign): string {\n    switch (textAlign) {\n      case TextAlign.Left: return 'start'\n      case TextAlign.Right: return 'end'\n      case TextAlign.Center: return 'middle'\n      default: return null\n    }\n  }\n\n  private _getYTickTextTranslate (textAlign: TextAlign, axisPosition: Position = Position.Left): number {\n    const defaultTickTextSpacingPx = 9 // Default in D3\n    const width = this._axisRawBBox.width - defaultTickTextSpacingPx\n\n    switch (textAlign) {\n      case TextAlign.Left: return axisPosition === Position.Left ? width * -1 : 0\n      case TextAlign.Right: return axisPosition === Position.Left ? 0 : width\n      case TextAlign.Center: return axisPosition === Position.Left ? width * (-0.5) : width * 0.5\n      default: return 0\n    }\n  }\n}\n", "import { symbolCircle, symbolCross, symbolDiamond, symbolSquare, symbolStar, symbolTriangle, symbolWye } from 'd3-shape'\n\nexport enum SymbolType {\n  Circle = 'circle',\n  Cross = 'cross',\n  Diamond = 'diamond',\n  Square = 'square',\n  Star = 'star',\n  Triangle = 'triangle',\n  Wye = 'wye',\n}\n\nexport const Symbol = {\n  [SymbolType.Circle]: symbolCircle,\n  [SymbolType.Cross]: symbolCross,\n  [SymbolType.Diamond]: symbolDiamond,\n  [SymbolType.Square]: symbolSquare,\n  [SymbolType.Star]: symbolStar,\n  [SymbolType.Triangle]: symbolTriangle,\n  [SymbolType.Wye]: symbolWye,\n}\n", "// Core\nimport { XYComponentConfigInterface, XYComponentDefaultConfig } from 'core/xy-component/config'\n\n// Types\nimport { Scale, ContinuousScale } from 'types/scale'\nimport { SymbolType } from 'types/symbol'\nimport { ColorAccessor, GenericAccessor, NumericAccessor, StringAccessor } from 'types/accessor'\nimport { Position } from 'types/position'\n\nexport interface ScatterConfigInterface<Datum> extends XYComponentConfigInterface<Datum> {\n  /** Point color accessor function. Default: `d => d.color` */\n  color?: ColorAccessor<Datum>;\n  /**\n   * Size of the scatter plot marker (e.g. diameter if `SymbolType.Circle` is used for `shape`) in pixels.\n   * Can be a constant value or an accessor function. But if `sizeRange` is set, then the values will be treated\n   * as an input to `sizeScale`, and the resulting size will be different.\n   * Default: `10`\n  */\n  size?: NumericAccessor<Datum>;\n  /** Size scale to be used if the `sizeRange` was set. Default: `Scale.scaleSqrt()` */\n  sizeScale?: ContinuousScale;\n  /** Size range in the format of `[number, number]` to rescale the input values. Default: `undefined` */\n  sizeRange?: [number, number];\n  /** Shape of the scatter point. Accessor function or constant value: `SymbolType.Circle`, `SymbolType.Cross`, `SymbolType.Diamond`, `SymbolType.Square`,\n   * `SymbolType.Star`, `SymbolType.Triangle` or `SymbolType.Wye`.\n   * Default: `SymbolType.Circle` */\n  shape?: ((d: Datum, i?: number, ...any: unknown[]) => (SymbolType | string)) | SymbolType | string;\n  /** Label accessor function or string. Default: `undefined` */\n  label?: StringAccessor<Datum>;\n  /** Label color. Default: `undefined` */\n  labelColor?: ColorAccessor<Datum>;\n  /** Hide overlapping labels. Default: `true` */\n  labelHideOverlapping?: boolean;\n  /** Optional point cursor. Default: `null` */\n  cursor?: StringAccessor<Datum>;\n  /** Point color brightness ratio for switching between dark and light text label color. Default: `0.65` */\n  labelTextBrightnessRatio?: number;\n  /** Label position. Default: `Position.Bottom` */\n  labelPosition?: GenericAccessor<Position | string, Datum>;\n  /** Point stroke color. Default: `undefined` */\n  strokeColor?: ColorAccessor<Datum>;\n  /** Point stroke width. Default: `undefined` */\n  strokeWidth?: NumericAccessor<Datum>;\n}\n\nexport const ScatterDefaultConfig: ScatterConfigInterface<unknown> = {\n  ...XYComponentDefaultConfig,\n  color: (d: unknown): string => (d as { color: string }).color,\n  size: 10,\n  sizeScale: Scale.scaleSqrt(),\n  sizeRange: undefined,\n  shape: SymbolType.Circle,\n  label: undefined,\n  labelColor: undefined,\n  labelPosition: Position.Bottom,\n  labelHideOverlapping: true,\n  cursor: null,\n  labelTextBrightnessRatio: 0.65,\n  strokeColor: undefined,\n  strokeWidth: undefined,\n}\n\n", "import { select, Selection } from 'd3-selection'\nimport { Position } from 'types/position'\n\n// Utils\nimport { rectIntersect } from 'utils/misc'\nimport { estimateStringPixelLength } from 'utils/text'\nimport { getValue } from 'utils/data'\n\n// Types\nimport { ContinuousScale } from 'types/scale'\nimport { Rect } from 'types/misc'\n\n// Local Types\nimport { ScatterPoint, ScatterPointGroupNode } from '../types'\n\n// Config\nimport { ScatterConfigInterface } from '../config'\n\nexport function isLabelPositionCenter (labelPosition: Position | `${Position}`): boolean {\n  return (labelPosition !== Position.Top) && (labelPosition !== Position.Bottom) &&\n  (labelPosition !== Position.Left) && (labelPosition !== Position.Right)\n}\n\nexport function getCentralLabelFontSize (pointDiameter: number, textLength: number): number {\n  return textLength ? 0.7 * pointDiameter / Math.pow(textLength, 0.5) : 0\n}\n\nexport function getLabelShift (\n  labelPosition: `${Position}`,\n  pointDiameter: number,\n  labelPadding = 5\n): [number, number] {\n  switch (labelPosition) {\n    case Position.Top:\n      return [0, -pointDiameter / 2 - labelPadding]\n    case Position.Bottom:\n      return [0, pointDiameter / 2 + labelPadding]\n    case Position.Left:\n      return [-pointDiameter / 2 - labelPadding, 0]\n    case Position.Right:\n      return [pointDiameter / 2 + labelPadding, 0]\n    default:\n      return [0, 0]\n  }\n}\n\nexport function getEstimatedLabelBBox<Datum> (\n  d: ScatterPoint<Datum>,\n  labelPosition: Position | `${Position}`,\n  xScale: ContinuousScale,\n  yScale: ContinuousScale,\n  fontSizePx: number\n): Rect {\n  const x = xScale(d._point.xValue)\n  const y = yScale(d._point.yValue)\n  const pointDiameter = d._point.sizePx\n\n  const pointLabelText = d._point.label ?? ''\n  const textLength = pointLabelText.length\n  const centralLabelFontSize = getCentralLabelFontSize(pointDiameter, textLength)\n\n  const width = estimateStringPixelLength(pointLabelText, isLabelPositionCenter(labelPosition) ? centralLabelFontSize : fontSizePx, 0.6)\n  const height = fontSizePx\n\n  const labelShift = getLabelShift(labelPosition, pointDiameter)\n  const dx = labelPosition === Position.Left ? -width\n    : labelPosition === Position.Right ? 0 : -width / 2\n  const dy = labelPosition === Position.Top ? -height\n    : labelPosition === Position.Bottom ? 0 : -height / 2\n\n  const bbox: Rect = {\n    x: x + labelShift[0] + dx,\n    y: y + labelShift[1] + dy,\n    width: width,\n    height: height,\n  }\n\n  return bbox\n}\n\nexport function collideLabels<Datum> (\n  selection: Selection<SVGGElement, ScatterPoint<Datum>, SVGGElement, ScatterPoint<Datum>[]>,\n  config: ScatterConfigInterface<Datum>,\n  xScale: ContinuousScale,\n  yScale: ContinuousScale\n): void {\n  // Reset visibility of all labels\n  selection.each((datum1: ScatterPoint<Datum>, i, elements) => {\n    const node = elements[i] as ScatterPointGroupNode\n    node._labelVisible = true\n  })\n\n  // Run collision detection and set labels visibility\n  selection.each((datum1: ScatterPoint<Datum>, i, elements) => {\n    const group1Node = elements[i] as ScatterPointGroupNode\n    const label1Position = getValue(datum1, config.labelPosition, datum1._point.pointIndex)\n    if (!group1Node._labelVisible || isLabelPositionCenter(label1Position as Position)) return\n\n    const label1 = select<SVGGElement, ScatterPoint<Datum>>(group1Node).select<SVGTextElement>('text')\n    const label1FontSize = Number.parseFloat(window.getComputedStyle(label1.node())?.fontSize)\n\n    // Calculate bounding rect of point's label\n    const label1BoundingRect = getEstimatedLabelBBox(datum1, label1Position as Position, xScale, yScale, label1FontSize)\n\n    for (let j = 0; j < elements.length; j += 1) {\n      if (i === j) continue\n      const group2Node = elements[j] as ScatterPointGroupNode\n      const group2 = select<SVGGElement, ScatterPoint<Datum>>(group2Node)\n      const label2 = group2.select<SVGTextElement>('text')\n      const datum2 = group2.datum()\n\n      // Calculate bounding rect of the second point's circle\n      const p2Pos = [xScale(datum2._point.xValue), yScale(datum2._point.yValue)]\n      const p2Radius = datum2._point.sizePx / 2\n      const point2BoundingRect = {\n        x: p2Pos[0] - p2Radius,\n        y: p2Pos[1] - p2Radius,\n        width: 2 * p2Radius,\n        height: 2 * p2Radius,\n      }\n\n      let intersect = rectIntersect(label1BoundingRect, point2BoundingRect, 2)\n\n      // If there's no intersection, check for collision with the second point's label\n      const label2Visible = group2Node._labelVisible\n      if (!intersect && label2Visible) {\n        const label2FontSize = Number.parseFloat(window.getComputedStyle(label2.node())?.fontSize)\n        const label2Position = getValue(datum2, config.labelPosition, datum2._point.pointIndex)\n        const label2BoundingRect = getEstimatedLabelBBox(datum2, label2Position as Position, xScale, yScale, label2FontSize)\n\n        intersect = rectIntersect(label1BoundingRect, label2BoundingRect, 0.25)\n      }\n\n      if (intersect) {\n        if (group1Node._forceShowLabel) group2Node._labelVisible = false\n        else {\n          group1Node._labelVisible = false\n          break\n        }\n      }\n    }\n  })\n\n  // Hide the overlapping labels\n  selection.each((datum1: ScatterPoint<Datum>, i, elements) => {\n    const node = elements[i] as ScatterPointGroupNode\n    const label = select<SVGGElement, ScatterPoint<Datum>>(node).select<SVGTextElement>('text')\n    label.attr('opacity', node._labelVisible ? 1 : 0)\n  })\n}\n", "import { select, Selection } from 'd3-selection'\nimport { symbol } from 'd3-shape'\nimport { color } from 'd3-color'\nimport { Position } from 'types/position'\nimport { Symbol, SymbolType } from 'types/symbol'\n\n// Utils\nimport { smartTransition } from 'utils/d3'\nimport { getCSSVariableValue, isStringCSSVariable } from 'utils/misc'\nimport { hexToBrightness } from 'utils/color'\n\n// Types\nimport { ContinuousScale } from 'types/scale'\n\n// Config\nimport { ScatterConfigInterface } from '../config'\n\n// Local Types\nimport { ScatterPoint } from '../types'\n\n// Local Utils\nimport { getCentralLabelFontSize, getLabelShift } from './utils'\n\nexport function createPoints<Datum> (\n  selection: Selection<SVGGElement, ScatterPoint<Datum>, SVGGElement, ScatterPoint<Datum>[]>,\n  xScale: ContinuousScale,\n  yScale: ContinuousScale\n): void {\n  selection.attr('transform', d => `translate(${d._point.xValue},${d._point.yValue})`)\n  selection.append('path').style('fill', d => d._point.color)\n  selection.append('text')\n    .style('pointer-events', 'none')\n\n  selection.attr('transform', d => `translate(${xScale(d._point.xValue)},${yScale(d._point.yValue)}) scale(0)`)\n}\n\nexport function updatePoints<Datum> (\n  selection: Selection<SVGGElement, ScatterPoint<Datum>, SVGGElement, ScatterPoint<Datum>[]>,\n  config: ScatterConfigInterface<Datum>,\n  xScale: ContinuousScale,\n  yScale: ContinuousScale,\n  duration: number\n): void {\n  const symbolGenerator = symbol()\n\n  selection.each((d, index, elements) => {\n    const group: Selection<SVGGElement, ScatterPoint<Datum>, SVGGElement, ScatterPoint<Datum>[]> = select(elements[index])\n    const label = group.select('text')\n    const path = group.select('path')\n\n    // Shape\n    const pointDiameter = d._point.sizePx\n    const pointColor = d._point.color\n    const pointStrokeColor = d._point.strokeColor ?? null\n    const pointStrokeWidth = d._point.strokeWidthPx ?? null\n    path.attr('d', () => {\n      const svgPath = d._point.shape ? symbolGenerator\n        .size(Math.PI * pointDiameter * pointDiameter / 4)\n        .type(Symbol[d._point.shape as SymbolType])() : null\n      return svgPath\n    })\n\n    smartTransition(path, duration)\n      .style('fill', pointColor)\n      .style('stroke', pointStrokeColor)\n      .style('stroke-width', `${pointStrokeWidth}px`)\n\n    // Label\n    const labelPosition = d._point.labelPosition\n    const isLabelPositionCenter = (labelPosition !== Position.Top) && (labelPosition !== Position.Bottom) &&\n      (labelPosition !== Position.Left) && (labelPosition !== Position.Right)\n    const pointLabelText = d._point.label ?? ''\n    const textLength = pointLabelText.length\n    const centralLabelFontSize = getCentralLabelFontSize(pointDiameter, textLength)\n\n    let labelColor = d._point.labelColor\n    if (!labelColor && isLabelPositionCenter) {\n      const c = pointColor || 'var(--vis-scatter-fill-color)'\n      const hex = color(isStringCSSVariable(c) ? getCSSVariableValue(c, group.node()) : c)?.hex()\n      const brightness = hexToBrightness(hex)\n      labelColor = brightness > config.labelTextBrightnessRatio ? 'var(--vis-scatter-point-label-text-color-dark)' : 'var(--vis-scatter-point-label-text-color-light)'\n    }\n\n    const labelShift = getLabelShift(labelPosition, pointDiameter)\n    label.html(pointLabelText)\n      .attr('x', labelShift[0])\n      .attr('y', labelShift[1])\n      .style('font-size', isLabelPositionCenter ? centralLabelFontSize : null)\n      .style('text-anchor', () => {\n        switch (labelPosition) {\n          case Position.Right: return null\n          case Position.Left: return 'end'\n          default: return 'middle'\n        }\n      })\n      .style('dominant-baseline', () => {\n        switch (labelPosition) {\n          case Position.Top: return null\n          case Position.Bottom: return 'hanging'\n          default: return 'central'\n        }\n      })\n\n    smartTransition(label, duration)\n      .style('fill', labelColor)\n\n    path.style('cursor', d._point.cursor)\n  })\n\n  smartTransition(selection, duration)\n    .attr('transform', d => `translate(${xScale(d._point.xValue)},${yScale(d._point.yValue)}) scale(1)`)\n}\n\nexport function removePoints<Datum> (\n  selection: Selection<SVGGElement, ScatterPoint<Datum>, SVGGElement, ScatterPoint<Datum>[]>,\n  xScale: ContinuousScale,\n  yScale: ContinuousScale,\n  duration: number\n): void {\n  smartTransition(selection, duration)\n    .attr('transform', d => `translate(${xScale(d._point.xValue)},${yScale(d._point.yValue)}) scale(0)`)\n    .remove()\n}\n\n", "import { css, injectGlobal } from '@emotion/css'\n\nexport const globalStyles = injectGlobal`\n  :root {\n    --vis-scatter-cursor: default;\n    --vis-scatter-fill-color: var(--vis-color-main);\n    --vis-scatter-stroke-color: 'none';\n    --vis-scatter-stroke-width: 1px;\n    --vis-scatter-fill-opacity: 1;\n    --vis-scatter-stroke-opacity: 1;\n    --vis-scatter-hover-stroke-width: 2px;\n\n    --vis-scatter-point-label-text-color-dark: #5b5f6d;\n    --vis-scatter-point-label-text-color-light: #fff;\n    --vis-scatter-point-label-text-font-weight: 500;\n    --vis-scatter-point-label-text-font-size: 12px;\n    // Undefined by default to allow proper fallback to var(--vis-font-family)\n    /* --vis-scatter-point-label-text-font-family: */\n  }\n`\n\nexport const root = css`\n  label: scatter-component;\n`\n\nexport const pointGroup = css`\n  label: point-group;\n`\n\nexport const pointGroupExit = css`\n  label: point-group-exit;\n`\n\nexport const point = css`\n  label: point;\n\n  > path {\n    cursor: var(--vis-scatter-cursor);\n    fill: var(--vis-scatter-fill-color);\n    fill-opacity: var(--vis-scatter-fill-opacity);\n    stroke-opacity: var(--vis-scatter-stroke-opacity);\n    stroke-width: var(--vis-scatter-stroke-width);\n    stroke: var(--vis-scatter-stroke-color);\n\n    &:hover {\n        stroke-width: var(--vis-scatter-hover-stroke-width);\n    }\n  }\n\n  > text {\n    font-weight: var(--vis-scatter-point-label-text-font-weight);\n    font-size: var(--vis-scatter-point-label-text-font-size);\n    font-family: var(--vis-scatter-point-label-text-font-family, var(--vis-font-family));\n    fill: var(--vis-scatter-point-label-text-color-dark);\n    user-select: none;\n  }\n`\n", "import { Selection, select } from 'd3-selection'\nimport { max, min } from 'd3-array'\n\n// Core\nimport { XYComponentCore } from 'core/xy-component'\n\n// Utils\nimport { isNumber, getExtent, getNumber, getString, isArray, flatten, getValue } from 'utils/data'\nimport { getColor } from 'utils/color'\nimport { smartTransition } from 'utils/d3'\nimport { getCSSVariableValueInPixels } from 'utils/misc'\n\n// Types\nimport { Spacing } from 'types/spacing'\nimport { SymbolType } from 'types/symbol'\nimport { NumericAccessor } from 'types/accessor'\nimport { Position } from 'types/position'\nimport { ContinuousScale } from 'types/scale'\n\n// Local Types\nimport { ScatterPointGroupNode, ScatterPoint } from './types'\n\n// Config\nimport { ScatterDefaultConfig, ScatterConfigInterface } from './config'\n\n// Modules\nimport { createPoints, updatePoints, removePoints } from './modules/point'\nimport { collideLabels, getEstimatedLabelBBox } from './modules/utils'\n\n// Styles\nimport * as s from './style'\n\n\nexport class Scatter<Datum> extends XYComponentCore<Datum, ScatterConfigInterface<Datum>> {\n  static selectors = s\n  protected _defaultConfig = ScatterDefaultConfig as ScatterConfigInterface<Datum>\n  public config: ScatterConfigInterface<Datum> = this._defaultConfig\n\n  events = {\n    [Scatter.selectors.point]: {\n      mouseenter: this._onPointMouseOver.bind(this),\n      mouseleave: this._onPointMouseOut.bind(this),\n    },\n  }\n\n  private _pointData: ScatterPoint<Datum>[][] = []\n  private _points: Selection<SVGGElement, ScatterPoint<Datum>, SVGGElement, ScatterPoint<Datum>[]>\n  private _sizeScale: ContinuousScale\n  private _collideLabelsAnimFrameId: ReturnType<typeof requestAnimationFrame>\n\n  constructor (config?: ScatterConfigInterface<Datum>) {\n    super()\n    if (config) this.setConfig(config)\n  }\n\n  setConfig (config: ScatterConfigInterface<Datum>): void {\n    super.setConfig(config)\n    this._updateSizeScale()\n  }\n\n  setData (data: Datum[]): void {\n    super.setData(data)\n    this._updateSizeScale()\n  }\n\n  get bleed (): Spacing {\n    this._pointData = this._getOnScreenData()\n    const pointDataFlat: ScatterPoint<Datum>[] = flatten(this._pointData)\n\n    const yRangeStart = min(this.yScale.range())\n    const yRangeEnd = max(this.yScale.range())\n    const xRangeStart = this.xScale.range()[0]\n    const xRangeEnd = this.xScale.range()[1]\n\n    const fontSizePx = getCSSVariableValueInPixels('var(--vis-scatter-point-label-text-font-size)', this.element)\n\n    const extent = pointDataFlat.reduce((ext, d) => {\n      const x = this.xScale(d._point.xValue)\n      const y = this.yScale(d._point.yValue)\n      const r = d._point.sizePx / 2\n\n      ext.minX = Math.min(ext.minX, x - r)\n      ext.maxX = Math.max(ext.maxX, x + r)\n      ext.minY = Math.min(ext.minY, y - r)\n      ext.maxY = Math.max(ext.maxY, y + r)\n\n      if (d._point.label) {\n        const labelBBox = getEstimatedLabelBBox(d, d._point.labelPosition, this.xScale, this.yScale, fontSizePx)\n        ext.minX = Math.min(ext.minX, labelBBox.x)\n        ext.maxX = Math.max(ext.maxX, labelBBox.x + labelBBox.width)\n        ext.minY = Math.min(ext.minY, labelBBox.y)\n        ext.maxY = Math.max(ext.maxY, labelBBox.y + labelBBox.height)\n      }\n      return ext\n    }, {\n      minX: Number.POSITIVE_INFINITY,\n      maxX: Number.NEGATIVE_INFINITY,\n      minY: Number.POSITIVE_INFINITY,\n      maxY: Number.NEGATIVE_INFINITY,\n    })\n\n    const coeff = 1.2 // Multiplier to take into account subsequent scale range changes and shape irregularities\n    const top = extent.minY < yRangeStart ? coeff * (yRangeStart - extent.minY) : 0\n    const bottom = extent.maxY > yRangeEnd ? coeff * (extent.maxY - yRangeEnd) : 0\n    const left = extent.minX < xRangeStart ? coeff * (xRangeStart - extent.minX) : 0\n    const right = extent.maxX > xRangeEnd ? coeff * (extent.maxX - xRangeEnd) : 0\n\n    return { top, bottom, left, right }\n  }\n\n  _render (customDuration?: number): void {\n    const { config } = this\n    const duration = isNumber(customDuration) ? customDuration : config.duration\n\n    // Groups\n    const pointGroups = this.g\n      .selectAll<SVGGElement, ScatterPoint<Datum>[]>(`.${s.pointGroup}`)\n      .data(this._pointData)\n\n    const pointGroupsEnter = pointGroups\n      .enter()\n      .append('g')\n      .attr('class', s.pointGroup)\n\n    const pointGroupsMerged = pointGroupsEnter.merge(pointGroups)\n    smartTransition(pointGroupsMerged, duration)\n      .style('opacity', 1)\n\n    const pointGroupExit = pointGroups.exit().attr('class', s.pointGroupExit)\n    smartTransition(pointGroupExit, duration).style('opacity', 0).remove()\n\n    // Points\n    const points = pointGroupsMerged\n      .selectAll<SVGGElement, ScatterPoint<Datum>>(`.${s.point}`)\n      .data(\n        d => d,\n        d => `${getString(d, config.id, d._point.pointIndex) ?? d._point.pointIndex}`\n      )\n\n    const pointsEnter = points.enter().append('g')\n      .attr('class', s.point)\n    createPoints(pointsEnter, this.xScale, this.yScale)\n\n    this._points = pointsEnter.merge(points)\n    updatePoints(this._points, config, this.xScale, this.yScale, duration)\n\n    removePoints(points.exit<ScatterPoint<Datum>>(), this.xScale, this.yScale, duration)\n\n    // Take care of overlapping labels\n    this._resolveLabelOverlap()\n  }\n\n  private _resolveLabelOverlap (): void {\n    if (!this.config.labelHideOverlapping) {\n      const label = this._points.selectAll<SVGTextElement, ScatterPoint<Datum>>('text')\n      label.attr('opacity', null)\n      return\n    }\n\n    cancelAnimationFrame(this._collideLabelsAnimFrameId)\n    this._collideLabelsAnimFrameId = requestAnimationFrame(() => {\n      collideLabels(this._points, this.config, this.xScale, this.yScale)\n    })\n  }\n\n  private _updateSizeScale (): void {\n    const { config, datamodel } = this\n\n    this._sizeScale = config.sizeScale.copy()\n    this._sizeScale.domain(getExtent(datamodel.data, config.size))\n    this._sizeScale.range(config.sizeRange ?? [0, 0])\n  }\n\n  private _getOnScreenData (): ScatterPoint<Datum>[][] {\n    const { config, datamodel: { data } } = this\n\n    const xDomain = this.xScale.domain().map((d: number | Date) => +d) // Convert Date to number\n    const yDomain = this.yScale.domain().map((d: number | Date) => +d) // Convert Date to number\n    const yAccessors = (isArray(config.y) ? config.y : [config.y]) as NumericAccessor<Datum>[]\n\n    const maxSizeValue = max<number>(flatten(yAccessors.map((y, j) => data?.map(d => getNumber(d, config.size, j)))))\n    const maxSizePx = config.sizeRange ? this._sizeScale(maxSizeValue) : maxSizeValue\n\n    const maxSizeXDomain = (this.xScale.invert(maxSizePx) as number) - (this.xScale.invert(0) as number)\n    const maxSizeYDomain = Math.abs((this.yScale.invert(maxSizePx) as number) - (this.yScale.invert(0) as number))\n\n    return yAccessors.map((y, j) => {\n      return data?.reduce<ScatterPoint<Datum>[]>((acc, d, i) => {\n        const xValue = getNumber(d, config.x, i)\n        const yValue = getNumber(d, y, j)\n        const pointSize = getNumber(d, config.size, i)\n        const pointSizeScaled = config.sizeRange ? this._sizeScale(pointSize) : pointSize\n        const pointSizeXDomain = (this.xScale.invert(pointSizeScaled) as number) - (this.xScale.invert(0) as number)\n        const pointSizeYDomain = Math.abs((this.yScale.invert(pointSizeScaled) as number) - (this.yScale.invert(0) as number))\n\n        if (\n          ((xValue - pointSizeXDomain / 2) >= (xDomain[0] - maxSizeXDomain / 2)) &&\n          ((xValue + pointSizeXDomain / 2) <= (xDomain[1] + maxSizeXDomain / 2)) &&\n          ((yValue - pointSizeYDomain / 2) >= (yDomain[0] - maxSizeYDomain / 2)) &&\n          ((yValue + pointSizeYDomain / 2) <= (yDomain[1] + maxSizeYDomain / 2))\n        ) {\n          acc.push({\n            ...d,\n            _point: {\n              xValue: xValue,\n              yValue: yValue,\n              sizePx: pointSizeScaled,\n              color: getColor(d, config.color, j),\n              strokeColor: getColor(d, config.strokeColor, j, true),\n              strokeWidthPx: getNumber(d, config.strokeWidth, j),\n              shape: getString(d, config.shape, j) as SymbolType,\n              label: getString(d, config.label, j),\n              labelColor: getColor(d, config.labelColor, j, true),\n              labelPosition: getValue(d, config.labelPosition, i) as Position,\n              cursor: getString(d, config.cursor, j),\n              groupIndex: j,\n              pointIndex: i,\n            },\n          })\n        }\n\n        return acc\n      }, []) ?? []\n    })\n  }\n\n  private _onPointMouseOver (d: ScatterPoint<Datum>, event: MouseEvent): void {\n    const point = select(event.target as SVGGElement)\n    const pointNode = point.node() as ScatterPointGroupNode | null\n    if (pointNode) pointNode._forceShowLabel = true\n\n    point.raise()\n    this._resolveLabelOverlap()\n  }\n\n  private _onPointMouseOut (d: ScatterPoint<Datum>, event: MouseEvent): void {\n    const pointNode = select(event.target as SVGGElement).node() as ScatterPointGroupNode | null\n    if (pointNode) delete pointNode._forceShowLabel\n\n    this._resolveLabelOverlap()\n  }\n}\n", "// These are typically used in conjunction with noevent to ensure that we can\n// preventDefault on the event.\nexport const nonpassive = {passive: false};\nexport const nonpassivecapture = {capture: true, passive: false};\n\nexport function nopropagation(event) {\n  event.stopImmediatePropagation();\n}\n\nexport default function(event) {\n  event.preventDefault();\n  event.stopImmediatePropagation();\n}\n", "import {select} from \"d3-selection\";\nimport noevent, {nonpassivecapture} from \"./noevent.js\";\n\nexport default function(view) {\n  var root = view.document.documentElement,\n      selection = select(view).on(\"dragstart.drag\", noevent, nonpassivecapture);\n  if (\"onselectstart\" in root) {\n    selection.on(\"selectstart.drag\", noevent, nonpassivecapture);\n  } else {\n    root.__noselect = root.style.MozUserSelect;\n    root.style.MozUserSelect = \"none\";\n  }\n}\n\nexport function yesdrag(view, noclick) {\n  var root = view.document.documentElement,\n      selection = select(view).on(\"dragstart.drag\", null);\n  if (noclick) {\n    selection.on(\"click.drag\", noevent, nonpassivecapture);\n    setTimeout(function() { selection.on(\"click.drag\", null); }, 0);\n  }\n  if (\"onselectstart\" in root) {\n    selection.on(\"selectstart.drag\", null);\n  } else {\n    root.style.MozUserSelect = root.__noselect;\n    delete root.__noselect;\n  }\n}\n", "export default x => () => x;\n", "export default function DragEvent(type, {\n  sourceEvent,\n  subject,\n  target,\n  identifier,\n  active,\n  x, y, dx, dy,\n  dispatch\n}) {\n  Object.defineProperties(this, {\n    type: {value: type, enumerable: true, configurable: true},\n    sourceEvent: {value: sourceEvent, enumerable: true, configurable: true},\n    subject: {value: subject, enumerable: true, configurable: true},\n    target: {value: target, enumerable: true, configurable: true},\n    identifier: {value: identifier, enumerable: true, configurable: true},\n    active: {value: active, enumerable: true, configurable: true},\n    x: {value: x, enumerable: true, configurable: true},\n    y: {value: y, enumerable: true, configurable: true},\n    dx: {value: dx, enumerable: true, configurable: true},\n    dy: {value: dy, enumerable: true, configurable: true},\n    _: {value: dispatch}\n  });\n}\n\nDragEvent.prototype.on = function() {\n  var value = this._.on.apply(this._, arguments);\n  return value === this._ ? this : value;\n};\n", "import {dispatch} from \"d3-dispatch\";\nimport {select, pointer} from \"d3-selection\";\nimport nodrag, {yesdrag} from \"./nodrag.js\";\nimport noevent, {nonpassive, nonpassivecapture, nopropagation} from \"./noevent.js\";\nimport constant from \"./constant.js\";\nimport DragEvent from \"./event.js\";\n\n// Ignore right-click, since that should open the context menu.\nfunction defaultFilter(event) {\n  return !event.ctrlKey && !event.button;\n}\n\nfunction defaultContainer() {\n  return this.parentNode;\n}\n\nfunction defaultSubject(event, d) {\n  return d == null ? {x: event.x, y: event.y} : d;\n}\n\nfunction defaultTouchable() {\n  return navigator.maxTouchPoints || (\"ontouchstart\" in this);\n}\n\nexport default function() {\n  var filter = defaultFilter,\n      container = defaultContainer,\n      subject = defaultSubject,\n      touchable = defaultTouchable,\n      gestures = {},\n      listeners = dispatch(\"start\", \"drag\", \"end\"),\n      active = 0,\n      mousedownx,\n      mousedowny,\n      mousemoving,\n      touchending,\n      clickDistance2 = 0;\n\n  function drag(selection) {\n    selection\n        .on(\"mousedown.drag\", mousedowned)\n      .filter(touchable)\n        .on(\"touchstart.drag\", touchstarted)\n        .on(\"touchmove.drag\", touchmoved, nonpassive)\n        .on(\"touchend.drag touchcancel.drag\", touchended)\n        .style(\"touch-action\", \"none\")\n        .style(\"-webkit-tap-highlight-color\", \"rgba(0,0,0,0)\");\n  }\n\n  function mousedowned(event, d) {\n    if (touchending || !filter.call(this, event, d)) return;\n    var gesture = beforestart(this, container.call(this, event, d), event, d, \"mouse\");\n    if (!gesture) return;\n    select(event.view)\n      .on(\"mousemove.drag\", mousemoved, nonpassivecapture)\n      .on(\"mouseup.drag\", mouseupped, nonpassivecapture);\n    nodrag(event.view);\n    nopropagation(event);\n    mousemoving = false;\n    mousedownx = event.clientX;\n    mousedowny = event.clientY;\n    gesture(\"start\", event);\n  }\n\n  function mousemoved(event) {\n    noevent(event);\n    if (!mousemoving) {\n      var dx = event.clientX - mousedownx, dy = event.clientY - mousedowny;\n      mousemoving = dx * dx + dy * dy > clickDistance2;\n    }\n    gestures.mouse(\"drag\", event);\n  }\n\n  function mouseupped(event) {\n    select(event.view).on(\"mousemove.drag mouseup.drag\", null);\n    yesdrag(event.view, mousemoving);\n    noevent(event);\n    gestures.mouse(\"end\", event);\n  }\n\n  function touchstarted(event, d) {\n    if (!filter.call(this, event, d)) return;\n    var touches = event.changedTouches,\n        c = container.call(this, event, d),\n        n = touches.length, i, gesture;\n\n    for (i = 0; i < n; ++i) {\n      if (gesture = beforestart(this, c, event, d, touches[i].identifier, touches[i])) {\n        nopropagation(event);\n        gesture(\"start\", event, touches[i]);\n      }\n    }\n  }\n\n  function touchmoved(event) {\n    var touches = event.changedTouches,\n        n = touches.length, i, gesture;\n\n    for (i = 0; i < n; ++i) {\n      if (gesture = gestures[touches[i].identifier]) {\n        noevent(event);\n        gesture(\"drag\", event, touches[i]);\n      }\n    }\n  }\n\n  function touchended(event) {\n    var touches = event.changedTouches,\n        n = touches.length, i, gesture;\n\n    if (touchending) clearTimeout(touchending);\n    touchending = setTimeout(function() { touchending = null; }, 500); // Ghost clicks are delayed!\n    for (i = 0; i < n; ++i) {\n      if (gesture = gestures[touches[i].identifier]) {\n        nopropagation(event);\n        gesture(\"end\", event, touches[i]);\n      }\n    }\n  }\n\n  function beforestart(that, container, event, d, identifier, touch) {\n    var dispatch = listeners.copy(),\n        p = pointer(touch || event, container), dx, dy,\n        s;\n\n    if ((s = subject.call(that, new DragEvent(\"beforestart\", {\n        sourceEvent: event,\n        target: drag,\n        identifier,\n        active,\n        x: p[0],\n        y: p[1],\n        dx: 0,\n        dy: 0,\n        dispatch\n      }), d)) == null) return;\n\n    dx = s.x - p[0] || 0;\n    dy = s.y - p[1] || 0;\n\n    return function gesture(type, event, touch) {\n      var p0 = p, n;\n      switch (type) {\n        case \"start\": gestures[identifier] = gesture, n = active++; break;\n        case \"end\": delete gestures[identifier], --active; // falls through\n        case \"drag\": p = pointer(touch || event, container), n = active; break;\n      }\n      dispatch.call(\n        type,\n        that,\n        new DragEvent(type, {\n          sourceEvent: event,\n          subject: s,\n          target: drag,\n          identifier,\n          active: n,\n          x: p[0] + dx,\n          y: p[1] + dy,\n          dx: p[0] - p0[0],\n          dy: p[1] - p0[1],\n          dispatch\n        }),\n        d\n      );\n    };\n  }\n\n  drag.filter = function(_) {\n    return arguments.length ? (filter = typeof _ === \"function\" ? _ : constant(!!_), drag) : filter;\n  };\n\n  drag.container = function(_) {\n    return arguments.length ? (container = typeof _ === \"function\" ? _ : constant(_), drag) : container;\n  };\n\n  drag.subject = function(_) {\n    return arguments.length ? (subject = typeof _ === \"function\" ? _ : constant(_), drag) : subject;\n  };\n\n  drag.touchable = function(_) {\n    return arguments.length ? (touchable = typeof _ === \"function\" ? _ : constant(!!_), drag) : touchable;\n  };\n\n  drag.on = function() {\n    var value = listeners.on.apply(listeners, arguments);\n    return value === listeners ? drag : value;\n  };\n\n  drag.clickDistance = function(_) {\n    return arguments.length ? (clickDistance2 = (_ = +_) * _, drag) : Math.sqrt(clickDistance2);\n  };\n\n  return drag;\n}\n", "export default x => () => x;\n", "export default function BrushEvent(type, {\n  sourceEvent,\n  target,\n  selection,\n  mode,\n  dispatch\n}) {\n  Object.defineProperties(this, {\n    type: {value: type, enumerable: true, configurable: true},\n    sourceEvent: {value: sourceEvent, enumerable: true, configurable: true},\n    target: {value: target, enumerable: true, configurable: true},\n    selection: {value: selection, enumerable: true, configurable: true},\n    mode: {value: mode, enumerable: true, configurable: true},\n    _: {value: dispatch}\n  });\n}\n", "export function nopropagation(event) {\n  event.stopImmediatePropagation();\n}\n\nexport default function(event) {\n  event.preventDefault();\n  event.stopImmediatePropagation();\n}\n", "import {dispatch} from \"d3-dispatch\";\nimport {dragDisable, dragEnable} from \"d3-drag\";\nimport {interpolate} from \"d3-interpolate\";\nimport {pointer, select} from \"d3-selection\";\nimport {interrupt} from \"d3-transition\";\nimport constant from \"./constant.js\";\nimport BrushEvent from \"./event.js\";\nimport noevent, {nopropagation} from \"./noevent.js\";\n\nvar MODE_DRAG = {name: \"drag\"},\n    MODE_SPACE = {name: \"space\"},\n    MODE_HANDLE = {name: \"handle\"},\n    MODE_CENTER = {name: \"center\"};\n\nconst {abs, max, min} = Math;\n\nfunction number1(e) {\n  return [+e[0], +e[1]];\n}\n\nfunction number2(e) {\n  return [number1(e[0]), number1(e[1])];\n}\n\nvar X = {\n  name: \"x\",\n  handles: [\"w\", \"e\"].map(type),\n  input: function(x, e) { return x == null ? null : [[+x[0], e[0][1]], [+x[1], e[1][1]]]; },\n  output: function(xy) { return xy && [xy[0][0], xy[1][0]]; }\n};\n\nvar Y = {\n  name: \"y\",\n  handles: [\"n\", \"s\"].map(type),\n  input: function(y, e) { return y == null ? null : [[e[0][0], +y[0]], [e[1][0], +y[1]]]; },\n  output: function(xy) { return xy && [xy[0][1], xy[1][1]]; }\n};\n\nvar XY = {\n  name: \"xy\",\n  handles: [\"n\", \"w\", \"e\", \"s\", \"nw\", \"ne\", \"sw\", \"se\"].map(type),\n  input: function(xy) { return xy == null ? null : number2(xy); },\n  output: function(xy) { return xy; }\n};\n\nvar cursors = {\n  overlay: \"crosshair\",\n  selection: \"move\",\n  n: \"ns-resize\",\n  e: \"ew-resize\",\n  s: \"ns-resize\",\n  w: \"ew-resize\",\n  nw: \"nwse-resize\",\n  ne: \"nesw-resize\",\n  se: \"nwse-resize\",\n  sw: \"nesw-resize\"\n};\n\nvar flipX = {\n  e: \"w\",\n  w: \"e\",\n  nw: \"ne\",\n  ne: \"nw\",\n  se: \"sw\",\n  sw: \"se\"\n};\n\nvar flipY = {\n  n: \"s\",\n  s: \"n\",\n  nw: \"sw\",\n  ne: \"se\",\n  se: \"ne\",\n  sw: \"nw\"\n};\n\nvar signsX = {\n  overlay: +1,\n  selection: +1,\n  n: null,\n  e: +1,\n  s: null,\n  w: -1,\n  nw: -1,\n  ne: +1,\n  se: +1,\n  sw: -1\n};\n\nvar signsY = {\n  overlay: +1,\n  selection: +1,\n  n: -1,\n  e: null,\n  s: +1,\n  w: null,\n  nw: -1,\n  ne: -1,\n  se: +1,\n  sw: +1\n};\n\nfunction type(t) {\n  return {type: t};\n}\n\n// Ignore right-click, since that should open the context menu.\nfunction defaultFilter(event) {\n  return !event.ctrlKey && !event.button;\n}\n\nfunction defaultExtent() {\n  var svg = this.ownerSVGElement || this;\n  if (svg.hasAttribute(\"viewBox\")) {\n    svg = svg.viewBox.baseVal;\n    return [[svg.x, svg.y], [svg.x + svg.width, svg.y + svg.height]];\n  }\n  return [[0, 0], [svg.width.baseVal.value, svg.height.baseVal.value]];\n}\n\nfunction defaultTouchable() {\n  return navigator.maxTouchPoints || (\"ontouchstart\" in this);\n}\n\n// Like d3.local, but with the name “__brush” rather than auto-generated.\nfunction local(node) {\n  while (!node.__brush) if (!(node = node.parentNode)) return;\n  return node.__brush;\n}\n\nfunction empty(extent) {\n  return extent[0][0] === extent[1][0]\n      || extent[0][1] === extent[1][1];\n}\n\nexport function brushSelection(node) {\n  var state = node.__brush;\n  return state ? state.dim.output(state.selection) : null;\n}\n\nexport function brushX() {\n  return brush(X);\n}\n\nexport function brushY() {\n  return brush(Y);\n}\n\nexport default function() {\n  return brush(XY);\n}\n\nfunction brush(dim) {\n  var extent = defaultExtent,\n      filter = defaultFilter,\n      touchable = defaultTouchable,\n      keys = true,\n      listeners = dispatch(\"start\", \"brush\", \"end\"),\n      handleSize = 6,\n      touchending;\n\n  function brush(group) {\n    var overlay = group\n        .property(\"__brush\", initialize)\n      .selectAll(\".overlay\")\n      .data([type(\"overlay\")]);\n\n    overlay.enter().append(\"rect\")\n        .attr(\"class\", \"overlay\")\n        .attr(\"pointer-events\", \"all\")\n        .attr(\"cursor\", cursors.overlay)\n      .merge(overlay)\n        .each(function() {\n          var extent = local(this).extent;\n          select(this)\n              .attr(\"x\", extent[0][0])\n              .attr(\"y\", extent[0][1])\n              .attr(\"width\", extent[1][0] - extent[0][0])\n              .attr(\"height\", extent[1][1] - extent[0][1]);\n        });\n\n    group.selectAll(\".selection\")\n      .data([type(\"selection\")])\n      .enter().append(\"rect\")\n        .attr(\"class\", \"selection\")\n        .attr(\"cursor\", cursors.selection)\n        .attr(\"fill\", \"#777\")\n        .attr(\"fill-opacity\", 0.3)\n        .attr(\"stroke\", \"#fff\")\n        .attr(\"shape-rendering\", \"crispEdges\");\n\n    var handle = group.selectAll(\".handle\")\n      .data(dim.handles, function(d) { return d.type; });\n\n    handle.exit().remove();\n\n    handle.enter().append(\"rect\")\n        .attr(\"class\", function(d) { return \"handle handle--\" + d.type; })\n        .attr(\"cursor\", function(d) { return cursors[d.type]; });\n\n    group\n        .each(redraw)\n        .attr(\"fill\", \"none\")\n        .attr(\"pointer-events\", \"all\")\n        .on(\"mousedown.brush\", started)\n      .filter(touchable)\n        .on(\"touchstart.brush\", started)\n        .on(\"touchmove.brush\", touchmoved)\n        .on(\"touchend.brush touchcancel.brush\", touchended)\n        .style(\"touch-action\", \"none\")\n        .style(\"-webkit-tap-highlight-color\", \"rgba(0,0,0,0)\");\n  }\n\n  brush.move = function(group, selection, event) {\n    if (group.tween) {\n      group\n          .on(\"start.brush\", function(event) { emitter(this, arguments).beforestart().start(event); })\n          .on(\"interrupt.brush end.brush\", function(event) { emitter(this, arguments).end(event); })\n          .tween(\"brush\", function() {\n            var that = this,\n                state = that.__brush,\n                emit = emitter(that, arguments),\n                selection0 = state.selection,\n                selection1 = dim.input(typeof selection === \"function\" ? selection.apply(this, arguments) : selection, state.extent),\n                i = interpolate(selection0, selection1);\n\n            function tween(t) {\n              state.selection = t === 1 && selection1 === null ? null : i(t);\n              redraw.call(that);\n              emit.brush();\n            }\n\n            return selection0 !== null && selection1 !== null ? tween : tween(1);\n          });\n    } else {\n      group\n          .each(function() {\n            var that = this,\n                args = arguments,\n                state = that.__brush,\n                selection1 = dim.input(typeof selection === \"function\" ? selection.apply(that, args) : selection, state.extent),\n                emit = emitter(that, args).beforestart();\n\n            interrupt(that);\n            state.selection = selection1 === null ? null : selection1;\n            redraw.call(that);\n            emit.start(event).brush(event).end(event);\n          });\n    }\n  };\n\n  brush.clear = function(group, event) {\n    brush.move(group, null, event);\n  };\n\n  function redraw() {\n    var group = select(this),\n        selection = local(this).selection;\n\n    if (selection) {\n      group.selectAll(\".selection\")\n          .style(\"display\", null)\n          .attr(\"x\", selection[0][0])\n          .attr(\"y\", selection[0][1])\n          .attr(\"width\", selection[1][0] - selection[0][0])\n          .attr(\"height\", selection[1][1] - selection[0][1]);\n\n      group.selectAll(\".handle\")\n          .style(\"display\", null)\n          .attr(\"x\", function(d) { return d.type[d.type.length - 1] === \"e\" ? selection[1][0] - handleSize / 2 : selection[0][0] - handleSize / 2; })\n          .attr(\"y\", function(d) { return d.type[0] === \"s\" ? selection[1][1] - handleSize / 2 : selection[0][1] - handleSize / 2; })\n          .attr(\"width\", function(d) { return d.type === \"n\" || d.type === \"s\" ? selection[1][0] - selection[0][0] + handleSize : handleSize; })\n          .attr(\"height\", function(d) { return d.type === \"e\" || d.type === \"w\" ? selection[1][1] - selection[0][1] + handleSize : handleSize; });\n    }\n\n    else {\n      group.selectAll(\".selection,.handle\")\n          .style(\"display\", \"none\")\n          .attr(\"x\", null)\n          .attr(\"y\", null)\n          .attr(\"width\", null)\n          .attr(\"height\", null);\n    }\n  }\n\n  function emitter(that, args, clean) {\n    var emit = that.__brush.emitter;\n    return emit && (!clean || !emit.clean) ? emit : new Emitter(that, args, clean);\n  }\n\n  function Emitter(that, args, clean) {\n    this.that = that;\n    this.args = args;\n    this.state = that.__brush;\n    this.active = 0;\n    this.clean = clean;\n  }\n\n  Emitter.prototype = {\n    beforestart: function() {\n      if (++this.active === 1) this.state.emitter = this, this.starting = true;\n      return this;\n    },\n    start: function(event, mode) {\n      if (this.starting) this.starting = false, this.emit(\"start\", event, mode);\n      else this.emit(\"brush\", event);\n      return this;\n    },\n    brush: function(event, mode) {\n      this.emit(\"brush\", event, mode);\n      return this;\n    },\n    end: function(event, mode) {\n      if (--this.active === 0) delete this.state.emitter, this.emit(\"end\", event, mode);\n      return this;\n    },\n    emit: function(type, event, mode) {\n      var d = select(this.that).datum();\n      listeners.call(\n        type,\n        this.that,\n        new BrushEvent(type, {\n          sourceEvent: event,\n          target: brush,\n          selection: dim.output(this.state.selection),\n          mode,\n          dispatch: listeners\n        }),\n        d\n      );\n    }\n  };\n\n  function started(event) {\n    if (touchending && !event.touches) return;\n    if (!filter.apply(this, arguments)) return;\n\n    var that = this,\n        type = event.target.__data__.type,\n        mode = (keys && event.metaKey ? type = \"overlay\" : type) === \"selection\" ? MODE_DRAG : (keys && event.altKey ? MODE_CENTER : MODE_HANDLE),\n        signX = dim === Y ? null : signsX[type],\n        signY = dim === X ? null : signsY[type],\n        state = local(that),\n        extent = state.extent,\n        selection = state.selection,\n        W = extent[0][0], w0, w1,\n        N = extent[0][1], n0, n1,\n        E = extent[1][0], e0, e1,\n        S = extent[1][1], s0, s1,\n        dx = 0,\n        dy = 0,\n        moving,\n        shifting = signX && signY && keys && event.shiftKey,\n        lockX,\n        lockY,\n        points = Array.from(event.touches || [event], t => {\n          const i = t.identifier;\n          t = pointer(t, that);\n          t.point0 = t.slice();\n          t.identifier = i;\n          return t;\n        });\n\n    interrupt(that);\n    var emit = emitter(that, arguments, true).beforestart();\n\n    if (type === \"overlay\") {\n      if (selection) moving = true;\n      const pts = [points[0], points[1] || points[0]];\n      state.selection = selection = [[\n          w0 = dim === Y ? W : min(pts[0][0], pts[1][0]),\n          n0 = dim === X ? N : min(pts[0][1], pts[1][1])\n        ], [\n          e0 = dim === Y ? E : max(pts[0][0], pts[1][0]),\n          s0 = dim === X ? S : max(pts[0][1], pts[1][1])\n        ]];\n      if (points.length > 1) move(event);\n    } else {\n      w0 = selection[0][0];\n      n0 = selection[0][1];\n      e0 = selection[1][0];\n      s0 = selection[1][1];\n    }\n\n    w1 = w0;\n    n1 = n0;\n    e1 = e0;\n    s1 = s0;\n\n    var group = select(that)\n        .attr(\"pointer-events\", \"none\");\n\n    var overlay = group.selectAll(\".overlay\")\n        .attr(\"cursor\", cursors[type]);\n\n    if (event.touches) {\n      emit.moved = moved;\n      emit.ended = ended;\n    } else {\n      var view = select(event.view)\n          .on(\"mousemove.brush\", moved, true)\n          .on(\"mouseup.brush\", ended, true);\n      if (keys) view\n          .on(\"keydown.brush\", keydowned, true)\n          .on(\"keyup.brush\", keyupped, true)\n\n      dragDisable(event.view);\n    }\n\n    redraw.call(that);\n    emit.start(event, mode.name);\n\n    function moved(event) {\n      for (const p of event.changedTouches || [event]) {\n        for (const d of points)\n          if (d.identifier === p.identifier) d.cur = pointer(p, that);\n      }\n      if (shifting && !lockX && !lockY && points.length === 1) {\n        const point = points[0];\n        if (abs(point.cur[0] - point[0]) > abs(point.cur[1] - point[1]))\n          lockY = true;\n        else\n          lockX = true;\n      }\n      for (const point of points)\n        if (point.cur) point[0] = point.cur[0], point[1] = point.cur[1];\n      moving = true;\n      noevent(event);\n      move(event);\n    }\n\n    function move(event) {\n      const point = points[0], point0 = point.point0;\n      var t;\n\n      dx = point[0] - point0[0];\n      dy = point[1] - point0[1];\n\n      switch (mode) {\n        case MODE_SPACE:\n        case MODE_DRAG: {\n          if (signX) dx = max(W - w0, min(E - e0, dx)), w1 = w0 + dx, e1 = e0 + dx;\n          if (signY) dy = max(N - n0, min(S - s0, dy)), n1 = n0 + dy, s1 = s0 + dy;\n          break;\n        }\n        case MODE_HANDLE: {\n          if (points[1]) {\n            if (signX) w1 = max(W, min(E, points[0][0])), e1 = max(W, min(E, points[1][0])), signX = 1;\n            if (signY) n1 = max(N, min(S, points[0][1])), s1 = max(N, min(S, points[1][1])), signY = 1;\n          } else {\n            if (signX < 0) dx = max(W - w0, min(E - w0, dx)), w1 = w0 + dx, e1 = e0;\n            else if (signX > 0) dx = max(W - e0, min(E - e0, dx)), w1 = w0, e1 = e0 + dx;\n            if (signY < 0) dy = max(N - n0, min(S - n0, dy)), n1 = n0 + dy, s1 = s0;\n            else if (signY > 0) dy = max(N - s0, min(S - s0, dy)), n1 = n0, s1 = s0 + dy;\n          }\n          break;\n        }\n        case MODE_CENTER: {\n          if (signX) w1 = max(W, min(E, w0 - dx * signX)), e1 = max(W, min(E, e0 + dx * signX));\n          if (signY) n1 = max(N, min(S, n0 - dy * signY)), s1 = max(N, min(S, s0 + dy * signY));\n          break;\n        }\n      }\n\n      if (e1 < w1) {\n        signX *= -1;\n        t = w0, w0 = e0, e0 = t;\n        t = w1, w1 = e1, e1 = t;\n        if (type in flipX) overlay.attr(\"cursor\", cursors[type = flipX[type]]);\n      }\n\n      if (s1 < n1) {\n        signY *= -1;\n        t = n0, n0 = s0, s0 = t;\n        t = n1, n1 = s1, s1 = t;\n        if (type in flipY) overlay.attr(\"cursor\", cursors[type = flipY[type]]);\n      }\n\n      if (state.selection) selection = state.selection; // May be set by brush.move!\n      if (lockX) w1 = selection[0][0], e1 = selection[1][0];\n      if (lockY) n1 = selection[0][1], s1 = selection[1][1];\n\n      if (selection[0][0] !== w1\n          || selection[0][1] !== n1\n          || selection[1][0] !== e1\n          || selection[1][1] !== s1) {\n        state.selection = [[w1, n1], [e1, s1]];\n        redraw.call(that);\n        emit.brush(event, mode.name);\n      }\n    }\n\n    function ended(event) {\n      nopropagation(event);\n      if (event.touches) {\n        if (event.touches.length) return;\n        if (touchending) clearTimeout(touchending);\n        touchending = setTimeout(function() { touchending = null; }, 500); // Ghost clicks are delayed!\n      } else {\n        dragEnable(event.view, moving);\n        view.on(\"keydown.brush keyup.brush mousemove.brush mouseup.brush\", null);\n      }\n      group.attr(\"pointer-events\", \"all\");\n      overlay.attr(\"cursor\", cursors.overlay);\n      if (state.selection) selection = state.selection; // May be set by brush.move (on start)!\n      if (empty(selection)) state.selection = null, redraw.call(that);\n      emit.end(event, mode.name);\n    }\n\n    function keydowned(event) {\n      switch (event.keyCode) {\n        case 16: { // SHIFT\n          shifting = signX && signY;\n          break;\n        }\n        case 18: { // ALT\n          if (mode === MODE_HANDLE) {\n            if (signX) e0 = e1 - dx * signX, w0 = w1 + dx * signX;\n            if (signY) s0 = s1 - dy * signY, n0 = n1 + dy * signY;\n            mode = MODE_CENTER;\n            move(event);\n          }\n          break;\n        }\n        case 32: { // SPACE; takes priority over ALT\n          if (mode === MODE_HANDLE || mode === MODE_CENTER) {\n            if (signX < 0) e0 = e1 - dx; else if (signX > 0) w0 = w1 - dx;\n            if (signY < 0) s0 = s1 - dy; else if (signY > 0) n0 = n1 - dy;\n            mode = MODE_SPACE;\n            overlay.attr(\"cursor\", cursors.selection);\n            move(event);\n          }\n          break;\n        }\n        default: return;\n      }\n      noevent(event);\n    }\n\n    function keyupped(event) {\n      switch (event.keyCode) {\n        case 16: { // SHIFT\n          if (shifting) {\n            lockX = lockY = shifting = false;\n            move(event);\n          }\n          break;\n        }\n        case 18: { // ALT\n          if (mode === MODE_CENTER) {\n            if (signX < 0) e0 = e1; else if (signX > 0) w0 = w1;\n            if (signY < 0) s0 = s1; else if (signY > 0) n0 = n1;\n            mode = MODE_HANDLE;\n            move(event);\n          }\n          break;\n        }\n        case 32: { // SPACE\n          if (mode === MODE_SPACE) {\n            if (event.altKey) {\n              if (signX) e0 = e1 - dx * signX, w0 = w1 + dx * signX;\n              if (signY) s0 = s1 - dy * signY, n0 = n1 + dy * signY;\n              mode = MODE_CENTER;\n            } else {\n              if (signX < 0) e0 = e1; else if (signX > 0) w0 = w1;\n              if (signY < 0) s0 = s1; else if (signY > 0) n0 = n1;\n              mode = MODE_HANDLE;\n            }\n            overlay.attr(\"cursor\", cursors[type]);\n            move(event);\n          }\n          break;\n        }\n        default: return;\n      }\n      noevent(event);\n    }\n  }\n\n  function touchmoved(event) {\n    emitter(this, arguments).moved(event);\n  }\n\n  function touchended(event) {\n    emitter(this, arguments).ended(event);\n  }\n\n  function initialize() {\n    var state = this.__brush || {selection: null};\n    state.extent = number2(extent.apply(this, arguments));\n    state.dim = dim;\n    return state;\n  }\n\n  brush.extent = function(_) {\n    return arguments.length ? (extent = typeof _ === \"function\" ? _ : constant(number2(_)), brush) : extent;\n  };\n\n  brush.filter = function(_) {\n    return arguments.length ? (filter = typeof _ === \"function\" ? _ : constant(!!_), brush) : filter;\n  };\n\n  brush.touchable = function(_) {\n    return arguments.length ? (touchable = typeof _ === \"function\" ? _ : constant(!!_), brush) : touchable;\n  };\n\n  brush.handleSize = function(_) {\n    return arguments.length ? (handleSize = +_, brush) : handleSize;\n  };\n\n  brush.keyModifiers = function(_) {\n    return arguments.length ? (keys = !!_, brush) : keys;\n  };\n\n  brush.on = function() {\n    var value = listeners.on.apply(listeners, arguments);\n    return value === listeners ? brush : value;\n  };\n\n  return brush;\n}\n", "import { D3BrushEvent } from 'd3-brush'\nimport { XYComponentConfigInterface, XYComponentDefaultConfig } from 'core/xy-component/config'\n\n// Types\nimport { Arrangement } from 'types/position'\n\n// We extend partial XY config interface because x and y properties are optional for Brush\nexport interface BrushConfigInterface<Datum> extends Partial<XYComponentConfigInterface<Datum>> {\n  /** Callback function to be called on any Brush event.\n   * Default: `(selection: [number, number], event: D3BrushEvent<Datum>, userDriven: boolean): void => {}`\n  */\n  onBrush?: ((selection: [number, number] | undefined, event: D3BrushEvent<Datum>, userDriven: boolean) => void);\n  /** Callback function to be called on the Brush start event.\n   * Default: `(selection: [number, number], event: D3BrushEvent<Datum>, userDriven: boolean): void => {}`\n  */\n  onBrushStart?: ((selection: [number, number] | undefined, event: D3BrushEvent<Datum>, userDriven: boolean) => void);\n  /** Callback function to be called on the Brush move event.\n   * Default: `(selection: [number, number], event: D3BrushEvent<Datum>, userDriven: boolean): void => {}`\n  */\n  onBrushMove?: ((selection: [number, number] | undefined, event: D3BrushEvent<Datum>, userDriven: boolean) => void);\n  /** Callback function to be called on the Brush end event.\n   * Default: `(selection: [number, number], event: D3BrushEvent<Datum>, userDriven: boolean): void => {}`\n  */\n  onBrushEnd?: ((selection: [number, number] | undefined, event: D3BrushEvent<Datum>, userDriven: boolean) => void);\n  /** Width of the Brush handle. Default: `1` */\n  handleWidth?: number;\n  /** Brush selection in the data space coordinates, can be used to control the selection. Default: `undefined` */\n  selection?: [number, number] | null;\n  /** Allow dragging the selected area as a whole in order to change the selected range. Default: `false` */\n  draggable?: boolean;\n  /** Position of the handle: `Arrangement.Inside` or `Arrangement.Outside`. Default: `Arrangement.Inside` */\n  handlePosition?: Arrangement | string;\n  /** Constraint Brush selection to a minimal length in data units. Default: `undefined` */\n  selectionMinLength?: number;\n}\n\nexport const BrushDefaultConfig: BrushConfigInterface<unknown> = {\n  ...XYComponentDefaultConfig,\n  /* eslint-disable-next-line @typescript-eslint/no-unused-vars, @typescript-eslint/no-empty-function */\n  onBrush: <Datum>(s: [number, number] | undefined, e: D3BrushEvent<Datum>, userDriven: boolean): void => {},\n  /* eslint-disable-next-line @typescript-eslint/no-unused-vars, @typescript-eslint/no-empty-function */\n  onBrushStart: <Datum>(s: [number, number] | undefined, e: D3BrushEvent<Datum>, userDriven: boolean): void => {},\n  /* eslint-disable-next-line @typescript-eslint/no-unused-vars, @typescript-eslint/no-empty-function */\n  onBrushMove: <Datum>(s: [number, number] | undefined, e: D3BrushEvent<Datum>, userDriven: boolean): void => {},\n  /* eslint-disable-next-line @typescript-eslint/no-unused-vars, @typescript-eslint/no-empty-function */\n  onBrushEnd: <Datum>(s: [number, number] | undefined, e: D3BrushEvent<Datum>, userDriven: boolean): void => {},\n  handleWidth: 9,\n  selection: null,\n  draggable: false,\n  handlePosition: Arrangement.Inside,\n  selectionMinLength: undefined,\n}\n", "export type BrushHandleType = {\n  type: BrushDirection;\n}\n\nexport enum BrushDirection {\n  West = 'w', // D3 defines brush directions as 'w', 'e', ...\n  East = 'e',\n}\n", "import { injectGlobal } from '@emotion/css'\n\nimport { kebabCaseToCamel } from 'utils/text'\nimport type { KebabToCamelCase, RemovePrefix } from 'utils/type'\n\nexport function getCssVarNames<\n  T extends Record<string, unknown>,\n  Prefix extends string = '--vis-',\n> (cssVarsObject: T, prefix?: Prefix): {\n  [Property in Extract<keyof T, string> as KebabToCamelCase<RemovePrefix<Property, Prefix>>]: Property\n} {\n  const defaultPrefix = '--vis-'\n  const entries = Object.entries(cssVarsObject)\n  return Object.fromEntries(\n    entries.map(([key]) => [kebabCaseToCamel(key.replace(prefix ?? defaultPrefix, '')), key])\n  ) as {\n    [Property in Extract<keyof T, string> as KebabToCamelCase<RemovePrefix<Property, Prefix>>]: Property\n  }\n}\n\nexport function injectGlobalCssVariables<T extends Record<string, string | number | undefined>> (\n  cssVarsObject: T,\n  componentRootClassName: string\n): void {\n  injectGlobal({\n    ':root': cssVarsObject,\n    [`body.theme-dark .${componentRootClassName}`]: Object.keys(cssVarsObject)\n      .filter(key => key.includes('--vis-dark'))\n      .map(key => ({\n        [key.replace('--vis-dark', '--vis')]: `var(${key})`,\n      })),\n  })\n}\n\nexport function cssvar<T extends string> (name: T): `var(${T})` {\n  return `var(${name})` as `var(${T})`\n}\n", "import { css } from '@emotion/css'\nimport { getCssVarNames, injectGlobalCssVariables } from 'utils/style'\n\nexport const root = css`\n  label: brush-component;\n`\n\nexport const cssVarDefaults = {\n  '--vis-brush-selection-fill-color': 'none',\n  '--vis-brush-selection-stroke-color': 'none',\n  '--vis-brush-selection-stroke-width': '0',\n  '--vis-brush-selection-opacity': '0',\n  '--vis-brush-unselected-fill-color': '#0b1640',\n  '--vis-brush-unselected-stroke-color': '#acb2b9',\n  '--vis-brush-unselected-stroke-width': '0',\n  '--vis-brush-unselected-opacity': '0.4',\n  '--vis-brush-handle-fill-color': '#6d778c',\n  '--vis-brush-handle-stroke-color': '#eee',\n\n  /* Dark Theme */\n  '--vis-dark-brush-selection-fill-color': 'none',\n  '--vis-dark-brush-selection-stroke-color': 'none',\n  '--vis-dark-brush-selection-stroke-width': '0',\n  '--vis-dark-brush-selection-opacity': '0',\n  '--vis-dark-brush-unselected-fill-color': '#acb2b9',\n  '--vis-dark-brush-unselected-stroke-color': '#0b1640',\n  '--vis-dark-brush-unselected-stroke-width': '0',\n  '--vis-dark-brush-unselected-opacity': '0.4',\n  '--vis-dark-brush-handle-fill-color': '#acb2b9',\n  '--vis-dark-brush-handle-stroke-color': 'var(--vis-color-grey)',\n}\n\nexport const variables = getCssVarNames(cssVarDefaults)\ninjectGlobalCssVariables(cssVarDefaults, root)\n\nexport const brush = css`\n  label: brush;\n\n  .selection {\n    fill: var(${variables.brushSelectionFillColor});\n    stroke: var(${variables.brushSelectionStrokeColor});\n    stroke-width: var(${variables.brushSelectionStrokeWidth});\n    opacity: var(${variables.brushSelectionOpacity});\n  }\n\n  .handle {\n    fill: var(${variables.brushHandleFillColor});\n  }\n\n  &.non-draggable {\n    .selection, .overlay {\n      pointer-events: none;\n    }\n  }\n`\n\nexport const unselected = css`\n  label: unselected;\n  fill: var(${variables.brushUnselectedFillColor});\n  stroke: var(${variables.brushUnselectedStrokeColor});\n  stroke-width: var(${variables.brushUnselectedStrokeWidth});\n  stroke-opacity: var(${variables.brushUnselectedOpacity});\n  opacity: var(${variables.brushUnselectedOpacity});\n  pointer-events: none;\n`\n\nexport const handleLine = css`\n  label: handle-line;\n  stroke: var(${variables.brushHandleStrokeColor});\n  stroke-width: 1;\n  fill: none;\n  pointer-events: none;\n`\n", "import { BrushBehavior, brushX, D3BrushEvent } from 'd3-brush'\nimport { Selection } from 'd3-selection'\n\n// Core\nimport { XYComponentCore } from 'core/xy-component'\n\n// Utils\nimport { isNumber, clamp } from 'utils/data'\nimport { smartTransition } from 'utils/d3'\n\n// Types\nimport { Arrangement } from 'types/position'\n\n// Config\nimport { BrushDefaultConfig, BrushConfigInterface } from './config'\n\n// Local Types\nimport { BrushDirection, BrushHandleType } from './types'\n\n// Styles\nimport * as s from './style'\n\nexport class Brush<Datum> extends XYComponentCore<Datum, BrushConfigInterface<Datum>> {\n  static selectors = s\n  protected _defaultConfig = BrushDefaultConfig as BrushConfigInterface<Datum>\n  clippable = false // Don't apply clipping path to this component. See XYContainer\n  public config: BrushConfigInterface<Datum> = this._defaultConfig\n  brush: Selection<SVGGElement, unknown, SVGGElement, unknown>\n  unselectedRange: Selection<SVGRectElement, BrushHandleType, SVGGElement, unknown>\n  handleLines: Selection<SVGLineElement, BrushHandleType, SVGGElement, unknown>\n  brushBehaviour: BrushBehavior<unknown> = brushX()\n  events = {\n    [Brush.selectors.brush]: {},\n  }\n\n  private _selection: [number, number] | null = null\n  private _firstRender = true\n\n  constructor (config?: BrushConfigInterface<Datum>) {\n    super()\n    if (config) this.setConfig(config)\n\n    const directions: BrushHandleType[] = [{ type: BrushDirection.West }, { type: BrushDirection.East }]\n    this.unselectedRange = this.g\n      .selectAll(`.${s.unselected}`)\n      .data(directions)\n      .enter().append('rect')\n      .attr('class', s.unselected)\n\n    this.brush = this.g\n      .append('g')\n      .attr('class', s.brush)\n\n    this.handleLines = this.g\n      .selectAll(`.${s.handleLine}`)\n      .data(directions)\n      .enter().append('line')\n      .attr('class', s.handleLine)\n  }\n\n  _render (customDuration?: number): void {\n    const { brushBehaviour, config } = this\n    const duration = isNumber(customDuration) ? customDuration : config.duration\n    const xScale = this.xScale\n\n    brushBehaviour\n      .extent([[0, 0], [this._width, this._height]])\n      .on('start', this._onBrushStart.bind(this))\n      .on('brush', this._onBrushMove.bind(this))\n      .on('end', this._onBrushEnd.bind(this))\n\n    this.brush\n      .call(brushBehaviour)\n      .classed('non-draggable', !config.draggable)\n\n    const yRange = [this._height, 0]\n    const h = yRange[0] - yRange[1]\n\n    this.g.selectAll('.handle')\n      .attr('y', yRange[1])\n      .attr('height', h)\n\n    this.unselectedRange\n      .attr('y', yRange[1])\n      .attr('height', h)\n\n    this.handleLines\n      .attr('y1', yRange[1] + 10)\n      .attr('y2', yRange[1] + h - 10)\n\n    // We save the X scale range and set it to the available horizontal space to calculate the selection range in pixels correctly\n    const xRange = [0, this._width]\n    const xScaleRange = xScale.range()\n    xScale.range(xRange)\n    const selectionMin = clamp(xScale((config.selection || this._selection)?.[0]) ?? 0, xRange[0], xRange[1])\n    const selectionMax = clamp(xScale((config.selection || this._selection)?.[1]) ?? 0, xRange[0], xRange[1])\n    xScale.range(xScaleRange) // Restore the X scale range\n\n    const selectionLength = selectionMax - selectionMin\n    const brushRange = (selectionLength ? [selectionMin, selectionMax] : xRange) as [number, number]\n    this._positionHandles(brushRange)\n\n    smartTransition(this.brush, duration)\n      .call(brushBehaviour.move, brushRange) // Sets up the brush and calls brush events\n      .on('end interrupt', () => { this._firstRender = false })\n      // We track the first render to not trigger user events on component initialization\n    if (!duration) this._firstRender = false\n  }\n\n  _updateSelection (s: [number, number]): void {\n    const xRange = [0, this._width]\n    this.unselectedRange\n      .attr('x', d => d.type === BrushDirection.West ? xRange[0] : s[1])\n      .attr('width', d => {\n        const length = d.type === BrushDirection.West ? s[0] - xRange[0] : xRange[1] - s[1]\n        const lengthClamped = clamp(length, 0, xRange[1] - xRange[0])\n        return lengthClamped\n      })\n\n    this._positionHandles(s)\n\n    // D3 sets brush handle height to be too long, so we need to update it\n    const yRange = [this._height, 0]\n    const h = yRange[0] - yRange[1]\n    this.g.selectAll('.handle')\n      .attr('y', yRange[1])\n      .attr('height', h)\n  }\n\n  private _positionHandles (s: [number, number]): void {\n    const { config } = this\n\n    this.brush.selectAll<SVGRectElement, BrushHandleType>('.handle')\n      .attr('width', config.handleWidth)\n      .attr('x', d => {\n        if (!s) return 0\n        const west = d.type === BrushDirection.West\n        const inside = config.handlePosition === Arrangement.Inside\n\n        if (west) return s[0] + (inside ? 0 : -config.handleWidth)\n        else return s[1] + (inside ? -config.handleWidth : 0)\n      })\n\n    this.handleLines\n      .attr('transform', d => {\n        if (!s) return null\n        const west = d.type === BrushDirection.West\n        const inside = config.handlePosition === Arrangement.Inside\n        return `translate(${west\n          ? s[0] - (-1) ** Number(inside) * config.handleWidth / 2\n          : s[1] + (-1) ** Number(inside) * config.handleWidth / 2},0)`\n      })\n  }\n\n  _onBrush (event: D3BrushEvent<Datum>): void {\n    const { config } = this\n    const xScale = this.xScale\n    const xRange = [0, this._width]\n    const s = (event?.selection || xRange) as [number, number]\n    const userDriven = !!event?.sourceEvent\n    // Handle edge cases:\n    // (event?.selection === null) happens when user clicks to reset the selection\n    // (s?.[0] === s?.[1]) happens when user drags the selection out of range\n    if (userDriven && (\n      (event?.selection === null) || // happens when user clicks to reset the selection\n      (s?.[0] === s?.[1]) || // happens when user drags the selection out of range\n      (s?.[0] < xRange[0]) || //\n      (s?.[0] > xRange[1]) || // happens when you drag the brush and the domain updates\n      (s?.[1] < xRange[0]) || // to a smaller one and brush goes out of range\n      (s?.[1] > xRange[1]) //\n    )) {\n      this.brush.call(this.brushBehaviour.move, xRange) // Will trigger the 'brush end' callback with `range`\n      return\n    }\n\n    // When you reset selection by clicking on a non-selected brush area, D3 triggers the brush event twice.\n    // The first call will have equal selection coordinates (e.g. [441, 441]), the second call will have the full range (e.g. [0, 700]).\n    // To avoid unnecessary render from the first call we skip it\n    if (s[0] !== s[1] && isNumber(s[0]) && isNumber(s[1])) {\n      // We save the X scale range and set it to the available horizontal space to invert the selection correctly\n      const xScaleRange = xScale.range()\n      xScale.range(xRange)\n      const selectedDomain = s.map(n => +xScale.invert(n)) as [number, number]\n\n      if (userDriven) {\n        // Constraint the selection if configured\n        const xDomain = xScale.domain() as [number, number]\n        const xDomainLength = Math.abs(xDomain[1] - xDomain[0])\n        const selectionLength = Math.abs(selectedDomain[1] - selectedDomain[0])\n\n        if (config.selectionMinLength >= xDomainLength) {\n          console.warn('Unovis | Brush: Configured `selectionMinLength` is bigger than the brush domain')\n        }\n\n        if ((selectionLength < config.selectionMinLength) && (config.selectionMinLength < xDomainLength)) {\n          const selection = config.selection ?? this._selection\n          const range = [xScale(selection[0]), xScale(selection[1])] as [number, number]\n          this.brush.call(this.brushBehaviour.move, range) // Will trigger the 'brush end' callback with `range`\n          // Restore the X scale range\n          xScale.range(xScaleRange)\n          return\n        } else {\n          this._selection = selectedDomain\n          // Restore the X scale range\n          xScale.range(xScaleRange)\n        }\n      }\n\n      this._updateSelection(s)\n      if (!this._firstRender) config.onBrush(selectedDomain, event, userDriven)\n    }\n  }\n\n  _onBrushStart (event: D3BrushEvent<Datum>): void {\n    const { config } = this\n\n    this._onBrush(event)\n    if (!this._firstRender) config.onBrushStart(this._selection, event, !!event?.sourceEvent)\n  }\n\n  _onBrushMove (event: D3BrushEvent<Datum>): void {\n    const { config } = this\n\n    this._onBrush(event)\n    if (!this._firstRender) config.onBrushMove(this._selection, event, !!event?.sourceEvent)\n  }\n\n  _onBrushEnd (event: D3BrushEvent<Datum>): void {\n    const { config } = this\n\n    this._onBrush(event)\n    if (!this._firstRender) config.onBrushEnd(this._selection, event, !!event?.sourceEvent)\n  }\n}\n", "/* eslint-disable @typescript-eslint/naming-convention */\nimport { SymbolType } from 'types/symbol'\n\nexport interface BulletLegendItemInterface {\n  name: string | number;\n  color?: string;\n  className?: string;\n  shape?: BulletShape;\n  inactive?: boolean;\n  hidden?: boolean;\n  pointer?: boolean;\n}\n\nexport const BulletShape = {\n  ...SymbolType,\n  Line: 'line',\n} as const\n\nexport type BulletShape = typeof BulletShape[keyof typeof BulletShape]\n\nexport enum BulletLegendOrientation {\n  Horizontal = 'horizontal',\n  Vertical = 'vertical',\n}\n", "// Local Types\nimport { GenericAccessor } from 'types/accessor'\nimport { BulletLegendItemInterface, BulletShape, BulletLegendOrientation } from './types'\n\nexport interface BulletLegendConfigInterface {\n  /** Legend items. Array of `BulletLegendItemInterface`:\n   * ```\n   * {\n   *   name: string | number;\n   *   color?: string;\n   *   shape?: BulletShape;\n   *   inactive?: boolean;\n   *   hidden?: boolean;\n   *   pointer?: boolean;\n   * }\n   * ```\n  * Default: `[]` */\n  items: BulletLegendItemInterface[];\n  /** Apply a specific class to the labels. Default: `''` */\n  labelClassName?: string;\n  /** Callback function for the legend item click. Default: `undefined` */\n  onLegendItemClick?: ((d: BulletLegendItemInterface, i: number) => void);\n  /** Label text (<span> element) font-size CSS. Default: `null` */\n  labelFontSize?: string | null;\n  /** Label text (<span> element) max-width CSS property. Default: `null` */\n  labelMaxWidth?: string | null;\n  /** Bullet shape size, mapped to the width and height CSS properties. Default: `null` */\n  bulletSize?: string | null;\n  /** Bullet shape enum value or accessor function. Default: `d => d.shape ?? BulletShape.Circle */\n  bulletShape?: GenericAccessor<BulletShape, BulletLegendItemInterface>;\n  /** Legend orientation. When set to `BulletLegendOrientation.Vertical`, each legend item will\n   * start on a new line. Default: `BulletLegendOrientation.Horizontal` */\n  orientation?: BulletLegendOrientation | string;\n  /** If set to true, the legend will be rendered directly into the HTML element provided to the constructor\n   * without creating additional `div` element. Default: `false` */\n  renderIntoProvidedDomNode?: boolean;\n}\n\nexport const BulletLegendDefaultConfig: BulletLegendConfigInterface = {\n  items: [],\n  labelClassName: '',\n  onLegendItemClick: undefined,\n  labelFontSize: null,\n  labelMaxWidth: null,\n  bulletSize: null,\n  bulletShape: d => d.shape ?? BulletShape.Circle,\n  orientation: BulletLegendOrientation.Horizontal,\n  renderIntoProvidedDomNode: false,\n}\n", "import { Selection, select } from 'd3-selection'\nimport { symbol } from 'd3-shape'\n\n// Types\nimport { ColorAccessor } from 'types/accessor'\nimport { Symbol, SymbolType } from 'types/symbol'\n\n// Utils\nimport { getColor } from 'utils/color'\nimport { getString } from 'utils/data'\n\n// Constants\nimport { PATTERN_SIZE_PX } from 'styles/patterns'\n\n// Local types\nimport { BulletLegendConfigInterface } from '../config'\nimport { BulletShape, BulletLegendItemInterface } from '../types'\n\n// Size with respect to the viewBox. We use this to compute path data which is independent of the\n// the configured size.\nconst BULLET_SIZE = PATTERN_SIZE_PX * 3\n\n// Different shapes need different scaling to fit the full size\nconst shapeScale: Record<SymbolType, number> = {\n  [BulletShape.Circle]: Math.PI / 4,\n  [BulletShape.Cross]: 5 / 9,\n  [BulletShape.Diamond]: Math.sqrt(3) / 6,\n  [BulletShape.Square]: 1,\n  [BulletShape.Star]: 0.3,\n  [BulletShape.Triangle]: Math.sqrt(3) / 4,\n  [BulletShape.Wye]: 5 / 11,\n}\n\nexport function createBullets (\n  container: Selection<HTMLSpanElement, BulletLegendItemInterface, HTMLElement, unknown>\n): void {\n  container.each((d, i, els) => {\n    select(els[i]).append('svg')\n      .attr('width', '100%')\n      .attr('height', '100%')\n      .append('path')\n  })\n}\n\nexport function updateBullets (\n  container: Selection<SVGElement, BulletLegendItemInterface, HTMLElement, unknown>,\n  config: BulletLegendConfigInterface,\n  colorAccessor: ColorAccessor<BulletLegendItemInterface>\n): void {\n  container.each((d, i, els) => {\n    const shape = getString(d, config.bulletShape, i) as BulletShape\n    const color = getColor(d, colorAccessor, i)\n    const width = BULLET_SIZE\n    const height = shape === BulletShape.Line ? BULLET_SIZE / 2.5 : BULLET_SIZE\n\n    const selection = select(els[i]).select('svg')\n      .attr('viewBox', `0 0 ${width} ${height}`)\n\n    const bulletPath = selection.select<SVGPathElement>('path')\n      .attr('stroke', color)\n\n    const opacity = d.inactive ? 'var(--vis-legend-bullet-inactive-opacity)' : 1\n    if (shape === BulletShape.Line) {\n      bulletPath\n        .attr('d', `M0,${height / 2} L${width / 2},${height / 2} L${width},${height / 2}`)\n        .attr('transform', null)\n        .style('opacity', opacity)\n        .style('stroke-width', '3px')\n        .style('fill', null)\n        .style('fill-opacity', null)\n        .style('marker-start', 'none')\n        .style('marker-end', 'none')\n    } else {\n      const symbolGen = symbol()\n        .type(Symbol[shape])\n        .size(width * height * shapeScale[shape])\n\n      const scale = (width - 2) / width\n      let dy = height / 2\n      switch (shape) {\n        case BulletShape.Triangle:\n          dy += height / 8\n          break\n        case BulletShape.Star:\n          dy += height / 16\n          break\n        case BulletShape.Wye:\n          dy -= height / 16\n          break\n      }\n\n      bulletPath\n        .attr('d', symbolGen)\n        .attr('transform', `translate(${width / 2}, ${Math.round(dy)}) scale(${scale})`)\n        .style('stroke-width', '1px')\n        .style('opacity', null)\n        .style('fill', color)\n        .style('fill-opacity', opacity)\n    }\n  })\n}\n", "import { css, injectGlobal } from '@emotion/css'\n\nexport const root = css`\n  label: bullet-legend-component;\n`\n\nexport const variables = injectGlobal`\n  :root {\n    // Undefined by default to allow proper fallback to var(--vis-font-family)\n    /* --vis-legend-font-family: */\n\n    --vis-legend-label-color: #6c778c;\n    --vis-legend-label-max-width: 300px;\n    --vis-legend-label-font-size: 12px;\n    --vis-legend-bullet-size: 9px;\n    --vis-legend-bullet-inactive-opacity: 0.15;\n    --vis-legend-item-spacing: 20px;\n    --vis-legend-vertical-item-spacing: 5px;\n    --vis-legend-bullet-label-spacing: 8px;\n\n    --vis-dark-legend-label-color: #eee;\n  }\n\n  body.theme-dark ${`.${root}`} {\n    --vis-legend-label-color: var(--vis-dark-legend-label-color);\n  }\n\n  body.theme-patterns {\n    --vis-legend-bullet-size: 14px;\n  }\n`\n\nexport const item = css`\n  label: legendItem;\n  display: inline-flex;\n  align-items: center;\n  font-family: var(--vis-legend-font-family, var(--vis-font-family));\n  margin-right: var(--vis-legend-item-spacing);\n  white-space: nowrap;\n  cursor: default;\n  user-select: none;\n  max-width: min-content;\n`\n\nexport const itemVertical = css`\n  label: legendItemVertical;\n  display: flex;\n  margin-top: var(--vis-legend-vertical-item-spacing);\n`\n\nexport const clickable = css`\n  cursor: pointer;\n`\n\nexport const label = css`\n  label: legendItemLabel;\n  font-size: var(--vis-legend-label-font-size);\n  display: inline-block;\n  vertical-align: middle;\n  color: var(--vis-legend-label-color);\n  max-width: var(--vis-legend-label-max-width);\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n`\n\nexport const bullet = css`\n  flex: 0 0 auto;\n  label: legendItemBullet;\n  margin-right: var(--vis-legend-bullet-label-spacing);\n  height: var(--vis-legend-bullet-size);\n  width: var(--vis-legend-bullet-size);\n\n  svg {\n    display: block;\n  }\n`\n", "import { select, Selection } from 'd3-selection'\n\n// Utils\nimport { merge } from 'utils/data'\n\n// Config\nimport { BulletLegendDefaultConfig, BulletLegendConfigInterface } from './config'\n\n// Local Types\nimport { BulletLegendItemInterface, BulletLegendOrientation } from './types'\n\n// Modules\nimport { createBullets, updateBullets } from './modules/shape'\n\n// Styles\nimport * as s from './style'\n\nexport class BulletLegend {\n  static selectors = s\n  protected _defaultConfig = BulletLegendDefaultConfig as BulletLegendConfigInterface\n  public config: BulletLegendConfigInterface = this._defaultConfig\n\n  div: Selection<HTMLElement, unknown, null, undefined>\n  element: HTMLElement\n  prevConfig: BulletLegendConfigInterface\n  protected _container: HTMLElement\n\n  private _colorAccessor = (d: BulletLegendItemInterface): string => d.color\n\n  constructor (element: HTMLElement, config?: BulletLegendConfigInterface) {\n    this._container = element\n\n    this.div = config?.renderIntoProvidedDomNode ? select(this._container) : select(this._container).append<HTMLElement>('div')\n    this.div.classed(s.root, true)\n\n    this.element = this.div.node()\n\n    if (config) this.update(config)\n  }\n\n  update (config: BulletLegendConfigInterface): void {\n    this.prevConfig = this.config\n    this.config = merge(this._defaultConfig, config)\n    this.render()\n  }\n\n  render (): void {\n    const { config } = this\n\n    const legendItems = this.div.selectAll<HTMLDivElement, unknown>(`.${s.item}`).data(config.items)\n\n    const legendItemsEnter = legendItems.enter().append('div')\n      .on('click', this._onItemClick.bind(this))\n\n    const legendItemsMerged = legendItemsEnter.merge(legendItems)\n    legendItemsMerged\n      .attr('class', d => `${s.item} ${d.className ?? ''}`)\n      .classed(s.itemVertical, config.orientation === BulletLegendOrientation.Vertical)\n      .classed(s.clickable, d => !!config.onLegendItemClick && this._isItemClickable(d))\n      .attr('title', d => d.name)\n      .style('display', (d: BulletLegendItemInterface) => d.hidden ? 'none' : null)\n\n    // Bullet\n    legendItemsEnter.append('span')\n      .attr('class', s.bullet)\n      .call(createBullets)\n\n    legendItemsMerged.select<SVGElement>(`.${s.bullet}`)\n      .style('width', config.bulletSize)\n      .style('height', config.bulletSize)\n      .style('box-sizing', 'content-box')\n      .call(updateBullets, this.config, this._colorAccessor)\n\n    // Labels\n    legendItemsEnter.append('span')\n      .attr('class', s.label)\n      .classed(config.labelClassName, true)\n      .style('max-width', config.labelMaxWidth)\n      .style('font-size', config.labelFontSize)\n\n    legendItemsMerged.select(`.${s.label}`)\n      .text((d: BulletLegendItemInterface) => d.name)\n\n    legendItems.exit().remove()\n  }\n\n  _isItemClickable (item: BulletLegendItemInterface): boolean {\n    return item.pointer === undefined ? true : item.pointer\n  }\n\n  _onItemClick (event: MouseEvent, d: BulletLegendItemInterface): void {\n    const { config: { onLegendItemClick } } = this\n\n    const legendItems = this.div.selectAll(`.${s.item}`).nodes() as HTMLElement[]\n    const index = legendItems.indexOf(event.currentTarget as HTMLElement)\n    if (onLegendItemClick) onLegendItemClick(d, index)\n  }\n\n  public destroy (): void {\n    if (this.element !== this._container) this.div.remove()\n  }\n}\n", "export interface FlowLegendConfigInterface {\n  /** Custom width of the component.  Default: `undefined` */\n  customWidth?: number;\n  /** Legend items array as string[]. Default: `[]` */\n  items?: string[];\n  /** Color of the flow line. Default: `undefined` */\n  lineColor?: string;\n  /** Color of the flow label. Default: `undefined` */\n  labelColor?: string;\n  /** Font size of flow labels in pixels. Default: `12` */\n  labelFontSize?: number;\n  /** Arrow symbol. Default: `'▶'` */\n  arrowSymbol?: string;\n  /** Color of the arrow. Default: `undefined` */\n  arrowColor?: string;\n  /** Callback function for the legend item click. Default: `undefined` */\n  onLegendItemClick?: ((label?: string, i?: number) => void);\n}\n\nexport const FlowLegendDefaultConfig: FlowLegendConfigInterface = {\n  customWidth: undefined,\n  items: [],\n  labelFontSize: 12,\n  lineColor: undefined,\n  labelColor: undefined,\n  arrowSymbol: '▶',\n  arrowColor: undefined,\n  onLegendItemClick: undefined,\n}\n", "export enum FlowLegendItemType {\n  Label = 'label',\n  Symbol = 'symbol',\n}\n\nexport interface FlowLegendItem {\n  text: string;\n  type: FlowLegendItemType;\n  index: number;\n}\n", "import { css, injectGlobal } from '@emotion/css'\nimport { UNOVIS_ICON_FONT_FAMILY_DEFAULT } from 'styles/index'\n\nexport const root = css`\n  label: flow-legend-component;\n\n  position: relative;\n  user-select: none;\n`\n\nexport const globalStyles = injectGlobal`\n  :root {\n    --vis-flow-legend-label-background: #ffffff;\n    --vis-flow-legend-label-color: #71788a;\n    --vis-flow-legend-link-color: #E5E9F7;\n    --vis-flow-legend-arrow-color: #E5E9F7;\n    --vis-flow-legend-label-padding: 5px 15px;\n    --vis-flow-legend-arrow-padding: 0 10px;\n    /* --vis-flow-legend-arrow-font-family: Undefined by default to allow proper fallback to var(DEFAULT_ICON_FONT_FAMILY)*/\n\n    --vis-dark-flow-legend-label-background: #292b34;\n    --vis-dark-flow-legend-label-color: #E5E9F7;\n    --vis-dark-flow-legend-link-color: #71788a;\n    --vis-dark-flow-legend-arrow-color: #71788a;\n  }\n\n  body.theme-dark ${`.${root}`} {\n    --vis-flow-legend-label-background: var(--vis-dark-flow-legend-label-background);\n    --vis-flow-legend-label-color: var(--vis-dark-flow-legend-label-color);\n    --vis-flow-legend-link-color: var(--vis-dark-flow-legend-link-color);\n    --vis-flow-legend-arrow-color: var(--vis-dark-flow-legend-arrow-color);\n  }\n`\n\nexport const line = (lineColor: string): string => css`\n  label: line;\n\n  height: 2px;\n  width: 100%;\n  background-color: ${lineColor || 'var(--vis-flow-legend-link-color)'};\n  position: absolute;\n  top: 50%;\n`\n\nexport const labels = css`\n  label: labels;\n\n  position: relative;\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n`\n\nexport const item = css`\n  label: item;\n\n  position: relative;\n  max-width: 50px;\n\n  padding: 10px;\n`\n\nexport const clickable = css`\n  cursor: pointer;\n\n  &:hover {\n    text-decoration: underline;\n  }\n`\n\nexport const label = (labelFontSize: number, labelColor: string): string => css`\n  label: label;\n\n  transform: translate(-50%, 0%);\n  margin-left: 7px;\n  background-color: var(--vis-flow-legend-label-background);\n  padding: var(--vis-flow-legend-label-padding);\n  font-size: ${labelFontSize}px;\n  color: ${labelColor || 'var(--vis-flow-legend-label-color)'};\n  display: inline-table;\n  text-align: center;\n`\n\nexport const arrow = (arrowColor: string): string => css`\n  label: arrow;\n\n  font-family: var(--vis-flow-legend-arrow-font-family, ${UNOVIS_ICON_FONT_FAMILY_DEFAULT});\n  font-size: 9px;\n  vertical-align: middle;\n  color: ${arrowColor || 'var(--vis-flow-legend-arrow-color)'};\n  background-color: var(--vis-flow-legend-label-background);\n  padding: var(--vis-flow-legend-arrow-padding);\n  transform: translate(-25%, 0%);\n  display: inline-table;\n  text-align: center;\n`\n", "import { select, Selection } from 'd3-selection'\n\n// Utils\nimport { smartTransition } from 'utils/d3'\nimport { merge } from 'utils/data'\n\n// Config\nimport { FlowLegendDefaultConfig, FlowLegendConfigInterface } from './config'\n\n// Local Types\nimport { FlowLegendItem, FlowLegendItemType } from './types'\n\n// Styles\nimport * as s from './style'\n\nexport class FlowLegend {\n  div: Selection<HTMLDivElement, unknown, null, undefined>\n  element: HTMLElement\n  line: Selection<HTMLDivElement, unknown, null, undefined>\n  labels: Selection<HTMLDivElement, unknown, null, undefined>\n  protected _defaultConfig = FlowLegendDefaultConfig as FlowLegendConfigInterface\n  public config: FlowLegendConfigInterface = this._defaultConfig\n  prevConfig: FlowLegendConfigInterface\n  protected _container: HTMLElement\n\n  constructor (element: HTMLElement, config?: FlowLegendConfigInterface) {\n    this._container = element\n\n    this.div = select(this._container).append('div').attr('class', s.root)\n    this.element = this.div.node()\n\n    this.line = this.div.append('div')\n    this.labels = this.div.append('div').attr('class', s.labels)\n\n    if (config) this.update(config)\n  }\n\n  update (config: FlowLegendConfigInterface): void {\n    this.prevConfig = this.config\n    this.config = merge(this._defaultConfig, config)\n    this.render()\n  }\n\n  render (): void {\n    const { config } = this\n    if (!config.items.length) return\n\n    if (config.customWidth) this.div.style('width', `${config.customWidth}px`)\n\n    // Prepare Data\n    const legendData: FlowLegendItem[] = config.items.reduce((acc, label, i) => {\n      acc.push({\n        text: label,\n        index: i,\n        type: FlowLegendItemType.Label,\n      })\n\n      if (config.arrowSymbol && (acc.length !== config.items.length * 2 - 1)) {\n        acc.push({\n          text: config.arrowSymbol,\n          index: i,\n          type: FlowLegendItemType.Symbol,\n        })\n      }\n      return acc\n    }, [])\n\n    // Draw\n    const legendItems = this.labels.selectAll<HTMLDivElement, FlowLegendItem>(`.${s.item}`)\n      .data(legendData)\n\n    const legendItemsEnter = legendItems.enter()\n      .append('div')\n      .attr('class', s.item)\n      .attr('opacity', 0)\n\n    legendItemsEnter.filter(d => d.type === FlowLegendItemType.Label)\n      .on('click', this._onItemClick.bind(this))\n\n    legendItemsEnter.append('span')\n      .attr('class',\n        d => d.type === FlowLegendItemType.Symbol\n          ? s.arrow(config.arrowColor)\n          : s.label(config.labelFontSize, config.labelColor)\n      )\n      .classed(s.clickable, d => d.type === FlowLegendItemType.Label && !!config.onLegendItemClick)\n\n    const legendItemsMerged = legendItemsEnter.merge(legendItems)\n    smartTransition(legendItemsMerged, 500)\n      .attr('opacity', 1)\n    legendItemsMerged.select('span').html(d => d.text)\n\n    legendItems.exit().remove()\n\n    this.line\n      .attr('class', s.line(config.lineColor))\n      .style('opacity', config.items.length > 1 ? 1 : 0)\n  }\n\n  _onItemClick (event: MouseEvent, d: FlowLegendItem): void {\n    const { config } = this\n\n    if (config.onLegendItemClick) config.onLegendItemClick(d.text, d.index)\n  }\n}\n", "import { XYComponentConfigInterface, XYComponentDefaultConfig } from 'core/xy-component/config'\nimport { Tooltip } from 'components/tooltip'\n\n// Types\nimport { NumericAccessor, ColorAccessor } from 'types/accessor'\nimport { ContinuousScale } from 'types/scale'\nimport { WithOptional } from 'types/misc'\nimport { CrosshairCircle } from './types'\n\n// We extend partial XY config interface because x and y properties are optional for Crosshair\nexport interface CrosshairConfigInterface<Datum> extends WithOptional<XYComponentConfigInterface<Datum>, 'x' | 'y'> {\n  /** Optional accessor function for getting the values along the X axis. Default: `undefined` */\n  x?: NumericAccessor<Datum>;\n  /** Optional single of multiple accessor functions for getting the values along the Y axis. Default: `undefined` */\n  y?: NumericAccessor<Datum> | NumericAccessor<Datum>[];\n  /** Optional color array or color accessor function for crosshair circles. Default: `d => d.color` */\n  color?: ColorAccessor<Datum>;\n  /** Optional stroke color accessor function for crosshair circles. Default: `undefined` */\n  strokeColor?: ColorAccessor<Datum>;\n  /** Optional stroke width for crosshair circles. Default: `undefined` */\n  strokeWidth?: NumericAccessor<Datum>;\n  /** Separate array of accessors for stacked components (eg StackedBar, Area). Default: `undefined` */\n  yStacked?: NumericAccessor<Datum>[];\n  /** Baseline accessor function for stacked values, useful with stacked areas. Default: `null` */\n  baseline?: NumericAccessor<Datum>;\n  /** An instance of the Tooltip component to be used with Crosshair. Default: `undefined` */\n  tooltip?: Tooltip | undefined;\n  /** Tooltip template accessor. The function is supposed to return either a valid HTML string or an HTMLElement. Default: `d => ''` */\n  template?: (data: Datum, x: number | Date) => string | HTMLElement;\n  /** Hide Crosshair when the corresponding element is far from mouse pointer. Default: `true` */\n  hideWhenFarFromPointer?: boolean;\n  /** Distance in pixels to check in the hideWhenFarFromPointer condition. Default: `100` */\n  hideWhenFarFromPointerDistance?: number;\n  /** Snap to the nearest data point.\n   * If disabled, the tooltip template will receive only the horizontal position of the crosshair and you'll be responsible\n   * for getting the underlying data records and crosshair circles (see the `getCircles` configuration option).\n   * Default: `true`\n  */\n  snapToData?: boolean;\n  /** Custom function for setting up the crosshair circles, usually needed when `snapToData` is set to `false`.\n   * The function receives the horizontal position of the crosshair (in the data space, not in pixels), the data array\n   * and the `yScale` instance to help you calculate the correct vertical position of the circles.\n   * It has to return an array of the CrosshairCircle objects: `{ y: number; color: string; opacity?: number }[]`.\n   * Default: `undefined`\n  */\n  getCircles?: (x: number | Date | Date, data: Datum[], yScale: ContinuousScale) => CrosshairCircle[];\n}\n\nexport const CrosshairDefaultConfig: CrosshairConfigInterface<unknown> = {\n  ...XYComponentDefaultConfig,\n  yStacked: undefined,\n  baseline: null,\n  duration: 100,\n  tooltip: undefined,\n  template: <Datum>(d: Datum, x: number | Date): string => '',\n  hideWhenFarFromPointer: true,\n  hideWhenFarFromPointerDistance: 100,\n  snapToData: true,\n  getCircles: undefined,\n  color: undefined,\n  strokeColor: undefined,\n  strokeWidth: undefined,\n}\n\n", "import { css, injectGlobal } from '@emotion/css'\n\nexport const globalStyles = injectGlobal`\n  :root {\n    --vis-crosshair-line-stroke-color: #888;\n    --vis-crosshair-line-stroke-width: 1px;\n    --vis-crosshair-line-stroke-opacity: 1;\n    --vis-crosshair-circle-stroke-color: #fff;\n    --vis-crosshair-circle-stroke-width: 1px;\n    --vis-crosshair-circle-stroke-opacity: 0.75;\n  }\n`\n\nexport const root = css`\n  label: crosshair-component;\n`\n\nexport const line = css`\n  stroke: var(--vis-crosshair-line-stroke-color);\n  stroke-width: var(--vis-crosshair-line-stroke-width);\n  stroke-opacity: var(--vis-crosshair-line-stroke-opacity);\n  pointer-events: none;\n`\n\nexport const circle = css`\n  stroke: var(--vis-crosshair-circle-stroke-color);\n  stroke-width: var(--vis-crosshair-circle-stroke-width);\n  stroke-opacity: var(--vis-crosshair-circle-stroke-opacity);\n  pointer-events: none;\n`\n", "import { Selection, pointer } from 'd3-selection'\nimport { easeLinear } from 'd3-ease'\n\n// Core\nimport { XYComponentCore } from 'core/xy-component'\nimport { Tooltip } from 'components/tooltip'\n\n// Utils\nimport { isNumber, isArray, getNumber, clamp, getStackedValues, getNearest, isFunction } from 'utils/data'\nimport { smartTransition } from 'utils/d3'\nimport { getColor } from 'utils/color'\n\n// Types\nimport { Position } from 'types/position'\n\n// Local Types\nimport { CrosshairAccessors, CrosshairCircle } from './types'\n\n// Config\nimport { CrosshairDefaultConfig, CrosshairConfigInterface } from './config'\n\n// Styles\nimport * as s from './style'\n\nexport class Crosshair<Datum> extends XYComponentCore<Datum, CrosshairConfigInterface<Datum>> {\n  static selectors = s\n  clippable = true // Don't apply clipping path to this component. See XYContainer\n  protected _defaultConfig = CrosshairDefaultConfig as CrosshairConfigInterface<Datum>\n  public config: CrosshairConfigInterface<Datum> = this._defaultConfig\n  container: Selection<SVGSVGElement, any, SVGSVGElement, any>\n  line: Selection<SVGLineElement, any, SVGElement, any>\n  x = 0\n  datum: Datum\n  datumIndex: number\n  show = false\n  private _animFrameId: number = null\n\n  /** Tooltip component to be used by Crosshair if not provided by the config.\n   * This property is supposed to be set externally by a container component like XYContainer. */\n  public tooltip: Tooltip\n\n  /** Accessors passed externally (e.g. from XYContainer) */\n  private _accessors: CrosshairAccessors<Datum> = {\n    x: undefined,\n    y: undefined,\n    yStacked: undefined,\n    baseline: undefined,\n  }\n\n  public set accessors (accessors: CrosshairAccessors<Datum>) { this._accessors = accessors }\n  public get accessors (): CrosshairAccessors<Datum> {\n    const { config } = this\n\n    const hasConfig = !!(config.x || config.y || config.yStacked)\n    const x = hasConfig ? config.x : this._accessors.x\n    const yAcc = hasConfig ? config.y : this._accessors.y\n    const y = yAcc ? (isArray(yAcc) ? yAcc : [yAcc]) : undefined\n    const yStacked = hasConfig ? config.yStacked : this._accessors.yStacked\n    const baseline = config.baseline ?? this._accessors.baseline\n\n    return { x, y, yStacked, baseline }\n  }\n\n  constructor (config?: CrosshairConfigInterface<Datum>) {\n    super()\n    if (config) this.setConfig(config)\n\n    this.g.style('opacity', this.show ? 1 : 0)\n    this.line = this.g.append('line')\n      .attr('class', s.line)\n  }\n\n  setContainer (containerSvg: Selection<SVGSVGElement, unknown, SVGSVGElement, unknown>): void {\n    // Set up mousemove event for Crosshair\n    this.container = containerSvg\n    this.container.on('mousemove.crosshair', this._onMouseMove.bind(this))\n    this.container.on('mouseout.crosshair', this._onMouseOut.bind(this))\n  }\n\n  _render (customDuration?: number): void {\n    const { config } = this\n    if (config.snapToData && !this.datum) return\n    const duration = isNumber(customDuration) ? customDuration : config.duration\n\n    smartTransition(this.g, duration)\n      .style('opacity', this.show ? 1 : 0)\n\n    this.line\n      .attr('y1', 0)\n      .attr('y1', this._height)\n\n    smartTransition(this.line, duration, easeLinear)\n      .attr('x1', this.x)\n      .attr('x2', this.x)\n\n    const circleData = this.getCircleData()\n    const circles = this.g\n      .selectAll<SVGCircleElement, CrosshairCircle>('circle')\n      .data(circleData, (d, i) => d.id ?? i)\n\n    const circlesEnter = circles.enter()\n      .append('circle')\n      .attr('class', s.circle)\n      .attr('r', 0)\n      .attr('cx', this.x)\n      .attr('cy', d => d.y)\n      .style('fill', d => d.color)\n      .style('stroke', d => d.strokeColor)\n      .style('stroke-width', d => d.strokeWidth)\n\n    smartTransition(circlesEnter.merge(circles), duration, easeLinear)\n      .attr('cx', this.x)\n      .attr('cy', d => d.y)\n      .attr('r', 4)\n      .style('opacity', d => d.opacity)\n      .style('fill', d => d.color)\n      .style('stroke', d => d.strokeColor)\n      .style('stroke-width', d => d.strokeWidth)\n\n    circles.exit().remove()\n  }\n\n  hide (): void {\n    this._onMouseOut()\n  }\n\n  _onMouseMove (event: MouseEvent): void {\n    const { config, datamodel, element } = this\n    if (!this.accessors.x && datamodel.data?.length) {\n      console.warn('Unovis | Crosshair: X accessor function has not been configured. Please check if it\\'s present in the configuration object')\n    }\n    const [x] = pointer(event, element)\n    const xRange = this.xScale.range()\n\n    if (config.snapToData) {\n      if (!this.accessors.y && !this.accessors.yStacked && datamodel.data?.length) {\n        console.warn('Unovis | Crosshair: Y accessors have not been configured. Please check if they\\'re present in the configuration object')\n      }\n      const scaleX = this.xScale\n      const valueX = scaleX.invert(x) as number\n\n      this.datum = getNearest(datamodel.data, valueX, this.accessors.x)\n      this.datumIndex = datamodel.data.indexOf(this.datum)\n      if (!this.datum) return\n\n      this.x = clamp(Math.round(scaleX(getNumber(this.datum, this.accessors.x, this.datumIndex))), 0, this._width)\n\n      // Show the crosshair only if it's in the chart range and not far from mouse pointer (if configured)\n      this.show = (this.x >= 0) && (this.x <= this._width) && (!config.hideWhenFarFromPointer || (Math.abs(this.x - x) < config.hideWhenFarFromPointerDistance))\n    } else {\n      const tolerance = 2 // Show the crosshair when it is at least 2 pixels close to the chart area\n      this.x = clamp(x, xRange[0], xRange[1])\n      this.show = (x >= (xRange[0] - tolerance)) && (x <= (xRange[1] + tolerance))\n    }\n\n    window.cancelAnimationFrame(this._animFrameId)\n    this._animFrameId = window.requestAnimationFrame(() => {\n      this._render()\n    })\n\n    if (this.show) this._showTooltip(event)\n    else this._hideTooltip()\n  }\n\n  _onMouseOut (): void {\n    this.show = false\n\n    window.cancelAnimationFrame(this._animFrameId)\n    this._animFrameId = window.requestAnimationFrame(() => {\n      this._render()\n    })\n    this._hideTooltip()\n  }\n\n  _showTooltip (event: MouseEvent): void {\n    const { config } = this\n    const tooltip = config.tooltip ?? this.tooltip\n    if (!tooltip) return\n\n    const container = tooltip.getContainer() || this.container.node()\n    const [x, y] = tooltip.isContainerBody() ? [event.clientX, event.clientY] : pointer(event, container)\n    const content = config.template(this.datum, this.xScale.invert(this.x))\n    // Force set `followCursor` to `true` because we don't want Crosshair's tooltip to be hoverable\n    tooltip.config.followCursor = true\n\n    // Set tooltip placement based on Crosshair's position (left / right)\n    if (!tooltip.config.horizontalPlacement || tooltip.config.horizontalPlacement === Position.Auto) {\n      const xRelative = tooltip.isContainerBody() ? x - this.container.node().getBoundingClientRect().left : x\n      tooltip.overrideHorizontalPlacement(xRelative > this._containerWidth / 2 ? Position.Left : Position.Right)\n    }\n\n    if (content) tooltip.show(content, { x, y })\n  }\n\n  _hideTooltip (): void {\n    const { config } = this\n    const tooltip = config.tooltip ?? this.tooltip\n    tooltip?.hide()\n  }\n\n  // We don't want Crosshair to be be taken in to account in domain calculations\n  getYDataExtent (): number[] {\n    return [undefined, undefined]\n  }\n\n  private getCircleData (): CrosshairCircle[] {\n    const { config, datamodel: { data } } = this\n\n    if (isFunction(config.getCircles)) return config.getCircles(this.xScale.invert(this.x), data, this.yScale)\n\n    if (config.snapToData && this.datum) {\n      const yAccessors = this.accessors.y ?? []\n      const yStackedAccessors = this.accessors.yStacked ?? []\n      const baselineValue = getNumber(this.datum, this.accessors.baseline, this.datumIndex) || 0\n      const stackedValues: CrosshairCircle[] = getStackedValues(this.datum, this.datumIndex, ...yStackedAccessors)\n        .map((value, index, arr) => ({\n          y: this.yScale(value + baselineValue),\n          opacity: isNumber(getNumber(this.datum, yStackedAccessors[index])) ? 1 : 0,\n          color: getColor(this.datum, config.color, index),\n          strokeColor: config.strokeColor ? getColor(this.datum, config.strokeColor, index) : undefined,\n          strokeWidth: config.strokeWidth ? getNumber(this.datum, config.strokeWidth, index) : undefined,\n        }))\n\n      const regularValues: CrosshairCircle[] = yAccessors\n        .map((a, index) => {\n          const value = getNumber(this.datum, a)\n          return {\n            y: this.yScale(value),\n            opacity: isNumber(value) ? 1 : 0,\n            color: getColor(this.datum, config.color, stackedValues.length + index),\n            strokeColor: config.strokeColor ? getColor(this.datum, config.strokeColor, index) : undefined,\n            strokeWidth: config.strokeWidth ? getNumber(this.datum, config.strokeWidth, index) : undefined,\n          }\n        })\n\n      return stackedValues.concat(regularValues)\n    }\n\n    return []\n  }\n}\n", "import { XYComponentConfigInterface, XYComponentDefaultConfig } from 'core/xy-component/config'\n\n// Types\nimport { WithOptional } from 'types/misc'\nimport { ColorAccessor, NumericAccessor, StringAccessor } from 'types/accessor'\n\nexport interface TimelineConfigInterface<Datum> extends WithOptional<XYComponentConfigInterface<Datum>, 'y'> {\n  /** Timeline item color accessor function. Default: `d => d.color` */\n  color?: ColorAccessor<Datum>;\n  /** Width of the timeline items. Default: `8` */\n  lineWidth?: NumericAccessor<Datum>;\n  /** Display rounded ends for timeline items. Default: `true` */\n  lineCap?: boolean;\n  /** Timeline row height. Default: `22` */\n  rowHeight?: number;\n  /** Timeline item length accessor function. Default: `d => d.length` */\n  length?: NumericAccessor<Datum>;\n  /** Timeline item type accessor function. Records of one type will be plotted in one row. Default: `d => d.type` */\n  type?: StringAccessor<Datum>;\n  /** Configurable Timeline item cursor when hovering over. Default: `null` */\n  cursor?: StringAccessor<Datum>;\n  /** Show item type labels when set to `true`. Default: `false` */\n  showLabels?: boolean;\n  /** Fixed label width in pixels. Labels longer than the specified value will be trimmed. Default: `undefined` */\n  labelWidth?: number;\n  /** Maximum label width in pixels. Labels longer than the specified value will be trimmed. Default: `120` */\n  maxLabelWidth?: number;\n  /** Alternating row colors. Default: `true` */\n  alternatingRowColors?: boolean;\n  /** Scrolling callback function: `(scrollTop: number) => void`. Default: `undefined` */\n  onScroll?: (scrollTop: number) => void;\n  /** Sets the minimum line length to 1 pixel for better visibility of small values. Default: `false` */\n  showEmptySegments?: boolean;\n}\n\nexport const TimelineDefaultConfig: TimelineConfigInterface<unknown> = {\n  ...XYComponentDefaultConfig,\n  id: undefined,\n  color: (d: unknown): string => (d as { color: string }).color,\n  lineWidth: 8,\n  lineCap: false,\n  rowHeight: 22,\n  length: (d: unknown): number => (d as { length: number }).length,\n  type: (d: unknown): string => (d as { type: string }).type,\n  cursor: null,\n  labelWidth: undefined,\n  showLabels: false,\n  maxLabelWidth: 120,\n  alternatingRowColors: true,\n  onScroll: undefined,\n  showEmptySegments: false,\n}\n", "import { css, injectGlobal } from '@emotion/css'\n\nexport const root = css`\n  label: timeline-component;\n`\n\nexport const globalStyles = injectGlobal`\n  :root {\n    --vis-timeline-row-even-fill-color: #FFFFFF;\n    --vis-timeline-row-odd-fill-color: #F7FAFC;\n    --vis-timeline-row-background-opacity: 1;\n    --vis-timeline-scrollbar-background-color: #E6E9F3;\n    --vis-timeline-scrollbar-color: #9EA7B8;\n\n    --vis-timeline-label-font-size: 12px;\n    --vis-timeline-label-color: #6C778C;\n\n    --vis-timeline-cursor: default;\n    --vis-timeline-line-color: var(--vis-color-main);\n    --vis-timeline-line-stroke-width: 0;\n    // The line stroke color variable is not defined by default\n    // to allow it to fallback to the corresponding row background color\n    /* --vis-timeline-line-stroke-color: none; */\n\n    --vis-dark-timeline-row-even-fill-color: #292B34;\n    --vis-dark-timeline-row-odd-fill-color: #333742;\n    --vis-dark-timeline-scrollbar-background-color: #292B34;\n    --vis-dark-timeline-scrollbar-color: #6C778C;\n    --vis-dark-timeline-label-color: #EFF5F8;\n  }\n\n  body.theme-dark ${`.${root}`} {\n    --vis-timeline-row-even-fill-color: var(--vis-dark-timeline-row-even-fill-color);\n    --vis-timeline-row-odd-fill-color: var(--vis-dark-timeline-row-odd-fill-color);\n    --vis-timeline-scrollbar-background-color: var(--vis-dark-timeline-scrollbar-background-color);\n    --vis-timeline-scrollbar-color: var(--vis-dark-timeline-scrollbar-color);\n    --vis-timeline-label-color: var(--vis-dark-timeline-label-color);\n  }\n`\n\nexport const background = css`\n  label: background;\n`\n\nexport const lines = css`\n  label: lines;\n`\n\nexport const line = css`\n  label: line;\n  fill: var(--vis-timeline-line-color);\n  cursor: var(--vis-timeline-cursor);\n\n  stroke: var(--vis-timeline-line-stroke-color, var(--vis-timeline-row-even-fill-color));\n  stroke-width: var(--vis-timeline-line-stroke-width);\n\n  &.odd {\n    stroke: var(--vis-timeline-line-stroke-color, var(--vis-timeline-row-odd-fill-color));\n  }\n`\n\nexport const rows = css`\n  label: rows;\n`\n\nexport const row = css`\n  label: row;\n  fill: var(--vis-timeline-row-even-fill-color);\n  opacity: var(--vis-timeline-row-background-opacity);\n`\n\nexport const rowOdd = css`\n  label: row-odd;\n  fill: var(--vis-timeline-row-odd-fill-color);\n`\n\nexport const scrollbar = css`\n  label: scroll-bar;\n`\n\nexport const scrollbarHandle = css`\n  label: scroll-bar-handle;\n  fill: var(--vis-timeline-scrollbar-color);\n`\n\nexport const scrollbarBackground = css`\n  label: scroll-bar-background;\n  fill: var(--vis-timeline-scrollbar-background-color);\n`\n\nexport const labels = css`\n  label: labels;\n`\n\nexport const label = css`\n  label: label;\n  dominant-baseline: middle;\n  font-size: var(--vis-timeline-label-font-size);\n  fill: var(--vis-timeline-label-color);\n  text-anchor: end;\n  user-select: none;\n`\n", "import { select, Selection } from 'd3-selection'\nimport { Transition } from 'd3-transition'\nimport { scaleOrdinal, ScaleOrdinal } from 'd3-scale'\nimport { drag, D3DragEvent } from 'd3-drag'\nimport { max } from 'd3-array'\n\n// Core\nimport { XYComponentCore } from 'core/xy-component'\n\n// Utils\nimport { isNumber, unique, arrayOfIndices, getMin, getMax, getString, getNumber } from 'utils/data'\nimport { smartTransition } from 'utils/d3'\nimport { getColor } from 'utils/color'\nimport { trimSVGText } from 'utils/text'\n\n// Config\nimport { TimelineDefaultConfig, TimelineConfigInterface } from './config'\n\n// Styles\nimport * as s from './style'\n\nexport class Timeline<Datum> extends XYComponentCore<Datum, TimelineConfigInterface<Datum>> {\n  static selectors = s\n  protected _defaultConfig = TimelineDefaultConfig as TimelineConfigInterface<Datum>\n  public config: TimelineConfigInterface<Datum> = this._defaultConfig\n\n  events = {\n    [Timeline.selectors.rows]: {\n      wheel: this._onMouseWheel.bind(this),\n    },\n    [Timeline.selectors.line]: {\n      wheel: this._onMouseWheel.bind(this),\n    },\n  }\n\n  private _background: Selection<SVGRectElement, unknown, SVGGElement, unknown>\n  private _rowsGroup: Selection<SVGGElement, unknown, SVGGElement, unknown>\n  private _linesGroup: Selection<SVGGElement, unknown, SVGGElement, unknown>\n  private _labelsGroup: Selection<SVGGElement, unknown, SVGGElement, unknown>\n  private _scrollBarGroup: Selection<SVGGElement, unknown, SVGGElement, unknown>\n  private _scrollBarBackground: Selection<SVGRectElement, unknown, SVGGElement, unknown>\n  private _scrollBarHandle: Selection<SVGRectElement, unknown, SVGGElement, unknown>\n  private _scrollBarWidth = 5\n  private _scrollDistance = 0\n  private _scrollBarMargin = 5\n  private _maxScroll = 0\n  private _scrollbarHeight = 0\n  private _labelMargin = 5\n\n  constructor (config?: TimelineConfigInterface<Datum>) {\n    super()\n    if (config) this.setConfig(config)\n\n    // Invisible background rect to track events\n    this._background = this.g.append('rect').attr('class', s.background)\n\n    // Group for content\n    this._rowsGroup = this.g.append('g').attr('class', s.rows)\n    this._linesGroup = this.g.append('g').attr('class', s.lines)\n    this._labelsGroup = this.g.append('g').attr('class', s.labels)\n    this._scrollBarGroup = this.g.append('g').attr('class', s.scrollbar)\n\n    // Scroll bar\n    this._scrollBarBackground = this._scrollBarGroup.append('rect')\n      .attr('class', s.scrollbarBackground)\n\n    this._scrollBarHandle = this._scrollBarGroup.append('rect')\n      .attr('class', s.scrollbarHandle)\n\n    // Set up scrollbar drag event\n    const dragBehaviour = drag<SVGRectElement, unknown>()\n      .on('drag', this._onScrollbarDrag.bind(this))\n\n    this._scrollBarHandle.call(dragBehaviour)\n  }\n\n  get bleed (): { top: number; bottom: number; left: number; right: number } {\n    const { config, datamodel: { data } } = this\n\n    // We calculate the longest label width to set the bleed values accordingly\n    let labelsBleed = 0\n    if (config.showLabels) {\n      if (config.labelWidth) labelsBleed = config.labelWidth + this._labelMargin\n      else {\n        const recordLabels = this._getRecordLabels(data)\n        const longestLabel = recordLabels.reduce((acc, val) => acc.length > val.length ? acc : val, '')\n        const label = this._labelsGroup.append('text')\n          .attr('class', s.label)\n          .text(longestLabel)\n          .call(trimSVGText, config.maxLabelWidth)\n        const labelWidth = label.node().getBBox().width\n        this._labelsGroup.empty()\n\n        const tolerance = 1.15 // Some characters are wider than others so we add a little of extra space to take that into account\n        labelsBleed = labelWidth ? tolerance * labelWidth + this._labelMargin : 0\n      }\n    }\n\n    const maxLineWidth = this._getMaxLineWidth()\n    return {\n      top: 0,\n      bottom: 0,\n      left: maxLineWidth / 2 + labelsBleed,\n      right: maxLineWidth / 2 + this._scrollBarWidth + this._scrollBarMargin,\n    }\n  }\n\n  _render (customDuration?: number): void {\n    super._render(customDuration)\n    const { config, datamodel: { data } } = this\n    const duration = isNumber(customDuration) ? customDuration : config.duration\n    const xRange = this.xScale.range()\n    const yRange = this.yScale.range()\n    const yStart = Math.min(...yRange)\n    const yHeight = Math.abs(yRange[1] - yRange[0])\n    const maxLineWidth = this._getMaxLineWidth()\n    const recordLabels = this._getRecordLabels(data)\n    const recordLabelsUnique = unique(recordLabels)\n    const numUniqueRecords = recordLabelsUnique.length\n\n    // Ordinal scale to handle records on the same type\n    const ordinalScale: ScaleOrdinal<string, number> = scaleOrdinal()\n    ordinalScale.range(arrayOfIndices(numUniqueRecords))\n\n    // Invisible Background rect to track events\n    this._background\n      .attr('width', this._width)\n      .attr('height', this._height)\n      .attr('opacity', 0)\n\n    // Labels\n    const labels = this._labelsGroup.selectAll<SVGTextElement, string>(`.${s.label}`)\n      .data(config.showLabels ? recordLabelsUnique : [])\n\n    const labelsEnter = labels.enter().append('text')\n      .attr('class', s.label)\n\n    labelsEnter.merge(labels)\n      .attr('x', xRange[0] - maxLineWidth / 2 - this._labelMargin)\n      .attr('y', (label, i) => yStart + (ordinalScale(label) + 0.5) * config.rowHeight)\n      .text(label => label)\n      .each((label, i, els) => {\n        trimSVGText(select(els[i]), config.labelWidth || config.maxLabelWidth)\n      })\n\n    labels.exit().remove()\n\n    // Row background rects\n    const xStart = xRange[0]\n    const numRows = Math.max(Math.floor(yHeight / config.rowHeight), numUniqueRecords)\n    const recordTypes: (string | undefined)[] = Array(numRows).fill(null).map((_, i) => recordLabelsUnique[i])\n    const rects = this._rowsGroup.selectAll<SVGRectElement, number>(`.${s.row}`)\n      .data(recordTypes)\n\n    const rectsEnter = rects.enter().append('rect')\n      .attr('class', s.row)\n\n    rectsEnter.merge(rects)\n      .classed(s.rowOdd, config.alternatingRowColors ? (_, i) => !(i % 2) : null)\n      .attr('x', xStart - maxLineWidth / 2)\n      .attr('width', xRange[1] - xStart + maxLineWidth)\n      .attr('y', (_, i) => yStart + i * config.rowHeight)\n      .attr('height', config.rowHeight)\n\n    rects.exit().remove()\n\n    // Lines\n    const lines = this._linesGroup.selectAll<SVGRectElement, Datum>(`.${s.line}`)\n      .data(data, (d: Datum, i) => getString(d, config.id, i) ?? [\n        this._getRecordType(d, i), getNumber(d, config.x, i),\n      ].join('-'))\n\n    const linesEnter = lines.enter().append('rect')\n      .attr('class', s.line)\n      .classed(s.rowOdd, config.alternatingRowColors\n        ? (d, i) => !(recordLabelsUnique.indexOf(this._getRecordType(d, i)) % 2)\n        : null)\n      .style('fill', (d, i) => getColor(d, config.color, ordinalScale(this._getRecordType(d, i))))\n      .call(this._positionLines.bind(this), ordinalScale)\n      .attr('transform', 'translate(0, 10)')\n      .style('opacity', 0)\n\n    const linesMerged = linesEnter.merge(lines)\n      .style('fill', (d, i) => getColor(d, config.color, ordinalScale(this._getRecordType(d, i))))\n      .style('cursor', (d, i) => getString(d, config.cursor, i))\n      .call(this._positionLines.bind(this), ordinalScale)\n\n    smartTransition(linesMerged, duration)\n      .attr('transform', 'translate(0, 0)')\n      .style('opacity', 1)\n\n    smartTransition(lines.exit(), duration)\n      .style('opacity', 0)\n      .remove()\n\n    // Scroll Bar\n    const contentBBox = this._rowsGroup.node().getBBox() // We determine content size using the rects group because lines are animated\n    const absoluteContentHeight = contentBBox.height\n    this._scrollbarHeight = yHeight * yHeight / absoluteContentHeight || 0\n    this._maxScroll = Math.max(absoluteContentHeight - yHeight, 0)\n\n    this._scrollBarGroup\n      .attr('transform', `translate(${this._width - this._scrollBarWidth}, ${yStart})`)\n      .attr('opacity', this._maxScroll ? 1 : 0)\n\n    this._scrollBarBackground\n      .attr('width', this._scrollBarWidth)\n      .attr('height', this._height)\n      .attr('rx', this._scrollBarWidth / 2)\n      .attr('ry', this._scrollBarWidth / 2)\n\n    this._scrollBarHandle\n      .attr('width', this._scrollBarWidth)\n      .attr('height', this._scrollbarHeight)\n      .attr('rx', this._scrollBarWidth / 2)\n      .attr('ry', this._scrollBarWidth / 2)\n\n    this._updateScrollPosition(0)\n  }\n\n  private _positionLines (\n    selection: Selection<SVGRectElement, Datum, SVGGElement, unknown> | Transition<SVGRectElement, Datum, SVGGElement, unknown>,\n    ordinalScale: ScaleOrdinal<string, number>\n  ): void {\n    const { config, xScale, yScale } = this\n    const yRange = yScale.range()\n    const yStart = Math.min(...yRange)\n\n    selection.each((d, i, elements) => {\n      const x = getNumber(d, config.x, i)\n      const y = ordinalScale(this._getRecordType(d, i)) * config.rowHeight\n      const length = getNumber(d, config.length, i) ?? 0\n\n      // Rect dimensions\n      const height = getNumber(d, config.lineWidth, i)\n      const width = xScale(x + length) - xScale(x)\n\n      if (width < 0) {\n        console.warn('Unovis | Timeline: Line segments should not have negative lengths. Setting to 0.')\n      }\n\n      select(elements[i])\n        .attr('x', xScale(x))\n        .attr('y', yStart + y + (config.rowHeight - height) / 2)\n        .attr('width', config.showEmptySegments\n          ? Math.max(config.lineCap ? height : 1, width)\n          : Math.max(0, width))\n        .attr('height', height)\n        .attr('rx', config.lineCap ? height / 2 : null)\n    })\n  }\n\n  private _onScrollbarDrag (event: D3DragEvent<any, any, any>): void {\n    const yRange = this.yScale.range()\n    const yHeight = Math.abs(yRange[1] - yRange[0])\n    this._updateScrollPosition(event.dy * this._maxScroll / (yHeight - this._scrollbarHeight))\n  }\n\n  private _onMouseWheel (d: unknown, event: WheelEvent): void {\n    const { config } = this\n\n    this._updateScrollPosition(event?.deltaY)\n    if (this._scrollDistance > 0 && this._scrollDistance < this._maxScroll) event?.preventDefault()\n\n    config.onScroll?.(this._scrollDistance)\n\n    // Programmatically trigger a mousemove event to update Tooltip or Crosshair if they were set up\n    const e = new Event('mousemove')\n    this.element.dispatchEvent(e)\n  }\n\n  private _updateScrollPosition (diff: number): void {\n    const yRange = this.yScale.range()\n    const yHeight = Math.abs(yRange[1] - yRange[0])\n\n    this._scrollDistance += diff\n    this._scrollDistance = Math.max(0, this._scrollDistance)\n    this._scrollDistance = Math.min(this._maxScroll, this._scrollDistance)\n\n    this._linesGroup.attr('transform', `translate(0,${-this._scrollDistance})`)\n    this._rowsGroup.attr('transform', `translate(0,${-this._scrollDistance})`)\n    this._labelsGroup.attr('transform', `translate(0,${-this._scrollDistance})`)\n    const scrollBarPosition = (this._scrollDistance / this._maxScroll * (yHeight - this._scrollbarHeight)) || 0\n    this._scrollBarHandle.attr('y', scrollBarPosition)\n  }\n\n  private _getMaxLineWidth (): number {\n    const { config, datamodel: { data } } = this\n    return max(data, (d, i) => getNumber(d, config.lineWidth, i)) ?? 0\n  }\n\n  private _getRecordType (d: Datum, i: number): string {\n    return getString(d, this.config.type) || `__${i}`\n  }\n\n  private _getRecordLabels (data: Datum[]): string[] {\n    return data.map((d, i) => getString(d, this.config.type) || `${i + 1}`)\n  }\n\n  // Override the default XYComponent getXDataExtent method to take into account line lengths\n  getXDataExtent (): number[] {\n    const { config, datamodel } = this\n    const min = getMin(datamodel.data, config.x)\n    const max = getMax(datamodel.data, (d, i) => getNumber(d, config.x, i) + (getNumber(d, config.length, i) ?? 0))\n    return [min, max]\n  }\n}\n", "export default function(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n", "import ascending from \"./ascending.js\";\n\nexport default function(f) {\n  let delta = f;\n  let compare = f;\n\n  if (f.length === 1) {\n    delta = (d, x) => f(d) - x;\n    compare = ascendingComparator(f);\n  }\n\n  function left(a, x, lo, hi) {\n    if (lo == null) lo = 0;\n    if (hi == null) hi = a.length;\n    while (lo < hi) {\n      const mid = (lo + hi) >>> 1;\n      if (compare(a[mid], x) < 0) lo = mid + 1;\n      else hi = mid;\n    }\n    return lo;\n  }\n\n  function right(a, x, lo, hi) {\n    if (lo == null) lo = 0;\n    if (hi == null) hi = a.length;\n    while (lo < hi) {\n      const mid = (lo + hi) >>> 1;\n      if (compare(a[mid], x) > 0) hi = mid;\n      else lo = mid + 1;\n    }\n    return lo;\n  }\n\n  function center(a, x, lo, hi) {\n    if (lo == null) lo = 0;\n    if (hi == null) hi = a.length;\n    const i = left(a, x, lo, hi - 1);\n    return i > lo && delta(a[i - 1], x) > -delta(a[i], x) ? i - 1 : i;\n  }\n\n  return {left, center, right};\n}\n\nfunction ascendingComparator(f) {\n  return (d, x) => ascending(f(d), x);\n}\n", "export default function(x) {\n  return x === null ? NaN : +x;\n}\n\nexport function* numbers(values, valueof) {\n  if (valueof === undefined) {\n    for (let value of values) {\n      if (value != null && (value = +value) >= value) {\n        yield value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null && (value = +value) >= value) {\n        yield value;\n      }\n    }\n  }\n}\n", "import ascending from \"./ascending.js\";\nimport bisector from \"./bisector.js\";\nimport number from \"./number.js\";\n\nconst ascendingBisect = bisector(ascending);\nexport const bisectRight = ascendingBisect.right;\nexport const bisectLeft = ascendingBisect.left;\nexport const bisectCenter = bisector(number).center;\nexport default bisectRight;\n", "var array = Array.prototype;\n\nexport var slice = array.slice;\nexport var map = array.map;\n", "var e10 = Math.sqrt(50),\n    e5 = Math.sqrt(10),\n    e2 = Math.sqrt(2);\n\nexport default function(start, stop, count) {\n  var reverse,\n      i = -1,\n      n,\n      ticks,\n      step;\n\n  stop = +stop, start = +start, count = +count;\n  if (start === stop && count > 0) return [start];\n  if (reverse = stop < start) n = start, start = stop, stop = n;\n  if ((step = tickIncrement(start, stop, count)) === 0 || !isFinite(step)) return [];\n\n  if (step > 0) {\n    let r0 = Math.round(start / step), r1 = Math.round(stop / step);\n    if (r0 * step < start) ++r0;\n    if (r1 * step > stop) --r1;\n    ticks = new Array(n = r1 - r0 + 1);\n    while (++i < n) ticks[i] = (r0 + i) * step;\n  } else {\n    step = -step;\n    let r0 = Math.round(start * step), r1 = Math.round(stop * step);\n    if (r0 / step < start) ++r0;\n    if (r1 / step > stop) --r1;\n    ticks = new Array(n = r1 - r0 + 1);\n    while (++i < n) ticks[i] = (r0 + i) / step;\n  }\n\n  if (reverse) ticks.reverse();\n\n  return ticks;\n}\n\nexport function tickIncrement(start, stop, count) {\n  var step = (stop - start) / Math.max(0, count),\n      power = Math.floor(Math.log(step) / Math.LN10),\n      error = step / Math.pow(10, power);\n  return power >= 0\n      ? (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1) * Math.pow(10, power)\n      : -Math.pow(10, -power) / (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1);\n}\n\nexport function tickStep(start, stop, count) {\n  var step0 = Math.abs(stop - start) / Math.max(0, count),\n      step1 = Math.pow(10, Math.floor(Math.log(step0) / Math.LN10)),\n      error = step0 / step1;\n  if (error >= e10) step1 *= 10;\n  else if (error >= e5) step1 *= 5;\n  else if (error >= e2) step1 *= 2;\n  return stop < start ? -step1 : step1;\n}\n", "export default function max(values, valueof) {\n  let max;\n  if (valueof === undefined) {\n    for (const value of values) {\n      if (value != null\n          && (max < value || (max === undefined && value >= value))) {\n        max = value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null\n          && (max < value || (max === undefined && value >= value))) {\n        max = value;\n      }\n    }\n  }\n  return max;\n}\n", "export default function min(values, valueof) {\n  let min;\n  if (valueof === undefined) {\n    for (const value of values) {\n      if (value != null\n          && (min > value || (min === undefined && value >= value))) {\n        min = value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null\n          && (min > value || (min === undefined && value >= value))) {\n        min = value;\n      }\n    }\n  }\n  return min;\n}\n", "export default shuffler(Math.random);\n\nexport function shuffler(random) {\n  return function shuffle(array, i0 = 0, i1 = array.length) {\n    let m = i1 - (i0 = +i0);\n    while (m) {\n      const i = random() * m-- | 0, t = array[m + i0];\n      array[m + i0] = array[i + i0];\n      array[i + i0] = t;\n    }\n    return array;\n  };\n}\n", "export default function sum(values, valueof) {\n  let sum = 0;\n  if (valueof === undefined) {\n    for (let value of values) {\n      if (value = +value) {\n        sum += value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if (value = +valueof(value, ++index, values)) {\n        sum += value;\n      }\n    }\n  }\n  return sum;\n}\n", "import {min} from \"d3-array\";\n\nfunction targetDepth(d) {\n  return d.target.depth;\n}\n\nexport function left(node) {\n  return node.depth;\n}\n\nexport function right(node, n) {\n  return n - 1 - node.height;\n}\n\nexport function justify(node, n) {\n  return node.sourceLinks.length ? node.depth : n - 1;\n}\n\nexport function center(node) {\n  return node.targetLinks.length ? node.depth\n      : node.sourceLinks.length ? min(node.sourceLinks, targetDepth) - 1\n      : 0;\n}\n", "export default function constant(x) {\n  return function() {\n    return x;\n  };\n}\n", "import {max, min, sum} from \"d3-array\";\nimport {justify} from \"./align.js\";\nimport constant from \"./constant.js\";\n\nfunction ascendingSourceBreadth(a, b) {\n  return ascendingBreadth(a.source, b.source) || a.index - b.index;\n}\n\nfunction ascendingTargetBreadth(a, b) {\n  return ascendingBreadth(a.target, b.target) || a.index - b.index;\n}\n\nfunction ascendingBreadth(a, b) {\n  return a.y0 - b.y0;\n}\n\nfunction value(d) {\n  return d.value;\n}\n\nfunction defaultId(d) {\n  return d.index;\n}\n\nfunction defaultNodes(graph) {\n  return graph.nodes;\n}\n\nfunction defaultLinks(graph) {\n  return graph.links;\n}\n\nfunction find(nodeById, id) {\n  const node = nodeById.get(id);\n  if (!node) throw new Error(\"missing: \" + id);\n  return node;\n}\n\nfunction computeLinkBreadths({nodes}) {\n  for (const node of nodes) {\n    let y0 = node.y0;\n    let y1 = y0;\n    for (const link of node.sourceLinks) {\n      link.y0 = y0 + link.width / 2;\n      y0 += link.width;\n    }\n    for (const link of node.targetLinks) {\n      link.y1 = y1 + link.width / 2;\n      y1 += link.width;\n    }\n  }\n}\n\nexport default function Sankey() {\n  let x0 = 0, y0 = 0, x1 = 1, y1 = 1; // extent\n  let dx = 24; // nodeWidth\n  let dy = 8, py; // nodePadding\n  let id = defaultId;\n  let align = justify;\n  let sort;\n  let linkSort;\n  let nodes = defaultNodes;\n  let links = defaultLinks;\n  let iterations = 6;\n\n  function sankey() {\n    const graph = {nodes: nodes.apply(null, arguments), links: links.apply(null, arguments)};\n    computeNodeLinks(graph);\n    computeNodeValues(graph);\n    computeNodeDepths(graph);\n    computeNodeHeights(graph);\n    computeNodeBreadths(graph);\n    computeLinkBreadths(graph);\n    return graph;\n  }\n\n  sankey.update = function(graph) {\n    computeLinkBreadths(graph);\n    return graph;\n  };\n\n  sankey.nodeId = function(_) {\n    return arguments.length ? (id = typeof _ === \"function\" ? _ : constant(_), sankey) : id;\n  };\n\n  sankey.nodeAlign = function(_) {\n    return arguments.length ? (align = typeof _ === \"function\" ? _ : constant(_), sankey) : align;\n  };\n\n  sankey.nodeSort = function(_) {\n    return arguments.length ? (sort = _, sankey) : sort;\n  };\n\n  sankey.nodeWidth = function(_) {\n    return arguments.length ? (dx = +_, sankey) : dx;\n  };\n\n  sankey.nodePadding = function(_) {\n    return arguments.length ? (dy = py = +_, sankey) : dy;\n  };\n\n  sankey.nodes = function(_) {\n    return arguments.length ? (nodes = typeof _ === \"function\" ? _ : constant(_), sankey) : nodes;\n  };\n\n  sankey.links = function(_) {\n    return arguments.length ? (links = typeof _ === \"function\" ? _ : constant(_), sankey) : links;\n  };\n\n  sankey.linkSort = function(_) {\n    return arguments.length ? (linkSort = _, sankey) : linkSort;\n  };\n\n  sankey.size = function(_) {\n    return arguments.length ? (x0 = y0 = 0, x1 = +_[0], y1 = +_[1], sankey) : [x1 - x0, y1 - y0];\n  };\n\n  sankey.extent = function(_) {\n    return arguments.length ? (x0 = +_[0][0], x1 = +_[1][0], y0 = +_[0][1], y1 = +_[1][1], sankey) : [[x0, y0], [x1, y1]];\n  };\n\n  sankey.iterations = function(_) {\n    return arguments.length ? (iterations = +_, sankey) : iterations;\n  };\n\n  function computeNodeLinks({nodes, links}) {\n    for (const [i, node] of nodes.entries()) {\n      node.index = i;\n      node.sourceLinks = [];\n      node.targetLinks = [];\n    }\n    const nodeById = new Map(nodes.map((d, i) => [id(d, i, nodes), d]));\n    for (const [i, link] of links.entries()) {\n      link.index = i;\n      let {source, target} = link;\n      if (typeof source !== \"object\") source = link.source = find(nodeById, source);\n      if (typeof target !== \"object\") target = link.target = find(nodeById, target);\n      source.sourceLinks.push(link);\n      target.targetLinks.push(link);\n    }\n    if (linkSort != null) {\n      for (const {sourceLinks, targetLinks} of nodes) {\n        sourceLinks.sort(linkSort);\n        targetLinks.sort(linkSort);\n      }\n    }\n  }\n\n  function computeNodeValues({nodes}) {\n    for (const node of nodes) {\n      node.value = node.fixedValue === undefined\n          ? Math.max(sum(node.sourceLinks, value), sum(node.targetLinks, value))\n          : node.fixedValue;\n    }\n  }\n\n  function computeNodeDepths({nodes}) {\n    const n = nodes.length;\n    let current = new Set(nodes);\n    let next = new Set;\n    let x = 0;\n    while (current.size) {\n      for (const node of current) {\n        node.depth = x;\n        for (const {target} of node.sourceLinks) {\n          next.add(target);\n        }\n      }\n      if (++x > n) throw new Error(\"circular link\");\n      current = next;\n      next = new Set;\n    }\n  }\n\n  function computeNodeHeights({nodes}) {\n    const n = nodes.length;\n    let current = new Set(nodes);\n    let next = new Set;\n    let x = 0;\n    while (current.size) {\n      for (const node of current) {\n        node.height = x;\n        for (const {source} of node.targetLinks) {\n          next.add(source);\n        }\n      }\n      if (++x > n) throw new Error(\"circular link\");\n      current = next;\n      next = new Set;\n    }\n  }\n\n  function computeNodeLayers({nodes}) {\n    const x = max(nodes, d => d.depth) + 1;\n    const kx = (x1 - x0 - dx) / (x - 1);\n    const columns = new Array(x);\n    for (const node of nodes) {\n      const i = Math.max(0, Math.min(x - 1, Math.floor(align.call(null, node, x))));\n      node.layer = i;\n      node.x0 = x0 + i * kx;\n      node.x1 = node.x0 + dx;\n      if (columns[i]) columns[i].push(node);\n      else columns[i] = [node];\n    }\n    if (sort) for (const column of columns) {\n      column.sort(sort);\n    }\n    return columns;\n  }\n\n  function initializeNodeBreadths(columns) {\n    const ky = min(columns, c => (y1 - y0 - (c.length - 1) * py) / sum(c, value));\n    for (const nodes of columns) {\n      let y = y0;\n      for (const node of nodes) {\n        node.y0 = y;\n        node.y1 = y + node.value * ky;\n        y = node.y1 + py;\n        for (const link of node.sourceLinks) {\n          link.width = link.value * ky;\n        }\n      }\n      y = (y1 - y + py) / (nodes.length + 1);\n      for (let i = 0; i < nodes.length; ++i) {\n        const node = nodes[i];\n        node.y0 += y * (i + 1);\n        node.y1 += y * (i + 1);\n      }\n      reorderLinks(nodes);\n    }\n  }\n\n  function computeNodeBreadths(graph) {\n    const columns = computeNodeLayers(graph);\n    py = Math.min(dy, (y1 - y0) / (max(columns, c => c.length) - 1));\n    initializeNodeBreadths(columns);\n    for (let i = 0; i < iterations; ++i) {\n      const alpha = Math.pow(0.99, i);\n      const beta = Math.max(1 - alpha, (i + 1) / iterations);\n      relaxRightToLeft(columns, alpha, beta);\n      relaxLeftToRight(columns, alpha, beta);\n    }\n  }\n\n  // Reposition each node based on its incoming (target) links.\n  function relaxLeftToRight(columns, alpha, beta) {\n    for (let i = 1, n = columns.length; i < n; ++i) {\n      const column = columns[i];\n      for (const target of column) {\n        let y = 0;\n        let w = 0;\n        for (const {source, value} of target.targetLinks) {\n          let v = value * (target.layer - source.layer);\n          y += targetTop(source, target) * v;\n          w += v;\n        }\n        if (!(w > 0)) continue;\n        let dy = (y / w - target.y0) * alpha;\n        target.y0 += dy;\n        target.y1 += dy;\n        reorderNodeLinks(target);\n      }\n      if (sort === undefined) column.sort(ascendingBreadth);\n      resolveCollisions(column, beta);\n    }\n  }\n\n  // Reposition each node based on its outgoing (source) links.\n  function relaxRightToLeft(columns, alpha, beta) {\n    for (let n = columns.length, i = n - 2; i >= 0; --i) {\n      const column = columns[i];\n      for (const source of column) {\n        let y = 0;\n        let w = 0;\n        for (const {target, value} of source.sourceLinks) {\n          let v = value * (target.layer - source.layer);\n          y += sourceTop(source, target) * v;\n          w += v;\n        }\n        if (!(w > 0)) continue;\n        let dy = (y / w - source.y0) * alpha;\n        source.y0 += dy;\n        source.y1 += dy;\n        reorderNodeLinks(source);\n      }\n      if (sort === undefined) column.sort(ascendingBreadth);\n      resolveCollisions(column, beta);\n    }\n  }\n\n  function resolveCollisions(nodes, alpha) {\n    const i = nodes.length >> 1;\n    const subject = nodes[i];\n    resolveCollisionsBottomToTop(nodes, subject.y0 - py, i - 1, alpha);\n    resolveCollisionsTopToBottom(nodes, subject.y1 + py, i + 1, alpha);\n    resolveCollisionsBottomToTop(nodes, y1, nodes.length - 1, alpha);\n    resolveCollisionsTopToBottom(nodes, y0, 0, alpha);\n  }\n\n  // Push any overlapping nodes down.\n  function resolveCollisionsTopToBottom(nodes, y, i, alpha) {\n    for (; i < nodes.length; ++i) {\n      const node = nodes[i];\n      const dy = (y - node.y0) * alpha;\n      if (dy > 1e-6) node.y0 += dy, node.y1 += dy;\n      y = node.y1 + py;\n    }\n  }\n\n  // Push any overlapping nodes up.\n  function resolveCollisionsBottomToTop(nodes, y, i, alpha) {\n    for (; i >= 0; --i) {\n      const node = nodes[i];\n      const dy = (node.y1 - y) * alpha;\n      if (dy > 1e-6) node.y0 -= dy, node.y1 -= dy;\n      y = node.y0 - py;\n    }\n  }\n\n  function reorderNodeLinks({sourceLinks, targetLinks}) {\n    if (linkSort === undefined) {\n      for (const {source: {sourceLinks}} of targetLinks) {\n        sourceLinks.sort(ascendingTargetBreadth);\n      }\n      for (const {target: {targetLinks}} of sourceLinks) {\n        targetLinks.sort(ascendingSourceBreadth);\n      }\n    }\n  }\n\n  function reorderLinks(nodes) {\n    if (linkSort === undefined) {\n      for (const {sourceLinks, targetLinks} of nodes) {\n        sourceLinks.sort(ascendingTargetBreadth);\n        targetLinks.sort(ascendingSourceBreadth);\n      }\n    }\n  }\n\n  // Returns the target.y0 that would produce an ideal link from source to target.\n  function targetTop(source, target) {\n    let y = source.y0 - (source.sourceLinks.length - 1) * py / 2;\n    for (const {target: node, width} of source.sourceLinks) {\n      if (node === target) break;\n      y += width + py;\n    }\n    for (const {source: node, width} of target.targetLinks) {\n      if (node === source) break;\n      y -= width;\n    }\n    return y;\n  }\n\n  // Returns the source.y0 that would produce an ideal link from source to target.\n  function sourceTop(source, target) {\n    let y = target.y0 - (target.targetLinks.length - 1) * py / 2;\n    for (const {source: node, width} of target.targetLinks) {\n      if (node === source) break;\n      y += width + py;\n    }\n    for (const {target: node, width} of source.sourceLinks) {\n      if (node === target) break;\n      y -= width;\n    }\n    return y;\n  }\n\n  return sankey;\n}\n", "var pi = Math.PI,\n    tau = 2 * pi,\n    epsilon = 1e-6,\n    tauEpsilon = tau - epsilon;\n\nfunction Path() {\n  this._x0 = this._y0 = // start of current subpath\n  this._x1 = this._y1 = null; // end of current subpath\n  this._ = \"\";\n}\n\nfunction path() {\n  return new Path;\n}\n\nPath.prototype = path.prototype = {\n  constructor: Path,\n  moveTo: function(x, y) {\n    this._ += \"M\" + (this._x0 = this._x1 = +x) + \",\" + (this._y0 = this._y1 = +y);\n  },\n  closePath: function() {\n    if (this._x1 !== null) {\n      this._x1 = this._x0, this._y1 = this._y0;\n      this._ += \"Z\";\n    }\n  },\n  lineTo: function(x, y) {\n    this._ += \"L\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  quadraticCurveTo: function(x1, y1, x, y) {\n    this._ += \"Q\" + (+x1) + \",\" + (+y1) + \",\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  bezierCurveTo: function(x1, y1, x2, y2, x, y) {\n    this._ += \"C\" + (+x1) + \",\" + (+y1) + \",\" + (+x2) + \",\" + (+y2) + \",\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  arcTo: function(x1, y1, x2, y2, r) {\n    x1 = +x1, y1 = +y1, x2 = +x2, y2 = +y2, r = +r;\n    var x0 = this._x1,\n        y0 = this._y1,\n        x21 = x2 - x1,\n        y21 = y2 - y1,\n        x01 = x0 - x1,\n        y01 = y0 - y1,\n        l01_2 = x01 * x01 + y01 * y01;\n\n    // Is the radius negative? Error.\n    if (r < 0) throw new Error(\"negative radius: \" + r);\n\n    // Is this path empty? Move to (x1,y1).\n    if (this._x1 === null) {\n      this._ += \"M\" + (this._x1 = x1) + \",\" + (this._y1 = y1);\n    }\n\n    // Or, is (x1,y1) coincident with (x0,y0)? Do nothing.\n    else if (!(l01_2 > epsilon));\n\n    // Or, are (x0,y0), (x1,y1) and (x2,y2) collinear?\n    // Equivalently, is (x1,y1) coincident with (x2,y2)?\n    // Or, is the radius zero? Line to (x1,y1).\n    else if (!(Math.abs(y01 * x21 - y21 * x01) > epsilon) || !r) {\n      this._ += \"L\" + (this._x1 = x1) + \",\" + (this._y1 = y1);\n    }\n\n    // Otherwise, draw an arc!\n    else {\n      var x20 = x2 - x0,\n          y20 = y2 - y0,\n          l21_2 = x21 * x21 + y21 * y21,\n          l20_2 = x20 * x20 + y20 * y20,\n          l21 = Math.sqrt(l21_2),\n          l01 = Math.sqrt(l01_2),\n          l = r * Math.tan((pi - Math.acos((l21_2 + l01_2 - l20_2) / (2 * l21 * l01))) / 2),\n          t01 = l / l01,\n          t21 = l / l21;\n\n      // If the start tangent is not coincident with (x0,y0), line to.\n      if (Math.abs(t01 - 1) > epsilon) {\n        this._ += \"L\" + (x1 + t01 * x01) + \",\" + (y1 + t01 * y01);\n      }\n\n      this._ += \"A\" + r + \",\" + r + \",0,0,\" + (+(y01 * x20 > x01 * y20)) + \",\" + (this._x1 = x1 + t21 * x21) + \",\" + (this._y1 = y1 + t21 * y21);\n    }\n  },\n  arc: function(x, y, r, a0, a1, ccw) {\n    x = +x, y = +y, r = +r, ccw = !!ccw;\n    var dx = r * Math.cos(a0),\n        dy = r * Math.sin(a0),\n        x0 = x + dx,\n        y0 = y + dy,\n        cw = 1 ^ ccw,\n        da = ccw ? a0 - a1 : a1 - a0;\n\n    // Is the radius negative? Error.\n    if (r < 0) throw new Error(\"negative radius: \" + r);\n\n    // Is this path empty? Move to (x0,y0).\n    if (this._x1 === null) {\n      this._ += \"M\" + x0 + \",\" + y0;\n    }\n\n    // Or, is (x0,y0) not coincident with the previous point? Line to (x0,y0).\n    else if (Math.abs(this._x1 - x0) > epsilon || Math.abs(this._y1 - y0) > epsilon) {\n      this._ += \"L\" + x0 + \",\" + y0;\n    }\n\n    // Is this arc empty? We’re done.\n    if (!r) return;\n\n    // Does the angle go the wrong way? Flip the direction.\n    if (da < 0) da = da % tau + tau;\n\n    // Is this a complete circle? Draw two arcs to complete the circle.\n    if (da > tauEpsilon) {\n      this._ += \"A\" + r + \",\" + r + \",0,1,\" + cw + \",\" + (x - dx) + \",\" + (y - dy) + \"A\" + r + \",\" + r + \",0,1,\" + cw + \",\" + (this._x1 = x0) + \",\" + (this._y1 = y0);\n    }\n\n    // Is this arc non-empty? Draw an arc!\n    else if (da > epsilon) {\n      this._ += \"A\" + r + \",\" + r + \",0,\" + (+(da >= pi)) + \",\" + cw + \",\" + (this._x1 = x + r * Math.cos(a1)) + \",\" + (this._y1 = y + r * Math.sin(a1));\n    }\n  },\n  rect: function(x, y, w, h) {\n    this._ += \"M\" + (this._x0 = this._x1 = +x) + \",\" + (this._y0 = this._y1 = +y) + \"h\" + (+w) + \"v\" + (+h) + \"h\" + (-w) + \"Z\";\n  },\n  toString: function() {\n    return this._;\n  }\n};\n\nexport default path;\n", "export var abs = Math.abs;\nexport var atan2 = Math.atan2;\nexport var cos = Math.cos;\nexport var max = Math.max;\nexport var min = Math.min;\nexport var sin = Math.sin;\nexport var sqrt = Math.sqrt;\n\nexport var epsilon = 1e-12;\nexport var pi = Math.PI;\nexport var halfPi = pi / 2;\nexport var tau = 2 * pi;\n\nexport function acos(x) {\n  return x > 1 ? 0 : x < -1 ? pi : Math.acos(x);\n}\n\nexport function asin(x) {\n  return x >= 1 ? halfPi : x <= -1 ? -halfPi : Math.asin(x);\n}\n", "function Linear(context) {\n  this._context = context;\n}\n\nLinear.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; // proceed\n      default: this._context.lineTo(x, y); break;\n    }\n  }\n};\n\nexport default function(context) {\n  return new Linear(context);\n}\n", "import curveLinear from \"./linear.js\";\n\nexport var curveRadialLinear = curveRadial(curveLinear);\n\nfunction Radial(curve) {\n  this._curve = curve;\n}\n\nRadial.prototype = {\n  areaStart: function() {\n    this._curve.areaStart();\n  },\n  areaEnd: function() {\n    this._curve.areaEnd();\n  },\n  lineStart: function() {\n    this._curve.lineStart();\n  },\n  lineEnd: function() {\n    this._curve.lineEnd();\n  },\n  point: function(a, r) {\n    this._curve.point(r * Math.sin(a), r * -Math.cos(a));\n  }\n};\n\nexport default function curveRadial(curve) {\n\n  function radial(context) {\n    return new Radial(curve(context));\n  }\n\n  radial._curve = curve;\n\n  return radial;\n}\n", "export var slice = Array.prototype.slice;\n", "var tan30 = Math.sqrt(1 / 3),\n    tan30_2 = tan30 * 2;\n\nexport default {\n  draw: function(context, size) {\n    var y = Math.sqrt(size / tan30_2),\n        x = y * tan30;\n    context.moveTo(0, -y);\n    context.lineTo(x, 0);\n    context.lineTo(0, y);\n    context.lineTo(-x, 0);\n    context.closePath();\n  }\n};\n", "import {pi, tau} from \"../math.js\";\n\nvar ka = 0.89081309152928522810,\n    kr = Math.sin(pi / 10) / Math.sin(7 * pi / 10),\n    kx = Math.sin(tau / 10) * kr,\n    ky = -Math.cos(tau / 10) * kr;\n\nexport default {\n  draw: function(context, size) {\n    var r = Math.sqrt(size * ka),\n        x = kx * r,\n        y = ky * r;\n    context.moveTo(0, -r);\n    context.lineTo(x, y);\n    for (var i = 1; i < 5; ++i) {\n      var a = tau * i / 5,\n          c = Math.cos(a),\n          s = Math.sin(a);\n      context.lineTo(s * r, -c * r);\n      context.lineTo(c * x - s * y, s * x + c * y);\n    }\n    context.closePath();\n  }\n};\n", "var sqrt3 = Math.sqrt(3);\n\nexport default {\n  draw: function(context, size) {\n    var y = -Math.sqrt(size / (sqrt3 * 3));\n    context.moveTo(0, y * 2);\n    context.lineTo(-sqrt3 * y, -y);\n    context.lineTo(sqrt3 * y, -y);\n    context.closePath();\n  }\n};\n", "var c = -0.5,\n    s = Math.sqrt(3) / 2,\n    k = 1 / Math.sqrt(12),\n    a = (k / 2 + 1) * 3;\n\nexport default {\n  draw: function(context, size) {\n    var r = Math.sqrt(size / a),\n        x0 = r / 2,\n        y0 = r * k,\n        x1 = x0,\n        y1 = r * k + r,\n        x2 = -x1,\n        y2 = y1;\n    context.moveTo(x0, y0);\n    context.lineTo(x1, y1);\n    context.lineTo(x2, y2);\n    context.lineTo(c * x0 - s * y0, s * x0 + c * y0);\n    context.lineTo(c * x1 - s * y1, s * x1 + c * y1);\n    context.lineTo(c * x2 - s * y2, s * x2 + c * y2);\n    context.lineTo(c * x0 + s * y0, c * y0 - s * x0);\n    context.lineTo(c * x1 + s * y1, c * y1 - s * x1);\n    context.lineTo(c * x2 + s * y2, c * y2 - s * x2);\n    context.closePath();\n  }\n};\n", "export default function() {}\n", "export function point(that, x, y) {\n  that._context.bezierCurveTo(\n    (2 * that._x0 + that._x1) / 3,\n    (2 * that._y0 + that._y1) / 3,\n    (that._x0 + 2 * that._x1) / 3,\n    (that._y0 + 2 * that._y1) / 3,\n    (that._x0 + 4 * that._x1 + x) / 6,\n    (that._y0 + 4 * that._y1 + y) / 6\n  );\n}\n\nexport function Basis(context) {\n  this._context = context;\n}\n\nBasis.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 =\n    this._y0 = this._y1 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 3: point(this, this._x1, this._y1); // proceed\n      case 2: this._context.lineTo(this._x1, this._y1); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; this._context.lineTo((5 * this._x0 + this._x1) / 6, (5 * this._y0 + this._y1) / 6); // proceed\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = x;\n    this._y0 = this._y1, this._y1 = y;\n  }\n};\n\nexport default function(context) {\n  return new Basis(context);\n}\n", "import noop from \"../noop.js\";\nimport {point} from \"./basis.js\";\n\nfunction BasisClosed(context) {\n  this._context = context;\n}\n\nBasisClosed.prototype = {\n  areaStart: noop,\n  areaEnd: noop,\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 = this._x3 = this._x4 =\n    this._y0 = this._y1 = this._y2 = this._y3 = this._y4 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 1: {\n        this._context.moveTo(this._x2, this._y2);\n        this._context.closePath();\n        break;\n      }\n      case 2: {\n        this._context.moveTo((this._x2 + 2 * this._x3) / 3, (this._y2 + 2 * this._y3) / 3);\n        this._context.lineTo((this._x3 + 2 * this._x2) / 3, (this._y3 + 2 * this._y2) / 3);\n        this._context.closePath();\n        break;\n      }\n      case 3: {\n        this.point(this._x2, this._y2);\n        this.point(this._x3, this._y3);\n        this.point(this._x4, this._y4);\n        break;\n      }\n    }\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._x2 = x, this._y2 = y; break;\n      case 1: this._point = 2; this._x3 = x, this._y3 = y; break;\n      case 2: this._point = 3; this._x4 = x, this._y4 = y; this._context.moveTo((this._x0 + 4 * this._x1 + x) / 6, (this._y0 + 4 * this._y1 + y) / 6); break;\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = x;\n    this._y0 = this._y1, this._y1 = y;\n  }\n};\n\nexport default function(context) {\n  return new BasisClosed(context);\n}\n", "import {point} from \"./basis.js\";\n\nfunction BasisOpen(context) {\n  this._context = context;\n}\n\nBasisOpen.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 =\n    this._y0 = this._y1 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line || (this._line !== 0 && this._point === 3)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; var x0 = (this._x0 + 4 * this._x1 + x) / 6, y0 = (this._y0 + 4 * this._y1 + y) / 6; this._line ? this._context.lineTo(x0, y0) : this._context.moveTo(x0, y0); break;\n      case 3: this._point = 4; // proceed\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = x;\n    this._y0 = this._y1, this._y1 = y;\n  }\n};\n\nexport default function(context) {\n  return new BasisOpen(context);\n}\n", "import {Basis} from \"./basis.js\";\n\nfunction Bundle(context, beta) {\n  this._basis = new Basis(context);\n  this._beta = beta;\n}\n\nBundle.prototype = {\n  lineStart: function() {\n    this._x = [];\n    this._y = [];\n    this._basis.lineStart();\n  },\n  lineEnd: function() {\n    var x = this._x,\n        y = this._y,\n        j = x.length - 1;\n\n    if (j > 0) {\n      var x0 = x[0],\n          y0 = y[0],\n          dx = x[j] - x0,\n          dy = y[j] - y0,\n          i = -1,\n          t;\n\n      while (++i <= j) {\n        t = i / j;\n        this._basis.point(\n          this._beta * x[i] + (1 - this._beta) * (x0 + t * dx),\n          this._beta * y[i] + (1 - this._beta) * (y0 + t * dy)\n        );\n      }\n    }\n\n    this._x = this._y = null;\n    this._basis.lineEnd();\n  },\n  point: function(x, y) {\n    this._x.push(+x);\n    this._y.push(+y);\n  }\n};\n\nexport default (function custom(beta) {\n\n  function bundle(context) {\n    return beta === 1 ? new Basis(context) : new Bundle(context, beta);\n  }\n\n  bundle.beta = function(beta) {\n    return custom(+beta);\n  };\n\n  return bundle;\n})(0.85);\n", "export function point(that, x, y) {\n  that._context.bezierCurveTo(\n    that._x1 + that._k * (that._x2 - that._x0),\n    that._y1 + that._k * (that._y2 - that._y0),\n    that._x2 + that._k * (that._x1 - x),\n    that._y2 + that._k * (that._y1 - y),\n    that._x2,\n    that._y2\n  );\n}\n\nexport function Cardinal(context, tension) {\n  this._context = context;\n  this._k = (1 - tension) / 6;\n}\n\nCardinal.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 =\n    this._y0 = this._y1 = this._y2 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 2: this._context.lineTo(this._x2, this._y2); break;\n      case 3: point(this, this._x1, this._y1); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; this._x1 = x, this._y1 = y; break;\n      case 2: this._point = 3; // proceed\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(tension) {\n\n  function cardinal(context) {\n    return new Cardinal(context, tension);\n  }\n\n  cardinal.tension = function(tension) {\n    return custom(+tension);\n  };\n\n  return cardinal;\n})(0);\n", "import noop from \"../noop.js\";\nimport {point} from \"./cardinal.js\";\n\nexport function CardinalClosed(context, tension) {\n  this._context = context;\n  this._k = (1 - tension) / 6;\n}\n\nCardinalClosed.prototype = {\n  areaStart: noop,\n  areaEnd: noop,\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 = this._x3 = this._x4 = this._x5 =\n    this._y0 = this._y1 = this._y2 = this._y3 = this._y4 = this._y5 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 1: {\n        this._context.moveTo(this._x3, this._y3);\n        this._context.closePath();\n        break;\n      }\n      case 2: {\n        this._context.lineTo(this._x3, this._y3);\n        this._context.closePath();\n        break;\n      }\n      case 3: {\n        this.point(this._x3, this._y3);\n        this.point(this._x4, this._y4);\n        this.point(this._x5, this._y5);\n        break;\n      }\n    }\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._x3 = x, this._y3 = y; break;\n      case 1: this._point = 2; this._context.moveTo(this._x4 = x, this._y4 = y); break;\n      case 2: this._point = 3; this._x5 = x, this._y5 = y; break;\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(tension) {\n\n  function cardinal(context) {\n    return new CardinalClosed(context, tension);\n  }\n\n  cardinal.tension = function(tension) {\n    return custom(+tension);\n  };\n\n  return cardinal;\n})(0);\n", "import {point} from \"./cardinal.js\";\n\nexport function CardinalOpen(context, tension) {\n  this._context = context;\n  this._k = (1 - tension) / 6;\n}\n\nCardinalOpen.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 =\n    this._y0 = this._y1 = this._y2 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line || (this._line !== 0 && this._point === 3)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; this._line ? this._context.lineTo(this._x2, this._y2) : this._context.moveTo(this._x2, this._y2); break;\n      case 3: this._point = 4; // proceed\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(tension) {\n\n  function cardinal(context) {\n    return new CardinalOpen(context, tension);\n  }\n\n  cardinal.tension = function(tension) {\n    return custom(+tension);\n  };\n\n  return cardinal;\n})(0);\n", "import {epsilon} from \"../math.js\";\nimport {Cardinal} from \"./cardinal.js\";\n\nexport function point(that, x, y) {\n  var x1 = that._x1,\n      y1 = that._y1,\n      x2 = that._x2,\n      y2 = that._y2;\n\n  if (that._l01_a > epsilon) {\n    var a = 2 * that._l01_2a + 3 * that._l01_a * that._l12_a + that._l12_2a,\n        n = 3 * that._l01_a * (that._l01_a + that._l12_a);\n    x1 = (x1 * a - that._x0 * that._l12_2a + that._x2 * that._l01_2a) / n;\n    y1 = (y1 * a - that._y0 * that._l12_2a + that._y2 * that._l01_2a) / n;\n  }\n\n  if (that._l23_a > epsilon) {\n    var b = 2 * that._l23_2a + 3 * that._l23_a * that._l12_a + that._l12_2a,\n        m = 3 * that._l23_a * (that._l23_a + that._l12_a);\n    x2 = (x2 * b + that._x1 * that._l23_2a - x * that._l12_2a) / m;\n    y2 = (y2 * b + that._y1 * that._l23_2a - y * that._l12_2a) / m;\n  }\n\n  that._context.bezierCurveTo(x1, y1, x2, y2, that._x2, that._y2);\n}\n\nfunction CatmullRom(context, alpha) {\n  this._context = context;\n  this._alpha = alpha;\n}\n\nCatmullRom.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 =\n    this._y0 = this._y1 = this._y2 = NaN;\n    this._l01_a = this._l12_a = this._l23_a =\n    this._l01_2a = this._l12_2a = this._l23_2a =\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 2: this._context.lineTo(this._x2, this._y2); break;\n      case 3: this.point(this._x2, this._y2); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n\n    if (this._point) {\n      var x23 = this._x2 - x,\n          y23 = this._y2 - y;\n      this._l23_a = Math.sqrt(this._l23_2a = Math.pow(x23 * x23 + y23 * y23, this._alpha));\n    }\n\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; // proceed\n      default: point(this, x, y); break;\n    }\n\n    this._l01_a = this._l12_a, this._l12_a = this._l23_a;\n    this._l01_2a = this._l12_2a, this._l12_2a = this._l23_2a;\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(alpha) {\n\n  function catmullRom(context) {\n    return alpha ? new CatmullRom(context, alpha) : new Cardinal(context, 0);\n  }\n\n  catmullRom.alpha = function(alpha) {\n    return custom(+alpha);\n  };\n\n  return catmullRom;\n})(0.5);\n", "import {CardinalClosed} from \"./cardinalClosed.js\";\nimport noop from \"../noop.js\";\nimport {point} from \"./catmullRom.js\";\n\nfunction CatmullRomClosed(context, alpha) {\n  this._context = context;\n  this._alpha = alpha;\n}\n\nCatmullRomClosed.prototype = {\n  areaStart: noop,\n  areaEnd: noop,\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 = this._x3 = this._x4 = this._x5 =\n    this._y0 = this._y1 = this._y2 = this._y3 = this._y4 = this._y5 = NaN;\n    this._l01_a = this._l12_a = this._l23_a =\n    this._l01_2a = this._l12_2a = this._l23_2a =\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 1: {\n        this._context.moveTo(this._x3, this._y3);\n        this._context.closePath();\n        break;\n      }\n      case 2: {\n        this._context.lineTo(this._x3, this._y3);\n        this._context.closePath();\n        break;\n      }\n      case 3: {\n        this.point(this._x3, this._y3);\n        this.point(this._x4, this._y4);\n        this.point(this._x5, this._y5);\n        break;\n      }\n    }\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n\n    if (this._point) {\n      var x23 = this._x2 - x,\n          y23 = this._y2 - y;\n      this._l23_a = Math.sqrt(this._l23_2a = Math.pow(x23 * x23 + y23 * y23, this._alpha));\n    }\n\n    switch (this._point) {\n      case 0: this._point = 1; this._x3 = x, this._y3 = y; break;\n      case 1: this._point = 2; this._context.moveTo(this._x4 = x, this._y4 = y); break;\n      case 2: this._point = 3; this._x5 = x, this._y5 = y; break;\n      default: point(this, x, y); break;\n    }\n\n    this._l01_a = this._l12_a, this._l12_a = this._l23_a;\n    this._l01_2a = this._l12_2a, this._l12_2a = this._l23_2a;\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(alpha) {\n\n  function catmullRom(context) {\n    return alpha ? new CatmullRomClosed(context, alpha) : new CardinalClosed(context, 0);\n  }\n\n  catmullRom.alpha = function(alpha) {\n    return custom(+alpha);\n  };\n\n  return catmullRom;\n})(0.5);\n", "import {CardinalOpen} from \"./cardinalOpen.js\";\nimport {point} from \"./catmullRom.js\";\n\nfunction CatmullRomOpen(context, alpha) {\n  this._context = context;\n  this._alpha = alpha;\n}\n\nCatmullRomOpen.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 =\n    this._y0 = this._y1 = this._y2 = NaN;\n    this._l01_a = this._l12_a = this._l23_a =\n    this._l01_2a = this._l12_2a = this._l23_2a =\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line || (this._line !== 0 && this._point === 3)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n\n    if (this._point) {\n      var x23 = this._x2 - x,\n          y23 = this._y2 - y;\n      this._l23_a = Math.sqrt(this._l23_2a = Math.pow(x23 * x23 + y23 * y23, this._alpha));\n    }\n\n    switch (this._point) {\n      case 0: this._point = 1; break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; this._line ? this._context.lineTo(this._x2, this._y2) : this._context.moveTo(this._x2, this._y2); break;\n      case 3: this._point = 4; // proceed\n      default: point(this, x, y); break;\n    }\n\n    this._l01_a = this._l12_a, this._l12_a = this._l23_a;\n    this._l01_2a = this._l12_2a, this._l12_2a = this._l23_2a;\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(alpha) {\n\n  function catmullRom(context) {\n    return alpha ? new CatmullRomOpen(context, alpha) : new CardinalOpen(context, 0);\n  }\n\n  catmullRom.alpha = function(alpha) {\n    return custom(+alpha);\n  };\n\n  return catmullRom;\n})(0.5);\n", "import noop from \"../noop.js\";\n\nfunction LinearClosed(context) {\n  this._context = context;\n}\n\nLinearClosed.prototype = {\n  areaStart: noop,\n  areaEnd: noop,\n  lineStart: function() {\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._point) this._context.closePath();\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    if (this._point) this._context.lineTo(x, y);\n    else this._point = 1, this._context.moveTo(x, y);\n  }\n};\n\nexport default function(context) {\n  return new LinearClosed(context);\n}\n", "function sign(x) {\n  return x < 0 ? -1 : 1;\n}\n\n// Calculate the slopes of the tangents (Hermite-type interpolation) based on\n// the following paper: Steffen, M. 1990. A Simple Method for Monotonic\n// Interpolation in One Dimension. Astronomy and Astrophysics, Vol. 239, NO.\n// NOV(II), P. 443, 1990.\nfunction slope3(that, x2, y2) {\n  var h0 = that._x1 - that._x0,\n      h1 = x2 - that._x1,\n      s0 = (that._y1 - that._y0) / (h0 || h1 < 0 && -0),\n      s1 = (y2 - that._y1) / (h1 || h0 < 0 && -0),\n      p = (s0 * h1 + s1 * h0) / (h0 + h1);\n  return (sign(s0) + sign(s1)) * Math.min(Math.abs(s0), Math.abs(s1), 0.5 * Math.abs(p)) || 0;\n}\n\n// Calculate a one-sided slope.\nfunction slope2(that, t) {\n  var h = that._x1 - that._x0;\n  return h ? (3 * (that._y1 - that._y0) / h - t) / 2 : t;\n}\n\n// According to https://en.wikipedia.org/wiki/Cubic_Hermite_spline#Representations\n// \"you can express cubic Hermite interpolation in terms of cubic Bézier curves\n// with respect to the four values p0, p0 + m0 / 3, p1 - m1 / 3, p1\".\nfunction point(that, t0, t1) {\n  var x0 = that._x0,\n      y0 = that._y0,\n      x1 = that._x1,\n      y1 = that._y1,\n      dx = (x1 - x0) / 3;\n  that._context.bezierCurveTo(x0 + dx, y0 + dx * t0, x1 - dx, y1 - dx * t1, x1, y1);\n}\n\nfunction MonotoneX(context) {\n  this._context = context;\n}\n\nMonotoneX.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 =\n    this._y0 = this._y1 =\n    this._t0 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 2: this._context.lineTo(this._x1, this._y1); break;\n      case 3: point(this, this._t0, slope2(this, this._t0)); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    var t1 = NaN;\n\n    x = +x, y = +y;\n    if (x === this._x1 && y === this._y1) return; // Ignore coincident points.\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; point(this, slope2(this, t1 = slope3(this, x, y)), t1); break;\n      default: point(this, this._t0, t1 = slope3(this, x, y)); break;\n    }\n\n    this._x0 = this._x1, this._x1 = x;\n    this._y0 = this._y1, this._y1 = y;\n    this._t0 = t1;\n  }\n}\n\nfunction MonotoneY(context) {\n  this._context = new ReflectContext(context);\n}\n\n(MonotoneY.prototype = Object.create(MonotoneX.prototype)).point = function(x, y) {\n  MonotoneX.prototype.point.call(this, y, x);\n};\n\nfunction ReflectContext(context) {\n  this._context = context;\n}\n\nReflectContext.prototype = {\n  moveTo: function(x, y) { this._context.moveTo(y, x); },\n  closePath: function() { this._context.closePath(); },\n  lineTo: function(x, y) { this._context.lineTo(y, x); },\n  bezierCurveTo: function(x1, y1, x2, y2, x, y) { this._context.bezierCurveTo(y1, x1, y2, x2, y, x); }\n};\n\nexport function monotoneX(context) {\n  return new MonotoneX(context);\n}\n\nexport function monotoneY(context) {\n  return new MonotoneY(context);\n}\n", "function Natural(context) {\n  this._context = context;\n}\n\nNatural.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x = [];\n    this._y = [];\n  },\n  lineEnd: function() {\n    var x = this._x,\n        y = this._y,\n        n = x.length;\n\n    if (n) {\n      this._line ? this._context.lineTo(x[0], y[0]) : this._context.moveTo(x[0], y[0]);\n      if (n === 2) {\n        this._context.lineTo(x[1], y[1]);\n      } else {\n        var px = controlPoints(x),\n            py = controlPoints(y);\n        for (var i0 = 0, i1 = 1; i1 < n; ++i0, ++i1) {\n          this._context.bezierCurveTo(px[0][i0], py[0][i0], px[1][i0], py[1][i0], x[i1], y[i1]);\n        }\n      }\n    }\n\n    if (this._line || (this._line !== 0 && n === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n    this._x = this._y = null;\n  },\n  point: function(x, y) {\n    this._x.push(+x);\n    this._y.push(+y);\n  }\n};\n\n// See https://www.particleincell.com/2012/bezier-splines/ for derivation.\nfunction controlPoints(x) {\n  var i,\n      n = x.length - 1,\n      m,\n      a = new Array(n),\n      b = new Array(n),\n      r = new Array(n);\n  a[0] = 0, b[0] = 2, r[0] = x[0] + 2 * x[1];\n  for (i = 1; i < n - 1; ++i) a[i] = 1, b[i] = 4, r[i] = 4 * x[i] + 2 * x[i + 1];\n  a[n - 1] = 2, b[n - 1] = 7, r[n - 1] = 8 * x[n - 1] + x[n];\n  for (i = 1; i < n; ++i) m = a[i] / b[i - 1], b[i] -= m, r[i] -= m * r[i - 1];\n  a[n - 1] = r[n - 1] / b[n - 1];\n  for (i = n - 2; i >= 0; --i) a[i] = (r[i] - a[i + 1]) / b[i];\n  b[n - 1] = (x[n] + a[n - 1]) / 2;\n  for (i = 0; i < n - 1; ++i) b[i] = 2 * x[i + 1] - a[i + 1];\n  return [a, b];\n}\n\nexport default function(context) {\n  return new Natural(context);\n}\n", "function Step(context, t) {\n  this._context = context;\n  this._t = t;\n}\n\nStep.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x = this._y = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (0 < this._t && this._t < 1 && this._point === 2) this._context.lineTo(this._x, this._y);\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    if (this._line >= 0) this._t = 1 - this._t, this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; // proceed\n      default: {\n        if (this._t <= 0) {\n          this._context.lineTo(this._x, y);\n          this._context.lineTo(x, y);\n        } else {\n          var x1 = this._x * (1 - this._t) + x * this._t;\n          this._context.lineTo(x1, this._y);\n          this._context.lineTo(x1, y);\n        }\n        break;\n      }\n    }\n    this._x = x, this._y = y;\n  }\n};\n\nexport default function(context) {\n  return new Step(context, 0.5);\n}\n\nexport function stepBefore(context) {\n  return new Step(context, 0);\n}\n\nexport function stepAfter(context) {\n  return new Step(context, 1);\n}\n", "import { isNumber, isUndefined, cloneDeep, isFunction, without, isString, isObject, isEqual } from 'utils/data'\n\n// Types\nimport { GraphInputLink, GraphInputNode, GraphLinkCore, GraphNodeCore } from 'types/graph'\n\n// Core Data Model\nimport { CoreDataModel } from './core'\n\nexport type GraphData<N extends GraphInputNode, L extends GraphInputLink> = {\n  nodes: N[];\n  links?: L[];\n}\n\nexport class GraphDataModel<\n  N extends GraphInputNode,\n  L extends GraphInputLink,\n  OutNode extends GraphNodeCore<N, L> = GraphNodeCore<N, L>,\n  OutLink extends GraphLinkCore<N, L> = GraphLinkCore<N, L>,\n> extends CoreDataModel<GraphData<N, L>> {\n  private _nonConnectedNodes: OutNode[]\n  private _connectedNodes: OutNode[]\n  private _nodes: OutNode[] = []\n  private _links: OutLink[] = []\n  private _inputNodesMap = new Map<OutNode, N>()\n  private _nodesMap = new Map<string | number, OutNode>()\n\n  // Model configuration\n  public nodeId: ((n: N) => string | undefined) = n => (isString(n.id) || isFinite(n.id as number)) ? `${n.id}` : undefined\n  public linkId: ((n: L) => string | undefined) = l => (isString(l.id) || isFinite(l.id as number)) ? `${l.id}` : undefined\n  public nodeSort: ((a: N, b: N) => number)\n\n  public getNodeById (id: string | number): OutNode {\n    return this._nodesMap.get(id)\n  }\n\n  get data (): GraphData<N, L> {\n    return this._data\n  }\n\n  set data (inputData: GraphData<N, L>) {\n    if (!inputData) return\n    this._data = inputData\n    const prevNodes = this.nodes\n    const prevLinks = this.links\n\n    this._inputNodesMap.clear()\n    this._nodesMap.clear()\n\n    // Todo: Figure out why TypeScript complains about types\n    const nodes = cloneDeep(inputData?.nodes ?? []) as undefined as OutNode[]\n    const links = cloneDeep(inputData?.links ?? []) as undefined as OutLink[]\n\n    // Every node or link can have a private state used for rendering needs\n    // On data update we transfer state between objects with same ids\n    this.transferState(nodes, prevNodes, this.nodeId)\n    this.transferState(links, prevLinks, this.linkId)\n\n    // Set node `_id` and `_index`\n    nodes.forEach((node, i) => {\n      node._index = i\n      node._id = this.nodeId(node) || `${i}`\n      this._inputNodesMap.set(node, inputData.nodes[i])\n      this._nodesMap.set(node._id, node)\n    })\n\n    // Sort nodes\n    if (isFunction(this.nodeSort)) nodes.sort(this.nodeSort)\n\n    // Fill link source and target\n    links.forEach((link, i) => {\n      link._indexGlobal = i\n      link.source = this.findNode(nodes, link.source)\n      link.target = this.findNode(nodes, link.target)\n    })\n\n    // Set link index for multiple link rendering\n    links.forEach((link, i) => {\n      if (!isUndefined(link._index) && !isUndefined(link._neighbours)) return\n\n      const linksFiltered = links.filter(l =>\n        ((link.source === l.source) && (link.target === l.target)) ||\n        ((link.source === l.target) && (link.target === l.source))\n      )\n\n      linksFiltered.forEach((l, i) => {\n        l._index = i\n        l._id = this.linkId(l) || `${l.source?._id}-${l.target?._id}-${i}`\n        l._neighbours = linksFiltered.length\n        l._direction = ((link.source === l.source) && (link.target === l.target)) ? 1 : -1\n      })\n    })\n\n    nodes.forEach(d => {\n      // Determine if a node is connected or not and store it as a property\n      d.links = links.filter(l => (l.source === d) || (l.target === d))\n      d._isConnected = d.links.length !== 0\n    })\n\n    this._nonConnectedNodes = nodes.filter(d => !d._isConnected)\n    this._connectedNodes = without(nodes, ...this._nonConnectedNodes)\n\n    this._nodes = nodes\n    this._links = links.filter(l => l.source && l.target)\n  }\n\n  get nodes (): OutNode[] {\n    return this._nodes\n  }\n\n  get links (): OutLink[] {\n    return this._links\n  }\n\n  get connectedNodes (): OutNode[] {\n    return this._connectedNodes\n  }\n\n  get nonConnectedNodes (): OutNode[] {\n    return this._nonConnectedNodes\n  }\n\n  private findNode (nodes: OutNode[], nodeIdentifier: number | string | N): OutNode | undefined {\n    let foundNode: OutNode | undefined\n\n    if (isNumber(nodeIdentifier)) foundNode = nodes[nodeIdentifier as number]\n    else if (isString(nodeIdentifier)) foundNode = nodes.find(node => this.nodeId(node) === nodeIdentifier)\n    else if (isObject(nodeIdentifier)) foundNode = nodes.find(node => isEqual(this._inputNodesMap.get(node), nodeIdentifier))\n\n    if (!foundNode) {\n      console.warn(`Unovis | Graph Data Model: Node ${nodeIdentifier} is missing from the nodes list`)\n    }\n\n    return foundNode\n  }\n\n  private transferState<T extends { _state: Record<string, any>}> (\n    items: T[],\n    itemsPrev: T[],\n    getId: (d: T) => string\n  ): void {\n    for (const item of items) {\n      const dPrev = itemsPrev.find((dp) => getId(dp) === getId(item))\n      if (dPrev) item._state = { ...dPrev._state }\n      else item._state = {}\n    }\n  }\n\n  public setNodeStateById (id: string, state: Record<string, any>): void {\n    const node = this.getNodeById(id)\n    if (!node) {\n      console.warn(`Unovis | Graph Data Model: Node ${id} not found`)\n      return\n    }\n\n    node._state = state\n  }\n}\n", "/* eslint-disable no-use-before-define */\nimport { sankeyLeft, sankeyRight, sankeyCenter, sankeyJustify } from 'd3-sankey'\nimport { GraphInputLink, GraphLinkCore, GraphNodeCore } from 'types/graph'\nimport { GraphInputNode } from '../../types'\n\nexport type SankeyInputNode = GraphInputNode\n\nexport type SankeyInputLink = GraphInputLink\n\nexport type SankeyNode<N extends SankeyInputNode, L extends SankeyInputLink> = GraphNodeCore<N, L> & {\n  id: string;\n  /** the node’s value; this is the sum of link.value for the node’s incoming links, or node.fixedValue if defined */\n  value: number;\n  /** */\n  fixedValue?: number;\n  /** the node’s zero-based column index, corresponding to its horizontal position */\n  layer: number;\n  /** */\n  isConnected: boolean;\n  /** the array of incoming links which have this node as their source */\n  sourceLinks?: SankeyLink<N, L>[];\n  /** the array of outgoing links which have this node as their target */\n  targetLinks: SankeyLink<N, L>[];\n  /** the node’s zero-based index within the array of nodes */\n  index: number;\n  /** the node’s zero-based graph depth, derived from the graph topology */\n  depth: number;\n  /** node.height - the node’s zero-based graph height, derived from the graph topology */\n  height: number;\n  /** the node’s minimum horizontal position, derived from node.depth */\n  x0: number;\n  /** the node’s maximum horizontal position (node.x0 + sankey.nodeWidth) */\n  x1: number;\n  /** the node’s minimum vertical position */\n  y0: number;\n  /** the node’s maximum vertical position (node.y1 - node.y0 is proportional to node.value) */\n  y1: number;\n  /** calculated node width */\n  width: number;\n  /** internal ui state */\n  _state?: {\n    greyout?: boolean;\n    /* Pre-calculated node height value in pixels that will be used to manually generate the layout when data has no links */\n    precalculatedHeight?: number;\n  };\n}\n\nexport type SankeyLink<N extends SankeyInputNode, L extends SankeyInputLink> = GraphLinkCore<N, L> & {\n  value: number;\n  /** the link’s source node */\n  source: SankeyNode<N, L>;\n  /** the link’s target node */\n  target: SankeyNode<N, L>;\n  /** the link’s vertical starting position (at source node) */\n  y0: number;\n  /** the link’s vertical end position (at target node) */\n  y1: number;\n  /** the link’s width (proportional to link.value) */\n  width: number;\n  /** the zero-based index of link within the array of links */\n  index: number;\n  /** internal ui state */\n  _state?: {\n    greyout?: boolean;\n  };\n}\n\nexport enum SankeySubLabelPlacement {\n  Inline = 'inline',\n  Below = 'below',\n}\n\nexport enum SankeyNodeAlign {\n  Left = 'left',\n  Right = 'right',\n  Center = 'center',\n  Justify = 'justify',\n}\n\nexport const SankeyLayout = {\n  [SankeyNodeAlign.Left]: sankeyLeft,\n  [SankeyNodeAlign.Right]: sankeyRight,\n  [SankeyNodeAlign.Center]: sankeyCenter,\n  [SankeyNodeAlign.Justify]: sankeyJustify,\n}\n\nexport enum SankeyExitTransitionType {\n  Default = 'default',\n  ToAncestor = 'to ancestor',\n}\n\nexport enum SankeyEnterTransitionType {\n  Default = 'default',\n  FromAncestor = 'from ancestor',\n}\n", "// Config\nimport { ComponentConfigInterface, ComponentDefaultConfig } from 'core/component/config'\n\n// Utils\nimport { getNumber } from 'utils/data'\n\n// Types\nimport { ColorAccessor, GenericAccessor, NumericAccessor, StringAccessor } from 'types/accessor'\nimport { TrimMode, VerticalAlign, FitMode } from 'types/text'\nimport { Position } from 'types/position'\nimport {\n  SankeyInputLink,\n  SankeyInputNode,\n  SankeyNodeAlign,\n  SankeySubLabelPlacement,\n  SankeyExitTransitionType,\n  SankeyEnterTransitionType,\n  SankeyLink,\n  SankeyNode,\n} from './types'\n\nexport interface SankeyConfigInterface<N extends SankeyInputNode, L extends SankeyInputLink> extends ComponentConfigInterface {\n  // General\n  /** Node / Link id accessor function. Used for mapping of data updates to corresponding SVG objects. Default: `(d, i) => d.id ?? i.toString()` */\n  id?: (d: SankeyInputNode | SankeyInputLink, i: number, ...any: unknown[]) => string;\n  /** Coefficient to scale the height of the diagram when the amount of links is low: `C * links.length`, clamped to `[height / 2, height]`. Default: `1/16` */\n  heightNormalizationCoeff?: number;\n  /** Type of animation on removing nodes. Default: `ExitTransitionType.Default` */\n  exitTransitionType?: SankeyExitTransitionType;\n  /** Type of animation on creating nodes. Default: `EnterTransitionType.Default` */\n  enterTransitionType?: SankeyEnterTransitionType;\n  /** Highlight the corresponding subtree on node / link hover. Default: `false` */\n  highlightSubtreeOnHover?: boolean;\n  /** Highlight animation duration, ms. Default: `400` */\n  highlightDuration?: number;\n  /** Highlight delay, ms. Default: `1000` */\n  highlightDelay?: number;\n  /** Sankey algorithm iterations. Default: `32` */\n  iterations?: number;\n\n  // Sorting\n  /** Sankey node sorting function. Default: `undefined`.\n   *  Node sorting is applied to nodes in one layer (column). Layer by layer.\n   *  Options: `undefined` - the order is determined by the layout;\n   *           `null` - the order is fixed by the input;\n   *           sort function - the order is determined by the function.\n  */\n  nodeSort?: ((node1: SankeyNode<N, L>, node2: SankeyNode<N, L>) => number) | null | undefined;\n  /** Sankey link sorting function. Default: `(link2, link1) => link1.value - link2.value`.\n   *  Link sorting is applied to the source (exiting) links within one node.\n   *  Options: `undefined` - the order is determined by the layout;\n   *           `null` - the order is fixed by the input;\n   *           sort function - the order is determined by the function.\n  */\n  linkSort?: ((link1: SankeyLink<N, L>, link2: SankeyLink<N, L>) => number) | null | undefined;\n\n  // Nodes\n  /** Sankey node width in pixels */\n  nodeWidth?: number;\n  /** Sankey node alignment method */\n  nodeAlign?: SankeyNodeAlign;\n  /** Horizontal space between the nodes. Extended Sizing property only. Default: `150` */\n  nodeHorizontalSpacing?: number;\n  /** Minimum node height. Extended Sizing property only. Default: `20` */\n  nodeMinHeight?: number;\n  /** Maximum node height. Extended Sizing property only. Default: `100` */\n  nodeMaxHeight?: number;\n  /** Sankey vertical separation between nodes in pixels. Default: `2` */\n  nodePadding?: number;\n  /** Display the graph when data has just one element */\n  showSingleNode?: boolean;\n  /** Node cursor on hover. Default: `undefined` */\n  nodeCursor?: StringAccessor<SankeyNode<N, L>>;\n  /** Node icon accessor function or value. Default: `undefined` */\n  nodeIcon?: StringAccessor<SankeyNode<N, L>>;\n  /** Node color accessor function or value. Default: `undefined` */\n  nodeColor?: ColorAccessor<SankeyNode<N, L>>;\n  /** Node `fixedValue` accessor function or constant. It defines the node value that will be used to calculate\n   * the height of the nodes by d3-sankey (by default the height will be based on aggregated `linkValue`).\n   * Default: `n => n.fixedValue`\n  */\n  nodeFixedValue?: NumericAccessor<N>;\n  /** Icon color accessor function or value. Default: `undefined` */\n  nodeIconColor?: ColorAccessor<SankeyNode<N, L>>;\n\n  // Links\n  /** Link color accessor function or value. Default: `l => l.color` */\n  linkColor?: StringAccessor<SankeyLink<N, L>>;\n  /** Link flow accessor function or value. Default: `l => l.value` */\n  linkValue?: NumericAccessor<L>;\n  /** Link cursor on hover. Default: `undefined` */\n  linkCursor?: StringAccessor<SankeyLink<N, L>>;\n\n  // Labels\n  /** Node label accessor function or value. Default: `n => n.label` */\n  label?: StringAccessor<SankeyNode<N, L>>;\n  /** Node sub-label accessor function or value. Default: `undefined` */\n  subLabel?: StringAccessor<SankeyNode<N, L>>;\n  /** Label position relative to the Node. Default: `Position.AUTO` */\n  labelPosition?: GenericAccessor<Position.Auto | Position.Left | Position.Right | string, SankeyNode<N, L>>;\n  /** Label vertical alignment */\n  labelVerticalAlign?: VerticalAlign | string;\n  /** Label background */\n  labelBackground?: boolean;\n  /** Label fit mode (wrap or trim). Default: `FitMode.TRIM` **/\n  labelFit?: FitMode;\n  /** Maximum label with in pixels. Default: `70` */\n  labelMaxWidth?: number;\n  /** Expand trimmed label on hover. Default: `true` */\n  labelExpandTrimmedOnHover?: boolean;\n  /** Label trimming mode. Default: `TrimMode.Middle` */\n  labelTrimMode?: TrimMode;\n  /** Label font size in pixels. If not provided, the value of CSS variable `--vis-sankey-node-label-font-size` will be used. Default: `undefined` */\n  labelFontSize?: number;\n  /** Label text separators for wrapping. Default: `[' ', '-']` */\n  labelTextSeparator?: string[];\n  /** Force break words to fit long labels. Default: `true` */\n  labelForceWordBreak?: boolean;\n  /** Label color. Default: `undefined` */\n  labelColor?: ColorAccessor<SankeyNode<N, L>>;\n  /** Label cursor on hover. Default: `undefined` */\n  labelCursor?: StringAccessor<SankeyNode<N, L>>;\n  /** Custom function to set the label visibility. Default: `undefined` */\n  labelVisibility?: ((d: SankeyNode<N, L>, bbox: { x: number; y: number; width: number; height: number }, hovered: boolean) => boolean) | undefined;\n  /** Sub-label font size in pixels. If not provided, the value of CSS variable `--vis-sankey-node-sublabel-font-size` will be used. Default: `undefined` */\n  subLabelFontSize?: number;\n  /** Sub-label color. Default: `undefined` */\n  subLabelColor?: ColorAccessor<SankeyNode<N, L>>;\n  /** Sub-label position. Default: `SankeySubLabelPlacement.Below` */\n  subLabelPlacement?: SankeySubLabelPlacement | string;\n  /**\n   * Sub-label to label width ratio when `subLabelPlacement` is set to `SankeySubLabelPlacement.Inline`\n   * Default: `0.4`, which means that 40% of `labelMaxWidth` will be given to sub-label, and 60% to the main label.\n  */\n  subLabelToLabelInlineWidthRatio?: number;\n}\n\nexport const SankeyDefaultConfig: SankeyConfigInterface<SankeyInputNode, SankeyInputLink> = ({\n  ...ComponentDefaultConfig,\n  heightNormalizationCoeff: 1 / 16,\n  exitTransitionType: SankeyExitTransitionType.Default,\n  enterTransitionType: SankeyEnterTransitionType.Default,\n  id: (d: SankeyInputNode, i: number) => (d as { _id: string })._id ?? `${i}`,\n  highlightSubtreeOnHover: false,\n  highlightDuration: 300,\n  highlightDelay: 1000,\n  iterations: 32,\n  nodeSort: undefined,\n  nodeWidth: 25,\n  nodeAlign: SankeyNodeAlign.Justify,\n  nodeHorizontalSpacing: 150,\n  nodeMinHeight: 20,\n  nodeMaxHeight: 100,\n  nodePadding: 2,\n  nodeColor: (d: SankeyInputNode) => (d as { color: string }).color,\n  nodeFixedValue: (d: SankeyInputNode) => (d as { fixedValue: number }).fixedValue,\n  showSingleNode: true,\n  nodeCursor: undefined,\n  nodeIcon: undefined,\n  nodeIconColor: undefined,\n  label: (d: SankeyInputNode) => (d as { label: string }).label,\n  labelPosition: Position.Auto,\n  labelVerticalAlign: VerticalAlign.Middle,\n  labelBackground: false,\n  labelTextSeparator: [' ', '-'],\n  labelFit: FitMode.Trim,\n  labelTrimMode: TrimMode.Middle,\n  labelForceWordBreak: true,\n  labelFontSize: undefined,\n  labelCursor: undefined,\n  labelColor: undefined,\n  labelMaxWidth: 70,\n  labelExpandTrimmedOnHover: true,\n  labelVisibility: undefined,\n  subLabel: undefined,\n  subLabelFontSize: undefined,\n  subLabelColor: undefined,\n  subLabelPlacement: SankeySubLabelPlacement.Below,\n  subLabelToLabelInlineWidthRatio: 0.4,\n  linkValue: (d: SankeyInputNode) => (d as { value: number }).value,\n  linkColor: (d: SankeyInputNode) => (d as { color: string }).color,\n  linkCursor: undefined,\n\n  // https://stackoverflow.com/a/21648197/2040291\n  init: function () {\n    (this as SankeyConfigInterface<SankeyInputNode, SankeyInputLink>).linkSort =\n      (link2, link1) => getNumber(link1, this.linkValue) - getNumber(link2, this.linkValue)\n    delete this.init\n    return this\n  },\n}).init()\n\n", "import { css, injectGlobal } from '@emotion/css'\nimport { UNOVIS_ICON_FONT_FAMILY_DEFAULT } from 'styles/index'\n\nexport const SANKEY_ICON_SIZE = 22\n\nexport const root = css`\n  label: sankey-component;\n`\n\nexport const variables = injectGlobal`\n  :root {\n     /* Links */\n    --vis-sankey-link-cursor: default;\n    --vis-sankey-link-color: var(--vis-color-main-light);\n    --vis-sankey-link-opacity: 0.5;\n    --vis-sankey-link-hover-opacity: 1.0;\n    /* Nodes */\n    --vis-sankey-node-cursor: default;\n    --vis-sankey-node-color: var(--vis-color-main);\n    --vis-sankey-node-label-color: #575c65;\n    --vis-sankey-node-opacity: 0.9;\n    --vis-sankey-node-hover-opacity: 1.0;\n    /* Node Labels */\n    --vis-sankey-node-label-background-fill-color: #ffffff;\n    --vis-sankey-node-label-background-stroke-color: #eaeaea;\n    --vis-sankey-node-label-background-opacity: 0.9;\n    --vis-sankey-node-label-color: #575c65;\n    --vis-sankey-node-label-cursor: default;\n    --vis-sankey-node-label-font-weight: 600;\n    --vis-sankey-node-label-font-size: 12px;\n    --vis-sankey-node-label-text-decoration: none;\n\n    --vis-sankey-node-sublabel-font-size: 10px;\n    --vis-sankey-node-sublabel-font-weight: 500;\n\n    /* Icons */\n    --vis-sankey-icon-size: ${SANKEY_ICON_SIZE}px;\n    --vis-sankey-icon-color: #ffffff;\n    --vis-sankey-icon-stroke-opacity: 0.6;\n    --vis-sankey-icon-font-family: ${UNOVIS_ICON_FONT_FAMILY_DEFAULT};\n\n    // Undefined by default to allow proper fallback to var(--vis-font-family)\n    /* --vis-sankey-label-font-family: */\n\n    /* Dark Theme */\n    --vis-dark-sankey-link-color: var(--vis-color-main-dark);\n    --vis-dark-sankey-node-color: var(--vis-color-main);\n    --vis-dark-sankey-node-label-color: #eaeaea;\n    --vis-dark-sankey-node-label-background-fill-color: #292b34;\n    --vis-dark-sankey-node-label-background-stroke-color: #575c65;\n    --vis-dark-sankey-icon-color: #292b34;\n  }\n\n  body.theme-dark ${`.${root}`} {\n    --vis-sankey-node-color: var(--vis-dark-sankey-node-color);\n    --vis-sankey-link-color: var(--vis-dark-sankey-link-color);\n    --vis-sankey-node-label-color: var(--vis-dark-sankey-node-label-color);\n    --vis-sankey-node-label-background-fill-color: var(--vis-dark-sankey-label-background-fill-color);\n    --vis-sankey-node-label-background-stroke-color: var(--vis-dark-sankey-label-background-stroke-color);\n    --vis-sankey-icon-color: var(--vis-dark-sankey-icon-color);\n  }\n`\n\nexport const links = css`\n  label: links;\n`\n\nexport const nodes = css`\n  label: nodes;\n`\n\nexport const link = css`\n  label: link;\n\n  path {\n    cursor: var(--vis-sankey-link-cursor);\n    fill: var(--vis-sankey-link-color);\n    fill-opacity: var(--vis-sankey-link-opacity);\n  }\n\n  &:hover {\n    path {\n      fill-opacity: var(--vis-sankey-link-hover-opacity);\n    }\n  }\n`\n\nexport const linkPath = css`\n  label: visible;\n`\n\nexport const linkSelectionHelper = css`\n  label: transparent;\n  opacity: 0;\n`\n\nexport const labelGroup = css`\n  label: label-group;\n  cursor: var(--vis-sankey-node-label-cursor);\n`\n\nexport const labelTrimmed = css`\n  label: label-trimmed;\n`\n\nexport const label = css`\n  label: label;\n  dominant-baseline: hanging;\n\n  fill: var(--vis-sankey-node-label-color);\n  text-decoration: var(--vis-sankey-node-label-text-decoration);\n  font-weight: var(--vis-sankey-node-label-font-weight);\n  user-select: none;\n\n  &, tspan {\n    font-family: var(--vis-sankey-label-font-family, var(--vis-font-family));\n    dominant-baseline: hanging;\n  }\n`\n\nexport const sublabel = css`\n  label: sub-label;\n  dominant-baseline: hanging;\n\n  fill: var(--vis-sankey-node-label-color);\n  user-select: none;\n\n  &, tspan {\n    font-family: var(--vis-sankey-label-font-family, var(--vis-font-family));\n    font-weight: var(--vis-sankey-node-sublabel-font-weight);\n    dominant-baseline: hanging;\n  }\n`\n\nexport const labelBackground = css`\n  label: label-background;\n  stroke: var(--vis-sankey-node-label-background-stroke-color);\n  fill: var(--vis-sankey-node-label-background-fill-color);\n  opacity: var(--vis-sankey-node-label-background-opacity);\n`\n\nexport const hidden = css`\n  label: hidden;\n  visibility: hidden;\n`\n\nexport const forceShow = css`\n  label: forceShow;\n  visibility: visible;\n`\n\nexport const nodeGroup = css`\n  label: node-group;\n`\n\nexport const node = css`\n  label: node;\n\n  cursor: var(--vis-sankey-node-cursor);\n  fill: var(--vis-sankey-node-color);\n  opacity: var(--vis-sankey-node-opacity);\n\n  &:hover {\n    opacity: var(--vis-sankey-node-hover-opacity);\n  }\n`\n\nexport const nodeIcon = css`\n  label: icon;\n\n  font-family: var(--vis-sankey-icon-font-family);\n  text-anchor: middle;\n  font-size: var(--vis-sankey-icon-size);\n  fill: var(--vis-sankey-node-icon-color);\n  stroke: var(--vis-sankey-node-color);\n  stroke-opacity: var(--vis-sankey-icon-stroke-opacity);\n  user-select: none;\n  pointer-events: none;\n`\n\nexport const nodeExit = css`\n  label: node-exit;\n`\n\nexport const background = css`\n  label: background;\n`\n", "import { Selection } from 'd3-selection'\nimport { Transition } from 'd3-transition'\nimport { interpolateNumber } from 'd3-interpolate'\n\n// Utils\nimport { getColor } from 'utils/color'\nimport { getString } from 'utils/data'\nimport { smartTransition } from 'utils/d3'\n\n// Local Types\nimport { SankeyInputLink, SankeyInputNode, SankeyLink } from '../types'\n\n// Config\nimport { SankeyConfigInterface } from '../config'\n\n// Styles\nimport * as s from '../style'\n\nexport type LinkPathOptions = {\n  x0: number;\n  x1: number;\n  y0: number;\n  y1: number;\n  width: number;\n}\n\nexport function linkPath ({ x0, x1, y0, y1, width }: LinkPathOptions): string {\n  const top0 = y0 - width / 2\n  const top1 = y1 - width / 2\n  const bottom0 = y0 + width / 2\n  const bottom1 = y1 + width / 2\n  const centerX = (x0 + x1) / 2\n\n  return `\n    M ${x0}, ${top0}\n\n    C ${centerX}, ${top0}\n      ${centerX}, ${top1}\n      ${x1}, ${top1}\n\n    L ${x1}, ${bottom1}\n\n    C ${centerX}, ${bottom1}\n      ${centerX}, ${bottom0}\n      ${x0}, ${bottom0}\n    z\n  `\n}\n\nexport type LinkAnimState = { x0: number; x1: number; y0: number; y1: number; width: number }\n\nexport interface LinkElement extends SVGPathElement {\n  _animState?: LinkAnimState;\n}\n\nexport function createLinks<N extends SankeyInputNode, L extends SankeyInputLink> (\n  sel: Selection<SVGGElement, SankeyLink<N, L>, SVGGElement, unknown>\n): void {\n  sel.append('path').attr('class', s.linkPath)\n    .attr('d', (d: SankeyLink<N, L>, i: number, el: ArrayLike<LinkElement>) => {\n      el[i]._animState = {\n        x0: d.source.x1,\n        x1: d.target.x0,\n        y0: d.y0,\n        y1: d.y1,\n        width: Math.max(1, d.width),\n      }\n      return linkPath(el[i]._animState)\n    })\n  sel.append('path').attr('class', s.linkSelectionHelper)\n  sel.style('opacity', 0)\n}\n\nexport function updateLinks<N extends SankeyInputNode, L extends SankeyInputLink> (\n  sel: Selection<SVGGElement, SankeyLink<N, L>, SVGGElement, unknown>,\n  config: SankeyConfigInterface<N, L>,\n  duration: number\n): void {\n  smartTransition(sel, duration)\n    .style('opacity', (d: SankeyLink<N, L>) => d._state.greyout ? 0.2 : 1)\n\n  const linkSelection = sel.select<SVGPathElement>(`.${s.linkPath}`)\n    .style('cursor', (d: SankeyLink<N, L>) => getString(d, config.linkCursor))\n\n  const selectionTransition = smartTransition(linkSelection, duration)\n    .style('fill', (link: SankeyLink<N, L>) => getColor(link, config.linkColor))\n\n  if (duration) {\n    (selectionTransition as Transition<SVGPathElement, SankeyLink<N, L>, SVGGElement, unknown>)\n      .attrTween('d', (d: SankeyLink<N, L>, i: number, el: ArrayLike<LinkElement>) => {\n        const previous = el[i]._animState\n        const next = {\n          x0: d.source.x1,\n          x1: d.target.x0,\n          y0: d.y0,\n          y1: d.y1,\n          width: Math.max(1, d.width),\n        }\n        const interpolator = {\n          x0: interpolateNumber(previous.x0, next.x0),\n          x1: interpolateNumber(previous.x1, next.x1),\n          y0: interpolateNumber(previous.y0, next.y0),\n          y1: interpolateNumber(previous.y1, next.y1),\n          width: interpolateNumber(previous.width, next.width),\n        }\n        el[i]._animState = next\n\n        return function (t: number) {\n          return linkPath({\n            x0: interpolator.x0(t),\n            x1: interpolator.x1(t),\n            y0: interpolator.y0(t),\n            y1: interpolator.y1(t),\n            width: interpolator.width(t),\n          })\n        }\n      })\n  } else {\n    linkSelection.attr('d', (d: SankeyLink<N, L>) => linkPath({\n      x0: d.source.x1,\n      x1: d.target.x0,\n      y0: d.y0,\n      y1: d.y1,\n      width: Math.max(1, d.width),\n    }))\n  }\n\n  sel.select(`.${s.linkSelectionHelper}`)\n    .attr('d', (d: SankeyLink<N, L>) => linkPath({\n      x0: d.source.x1,\n      x1: d.target.x0,\n      y0: d.y0,\n      y1: d.y1,\n      width: Math.max(10, d.width),\n    }))\n    .style('cursor', d => getString(d, config.linkCursor))\n}\n\nexport function removeLinks<N extends SankeyInputNode, L extends SankeyInputLink> (\n  sel: Selection<SVGGElement, SankeyLink<N, L>, SVGGElement, unknown>\n): void {\n  sel.remove()\n}\n", "import { Selection } from 'd3-selection'\n\n// Utils\nimport { estimateTextSize, trimSVGText, wrapSVGText } from 'utils/text'\nimport { smartTransition } from 'utils/d3'\nimport { getString, getValue } from 'utils/data'\nimport { getColor } from 'utils/color'\nimport { getCSSVariableValueInPixels } from 'utils/misc'\n\n// Types\nimport { GenericAccessor } from 'types/accessor'\nimport { FitMode, VerticalAlign } from 'types/text'\nimport { Position } from 'types/position'\n\n// Local Types\nimport { SankeyInputLink, SankeyInputNode, SankeyNode, SankeySubLabelPlacement } from '../types'\n\n// Config\nimport { SankeyConfigInterface } from '../config'\n\n// Styles\nimport * as s from '../style'\n\n\nconst NODE_LABEL_SPACING = 10\nconst LABEL_BLOCK_PADDING = 6.5\n\nfunction getLabelBackground (\n  width: number,\n  height: number,\n  orientation: Position.Left | Position.Right,\n  arrowWidth = 5,\n  arrowHeight = 8\n): string {\n  const halfHeight = height / 2\n  const halfArrowHeight = arrowHeight / 2\n\n  if (orientation === Position.Left) {\n    const rightArrowPos = `L 0 ${halfHeight - halfArrowHeight}   L   ${+arrowWidth} ${halfHeight} L 0 ${halfHeight + halfArrowHeight}`\n    return `\n      M 0 0\n      ${rightArrowPos}\n      L 0  ${height}\n      L ${-width} ${height}\n      L ${-width} 0\n      L 0 0 `\n  } else {\n    const leftArrowPos = `L 0 ${halfHeight - halfArrowHeight}   L   ${-arrowWidth} ${halfHeight} L 0 ${halfHeight + halfArrowHeight}`\n    return `\n      M 0 0\n      ${leftArrowPos}\n      L 0  ${height}\n      L ${width} ${height}\n      L ${width} 0\n      L 0 0 `\n  }\n}\n\nexport function getLabelOrientation<N extends SankeyInputNode, L extends SankeyInputLink> (\n  d: SankeyNode<N, L>,\n  sankeyWidth: number,\n  labelPosition: GenericAccessor<Position.Auto | Position.Left | Position.Right | string, SankeyNode<N, L>>\n): (Position.Left | Position.Right) {\n  let orientation = getValue(d, labelPosition)\n  if (orientation === Position.Auto || !orientation) {\n    orientation = d.x0 < sankeyWidth / 2 ? Position.Left : Position.Right\n  }\n\n  return orientation as (Position.Left | Position.Right)\n}\n\nexport const requiredLabelSpace = (labelWidth: number, labelFontSize: number): { width: number; height: number } => {\n  return {\n    height: labelFontSize * 2.5 + 2 * LABEL_BLOCK_PADDING, // Assuming 2.5 lines per label\n    width: labelWidth + 2 * NODE_LABEL_SPACING + 2 * LABEL_BLOCK_PADDING,\n  }\n}\n\nexport function getLabelGroupXTranslate<N extends SankeyInputNode, L extends SankeyInputLink> (\n  d: SankeyNode<N, L>,\n  config: SankeyConfigInterface<N, L>,\n  width: number\n): number {\n  const orientation = getLabelOrientation(d, width, config.labelPosition)\n  switch (orientation) {\n    case Position.Right: return config.nodeWidth + NODE_LABEL_SPACING\n    case Position.Left:\n    default:\n      return -NODE_LABEL_SPACING\n  }\n}\n\nexport function getLabelGroupYTranslate<N extends SankeyInputNode, L extends SankeyInputLink> (\n  d: SankeyNode<N, L>,\n  labelGroupHeight: number,\n  config: SankeyConfigInterface<N, L>\n): number {\n  const nodeHeight = d.y1 - d.y0\n  if (config.labelBackground && (nodeHeight < labelGroupHeight)) return (nodeHeight - labelGroupHeight) / 2\n\n  switch (config.labelVerticalAlign) {\n    case VerticalAlign.Bottom: return nodeHeight - labelGroupHeight\n    case VerticalAlign.Middle: return nodeHeight / 2 - labelGroupHeight / 2\n    case VerticalAlign.Top:\n    default: return 0\n  }\n}\n\nexport function getLabelTextAnchor<N extends SankeyInputNode, L extends SankeyInputLink> (\n  d: SankeyNode<N, L>,\n  config: SankeyConfigInterface<N, L>,\n  width: number\n): string {\n  const orientation = getLabelOrientation(d, width, config.labelPosition)\n  switch (orientation) {\n    case Position.Right: return 'start'\n    case Position.Left:\n    default:\n      return 'end'\n  }\n}\n\nexport function getSubLabelTextAnchor<N extends SankeyInputNode, L extends SankeyInputLink> (\n  d: SankeyNode<N, L>,\n  config: SankeyConfigInterface<N, L>,\n  width: number\n): string {\n  const isSublabelInline = config.subLabelPlacement === SankeySubLabelPlacement.Inline\n  const orientation = getLabelOrientation(d, width, config.labelPosition)\n  switch (orientation) {\n    case Position.Right: return isSublabelInline ? 'end' : 'start'\n    case Position.Left:\n    default:\n      return isSublabelInline ? 'start' : 'end'\n  }\n}\n\nexport function renderLabel<N extends SankeyInputNode, L extends SankeyInputLink> (\n  labelGroup: Selection<SVGGElement, SankeyNode<N, L>, SVGGElement, any>,\n  d: SankeyNode<N, L>,\n  config: SankeyConfigInterface<N, L>,\n  width: number,\n  duration: number,\n  forceExpand = false\n): { x: number; y: number; width: number; height: number; layer: number; selection: any; hidden?: boolean } {\n  const labelTextSelection: Selection<SVGTextElement, SankeyNode<N, L>, SVGGElement, SankeyNode<N, L>> = labelGroup.select(`.${s.label}`)\n  const labelShowBackground = config.labelBackground || forceExpand\n  const sublabelTextSelection: Selection<SVGTextElement, SankeyNode<N, L>, SVGGElement, SankeyNode<N, L>> = labelGroup.select(`.${s.sublabel}`)\n  const labelPadding = labelShowBackground ? LABEL_BLOCK_PADDING : 0\n  const isSublabelInline = config.subLabelPlacement === SankeySubLabelPlacement.Inline\n  const separator = config.labelForceWordBreak ? '' : config.labelTextSeparator\n  const fastEstimatesMode = true // Fast but inaccurate\n  const fontWidthToHeightRatio = 0.52\n  const dy = 0.32\n  const labelOrientation = getLabelOrientation(d, width, config.labelPosition)\n  const labelOrientationMult = labelOrientation === Position.Left ? -1 : 1\n  const labelText = getString(d, config.label)\n  const sublabelText = getString(d, config.subLabel)\n  let wasTrimmed = false\n\n  const labelFontSize = config.labelFontSize ?? getCSSVariableValueInPixels('var(--vis-sankey-node-label-font-size)', labelGroup.node())\n  const subLabelFontSize = config.subLabelFontSize ?? getCSSVariableValueInPixels('var(--vis-sankey-node-sublabel-font-size)', labelGroup.node())\n\n  // Render the main label, wrap / trim it and estimate its size\n  const labelsFontSizeDifference = sublabelText ? labelFontSize - subLabelFontSize : 0\n  const labelTranslateY = labelPadding + ((isSublabelInline && labelsFontSizeDifference < 0) ? -0.6 * labelsFontSizeDifference : 0)\n  labelTextSelection\n    .text(labelText)\n    .attr('font-size', labelFontSize)\n    .style('fill', getColor(d, config.labelColor))\n    .attr('transform', `translate(${labelOrientationMult * labelPadding},${labelTranslateY})`)\n    .style('cursor', (d: SankeyNode<N, L>) => getString(d, config.labelCursor))\n\n  const labelMaxWidth = isSublabelInline ? config.labelMaxWidth * (1 - (sublabelText ? config.subLabelToLabelInlineWidthRatio : 0)) : config.labelMaxWidth\n  if (config.labelFit === FitMode.Wrap || forceExpand) wrapSVGText(labelTextSelection, labelMaxWidth, separator)\n  else wasTrimmed = trimSVGText(labelTextSelection, labelMaxWidth, config.labelTrimMode, fastEstimatesMode, labelFontSize, fontWidthToHeightRatio)\n\n  const labelSize = estimateTextSize(labelTextSelection, labelFontSize, dy, fastEstimatesMode, fontWidthToHeightRatio)\n\n  // Render the sub-label, wrap / trim it and estimate its size\n  const sublabelTranslateX = labelOrientationMult * (labelPadding + (isSublabelInline ? config.labelMaxWidth : 0))\n  const sublabelMarginTop = 0\n  const sublabelTranslateY = labelPadding + (isSublabelInline\n    ? (labelsFontSizeDifference > 0 ? 0.6 * labelsFontSizeDifference : 0)\n    : labelSize.height + sublabelMarginTop)\n  sublabelTextSelection\n    .text(sublabelText)\n    .attr('font-size', subLabelFontSize)\n    .style('fill', getColor(d, config.subLabelColor))\n    .attr('transform', `translate(${sublabelTranslateX},${sublabelTranslateY})`)\n    .style('cursor', (d: SankeyNode<N, L>) => getString(d, config.labelCursor))\n\n  const sublabelMaxWidth = isSublabelInline ? config.labelMaxWidth * config.subLabelToLabelInlineWidthRatio : config.labelMaxWidth\n  if (config.labelFit === FitMode.Wrap || forceExpand) wrapSVGText(sublabelTextSelection, sublabelMaxWidth, separator)\n  else wasTrimmed = wasTrimmed || trimSVGText(sublabelTextSelection, sublabelMaxWidth, config.labelTrimMode, fastEstimatesMode, subLabelFontSize, fontWidthToHeightRatio)\n\n  labelGroup.classed(s.labelTrimmed, wasTrimmed)\n  const sublabelSize = estimateTextSize(sublabelTextSelection, subLabelFontSize, dy, fastEstimatesMode, fontWidthToHeightRatio)\n\n  // Draw the background if needed\n  const labelGroupHeight = (isSublabelInline ? Math.max(labelSize.height, sublabelSize.height) : (labelSize.height + sublabelSize.height)) + 2 * labelPadding\n  const labelBackground = labelGroup.select(`.${s.labelBackground}`)\n\n  labelBackground\n    .attr('d', labelShowBackground ? getLabelBackground(config.labelMaxWidth + 2 * labelPadding, labelGroupHeight, labelOrientation as (Position.Left | Position.Right)) : null)\n\n  // Position the label\n  const labelTextAnchor = getLabelTextAnchor(d, config, width)\n  const sublabelTextAnchor = getSubLabelTextAnchor(d, config, width)\n  const xTranslate = getLabelGroupXTranslate(d, config, width)\n  const yTranslate = getLabelGroupYTranslate(d, labelGroupHeight, config)\n\n  labelTextSelection.attr('text-anchor', labelTextAnchor)\n  sublabelTextSelection.attr('text-anchor', sublabelTextAnchor)\n\n  const hasTransform = !!labelGroup.attr('transform')\n  smartTransition(labelGroup, hasTransform ? duration : 0)\n    .attr('transform', `translate(${xTranslate},${yTranslate})`)\n\n  return {\n    x: d.x0 + xTranslate,\n    y: d.y0 + yTranslate,\n    width: config.labelMaxWidth,\n    height: labelGroupHeight,\n    layer: d.layer,\n    selection: labelGroup,\n  }\n}\n", "import { select, Selection } from 'd3-selection'\n\n// Utils\nimport { getColor } from 'utils/color'\nimport { getString } from 'utils/data'\nimport { smartTransition } from 'utils/d3'\n\n// Types\nimport { Spacing } from 'types/spacing'\n\n// Local Types\nimport { SankeyEnterTransitionType, SankeyExitTransitionType, SankeyInputLink, SankeyInputNode, SankeyNode, SankeyNodeAlign } from '../types'\n\n// Config\nimport { SankeyConfigInterface } from '../config'\n\n// Helpers\nimport { renderLabel } from './label'\n\n// Styles\nimport * as s from '../style'\n\nexport function createNodes<N extends SankeyInputNode, L extends SankeyInputLink> (\n  sel: Selection<SVGGElement, SankeyNode<N, L>, SVGGElement, unknown>,\n  config: SankeyConfigInterface<N, L>,\n  width: number,\n  bleed: Spacing\n): void {\n  const { enterTransitionType } = config\n\n  // Node\n  sel.append('rect')\n    .attr('class', s.node)\n    .attr('width', config.nodeWidth)\n    .attr('height', d => d.y1 - d.y0)\n    .style('fill', node => getColor(node, config.nodeColor))\n\n  // Labels\n  const labelGroup = sel.append('g').attr('class', s.labelGroup)\n  labelGroup.append('path').attr('class', s.labelBackground)\n  labelGroup.append('text').attr('class', s.label)\n  labelGroup.append('text').attr('class', s.sublabel)\n\n  // Node icon\n  sel.append('text').attr('class', s.nodeIcon)\n    .attr('text-anchor', 'middle')\n    .attr('dy', '0.5px')\n\n  sel\n    .attr('transform', d => {\n      const x = (enterTransitionType === SankeyEnterTransitionType.FromAncestor && d.targetLinks?.[0]) ? d.targetLinks[0].source.x0 : d.x0\n      return `translate(${sel.size() === 1 ? width * 0.5 - bleed.left : x}, ${d.y0})`\n    })\n    .style('opacity', 0)\n}\n\nfunction getNodeXPos<N extends SankeyInputNode, L extends SankeyInputLink> (\n  d: SankeyNode<N, L>,\n  config: SankeyConfigInterface<N, L>,\n  width: number,\n  bleed: Spacing,\n  hasLinks: boolean\n): number {\n  if (hasLinks) return d.x0\n\n  switch (config.nodeAlign) {\n    case SankeyNodeAlign.Left: return d.x0\n    case SankeyNodeAlign.Right: return width - bleed.right\n    case SankeyNodeAlign.Center:\n    case SankeyNodeAlign.Justify:\n    default: return width * 0.5 - bleed.left\n  }\n}\n\nexport function updateNodes<N extends SankeyInputNode, L extends SankeyInputLink> (\n  sel: Selection<SVGGElement, SankeyNode<N, L>, SVGGElement, unknown>,\n  config: SankeyConfigInterface<N, L>,\n  width: number,\n  bleed: Spacing,\n  hasLinks: boolean,\n  duration: number\n): void {\n  smartTransition(sel, duration)\n    .attr('transform', d => `translate(${getNodeXPos(d, config, width, bleed, hasLinks)},${d.y0})`)\n    .style('opacity', d => d._state.greyout ? 0.2 : 1)\n\n  // Node\n  smartTransition(sel.select(`.${s.node}`), duration)\n    .attr('width', config.nodeWidth)\n    .attr('height', (d: SankeyNode<N, L>) => d.y1 - d.y0)\n    .style('cursor', (d: SankeyNode<N, L>) => getString(d, config.nodeCursor))\n    .style('fill', (d: SankeyNode<N, L>) => getColor(d, config.nodeColor))\n\n  // Label Rendering\n  // eslint-disable-next-line @typescript-eslint/no-use-before-define\n  renderNodeLabels(sel, config, width, duration)\n\n  // Node Icon\n  const nodeIcon = sel.select(`.${s.nodeIcon}`)\n  if (config.nodeIcon) {\n    nodeIcon\n      .attr('visibility', null)\n      .attr('text-anchor', 'middle')\n      .style('dominant-baseline', 'central')\n      .style('stroke', (d: SankeyNode<N, L>) => getColor(d, config.nodeIconColor))\n      .style('fill', (d: SankeyNode<N, L>) => getColor(d, config.nodeIconColor))\n      .style('font-size', (d: SankeyNode<N, L>) => {\n        const nodeHeight = d.y1 - d.y0\n        return nodeHeight < s.SANKEY_ICON_SIZE ? `${nodeHeight * 0.65}px` : null\n      })\n      .html((d: SankeyNode<N, L>) => getString(d, config.nodeIcon))\n\n    smartTransition(nodeIcon, duration)\n      .attr('x', config.nodeWidth / 2)\n      .attr('y', (d: SankeyNode<N, L>) => (d.y1 - d.y0) / 2)\n  } else {\n    nodeIcon\n      .attr('visibility', 'hidden')\n  }\n}\n\nexport function renderNodeLabels<N extends SankeyInputNode, L extends SankeyInputLink> (\n  sel: Selection<SVGGElement, SankeyNode<N, L>, SVGGElement, unknown>,\n  config: SankeyConfigInterface<N, L>,\n  width: number,\n  duration: number,\n  enforceNodeVisibility?: SankeyNode<N, L>\n): void {\n  // Label Rendering\n  const labelGroupSelection: Selection<SVGGElement, SankeyNode<N, L>, SVGGElement, any> = sel.select(`.${s.labelGroup}`)\n  const labelGroupEls = labelGroupSelection.nodes() || []\n\n  // After rendering Label return a BBox so we can do intersection detection and hide some of tem\n  const labelGroupBBoxes = labelGroupEls.map(g => {\n    const gSelection: Selection<SVGGElement, SankeyNode<N, L>, SVGGElement, any> = select(g)\n    const datum = gSelection.datum()\n    return renderLabel(gSelection, datum, config, width, duration, enforceNodeVisibility === datum)\n  })\n\n  if (config.labelVisibility) {\n    for (const b of labelGroupBBoxes) {\n      const datum = b.selection.datum() as SankeyNode<N, L>\n      const box = { x: b.x, y: b.y, width: b.width, height: b.height }\n      b.hidden = !config.labelVisibility(datum, box, enforceNodeVisibility === datum)\n    }\n  } else {\n    // Detect intersecting labels\n    const maxLayer = Math.max(...labelGroupBBoxes.map(b => b.layer))\n    for (let layer = 0; layer <= maxLayer; layer += 1) {\n      const boxes = labelGroupBBoxes.filter(b => (b.layer === layer))\n      boxes.sort((a, b) => a.y - b.y)\n\n      let lastVisibleIdx = 0\n      for (let i = 1; i < boxes.length; i += 1) {\n        const b0 = boxes[lastVisibleIdx]\n        const b1 = boxes[i]\n\n        const shouldBeHidden = b1.y < (b0.y + b0.height)\n        if (shouldBeHidden) {\n          if (b1.selection.datum() === enforceNodeVisibility) b0.hidden = true // If the hovered node should be hidden, hide the previous one instead\n          else b1.hidden = true\n        }\n\n        if (!b1.hidden) lastVisibleIdx = i\n      }\n    }\n  }\n\n  // Hide intersecting labels\n  for (const b of labelGroupBBoxes) {\n    b.selection.classed(s.hidden, b.hidden)\n  }\n}\n\nexport function removeNodes<N extends SankeyInputNode, L extends SankeyInputLink> (\n  selection: Selection<SVGGElement, SankeyNode<N, L>, SVGGElement, unknown>,\n  config: SankeyConfigInterface<N, L>,\n  duration: number\n): void {\n  const { exitTransitionType } = config\n\n  selection.each((d, i, els) => {\n    const node = select(els[i])\n    const transition = smartTransition(node, duration)\n    if ((exitTransitionType === SankeyExitTransitionType.ToAncestor) && d.targetLinks?.[0]) {\n      transition.attr('transform', `translate(${d.targetLinks[0].source.x0},${d.y0})`)\n    }\n\n    transition\n      .style('opacity', 0)\n      .remove()\n  })\n}\n\nexport function onNodeMouseOver<N extends SankeyInputNode, L extends SankeyInputLink> (\n  d: SankeyNode<N, L>,\n  nodeSelection: Selection<SVGGElement, SankeyNode<N, L>, SVGGElement, unknown>,\n  config: SankeyConfigInterface<N, L>,\n  width: number\n): void {\n  const labelGroup = nodeSelection.raise()\n    .select<SVGGElement>(`.${s.labelGroup}`)\n\n  if ((config.labelExpandTrimmedOnHover && labelGroup.classed(s.labelTrimmed)) || labelGroup.classed(s.hidden)) {\n    renderLabel(labelGroup, d, config, width, 0, true)\n  }\n  labelGroup.classed(s.forceShow, true)\n}\n\nexport function onNodeMouseOut<N extends SankeyInputNode, L extends SankeyInputLink> (\n  d: SankeyNode<N, L>,\n  nodeSelection: Selection<SVGGElement, SankeyNode<N, L>, SVGGElement, unknown>,\n  config: SankeyConfigInterface<N, L>,\n  width: number\n): void {\n  const labelGroup = nodeSelection.select<SVGGElement>(`.${s.labelGroup}`)\n  if (config.labelExpandTrimmedOnHover || labelGroup.classed(s.hidden)) {\n    renderLabel(labelGroup, d, config, width, 0)\n  }\n  labelGroup.classed(s.forceShow, false)\n}\n", "import { select, Selection } from 'd3-selection'\nimport { sankey, SankeyGraph } from 'd3-sankey'\nimport { extent, max, sum } from 'd3-array'\nimport { scaleLinear } from 'd3-scale'\n\n// Core\nimport { ComponentCore } from 'core/component'\nimport { GraphDataModel } from 'data-models/graph'\n\n// Types\nimport { ExtendedSizeComponent, Sizing } from 'types/component'\nimport { Position } from 'types/position'\nimport { Spacing } from 'types/spacing'\nimport { VerticalAlign } from 'types/text'\n\n// Utils\nimport { smartTransition } from 'utils/d3'\nimport { getNumber, getString, groupBy, isNumber } from 'utils/data'\nimport { getCSSVariableValueInPixels } from 'utils/misc'\n\n// Config\nimport { SankeyDefaultConfig, SankeyConfigInterface } from './config'\n\n// Styles\nimport * as s from './style'\n\n// Local Types\nimport { SankeyInputLink, SankeyInputNode, SankeyLayout, SankeyLink, SankeyNode } from './types'\n\n// Modules\nimport { createLinks, removeLinks, updateLinks } from './modules/link'\nimport { createNodes, onNodeMouseOut, onNodeMouseOver, removeNodes, updateNodes } from './modules/node'\nimport { getLabelOrientation, requiredLabelSpace } from './modules/label'\n\nexport class Sankey<\n  N extends SankeyInputNode,\n  L extends SankeyInputLink,\n> extends ComponentCore<\n  {nodes: N[]; links?: L[]},\n  SankeyConfigInterface<N, L>\n  > implements ExtendedSizeComponent {\n  static selectors = s\n  protected _defaultConfig = SankeyDefaultConfig as SankeyConfigInterface<N, L>\n  public config: SankeyConfigInterface<N, L> = this._defaultConfig\n  datamodel: GraphDataModel<N, L, SankeyNode<N, L>, SankeyLink<N, L>> = new GraphDataModel()\n  private _extendedWidth: number | undefined = undefined\n  private _extendedHeight: number | undefined = undefined\n  private _extendedHeightIncreased: number | undefined = undefined\n  private _linksGroup: Selection<SVGGElement, unknown, SVGGElement, unknown>\n  private _nodesGroup: Selection<SVGGElement, unknown, SVGGElement, unknown>\n  private _backgroundRect: Selection<SVGRectElement, unknown, SVGGElement, unknown>\n  private _sankey = sankey<SankeyGraph<N, L>, SankeyNode<N, L>, SankeyLink<N, L>>()\n  private _highlightTimeoutId: ReturnType<typeof setTimeout> | null = null\n  private _highlightActive = false\n  events = {\n    [Sankey.selectors.nodeGroup]: {\n      mouseenter: this._onNodeMouseOver.bind(this),\n      mouseleave: this._onNodeMouseOut.bind(this),\n    },\n    [Sankey.selectors.node]: {\n      mouseenter: this._onNodeRectMouseOver.bind(this),\n      mouseleave: this._onNodeRectMouseOut.bind(this),\n    },\n    [Sankey.selectors.link]: {\n      mouseenter: this._onLinkMouseOver.bind(this),\n      mouseleave: this._onLinkMouseOut.bind(this),\n    },\n  }\n\n  constructor (config?: SankeyConfigInterface<N, L>) {\n    super()\n    if (config) this.setConfig(config)\n    this._backgroundRect = this.g.append('rect').attr('class', s.background)\n    this._linksGroup = this.g.append('g').attr('class', s.links)\n    this._nodesGroup = this.g.append('g').attr('class', s.nodes)\n  }\n\n  get bleed (): Spacing {\n    const { config, datamodel: { nodes, links } } = this\n    const labelFontSize = config.labelFontSize ?? getCSSVariableValueInPixels('var(--vis-sankey-label-font-size)', this.element)\n    const labelSize = requiredLabelSpace(config.labelMaxWidth, labelFontSize)\n\n    let left = 0\n    let right = 0\n\n    // We pre-calculate sankey layout to get information about node labels placement and calculate bleed properly\n    // Potentially it can be a performance bottleneck for large layouts, but generally rendering of such layouts is much more computationally heavy\n    if (nodes.length) {\n      const sankeyProbeSize = 1000\n      this._populateLinkAndNodeValues()\n      this._sankey.size([sankeyProbeSize, sankeyProbeSize])\n      this._sankey({ nodes, links })\n      const maxDepth = max(nodes, d => d.depth)\n      const zeroDepthNodes = nodes.filter(d => d.depth === 0)\n      const maxDepthNodes = nodes.filter(d => d.depth === maxDepth)\n\n      left = zeroDepthNodes.some(d => getLabelOrientation(d, sankeyProbeSize, config.labelPosition) === Position.Left) ? labelSize.width : 0\n      right = maxDepthNodes.some(d => getLabelOrientation(d, sankeyProbeSize, config.labelPosition) === Position.Right) ? labelSize.width : 0\n    }\n\n    const top = config.labelVerticalAlign === VerticalAlign.Top ? 0\n      : config.labelVerticalAlign === VerticalAlign.Bottom ? labelSize.height\n        : labelSize.height / 2\n\n    const bottom = config.labelVerticalAlign === VerticalAlign.Top ? labelSize.height\n      : config.labelVerticalAlign === VerticalAlign.Bottom ? 0\n        : labelSize.height / 2\n\n    return { top, bottom, left, right }\n  }\n\n  setData (data: { nodes: N[]; links?: L[] }): void {\n    super.setData(data)\n\n    // Pre-calculate component size for Sizing.EXTEND\n    if ((this.sizing !== Sizing.Fit) || !this._hasLinks()) this._preCalculateComponentSize()\n  }\n\n  setConfig (config: SankeyConfigInterface<N, L>): void {\n    super.setConfig(config)\n\n    // Pre-calculate component size for Sizing.EXTEND\n    if ((this.sizing !== Sizing.Fit) || !this._hasLinks()) this._preCalculateComponentSize()\n\n    // Using \"as any\" because typings are not full (\"@types/d3-sankey\": \"^0.11.2\")\n    const nodeId = ((d: SankeyInputNode, i: number) => getString(d, this.config.id, i)) as any;\n    (this._sankey as any).linkSort(this.config.linkSort)\n    this._sankey\n      .nodeId(nodeId)\n      .nodeWidth(this.config.nodeWidth)\n      .nodePadding(this.config.nodePadding)\n      .nodeAlign(SankeyLayout[this.config.nodeAlign])\n      .nodeSort(this.config.nodeSort)\n      .iterations(this.config.iterations)\n  }\n\n  _render (customDuration?: number): void {\n    const { config, bleed, datamodel: { nodes, links } } = this\n    const duration = isNumber(customDuration) ? customDuration : config.duration\n\n    if (\n      (nodes.length === 0) ||\n      (nodes.length === 1 && links.length > 0) ||\n      (nodes.length === 1 && !config.showSingleNode) ||\n      (nodes.length > 1 && links.length === 0)\n    ) {\n      this._linksGroup.selectAll<SVGGElement, SankeyLink<N, L>>(`.${s.link}`).call(removeLinks, duration)\n      this._nodesGroup.selectAll<SVGGElement, SankeyNode<N, L>>(`.${s.nodeGroup}`).call(removeNodes, config, duration)\n    }\n\n    // Prepare Layout\n    this._prepareLayout()\n\n    // Links\n    smartTransition(this._linksGroup, duration).attr('transform', `translate(${bleed.left},${bleed.top})`)\n    const linkSelection = this._linksGroup.selectAll<SVGGElement, SankeyLink<N, L>>(`.${s.link}`)\n      .data(links, (d, i) => config.id(d, i) ?? i)\n    const linkSelectionEnter = linkSelection.enter().append('g').attr('class', s.link)\n    linkSelectionEnter.call(createLinks)\n    linkSelection.merge(linkSelectionEnter).call(updateLinks, config, duration)\n    linkSelection.exit<SankeyLink<N, L>>().call(removeLinks)\n\n    // Nodes\n    smartTransition(this._nodesGroup, duration).attr('transform', `translate(${bleed.left},${bleed.top})`)\n\n    const nodeSelection = this._nodesGroup.selectAll<SVGGElement, SankeyNode<N, L>>(`.${s.nodeGroup}`)\n      .data(nodes, (d, i) => config.id(d, i) ?? i)\n    const nodeSelectionEnter = nodeSelection.enter().append('g').attr('class', s.nodeGroup)\n    nodeSelectionEnter.call(createNodes, this.config, this._width, bleed)\n    nodeSelection.merge(nodeSelectionEnter).call(updateNodes, config, this._width, bleed, this._hasLinks(), duration)\n    nodeSelection.exit<SankeyNode<N, L>>()\n      .attr('class', s.nodeExit)\n      .call(removeNodes, config, duration)\n\n    // Background\n    this._backgroundRect\n      .attr('width', this.getWidth())\n      .attr('height', this.getHeight())\n      .attr('opacity', 0)\n  }\n\n  private _populateLinkAndNodeValues (): void {\n    const { config, datamodel } = this\n\n    const nodes = datamodel.nodes\n    const links = datamodel.links\n\n    // For d3-sankey each link must be an object with the `value` property\n    links.forEach((link, i) => {\n      link.value = getNumber(link, d => getNumber(d, config.linkValue, i))\n    })\n\n    // Populating node.fixedValue for d3-sankey\n    nodes.forEach((node, i) => {\n      node.fixedValue = getNumber(node, config.nodeFixedValue, i)\n    })\n  }\n\n  private _preCalculateComponentSize (): void {\n    const { bleed, config, datamodel } = this\n    const nodes = datamodel.nodes\n\n\n    if (nodes.length) {\n      this._populateLinkAndNodeValues()\n      this._sankey(datamodel)\n    }\n\n    const scaleExtent = extent(nodes, d => d.value || undefined)\n    const scaleRange = [config.nodeMinHeight, config.nodeMaxHeight]\n    const scale = scaleLinear().domain(scaleExtent).range(scaleRange).clamp(true)\n    nodes.forEach(n => { n._state.precalculatedHeight = scale(n.value) || config.nodeMinHeight })\n\n    const groupedByColumn: { [key: string]: SankeyNode<N, L>[] } = groupBy(nodes, d => d.layer)\n    const values = Object.values(groupedByColumn)\n      .map((group) =>\n        sum(group.map(n => n._state.precalculatedHeight + config.nodePadding)) - config.nodePadding\n      )\n\n    const height = max(values) || config.nodeMinHeight\n    this._extendedHeight = height + bleed.top + bleed.bottom\n    this._extendedWidth = Math.max(0, (config.nodeWidth + config.nodeHorizontalSpacing) * Object.keys(groupedByColumn).length - config.nodeHorizontalSpacing + bleed.left + bleed.right)\n  }\n\n  private _prepareLayout (): void {\n    const { config, bleed, datamodel } = this\n    const isExtendedSize = this.sizing === Sizing.Extend\n    const sankeyHeight = this.sizing === Sizing.Fit ? this._height : this._extendedHeight\n    const sankeyWidth = this.sizing === Sizing.Fit ? this._width : this._extendedWidth\n    this._sankey\n      .size([\n        Math.max(sankeyWidth - bleed.left - bleed.right, 0),\n        Math.max(sankeyHeight - bleed.top - bleed.bottom, 0),\n      ])\n\n    const nodes = datamodel.nodes\n    const links = datamodel.links\n\n    // If there are no links we manually calculate the visualization layout\n    if (!this._hasLinks()) {\n      let y = 0\n      const nodesTotalHeight = sum(nodes, n => n._state.precalculatedHeight || 1)\n      for (const node of nodes) {\n        const sankeyHeight = this.getHeight() - bleed.top - bleed.bottom\n        const nodeHeight = node._state.precalculatedHeight || 1\n        const h = isExtendedSize ? nodeHeight : (sankeyHeight - config.nodePadding * (nodes.length - 1)) * nodeHeight / nodesTotalHeight\n\n        node.width = Math.max(10, config.nodeWidth)\n        node.x0 = 0\n        node.x1 = node.width\n        node.y0 = y\n        node.y1 = y + Math.max(1, h)\n        node.layer = 0\n\n        y = node.y1 + config.nodePadding\n      }\n\n      this._extendedHeightIncreased = undefined\n      return\n    }\n\n    // Calculate sankey\n    this._populateLinkAndNodeValues()\n    this._sankey({ nodes, links })\n\n    // Setting minimum node height\n    //   Default: 1px\n    //   Extended size nodes that have no links: config.nodeMinHeight\n    for (const node of nodes) {\n      const singleExtendedSize = isExtendedSize && !node.sourceLinks?.length && !node.targetLinks?.length\n      const h = Math.max(singleExtendedSize ? config.nodeMinHeight : 1, node.y1 - node.y0)\n      const y = (node.y0 + node.y1) / 2\n      node.y0 = y - h / 2\n      node.y1 = y + h / 2\n    }\n\n    if (isExtendedSize) {\n      const height = max(nodes, d => d.y1)\n      this._extendedHeightIncreased = height + bleed.top + bleed.bottom\n    }\n  }\n\n  getWidth (): number {\n    return this.sizing === Sizing.Fit ? this._width : (this._extendedWidth || 0)\n  }\n\n  getHeight (): number {\n    return this.sizing === Sizing.Fit ? this._height : Math.max(this._extendedHeightIncreased || 0, this._extendedHeight || 0)\n  }\n\n  getLayoutWidth (): number {\n    return this.sizing === Sizing.Fit ? this._width : this._extendedWidth\n  }\n\n  getLayoutHeight (): number {\n    return this.sizing === Sizing.Fit ? this._height : (this._extendedHeightIncreased || this._extendedHeight)\n  }\n\n  getColumnCenters (): number[] {\n    const { datamodel } = this\n    const nodes = datamodel.nodes as SankeyNode<N, L>[]\n    const centers = nodes.reduce((pos, node) => {\n      const idx = node.layer\n      if (!isFinite(pos[idx])) {\n        pos[idx] = (node.x0 + node.x1) / 2\n      }\n      return pos\n    }, [])\n\n    return centers\n  }\n\n  highlightSubtree (node: SankeyNode<N, L>): void {\n    const { config, datamodel } = this\n\n    clearTimeout(this._highlightTimeoutId)\n    this._highlightTimeoutId = setTimeout(() => {\n      for (const n of datamodel.nodes) n._state.greyout = true\n      for (const l of datamodel.links) l._state.greyout = true\n\n      this.recursiveSetSubtreeState(node, 'sourceLinks', 'target', 'greyout', false)\n      this.recursiveSetSubtreeState(node, 'targetLinks', 'source', 'greyout', false)\n      this._render(config.highlightDuration)\n      this._highlightActive = true\n    }, config.highlightDelay)\n  }\n\n  recursiveSetSubtreeState (\n    node: SankeyNode<N, L>,\n    linksKey: 'sourceLinks' | 'targetLinks',\n    nodeKey: 'source' | 'target',\n    key: string,\n    value: unknown\n  ): void {\n    node._state[key] = value\n\n    for (const l of node[linksKey]) {\n      l._state[key] = value\n      this.recursiveSetSubtreeState(l[nodeKey] as SankeyNode<N, L>, linksKey, nodeKey, key, value)\n    }\n  }\n\n  disableHighlight (): void {\n    const { config, datamodel } = this\n\n    clearTimeout(this._highlightTimeoutId)\n    if (this._highlightActive) {\n      this._highlightActive = false\n\n      for (const n of datamodel.nodes) n._state.greyout = false\n      for (const l of datamodel.links) l._state.greyout = false\n      this._render(config.highlightDuration)\n    }\n  }\n\n  private _hasLinks (): boolean {\n    const { datamodel } = this\n    return datamodel.links.length > 0\n  }\n\n  private _onNodeMouseOver (d: SankeyNode<N, L>, event: MouseEvent): void {\n    onNodeMouseOver(d, select(event.currentTarget as SVGGElement), this.config, this._width)\n  }\n\n  private _onNodeMouseOut (d: SankeyNode<N, L>, event: MouseEvent): void {\n    onNodeMouseOut(d, select(event.currentTarget as SVGGElement), this.config, this._width)\n  }\n\n  private _onNodeRectMouseOver (d: SankeyNode<N, L>): void {\n    const { config } = this\n    if (config.highlightSubtreeOnHover) this.highlightSubtree(d)\n  }\n\n  private _onNodeRectMouseOut (d: SankeyNode<N, L>): void {\n    this.disableHighlight()\n  }\n\n  private _onLinkMouseOver (d: SankeyLink<N, L>, event: MouseEvent): void {\n    const { config } = this\n\n    if (config.highlightSubtreeOnHover) this.highlightSubtree(d.target as SankeyNode<N, L>)\n  }\n\n  private _onLinkMouseOut (d: SankeyLink<N, L>, event: MouseEvent): void {\n    this.disableHighlight()\n  }\n}\n", "import { XYComponentConfigInterface, XYComponentDefaultConfig } from 'core/xy-component/config'\n\n// Types\nimport { CurveType } from 'types/curve'\nimport { ColorAccessor, NumericAccessor, StringAccessor } from 'types/accessor'\n\nexport interface AreaConfigInterface<Datum> extends XYComponentConfigInterface<Datum> {\n  /** Area color accessor function. The whole data array will be passed as the first argument. Default: `undefined` */\n  color?: ColorAccessor<Datum[]>;\n  /** Curve type from the CurveType enum. Default: `CurveType.MonotoneX` */\n  curveType?: CurveType | string;\n  /** Baseline value or accessor function. Default: `undefined` */\n  baseline?: NumericAccessor<Datum>;\n  /** Opacity value or accessor function. Default: `1` */\n  opacity?: NumericAccessor<Datum[]>;\n  /** Optional area cursor. String or accessor function. Default: `null` */\n  cursor?: StringAccessor<Datum[]>;\n  /** If an area is smaller than 1px, extend it to have 1px height.\n   * This setting is useful when some of the area values are zeros or very small so visually they become\n   * practically invisible, but you want to show that the data behind them exists and they're not just empty segments.\n   * Default: `false` */\n  minHeight1Px?: boolean;\n}\n\nexport const AreaDefaultConfig: AreaConfigInterface<unknown> = {\n  ...XYComponentDefaultConfig,\n  color: undefined,\n  curveType: CurveType.MonotoneX,\n  baseline: (): number => 0,\n  opacity: 1,\n  cursor: null,\n  minHeight1Px: false,\n}\n", "import { css, injectGlobal } from '@emotion/css'\n\n\nexport const root = css`\n  label: area-component;\n`\n\nexport const globalStyles = injectGlobal`\n  :root {\n    --vis-area-cursor: default;\n    --vis-area-fill-opacity: 1;\n    --vis-area-stroke-color: none;\n    --vis-area-stroke-width: 0px;\n    --vis-area-stroke-dasharray: none;\n    --vis-area-stroke-opacity: 1;\n    --vis-area-hover-fill-opacity: none;\n    --vis-area-hover-stroke-width: none;\n\n    /* Dark Theme */\n    --vis-dark-area-stroke-color: none;\n  }\n\n  body.theme-dark ${`.${root}`} {\n    --vis-area-stroke-color: var(--vis-dark-area-stroke-color);\n  }\n\n`\nexport const area = css`\n  label: area;\n  cursor: var(--vis-area-cursor);\n  fill-opacity: var(--vis-area-fill-opacity);\n  stroke-width: var(--vis-area-stroke-width);\n  stroke-dasharray: var(--vis-area-stroke-dasharray);\n  stroke: var(--vis-area-stroke-color);\n  stroke-opacity: var(--vis-area-stroke-opacity);\n\n  &:hover {\n    fill-opacity: var(--vis-area-hover-fill-opacity);\n    stroke-width: var(--vis-area-hover-stroke-width);\n  }\n`\n", "import { select } from 'd3-selection'\nimport { Transition } from 'd3-transition'\nimport { area, Area as AreaInterface } from 'd3-shape'\nimport { interpolatePath } from 'd3-interpolate-path'\n\n// Core\nimport { XYComponentCore } from 'core/xy-component'\n\n// Utils\nimport { getNumber, getString, isArray, isNumber, getStackedExtent, getStackedData, filterDataByRange } from 'utils/data'\nimport { smartTransition } from 'utils/d3'\nimport { getColor } from 'utils/color'\n\n// Types\nimport { Curve, CurveType } from 'types/curve'\nimport { NumericAccessor } from 'types/accessor'\n\n// Local Types\nimport { AreaDatum } from './types'\n\n// Config\nimport { AreaDefaultConfig, AreaConfigInterface } from './config'\n\n// Styles\nimport * as s from './style'\n\nexport class Area<Datum> extends XYComponentCore<Datum, AreaConfigInterface<Datum>> {\n  static selectors = s\n  protected _defaultConfig = AreaDefaultConfig as AreaConfigInterface<Datum>\n  public config: AreaConfigInterface<Datum> = this._defaultConfig\n  public stacked = true\n  private _areaGen: AreaInterface<AreaDatum>\n  private _prevNegative: boolean[] | undefined // To help guessing the stack direction when an accessor was set to null or 0\n\n  events = {\n    [Area.selectors.area]: {},\n  }\n\n  constructor (config?: AreaConfigInterface<Datum>) {\n    super()\n    if (config) this.setConfig(config)\n\n    // Determine if the provided chart should be stacked\n    this.stacked = Array.isArray(this.config.y)\n  }\n\n  _render (customDuration?: number): void {\n    super._render(customDuration)\n    const { config, datamodel: { data } } = this\n    const duration = isNumber(customDuration) ? customDuration : config.duration\n\n    const curveGen = Curve[config.curveType as CurveType]\n    this._areaGen = area<AreaDatum>()\n      .x(d => d.x)\n      .y0(d => d.y0)\n      .y1(d => {\n        const isSmallerThanPixel = Math.abs(d.y1 - d.y0) < 1\n        return d.y1 - ((isSmallerThanPixel && config.minHeight1Px) ? 1 : 0)\n      })\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n      // @ts-ignore\n      .curve(curveGen)\n\n    const yAccessors = (isArray(config.y) ? config.y : [config.y]) as NumericAccessor<Datum>[]\n    const areaDataX = data.map((d, i) => this.xScale(getNumber(d, config.x, i)))\n\n    const stacked = getStackedData(data, config.baseline, yAccessors, this._prevNegative)\n    this._prevNegative = stacked.map(s => !!s.isMostlyNegative)\n    const stackedData: AreaDatum[][] = stacked.map(\n      arr => arr.map(\n        (d, j) => ({\n          y0: this.yScale(d[0]),\n          y1: this.yScale(d[1]),\n          x: areaDataX[j],\n        })\n      )\n    )\n\n    // We reverse the data in order to have the first areas to be displayed on top\n    //   for better visibility when they're close to zero\n    const areaMaxIdx = stackedData.length - 1\n    const stackedDataReversed = stackedData.reverse()\n    const areas = this.g\n      .selectAll<SVGPathElement, AreaDatum>(`.${s.area}`)\n      .data(stackedDataReversed)\n\n    const areasEnter = areas.enter().append('path')\n      .attr('class', s.area)\n      .attr('d', d => this._areaGen(d) || this._emptyPath())\n      .style('opacity', 0)\n      .style('fill', (d, i) => getColor(data, config.color, areaMaxIdx - i))\n\n    const areasMerged = smartTransition(areasEnter.merge(areas), duration)\n      .style('opacity', (d, i) => {\n        const isDefined = d.some(p => (p.y0 - p.y1) !== 0)\n        return isDefined ? getNumber(data, config.opacity, areaMaxIdx - i) : 0\n      })\n      .style('fill', (d, i) => getColor(data, config.color, areaMaxIdx - i))\n      .style('cursor', (d, i) => getString(data, config.cursor, areaMaxIdx - i))\n\n    if (duration) {\n      const transition = areasMerged as Transition<SVGPathElement, AreaDatum[], SVGGElement, AreaDatum[]>\n      transition.attrTween('d', (d, i, el) => {\n        const previous = select(el[i]).attr('d')\n        const next = this._areaGen(d) || this._emptyPath()\n        return interpolatePath(previous, next)\n      })\n    } else {\n      areasMerged.attr('d', d => this._areaGen(d) || this._emptyPath())\n    }\n\n    smartTransition(areas.exit(), duration)\n      .style('opacity', 0)\n      .remove()\n  }\n\n  getYDataExtent (scaleByVisibleData: boolean): number[] {\n    const { config, datamodel } = this\n    const yAccessors = (isArray(config.y) ? config.y : [config.y]) as NumericAccessor<Datum>[]\n\n    const data = scaleByVisibleData ? filterDataByRange(datamodel.data, this.xScale.domain() as [number, number], config.x) : datamodel.data\n    return getStackedExtent(data, config.baseline, ...yAccessors)\n  }\n\n  _emptyPath (): string {\n    const xRange = this.xScale.range()\n    const yDomain = this.yScale.domain() as number[]\n\n    const y0 = this.yScale((yDomain[0] + yDomain[1]) / 2)\n    const y1 = y0\n\n    return this._areaGen([\n      { y0, y1, x: xRange[0] },\n      { y0, y1, x: xRange[1] },\n    ])\n  }\n}\n", "export default x => () => x;\n", "export default function ZoomEvent(type, {\n  sourceEvent,\n  target,\n  transform,\n  dispatch\n}) {\n  Object.defineProperties(this, {\n    type: {value: type, enumerable: true, configurable: true},\n    sourceEvent: {value: sourceEvent, enumerable: true, configurable: true},\n    target: {value: target, enumerable: true, configurable: true},\n    transform: {value: transform, enumerable: true, configurable: true},\n    _: {value: dispatch}\n  });\n}\n", "export function Transform(k, x, y) {\n  this.k = k;\n  this.x = x;\n  this.y = y;\n}\n\nTransform.prototype = {\n  constructor: Transform,\n  scale: function(k) {\n    return k === 1 ? this : new Transform(this.k * k, this.x, this.y);\n  },\n  translate: function(x, y) {\n    return x === 0 & y === 0 ? this : new Transform(this.k, this.x + this.k * x, this.y + this.k * y);\n  },\n  apply: function(point) {\n    return [point[0] * this.k + this.x, point[1] * this.k + this.y];\n  },\n  applyX: function(x) {\n    return x * this.k + this.x;\n  },\n  applyY: function(y) {\n    return y * this.k + this.y;\n  },\n  invert: function(location) {\n    return [(location[0] - this.x) / this.k, (location[1] - this.y) / this.k];\n  },\n  invertX: function(x) {\n    return (x - this.x) / this.k;\n  },\n  invertY: function(y) {\n    return (y - this.y) / this.k;\n  },\n  rescaleX: function(x) {\n    return x.copy().domain(x.range().map(this.invertX, this).map(x.invert, x));\n  },\n  rescaleY: function(y) {\n    return y.copy().domain(y.range().map(this.invertY, this).map(y.invert, y));\n  },\n  toString: function() {\n    return \"translate(\" + this.x + \",\" + this.y + \") scale(\" + this.k + \")\";\n  }\n};\n\nexport var identity = new Transform(1, 0, 0);\n\ntransform.prototype = Transform.prototype;\n\nexport default function transform(node) {\n  while (!node.__zoom) if (!(node = node.parentNode)) return identity;\n  return node.__zoom;\n}\n", "export function nopropagation(event) {\n  event.stopImmediatePropagation();\n}\n\nexport default function(event) {\n  event.preventDefault();\n  event.stopImmediatePropagation();\n}\n", "import {dispatch} from \"d3-dispatch\";\nimport {dragDisable, dragEnable} from \"d3-drag\";\nimport {interpolateZoom} from \"d3-interpolate\";\nimport {select, pointer} from \"d3-selection\";\nimport {interrupt} from \"d3-transition\";\nimport constant from \"./constant.js\";\nimport ZoomEvent from \"./event.js\";\nimport {Transform, identity} from \"./transform.js\";\nimport noevent, {nopropagation} from \"./noevent.js\";\n\n// Ignore right-click, since that should open the context menu.\n// except for pinch-to-zoom, which is sent as a wheel+ctrlKey event\nfunction defaultFilter(event) {\n  return (!event.ctrlKey || event.type === 'wheel') && !event.button;\n}\n\nfunction defaultExtent() {\n  var e = this;\n  if (e instanceof SVGElement) {\n    e = e.ownerSVGElement || e;\n    if (e.hasAttribute(\"viewBox\")) {\n      e = e.viewBox.baseVal;\n      return [[e.x, e.y], [e.x + e.width, e.y + e.height]];\n    }\n    return [[0, 0], [e.width.baseVal.value, e.height.baseVal.value]];\n  }\n  return [[0, 0], [e.clientWidth, e.clientHeight]];\n}\n\nfunction defaultTransform() {\n  return this.__zoom || identity;\n}\n\nfunction defaultWheelDelta(event) {\n  return -event.deltaY * (event.deltaMode === 1 ? 0.05 : event.deltaMode ? 1 : 0.002) * (event.ctrlKey ? 10 : 1);\n}\n\nfunction defaultTouchable() {\n  return navigator.maxTouchPoints || (\"ontouchstart\" in this);\n}\n\nfunction defaultConstrain(transform, extent, translateExtent) {\n  var dx0 = transform.invertX(extent[0][0]) - translateExtent[0][0],\n      dx1 = transform.invertX(extent[1][0]) - translateExtent[1][0],\n      dy0 = transform.invertY(extent[0][1]) - translateExtent[0][1],\n      dy1 = transform.invertY(extent[1][1]) - translateExtent[1][1];\n  return transform.translate(\n    dx1 > dx0 ? (dx0 + dx1) / 2 : Math.min(0, dx0) || Math.max(0, dx1),\n    dy1 > dy0 ? (dy0 + dy1) / 2 : Math.min(0, dy0) || Math.max(0, dy1)\n  );\n}\n\nexport default function() {\n  var filter = defaultFilter,\n      extent = defaultExtent,\n      constrain = defaultConstrain,\n      wheelDelta = defaultWheelDelta,\n      touchable = defaultTouchable,\n      scaleExtent = [0, Infinity],\n      translateExtent = [[-Infinity, -Infinity], [Infinity, Infinity]],\n      duration = 250,\n      interpolate = interpolateZoom,\n      listeners = dispatch(\"start\", \"zoom\", \"end\"),\n      touchstarting,\n      touchfirst,\n      touchending,\n      touchDelay = 500,\n      wheelDelay = 150,\n      clickDistance2 = 0,\n      tapDistance = 10;\n\n  function zoom(selection) {\n    selection\n        .property(\"__zoom\", defaultTransform)\n        .on(\"wheel.zoom\", wheeled, {passive: false})\n        .on(\"mousedown.zoom\", mousedowned)\n        .on(\"dblclick.zoom\", dblclicked)\n      .filter(touchable)\n        .on(\"touchstart.zoom\", touchstarted)\n        .on(\"touchmove.zoom\", touchmoved)\n        .on(\"touchend.zoom touchcancel.zoom\", touchended)\n        .style(\"-webkit-tap-highlight-color\", \"rgba(0,0,0,0)\");\n  }\n\n  zoom.transform = function(collection, transform, point, event) {\n    var selection = collection.selection ? collection.selection() : collection;\n    selection.property(\"__zoom\", defaultTransform);\n    if (collection !== selection) {\n      schedule(collection, transform, point, event);\n    } else {\n      selection.interrupt().each(function() {\n        gesture(this, arguments)\n          .event(event)\n          .start()\n          .zoom(null, typeof transform === \"function\" ? transform.apply(this, arguments) : transform)\n          .end();\n      });\n    }\n  };\n\n  zoom.scaleBy = function(selection, k, p, event) {\n    zoom.scaleTo(selection, function() {\n      var k0 = this.__zoom.k,\n          k1 = typeof k === \"function\" ? k.apply(this, arguments) : k;\n      return k0 * k1;\n    }, p, event);\n  };\n\n  zoom.scaleTo = function(selection, k, p, event) {\n    zoom.transform(selection, function() {\n      var e = extent.apply(this, arguments),\n          t0 = this.__zoom,\n          p0 = p == null ? centroid(e) : typeof p === \"function\" ? p.apply(this, arguments) : p,\n          p1 = t0.invert(p0),\n          k1 = typeof k === \"function\" ? k.apply(this, arguments) : k;\n      return constrain(translate(scale(t0, k1), p0, p1), e, translateExtent);\n    }, p, event);\n  };\n\n  zoom.translateBy = function(selection, x, y, event) {\n    zoom.transform(selection, function() {\n      return constrain(this.__zoom.translate(\n        typeof x === \"function\" ? x.apply(this, arguments) : x,\n        typeof y === \"function\" ? y.apply(this, arguments) : y\n      ), extent.apply(this, arguments), translateExtent);\n    }, null, event);\n  };\n\n  zoom.translateTo = function(selection, x, y, p, event) {\n    zoom.transform(selection, function() {\n      var e = extent.apply(this, arguments),\n          t = this.__zoom,\n          p0 = p == null ? centroid(e) : typeof p === \"function\" ? p.apply(this, arguments) : p;\n      return constrain(identity.translate(p0[0], p0[1]).scale(t.k).translate(\n        typeof x === \"function\" ? -x.apply(this, arguments) : -x,\n        typeof y === \"function\" ? -y.apply(this, arguments) : -y\n      ), e, translateExtent);\n    }, p, event);\n  };\n\n  function scale(transform, k) {\n    k = Math.max(scaleExtent[0], Math.min(scaleExtent[1], k));\n    return k === transform.k ? transform : new Transform(k, transform.x, transform.y);\n  }\n\n  function translate(transform, p0, p1) {\n    var x = p0[0] - p1[0] * transform.k, y = p0[1] - p1[1] * transform.k;\n    return x === transform.x && y === transform.y ? transform : new Transform(transform.k, x, y);\n  }\n\n  function centroid(extent) {\n    return [(+extent[0][0] + +extent[1][0]) / 2, (+extent[0][1] + +extent[1][1]) / 2];\n  }\n\n  function schedule(transition, transform, point, event) {\n    transition\n        .on(\"start.zoom\", function() { gesture(this, arguments).event(event).start(); })\n        .on(\"interrupt.zoom end.zoom\", function() { gesture(this, arguments).event(event).end(); })\n        .tween(\"zoom\", function() {\n          var that = this,\n              args = arguments,\n              g = gesture(that, args).event(event),\n              e = extent.apply(that, args),\n              p = point == null ? centroid(e) : typeof point === \"function\" ? point.apply(that, args) : point,\n              w = Math.max(e[1][0] - e[0][0], e[1][1] - e[0][1]),\n              a = that.__zoom,\n              b = typeof transform === \"function\" ? transform.apply(that, args) : transform,\n              i = interpolate(a.invert(p).concat(w / a.k), b.invert(p).concat(w / b.k));\n          return function(t) {\n            if (t === 1) t = b; // Avoid rounding error on end.\n            else { var l = i(t), k = w / l[2]; t = new Transform(k, p[0] - l[0] * k, p[1] - l[1] * k); }\n            g.zoom(null, t);\n          };\n        });\n  }\n\n  function gesture(that, args, clean) {\n    return (!clean && that.__zooming) || new Gesture(that, args);\n  }\n\n  function Gesture(that, args) {\n    this.that = that;\n    this.args = args;\n    this.active = 0;\n    this.sourceEvent = null;\n    this.extent = extent.apply(that, args);\n    this.taps = 0;\n  }\n\n  Gesture.prototype = {\n    event: function(event) {\n      if (event) this.sourceEvent = event;\n      return this;\n    },\n    start: function() {\n      if (++this.active === 1) {\n        this.that.__zooming = this;\n        this.emit(\"start\");\n      }\n      return this;\n    },\n    zoom: function(key, transform) {\n      if (this.mouse && key !== \"mouse\") this.mouse[1] = transform.invert(this.mouse[0]);\n      if (this.touch0 && key !== \"touch\") this.touch0[1] = transform.invert(this.touch0[0]);\n      if (this.touch1 && key !== \"touch\") this.touch1[1] = transform.invert(this.touch1[0]);\n      this.that.__zoom = transform;\n      this.emit(\"zoom\");\n      return this;\n    },\n    end: function() {\n      if (--this.active === 0) {\n        delete this.that.__zooming;\n        this.emit(\"end\");\n      }\n      return this;\n    },\n    emit: function(type) {\n      var d = select(this.that).datum();\n      listeners.call(\n        type,\n        this.that,\n        new ZoomEvent(type, {\n          sourceEvent: this.sourceEvent,\n          target: zoom,\n          type,\n          transform: this.that.__zoom,\n          dispatch: listeners\n        }),\n        d\n      );\n    }\n  };\n\n  function wheeled(event, ...args) {\n    if (!filter.apply(this, arguments)) return;\n    var g = gesture(this, args).event(event),\n        t = this.__zoom,\n        k = Math.max(scaleExtent[0], Math.min(scaleExtent[1], t.k * Math.pow(2, wheelDelta.apply(this, arguments)))),\n        p = pointer(event);\n\n    // If the mouse is in the same location as before, reuse it.\n    // If there were recent wheel events, reset the wheel idle timeout.\n    if (g.wheel) {\n      if (g.mouse[0][0] !== p[0] || g.mouse[0][1] !== p[1]) {\n        g.mouse[1] = t.invert(g.mouse[0] = p);\n      }\n      clearTimeout(g.wheel);\n    }\n\n    // If this wheel event won’t trigger a transform change, ignore it.\n    else if (t.k === k) return;\n\n    // Otherwise, capture the mouse point and location at the start.\n    else {\n      g.mouse = [p, t.invert(p)];\n      interrupt(this);\n      g.start();\n    }\n\n    noevent(event);\n    g.wheel = setTimeout(wheelidled, wheelDelay);\n    g.zoom(\"mouse\", constrain(translate(scale(t, k), g.mouse[0], g.mouse[1]), g.extent, translateExtent));\n\n    function wheelidled() {\n      g.wheel = null;\n      g.end();\n    }\n  }\n\n  function mousedowned(event, ...args) {\n    if (touchending || !filter.apply(this, arguments)) return;\n    var currentTarget = event.currentTarget,\n        g = gesture(this, args, true).event(event),\n        v = select(event.view).on(\"mousemove.zoom\", mousemoved, true).on(\"mouseup.zoom\", mouseupped, true),\n        p = pointer(event, currentTarget),\n        x0 = event.clientX,\n        y0 = event.clientY;\n\n    dragDisable(event.view);\n    nopropagation(event);\n    g.mouse = [p, this.__zoom.invert(p)];\n    interrupt(this);\n    g.start();\n\n    function mousemoved(event) {\n      noevent(event);\n      if (!g.moved) {\n        var dx = event.clientX - x0, dy = event.clientY - y0;\n        g.moved = dx * dx + dy * dy > clickDistance2;\n      }\n      g.event(event)\n       .zoom(\"mouse\", constrain(translate(g.that.__zoom, g.mouse[0] = pointer(event, currentTarget), g.mouse[1]), g.extent, translateExtent));\n    }\n\n    function mouseupped(event) {\n      v.on(\"mousemove.zoom mouseup.zoom\", null);\n      dragEnable(event.view, g.moved);\n      noevent(event);\n      g.event(event).end();\n    }\n  }\n\n  function dblclicked(event, ...args) {\n    if (!filter.apply(this, arguments)) return;\n    var t0 = this.__zoom,\n        p0 = pointer(event.changedTouches ? event.changedTouches[0] : event, this),\n        p1 = t0.invert(p0),\n        k1 = t0.k * (event.shiftKey ? 0.5 : 2),\n        t1 = constrain(translate(scale(t0, k1), p0, p1), extent.apply(this, args), translateExtent);\n\n    noevent(event);\n    if (duration > 0) select(this).transition().duration(duration).call(schedule, t1, p0, event);\n    else select(this).call(zoom.transform, t1, p0, event);\n  }\n\n  function touchstarted(event, ...args) {\n    if (!filter.apply(this, arguments)) return;\n    var touches = event.touches,\n        n = touches.length,\n        g = gesture(this, args, event.changedTouches.length === n).event(event),\n        started, i, t, p;\n\n    nopropagation(event);\n    for (i = 0; i < n; ++i) {\n      t = touches[i], p = pointer(t, this);\n      p = [p, this.__zoom.invert(p), t.identifier];\n      if (!g.touch0) g.touch0 = p, started = true, g.taps = 1 + !!touchstarting;\n      else if (!g.touch1 && g.touch0[2] !== p[2]) g.touch1 = p, g.taps = 0;\n    }\n\n    if (touchstarting) touchstarting = clearTimeout(touchstarting);\n\n    if (started) {\n      if (g.taps < 2) touchfirst = p[0], touchstarting = setTimeout(function() { touchstarting = null; }, touchDelay);\n      interrupt(this);\n      g.start();\n    }\n  }\n\n  function touchmoved(event, ...args) {\n    if (!this.__zooming) return;\n    var g = gesture(this, args).event(event),\n        touches = event.changedTouches,\n        n = touches.length, i, t, p, l;\n\n    noevent(event);\n    for (i = 0; i < n; ++i) {\n      t = touches[i], p = pointer(t, this);\n      if (g.touch0 && g.touch0[2] === t.identifier) g.touch0[0] = p;\n      else if (g.touch1 && g.touch1[2] === t.identifier) g.touch1[0] = p;\n    }\n    t = g.that.__zoom;\n    if (g.touch1) {\n      var p0 = g.touch0[0], l0 = g.touch0[1],\n          p1 = g.touch1[0], l1 = g.touch1[1],\n          dp = (dp = p1[0] - p0[0]) * dp + (dp = p1[1] - p0[1]) * dp,\n          dl = (dl = l1[0] - l0[0]) * dl + (dl = l1[1] - l0[1]) * dl;\n      t = scale(t, Math.sqrt(dp / dl));\n      p = [(p0[0] + p1[0]) / 2, (p0[1] + p1[1]) / 2];\n      l = [(l0[0] + l1[0]) / 2, (l0[1] + l1[1]) / 2];\n    }\n    else if (g.touch0) p = g.touch0[0], l = g.touch0[1];\n    else return;\n\n    g.zoom(\"touch\", constrain(translate(t, p, l), g.extent, translateExtent));\n  }\n\n  function touchended(event, ...args) {\n    if (!this.__zooming) return;\n    var g = gesture(this, args).event(event),\n        touches = event.changedTouches,\n        n = touches.length, i, t;\n\n    nopropagation(event);\n    if (touchending) clearTimeout(touchending);\n    touchending = setTimeout(function() { touchending = null; }, touchDelay);\n    for (i = 0; i < n; ++i) {\n      t = touches[i];\n      if (g.touch0 && g.touch0[2] === t.identifier) delete g.touch0;\n      else if (g.touch1 && g.touch1[2] === t.identifier) delete g.touch1;\n    }\n    if (g.touch1 && !g.touch0) g.touch0 = g.touch1, delete g.touch1;\n    if (g.touch0) g.touch0[1] = this.__zoom.invert(g.touch0[0]);\n    else {\n      g.end();\n      // If this was a dbltap, reroute to the (optional) dblclick.zoom handler.\n      if (g.taps === 2) {\n        t = pointer(t, this);\n        if (Math.hypot(touchfirst[0] - t[0], touchfirst[1] - t[1]) < tapDistance) {\n          var p = select(this).on(\"dblclick.zoom\");\n          if (p) p.apply(this, arguments);\n        }\n      }\n    }\n  }\n\n  zoom.wheelDelta = function(_) {\n    return arguments.length ? (wheelDelta = typeof _ === \"function\" ? _ : constant(+_), zoom) : wheelDelta;\n  };\n\n  zoom.filter = function(_) {\n    return arguments.length ? (filter = typeof _ === \"function\" ? _ : constant(!!_), zoom) : filter;\n  };\n\n  zoom.touchable = function(_) {\n    return arguments.length ? (touchable = typeof _ === \"function\" ? _ : constant(!!_), zoom) : touchable;\n  };\n\n  zoom.extent = function(_) {\n    return arguments.length ? (extent = typeof _ === \"function\" ? _ : constant([[+_[0][0], +_[0][1]], [+_[1][0], +_[1][1]]]), zoom) : extent;\n  };\n\n  zoom.scaleExtent = function(_) {\n    return arguments.length ? (scaleExtent[0] = +_[0], scaleExtent[1] = +_[1], zoom) : [scaleExtent[0], scaleExtent[1]];\n  };\n\n  zoom.translateExtent = function(_) {\n    return arguments.length ? (translateExtent[0][0] = +_[0][0], translateExtent[1][0] = +_[1][0], translateExtent[0][1] = +_[0][1], translateExtent[1][1] = +_[1][1], zoom) : [[translateExtent[0][0], translateExtent[0][1]], [translateExtent[1][0], translateExtent[1][1]]];\n  };\n\n  zoom.constrain = function(_) {\n    return arguments.length ? (constrain = _, zoom) : constrain;\n  };\n\n  zoom.duration = function(_) {\n    return arguments.length ? (duration = +_, zoom) : duration;\n  };\n\n  zoom.interpolate = function(_) {\n    return arguments.length ? (interpolate = _, zoom) : interpolate;\n  };\n\n  zoom.on = function() {\n    var value = listeners.on.apply(listeners, arguments);\n    return value === listeners ? zoom : value;\n  };\n\n  zoom.clickDistance = function(_) {\n    return arguments.length ? (clickDistance2 = (_ = +_) * _, zoom) : Math.sqrt(clickDistance2);\n  };\n\n  zoom.tapDistance = function(_) {\n    return arguments.length ? (tapDistance = +_, zoom) : tapDistance;\n  };\n\n  return zoom;\n}\n", "export var epsilon = 1e-6;\nexport var epsilon2 = 1e-12;\nexport var pi = Math.PI;\nexport var halfPi = pi / 2;\nexport var quarterPi = pi / 4;\nexport var tau = pi * 2;\n\nexport var degrees = 180 / pi;\nexport var radians = pi / 180;\n\nexport var abs = Math.abs;\nexport var atan = Math.atan;\nexport var atan2 = Math.atan2;\nexport var cos = Math.cos;\nexport var ceil = Math.ceil;\nexport var exp = Math.exp;\nexport var floor = Math.floor;\nexport var hypot = Math.hypot;\nexport var log = Math.log;\nexport var pow = Math.pow;\nexport var sin = Math.sin;\nexport var sign = Math.sign || function(x) { return x > 0 ? 1 : x < 0 ? -1 : 0; };\nexport var sqrt = Math.sqrt;\nexport var tan = Math.tan;\n\nexport function acos(x) {\n  return x > 1 ? 0 : x < -1 ? pi : Math.acos(x);\n}\n\nexport function asin(x) {\n  return x > 1 ? halfPi : x < -1 ? -halfPi : Math.asin(x);\n}\n\nexport function haversin(x) {\n  return (x = sin(x / 2)) * x;\n}\n", "export default function noop() {}\n", "function streamGeometry(geometry, stream) {\n  if (geometry && streamGeometryType.hasOwnProperty(geometry.type)) {\n    streamGeometryType[geometry.type](geometry, stream);\n  }\n}\n\nvar streamObjectType = {\n  Feature: function(object, stream) {\n    streamGeometry(object.geometry, stream);\n  },\n  FeatureCollection: function(object, stream) {\n    var features = object.features, i = -1, n = features.length;\n    while (++i < n) streamGeometry(features[i].geometry, stream);\n  }\n};\n\nvar streamGeometryType = {\n  Sphere: function(object, stream) {\n    stream.sphere();\n  },\n  Point: function(object, stream) {\n    object = object.coordinates;\n    stream.point(object[0], object[1], object[2]);\n  },\n  MultiPoint: function(object, stream) {\n    var coordinates = object.coordinates, i = -1, n = coordinates.length;\n    while (++i < n) object = coordinates[i], stream.point(object[0], object[1], object[2]);\n  },\n  LineString: function(object, stream) {\n    streamLine(object.coordinates, stream, 0);\n  },\n  MultiLineString: function(object, stream) {\n    var coordinates = object.coordinates, i = -1, n = coordinates.length;\n    while (++i < n) streamLine(coordinates[i], stream, 0);\n  },\n  Polygon: function(object, stream) {\n    streamPolygon(object.coordinates, stream);\n  },\n  MultiPolygon: function(object, stream) {\n    var coordinates = object.coordinates, i = -1, n = coordinates.length;\n    while (++i < n) streamPolygon(coordinates[i], stream);\n  },\n  GeometryCollection: function(object, stream) {\n    var geometries = object.geometries, i = -1, n = geometries.length;\n    while (++i < n) streamGeometry(geometries[i], stream);\n  }\n};\n\nfunction streamLine(coordinates, stream, closed) {\n  var i = -1, n = coordinates.length - closed, coordinate;\n  stream.lineStart();\n  while (++i < n) coordinate = coordinates[i], stream.point(coordinate[0], coordinate[1], coordinate[2]);\n  stream.lineEnd();\n}\n\nfunction streamPolygon(coordinates, stream) {\n  var i = -1, n = coordinates.length;\n  stream.polygonStart();\n  while (++i < n) streamLine(coordinates[i], stream, 1);\n  stream.polygonEnd();\n}\n\nexport default function(object, stream) {\n  if (object && streamObjectType.hasOwnProperty(object.type)) {\n    streamObjectType[object.type](object, stream);\n  } else {\n    streamGeometry(object, stream);\n  }\n}\n", "import {Adder} from \"d3-array\";\nimport {atan2, cos, quarterPi, radians, sin, tau} from \"./math.js\";\nimport noop from \"./noop.js\";\nimport stream from \"./stream.js\";\n\nexport var areaRingSum = new Adder();\n\n// hello?\n\nvar areaSum = new Adder(),\n    lambda00,\n    phi00,\n    lambda0,\n    cosPhi0,\n    sinPhi0;\n\nexport var areaStream = {\n  point: noop,\n  lineStart: noop,\n  lineEnd: noop,\n  polygonStart: function() {\n    areaRingSum = new Adder();\n    areaStream.lineStart = areaRingStart;\n    areaStream.lineEnd = areaRingEnd;\n  },\n  polygonEnd: function() {\n    var areaRing = +areaRingSum;\n    areaSum.add(areaRing < 0 ? tau + areaRing : areaRing);\n    this.lineStart = this.lineEnd = this.point = noop;\n  },\n  sphere: function() {\n    areaSum.add(tau);\n  }\n};\n\nfunction areaRingStart() {\n  areaStream.point = areaPointFirst;\n}\n\nfunction areaRingEnd() {\n  areaPoint(lambda00, phi00);\n}\n\nfunction areaPointFirst(lambda, phi) {\n  areaStream.point = areaPoint;\n  lambda00 = lambda, phi00 = phi;\n  lambda *= radians, phi *= radians;\n  lambda0 = lambda, cosPhi0 = cos(phi = phi / 2 + quarterPi), sinPhi0 = sin(phi);\n}\n\nfunction areaPoint(lambda, phi) {\n  lambda *= radians, phi *= radians;\n  phi = phi / 2 + quarterPi; // half the angular distance from south pole\n\n  // Spherical excess E for a spherical triangle with vertices: south pole,\n  // previous point, current point.  Uses a formula derived from Cagnoli’s\n  // theorem.  See Todhunter, Spherical Trig. (1871), Sec. 103, Eq. (2).\n  var dLambda = lambda - lambda0,\n      sdLambda = dLambda >= 0 ? 1 : -1,\n      adLambda = sdLambda * dLambda,\n      cosPhi = cos(phi),\n      sinPhi = sin(phi),\n      k = sinPhi0 * sinPhi,\n      u = cosPhi0 * cosPhi + k * cos(adLambda),\n      v = k * sdLambda * sin(adLambda);\n  areaRingSum.add(atan2(v, u));\n\n  // Advance the previous points.\n  lambda0 = lambda, cosPhi0 = cosPhi, sinPhi0 = sinPhi;\n}\n\nexport default function(object) {\n  areaSum = new Adder();\n  stream(object, areaStream);\n  return areaSum * 2;\n}\n", "import {asin, atan2, cos, sin, sqrt} from \"./math.js\";\n\nexport function spherical(cartesian) {\n  return [atan2(cartesian[1], cartesian[0]), asin(cartesian[2])];\n}\n\nexport function cartesian(spherical) {\n  var lambda = spherical[0], phi = spherical[1], cosPhi = cos(phi);\n  return [cosPhi * cos(lambda), cosPhi * sin(lambda), sin(phi)];\n}\n\nexport function cartesianDot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n\nexport function cartesianCross(a, b) {\n  return [a[1] * b[2] - a[2] * b[1], a[2] * b[0] - a[0] * b[2], a[0] * b[1] - a[1] * b[0]];\n}\n\n// TODO return a\nexport function cartesianAddInPlace(a, b) {\n  a[0] += b[0], a[1] += b[1], a[2] += b[2];\n}\n\nexport function cartesianScale(vector, k) {\n  return [vector[0] * k, vector[1] * k, vector[2] * k];\n}\n\n// TODO return d\nexport function cartesianNormalizeInPlace(d) {\n  var l = sqrt(d[0] * d[0] + d[1] * d[1] + d[2] * d[2]);\n  d[0] /= l, d[1] /= l, d[2] /= l;\n}\n", "export default function(a, b) {\n\n  function compose(x, y) {\n    return x = a(x, y), b(x[0], x[1]);\n  }\n\n  if (a.invert && b.invert) compose.invert = function(x, y) {\n    return x = b.invert(x, y), x && a.invert(x[0], x[1]);\n  };\n\n  return compose;\n}\n", "import compose from \"./compose.js\";\nimport {abs, asin, atan2, cos, degrees, pi, radians, sin, tau} from \"./math.js\";\n\nfunction rotationIdentity(lambda, phi) {\n  if (abs(lambda) > pi) lambda -= Math.round(lambda / tau) * tau;\n  return [lambda, phi];\n}\n\nrotationIdentity.invert = rotationIdentity;\n\nexport function rotateRadians(deltaLambda, deltaPhi, deltaGamma) {\n  return (deltaLambda %= tau) ? (deltaPhi || deltaGamma ? compose(rotationLambda(deltaLambda), rotationPhiGamma(deltaPhi, deltaGamma))\n    : rotationLambda(deltaLambda))\n    : (deltaPhi || deltaGamma ? rotationPhiGamma(deltaPhi, deltaGamma)\n    : rotationIdentity);\n}\n\nfunction forwardRotationLambda(deltaLambda) {\n  return function(lambda, phi) {\n    lambda += deltaLambda;\n    if (abs(lambda) > pi) lambda -= Math.round(lambda / tau) * tau;\n    return [lambda, phi];\n  };\n}\n\nfunction rotationLambda(deltaLambda) {\n  var rotation = forwardRotationLambda(deltaLambda);\n  rotation.invert = forwardRotationLambda(-deltaLambda);\n  return rotation;\n}\n\nfunction rotationPhiGamma(deltaPhi, deltaGamma) {\n  var cosDeltaPhi = cos(deltaPhi),\n      sinDeltaPhi = sin(deltaPhi),\n      cosDeltaGamma = cos(deltaGamma),\n      sinDeltaGamma = sin(deltaGamma);\n\n  function rotation(lambda, phi) {\n    var cosPhi = cos(phi),\n        x = cos(lambda) * cosPhi,\n        y = sin(lambda) * cosPhi,\n        z = sin(phi),\n        k = z * cosDeltaPhi + x * sinDeltaPhi;\n    return [\n      atan2(y * cosDeltaGamma - k * sinDeltaGamma, x * cosDeltaPhi - z * sinDeltaPhi),\n      asin(k * cosDeltaGamma + y * sinDeltaGamma)\n    ];\n  }\n\n  rotation.invert = function(lambda, phi) {\n    var cosPhi = cos(phi),\n        x = cos(lambda) * cosPhi,\n        y = sin(lambda) * cosPhi,\n        z = sin(phi),\n        k = z * cosDeltaGamma - y * sinDeltaGamma;\n    return [\n      atan2(y * cosDeltaGamma + z * sinDeltaGamma, x * cosDeltaPhi + k * sinDeltaPhi),\n      asin(k * cosDeltaPhi - x * sinDeltaPhi)\n    ];\n  };\n\n  return rotation;\n}\n\nexport default function(rotate) {\n  rotate = rotateRadians(rotate[0] * radians, rotate[1] * radians, rotate.length > 2 ? rotate[2] * radians : 0);\n\n  function forward(coordinates) {\n    coordinates = rotate(coordinates[0] * radians, coordinates[1] * radians);\n    return coordinates[0] *= degrees, coordinates[1] *= degrees, coordinates;\n  }\n\n  forward.invert = function(coordinates) {\n    coordinates = rotate.invert(coordinates[0] * radians, coordinates[1] * radians);\n    return coordinates[0] *= degrees, coordinates[1] *= degrees, coordinates;\n  };\n\n  return forward;\n}\n", "import {cartesian, cartesianNormalizeInPlace, spherical} from \"./cartesian.js\";\nimport constant from \"./constant.js\";\nimport {acos, cos, degrees, epsilon, radians, sin, tau} from \"./math.js\";\nimport {rotateRadians} from \"./rotation.js\";\n\n// Generates a circle centered at [0°, 0°], with a given radius and precision.\nexport function circleStream(stream, radius, delta, direction, t0, t1) {\n  if (!delta) return;\n  var cosRadius = cos(radius),\n      sinRadius = sin(radius),\n      step = direction * delta;\n  if (t0 == null) {\n    t0 = radius + direction * tau;\n    t1 = radius - step / 2;\n  } else {\n    t0 = circleRadius(cosRadius, t0);\n    t1 = circleRadius(cosRadius, t1);\n    if (direction > 0 ? t0 < t1 : t0 > t1) t0 += direction * tau;\n  }\n  for (var point, t = t0; direction > 0 ? t > t1 : t < t1; t -= step) {\n    point = spherical([cosRadius, -sinRadius * cos(t), -sinRadius * sin(t)]);\n    stream.point(point[0], point[1]);\n  }\n}\n\n// Returns the signed angle of a cartesian point relative to [cosRadius, 0, 0].\nfunction circleRadius(cosRadius, point) {\n  point = cartesian(point), point[0] -= cosRadius;\n  cartesianNormalizeInPlace(point);\n  var radius = acos(-point[1]);\n  return ((-point[2] < 0 ? -radius : radius) + tau - epsilon) % tau;\n}\n\nexport default function() {\n  var center = constant([0, 0]),\n      radius = constant(90),\n      precision = constant(2),\n      ring,\n      rotate,\n      stream = {point: point};\n\n  function point(x, y) {\n    ring.push(x = rotate(x, y));\n    x[0] *= degrees, x[1] *= degrees;\n  }\n\n  function circle() {\n    var c = center.apply(this, arguments),\n        r = radius.apply(this, arguments) * radians,\n        p = precision.apply(this, arguments) * radians;\n    ring = [];\n    rotate = rotateRadians(-c[0] * radians, -c[1] * radians, 0).invert;\n    circleStream(stream, r, p, 1);\n    c = {type: \"Polygon\", coordinates: [ring]};\n    ring = rotate = null;\n    return c;\n  }\n\n  circle.center = function(_) {\n    return arguments.length ? (center = typeof _ === \"function\" ? _ : constant([+_[0], +_[1]]), circle) : center;\n  };\n\n  circle.radius = function(_) {\n    return arguments.length ? (radius = typeof _ === \"function\" ? _ : constant(+_), circle) : radius;\n  };\n\n  circle.precision = function(_) {\n    return arguments.length ? (precision = typeof _ === \"function\" ? _ : constant(+_), circle) : precision;\n  };\n\n  return circle;\n}\n", "import noop from \"../noop.js\";\n\nexport default function() {\n  var lines = [],\n      line;\n  return {\n    point: function(x, y, m) {\n      line.push([x, y, m]);\n    },\n    lineStart: function() {\n      lines.push(line = []);\n    },\n    lineEnd: noop,\n    rejoin: function() {\n      if (lines.length > 1) lines.push(lines.pop().concat(lines.shift()));\n    },\n    result: function() {\n      var result = lines;\n      lines = [];\n      line = null;\n      return result;\n    }\n  };\n}\n", "import {abs, epsilon} from \"./math.js\";\n\nexport default function(a, b) {\n  return abs(a[0] - b[0]) < epsilon && abs(a[1] - b[1]) < epsilon;\n}\n", "import pointEqual from \"../pointEqual.js\";\nimport {epsilon} from \"../math.js\";\n\nfunction Intersection(point, points, other, entry) {\n  this.x = point;\n  this.z = points;\n  this.o = other; // another intersection\n  this.e = entry; // is an entry?\n  this.v = false; // visited\n  this.n = this.p = null; // next & previous\n}\n\n// A generalized polygon clipping algorithm: given a polygon that has been cut\n// into its visible line segments, and rejoins the segments by interpolating\n// along the clip edge.\nexport default function(segments, compareIntersection, startInside, interpolate, stream) {\n  var subject = [],\n      clip = [],\n      i,\n      n;\n\n  segments.forEach(function(segment) {\n    if ((n = segment.length - 1) <= 0) return;\n    var n, p0 = segment[0], p1 = segment[n], x;\n\n    if (pointEqual(p0, p1)) {\n      if (!p0[2] && !p1[2]) {\n        stream.lineStart();\n        for (i = 0; i < n; ++i) stream.point((p0 = segment[i])[0], p0[1]);\n        stream.lineEnd();\n        return;\n      }\n      // handle degenerate cases by moving the point\n      p1[0] += 2 * epsilon;\n    }\n\n    subject.push(x = new Intersection(p0, segment, null, true));\n    clip.push(x.o = new Intersection(p0, null, x, false));\n    subject.push(x = new Intersection(p1, segment, null, false));\n    clip.push(x.o = new Intersection(p1, null, x, true));\n  });\n\n  if (!subject.length) return;\n\n  clip.sort(compareIntersection);\n  link(subject);\n  link(clip);\n\n  for (i = 0, n = clip.length; i < n; ++i) {\n    clip[i].e = startInside = !startInside;\n  }\n\n  var start = subject[0],\n      points,\n      point;\n\n  while (1) {\n    // Find first unvisited intersection.\n    var current = start,\n        isSubject = true;\n    while (current.v) if ((current = current.n) === start) return;\n    points = current.z;\n    stream.lineStart();\n    do {\n      current.v = current.o.v = true;\n      if (current.e) {\n        if (isSubject) {\n          for (i = 0, n = points.length; i < n; ++i) stream.point((point = points[i])[0], point[1]);\n        } else {\n          interpolate(current.x, current.n.x, 1, stream);\n        }\n        current = current.n;\n      } else {\n        if (isSubject) {\n          points = current.p.z;\n          for (i = points.length - 1; i >= 0; --i) stream.point((point = points[i])[0], point[1]);\n        } else {\n          interpolate(current.x, current.p.x, -1, stream);\n        }\n        current = current.p;\n      }\n      current = current.o;\n      points = current.z;\n      isSubject = !isSubject;\n    } while (!current.v);\n    stream.lineEnd();\n  }\n}\n\nfunction link(array) {\n  if (!(n = array.length)) return;\n  var n,\n      i = 0,\n      a = array[0],\n      b;\n  while (++i < n) {\n    a.n = b = array[i];\n    b.p = a;\n    a = b;\n  }\n  a.n = b = array[0];\n  b.p = a;\n}\n", "import {Adder} from \"d3-array\";\nimport {cartesian, cartesianCross, cartesianNormalizeInPlace} from \"./cartesian.js\";\nimport {abs, asin, atan2, cos, epsilon, epsilon2, halfPi, pi, quarterPi, sign, sin, tau} from \"./math.js\";\n\nfunction longitude(point) {\n  return abs(point[0]) <= pi ? point[0] : sign(point[0]) * ((abs(point[0]) + pi) % tau - pi);\n}\n\nexport default function(polygon, point) {\n  var lambda = longitude(point),\n      phi = point[1],\n      sinPhi = sin(phi),\n      normal = [sin(lambda), -cos(lambda), 0],\n      angle = 0,\n      winding = 0;\n\n  var sum = new Adder();\n\n  if (sinPhi === 1) phi = halfPi + epsilon;\n  else if (sinPhi === -1) phi = -halfPi - epsilon;\n\n  for (var i = 0, n = polygon.length; i < n; ++i) {\n    if (!(m = (ring = polygon[i]).length)) continue;\n    var ring,\n        m,\n        point0 = ring[m - 1],\n        lambda0 = longitude(point0),\n        phi0 = point0[1] / 2 + quarterPi,\n        sinPhi0 = sin(phi0),\n        cosPhi0 = cos(phi0);\n\n    for (var j = 0; j < m; ++j, lambda0 = lambda1, sinPhi0 = sinPhi1, cosPhi0 = cosPhi1, point0 = point1) {\n      var point1 = ring[j],\n          lambda1 = longitude(point1),\n          phi1 = point1[1] / 2 + quarterPi,\n          sinPhi1 = sin(phi1),\n          cosPhi1 = cos(phi1),\n          delta = lambda1 - lambda0,\n          sign = delta >= 0 ? 1 : -1,\n          absDelta = sign * delta,\n          antimeridian = absDelta > pi,\n          k = sinPhi0 * sinPhi1;\n\n      sum.add(atan2(k * sign * sin(absDelta), cosPhi0 * cosPhi1 + k * cos(absDelta)));\n      angle += antimeridian ? delta + sign * tau : delta;\n\n      // Are the longitudes either side of the point’s meridian (lambda),\n      // and are the latitudes smaller than the parallel (phi)?\n      if (antimeridian ^ lambda0 >= lambda ^ lambda1 >= lambda) {\n        var arc = cartesianCross(cartesian(point0), cartesian(point1));\n        cartesianNormalizeInPlace(arc);\n        var intersection = cartesianCross(normal, arc);\n        cartesianNormalizeInPlace(intersection);\n        var phiArc = (antimeridian ^ delta >= 0 ? -1 : 1) * asin(intersection[2]);\n        if (phi > phiArc || phi === phiArc && (arc[0] || arc[1])) {\n          winding += antimeridian ^ delta >= 0 ? 1 : -1;\n        }\n      }\n    }\n  }\n\n  // First, determine whether the South pole is inside or outside:\n  //\n  // It is inside if:\n  // * the polygon winds around it in a clockwise direction.\n  // * the polygon does not (cumulatively) wind around it, but has a negative\n  //   (counter-clockwise) area.\n  //\n  // Second, count the (signed) number of times a segment crosses a lambda\n  // from the point to the South pole.  If it is zero, then the point is the\n  // same side as the South pole.\n\n  return (angle < -epsilon || angle < epsilon && sum < -epsilon2) ^ (winding & 1);\n}\n", "import clipBuffer from \"./buffer.js\";\nimport clipRejoin from \"./rejoin.js\";\nimport {epsilon, halfPi} from \"../math.js\";\nimport polygonContains from \"../polygonContains.js\";\nimport {merge} from \"d3-array\";\n\nexport default function(pointVisible, clipLine, interpolate, start) {\n  return function(sink) {\n    var line = clipLine(sink),\n        ringBuffer = clipBuffer(),\n        ringSink = clipLine(ringBuffer),\n        polygonStarted = false,\n        polygon,\n        segments,\n        ring;\n\n    var clip = {\n      point: point,\n      lineStart: lineStart,\n      lineEnd: lineEnd,\n      polygonStart: function() {\n        clip.point = pointRing;\n        clip.lineStart = ringStart;\n        clip.lineEnd = ringEnd;\n        segments = [];\n        polygon = [];\n      },\n      polygonEnd: function() {\n        clip.point = point;\n        clip.lineStart = lineStart;\n        clip.lineEnd = lineEnd;\n        segments = merge(segments);\n        var startInside = polygonContains(polygon, start);\n        if (segments.length) {\n          if (!polygonStarted) sink.polygonStart(), polygonStarted = true;\n          clipRejoin(segments, compareIntersection, startInside, interpolate, sink);\n        } else if (startInside) {\n          if (!polygonStarted) sink.polygonStart(), polygonStarted = true;\n          sink.lineStart();\n          interpolate(null, null, 1, sink);\n          sink.lineEnd();\n        }\n        if (polygonStarted) sink.polygonEnd(), polygonStarted = false;\n        segments = polygon = null;\n      },\n      sphere: function() {\n        sink.polygonStart();\n        sink.lineStart();\n        interpolate(null, null, 1, sink);\n        sink.lineEnd();\n        sink.polygonEnd();\n      }\n    };\n\n    function point(lambda, phi) {\n      if (pointVisible(lambda, phi)) sink.point(lambda, phi);\n    }\n\n    function pointLine(lambda, phi) {\n      line.point(lambda, phi);\n    }\n\n    function lineStart() {\n      clip.point = pointLine;\n      line.lineStart();\n    }\n\n    function lineEnd() {\n      clip.point = point;\n      line.lineEnd();\n    }\n\n    function pointRing(lambda, phi) {\n      ring.push([lambda, phi]);\n      ringSink.point(lambda, phi);\n    }\n\n    function ringStart() {\n      ringSink.lineStart();\n      ring = [];\n    }\n\n    function ringEnd() {\n      pointRing(ring[0][0], ring[0][1]);\n      ringSink.lineEnd();\n\n      var clean = ringSink.clean(),\n          ringSegments = ringBuffer.result(),\n          i, n = ringSegments.length, m,\n          segment,\n          point;\n\n      ring.pop();\n      polygon.push(ring);\n      ring = null;\n\n      if (!n) return;\n\n      // No intersections.\n      if (clean & 1) {\n        segment = ringSegments[0];\n        if ((m = segment.length - 1) > 0) {\n          if (!polygonStarted) sink.polygonStart(), polygonStarted = true;\n          sink.lineStart();\n          for (i = 0; i < m; ++i) sink.point((point = segment[i])[0], point[1]);\n          sink.lineEnd();\n        }\n        return;\n      }\n\n      // Rejoin connected segments.\n      // TODO reuse ringBuffer.rejoin()?\n      if (n > 1 && clean & 2) ringSegments.push(ringSegments.pop().concat(ringSegments.shift()));\n\n      segments.push(ringSegments.filter(validSegment));\n    }\n\n    return clip;\n  };\n}\n\nfunction validSegment(segment) {\n  return segment.length > 1;\n}\n\n// Intersections are sorted along the clip edge. For both antimeridian cutting\n// and circle clipping, the same comparison is used.\nfunction compareIntersection(a, b) {\n  return ((a = a.x)[0] < 0 ? a[1] - halfPi - epsilon : halfPi - a[1])\n       - ((b = b.x)[0] < 0 ? b[1] - halfPi - epsilon : halfPi - b[1]);\n}\n", "import clip from \"./index.js\";\nimport {abs, atan, cos, epsilon, halfPi, pi, sin} from \"../math.js\";\n\nexport default clip(\n  function() { return true; },\n  clipAntimeridianLine,\n  clipAntimeridianInterpolate,\n  [-pi, -halfPi]\n);\n\n// Takes a line and cuts into visible segments. Return values: 0 - there were\n// intersections or the line was empty; 1 - no intersections; 2 - there were\n// intersections, and the first and last segments should be rejoined.\nfunction clipAntimeridianLine(stream) {\n  var lambda0 = NaN,\n      phi0 = NaN,\n      sign0 = NaN,\n      clean; // no intersections\n\n  return {\n    lineStart: function() {\n      stream.lineStart();\n      clean = 1;\n    },\n    point: function(lambda1, phi1) {\n      var sign1 = lambda1 > 0 ? pi : -pi,\n          delta = abs(lambda1 - lambda0);\n      if (abs(delta - pi) < epsilon) { // line crosses a pole\n        stream.point(lambda0, phi0 = (phi0 + phi1) / 2 > 0 ? halfPi : -halfPi);\n        stream.point(sign0, phi0);\n        stream.lineEnd();\n        stream.lineStart();\n        stream.point(sign1, phi0);\n        stream.point(lambda1, phi0);\n        clean = 0;\n      } else if (sign0 !== sign1 && delta >= pi) { // line crosses antimeridian\n        if (abs(lambda0 - sign0) < epsilon) lambda0 -= sign0 * epsilon; // handle degeneracies\n        if (abs(lambda1 - sign1) < epsilon) lambda1 -= sign1 * epsilon;\n        phi0 = clipAntimeridianIntersect(lambda0, phi0, lambda1, phi1);\n        stream.point(sign0, phi0);\n        stream.lineEnd();\n        stream.lineStart();\n        stream.point(sign1, phi0);\n        clean = 0;\n      }\n      stream.point(lambda0 = lambda1, phi0 = phi1);\n      sign0 = sign1;\n    },\n    lineEnd: function() {\n      stream.lineEnd();\n      lambda0 = phi0 = NaN;\n    },\n    clean: function() {\n      return 2 - clean; // if intersections, rejoin first and last segments\n    }\n  };\n}\n\nfunction clipAntimeridianIntersect(lambda0, phi0, lambda1, phi1) {\n  var cosPhi0,\n      cosPhi1,\n      sinLambda0Lambda1 = sin(lambda0 - lambda1);\n  return abs(sinLambda0Lambda1) > epsilon\n      ? atan((sin(phi0) * (cosPhi1 = cos(phi1)) * sin(lambda1)\n          - sin(phi1) * (cosPhi0 = cos(phi0)) * sin(lambda0))\n          / (cosPhi0 * cosPhi1 * sinLambda0Lambda1))\n      : (phi0 + phi1) / 2;\n}\n\nfunction clipAntimeridianInterpolate(from, to, direction, stream) {\n  var phi;\n  if (from == null) {\n    phi = direction * halfPi;\n    stream.point(-pi, phi);\n    stream.point(0, phi);\n    stream.point(pi, phi);\n    stream.point(pi, 0);\n    stream.point(pi, -phi);\n    stream.point(0, -phi);\n    stream.point(-pi, -phi);\n    stream.point(-pi, 0);\n    stream.point(-pi, phi);\n  } else if (abs(from[0] - to[0]) > epsilon) {\n    var lambda = from[0] < to[0] ? pi : -pi;\n    phi = direction * lambda / 2;\n    stream.point(-lambda, phi);\n    stream.point(0, phi);\n    stream.point(lambda, phi);\n  } else {\n    stream.point(to[0], to[1]);\n  }\n}\n", "import {cartesian, cartesianAddInPlace, cartesianCross, cartesianDot, cartesianScale, spherical} from \"../cartesian.js\";\nimport {circleStream} from \"../circle.js\";\nimport {abs, cos, epsilon, pi, radians, sqrt} from \"../math.js\";\nimport pointEqual from \"../pointEqual.js\";\nimport clip from \"./index.js\";\n\nexport default function(radius) {\n  var cr = cos(radius),\n      delta = 2 * radians,\n      smallRadius = cr > 0,\n      notHemisphere = abs(cr) > epsilon; // TODO optimise for this common case\n\n  function interpolate(from, to, direction, stream) {\n    circleStream(stream, radius, delta, direction, from, to);\n  }\n\n  function visible(lambda, phi) {\n    return cos(lambda) * cos(phi) > cr;\n  }\n\n  // Takes a line and cuts into visible segments. Return values used for polygon\n  // clipping: 0 - there were intersections or the line was empty; 1 - no\n  // intersections 2 - there were intersections, and the first and last segments\n  // should be rejoined.\n  function clipLine(stream) {\n    var point0, // previous point\n        c0, // code for previous point\n        v0, // visibility of previous point\n        v00, // visibility of first point\n        clean; // no intersections\n    return {\n      lineStart: function() {\n        v00 = v0 = false;\n        clean = 1;\n      },\n      point: function(lambda, phi) {\n        var point1 = [lambda, phi],\n            point2,\n            v = visible(lambda, phi),\n            c = smallRadius\n              ? v ? 0 : code(lambda, phi)\n              : v ? code(lambda + (lambda < 0 ? pi : -pi), phi) : 0;\n        if (!point0 && (v00 = v0 = v)) stream.lineStart();\n        if (v !== v0) {\n          point2 = intersect(point0, point1);\n          if (!point2 || pointEqual(point0, point2) || pointEqual(point1, point2))\n            point1[2] = 1;\n        }\n        if (v !== v0) {\n          clean = 0;\n          if (v) {\n            // outside going in\n            stream.lineStart();\n            point2 = intersect(point1, point0);\n            stream.point(point2[0], point2[1]);\n          } else {\n            // inside going out\n            point2 = intersect(point0, point1);\n            stream.point(point2[0], point2[1], 2);\n            stream.lineEnd();\n          }\n          point0 = point2;\n        } else if (notHemisphere && point0 && smallRadius ^ v) {\n          var t;\n          // If the codes for two points are different, or are both zero,\n          // and there this segment intersects with the small circle.\n          if (!(c & c0) && (t = intersect(point1, point0, true))) {\n            clean = 0;\n            if (smallRadius) {\n              stream.lineStart();\n              stream.point(t[0][0], t[0][1]);\n              stream.point(t[1][0], t[1][1]);\n              stream.lineEnd();\n            } else {\n              stream.point(t[1][0], t[1][1]);\n              stream.lineEnd();\n              stream.lineStart();\n              stream.point(t[0][0], t[0][1], 3);\n            }\n          }\n        }\n        if (v && (!point0 || !pointEqual(point0, point1))) {\n          stream.point(point1[0], point1[1]);\n        }\n        point0 = point1, v0 = v, c0 = c;\n      },\n      lineEnd: function() {\n        if (v0) stream.lineEnd();\n        point0 = null;\n      },\n      // Rejoin first and last segments if there were intersections and the first\n      // and last points were visible.\n      clean: function() {\n        return clean | ((v00 && v0) << 1);\n      }\n    };\n  }\n\n  // Intersects the great circle between a and b with the clip circle.\n  function intersect(a, b, two) {\n    var pa = cartesian(a),\n        pb = cartesian(b);\n\n    // We have two planes, n1.p = d1 and n2.p = d2.\n    // Find intersection line p(t) = c1 n1 + c2 n2 + t (n1 ⨯ n2).\n    var n1 = [1, 0, 0], // normal\n        n2 = cartesianCross(pa, pb),\n        n2n2 = cartesianDot(n2, n2),\n        n1n2 = n2[0], // cartesianDot(n1, n2),\n        determinant = n2n2 - n1n2 * n1n2;\n\n    // Two polar points.\n    if (!determinant) return !two && a;\n\n    var c1 =  cr * n2n2 / determinant,\n        c2 = -cr * n1n2 / determinant,\n        n1xn2 = cartesianCross(n1, n2),\n        A = cartesianScale(n1, c1),\n        B = cartesianScale(n2, c2);\n    cartesianAddInPlace(A, B);\n\n    // Solve |p(t)|^2 = 1.\n    var u = n1xn2,\n        w = cartesianDot(A, u),\n        uu = cartesianDot(u, u),\n        t2 = w * w - uu * (cartesianDot(A, A) - 1);\n\n    if (t2 < 0) return;\n\n    var t = sqrt(t2),\n        q = cartesianScale(u, (-w - t) / uu);\n    cartesianAddInPlace(q, A);\n    q = spherical(q);\n\n    if (!two) return q;\n\n    // Two intersection points.\n    var lambda0 = a[0],\n        lambda1 = b[0],\n        phi0 = a[1],\n        phi1 = b[1],\n        z;\n\n    if (lambda1 < lambda0) z = lambda0, lambda0 = lambda1, lambda1 = z;\n\n    var delta = lambda1 - lambda0,\n        polar = abs(delta - pi) < epsilon,\n        meridian = polar || delta < epsilon;\n\n    if (!polar && phi1 < phi0) z = phi0, phi0 = phi1, phi1 = z;\n\n    // Check that the first point is between a and b.\n    if (meridian\n        ? polar\n          ? phi0 + phi1 > 0 ^ q[1] < (abs(q[0] - lambda0) < epsilon ? phi0 : phi1)\n          : phi0 <= q[1] && q[1] <= phi1\n        : delta > pi ^ (lambda0 <= q[0] && q[0] <= lambda1)) {\n      var q1 = cartesianScale(u, (-w + t) / uu);\n      cartesianAddInPlace(q1, A);\n      return [q, spherical(q1)];\n    }\n  }\n\n  // Generates a 4-bit vector representing the location of a point relative to\n  // the small circle's bounding box.\n  function code(lambda, phi) {\n    var r = smallRadius ? radius : pi - radius,\n        code = 0;\n    if (lambda < -r) code |= 1; // left\n    else if (lambda > r) code |= 2; // right\n    if (phi < -r) code |= 4; // below\n    else if (phi > r) code |= 8; // above\n    return code;\n  }\n\n  return clip(visible, clipLine, interpolate, smallRadius ? [0, -radius] : [-pi, radius - pi]);\n}\n", "export default function(a, b, x0, y0, x1, y1) {\n  var ax = a[0],\n      ay = a[1],\n      bx = b[0],\n      by = b[1],\n      t0 = 0,\n      t1 = 1,\n      dx = bx - ax,\n      dy = by - ay,\n      r;\n\n  r = x0 - ax;\n  if (!dx && r > 0) return;\n  r /= dx;\n  if (dx < 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  } else if (dx > 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  }\n\n  r = x1 - ax;\n  if (!dx && r < 0) return;\n  r /= dx;\n  if (dx < 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  } else if (dx > 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  }\n\n  r = y0 - ay;\n  if (!dy && r > 0) return;\n  r /= dy;\n  if (dy < 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  } else if (dy > 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  }\n\n  r = y1 - ay;\n  if (!dy && r < 0) return;\n  r /= dy;\n  if (dy < 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  } else if (dy > 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  }\n\n  if (t0 > 0) a[0] = ax + t0 * dx, a[1] = ay + t0 * dy;\n  if (t1 < 1) b[0] = ax + t1 * dx, b[1] = ay + t1 * dy;\n  return true;\n}\n", "import {abs, epsilon} from \"../math.js\";\nimport clipBuffer from \"./buffer.js\";\nimport clipLine from \"./line.js\";\nimport clipRejoin from \"./rejoin.js\";\nimport {merge} from \"d3-array\";\n\nvar clipMax = 1e9, clipMin = -clipMax;\n\n// TODO Use d3-polygon’s polygonContains here for the ring check?\n// TODO Eliminate duplicate buffering in clipBuffer and polygon.push?\n\nexport default function clipRectangle(x0, y0, x1, y1) {\n\n  function visible(x, y) {\n    return x0 <= x && x <= x1 && y0 <= y && y <= y1;\n  }\n\n  function interpolate(from, to, direction, stream) {\n    var a = 0, a1 = 0;\n    if (from == null\n        || (a = corner(from, direction)) !== (a1 = corner(to, direction))\n        || comparePoint(from, to) < 0 ^ direction > 0) {\n      do stream.point(a === 0 || a === 3 ? x0 : x1, a > 1 ? y1 : y0);\n      while ((a = (a + direction + 4) % 4) !== a1);\n    } else {\n      stream.point(to[0], to[1]);\n    }\n  }\n\n  function corner(p, direction) {\n    return abs(p[0] - x0) < epsilon ? direction > 0 ? 0 : 3\n        : abs(p[0] - x1) < epsilon ? direction > 0 ? 2 : 1\n        : abs(p[1] - y0) < epsilon ? direction > 0 ? 1 : 0\n        : direction > 0 ? 3 : 2; // abs(p[1] - y1) < epsilon\n  }\n\n  function compareIntersection(a, b) {\n    return comparePoint(a.x, b.x);\n  }\n\n  function comparePoint(a, b) {\n    var ca = corner(a, 1),\n        cb = corner(b, 1);\n    return ca !== cb ? ca - cb\n        : ca === 0 ? b[1] - a[1]\n        : ca === 1 ? a[0] - b[0]\n        : ca === 2 ? a[1] - b[1]\n        : b[0] - a[0];\n  }\n\n  return function(stream) {\n    var activeStream = stream,\n        bufferStream = clipBuffer(),\n        segments,\n        polygon,\n        ring,\n        x__, y__, v__, // first point\n        x_, y_, v_, // previous point\n        first,\n        clean;\n\n    var clipStream = {\n      point: point,\n      lineStart: lineStart,\n      lineEnd: lineEnd,\n      polygonStart: polygonStart,\n      polygonEnd: polygonEnd\n    };\n\n    function point(x, y) {\n      if (visible(x, y)) activeStream.point(x, y);\n    }\n\n    function polygonInside() {\n      var winding = 0;\n\n      for (var i = 0, n = polygon.length; i < n; ++i) {\n        for (var ring = polygon[i], j = 1, m = ring.length, point = ring[0], a0, a1, b0 = point[0], b1 = point[1]; j < m; ++j) {\n          a0 = b0, a1 = b1, point = ring[j], b0 = point[0], b1 = point[1];\n          if (a1 <= y1) { if (b1 > y1 && (b0 - a0) * (y1 - a1) > (b1 - a1) * (x0 - a0)) ++winding; }\n          else { if (b1 <= y1 && (b0 - a0) * (y1 - a1) < (b1 - a1) * (x0 - a0)) --winding; }\n        }\n      }\n\n      return winding;\n    }\n\n    // Buffer geometry within a polygon and then clip it en masse.\n    function polygonStart() {\n      activeStream = bufferStream, segments = [], polygon = [], clean = true;\n    }\n\n    function polygonEnd() {\n      var startInside = polygonInside(),\n          cleanInside = clean && startInside,\n          visible = (segments = merge(segments)).length;\n      if (cleanInside || visible) {\n        stream.polygonStart();\n        if (cleanInside) {\n          stream.lineStart();\n          interpolate(null, null, 1, stream);\n          stream.lineEnd();\n        }\n        if (visible) {\n          clipRejoin(segments, compareIntersection, startInside, interpolate, stream);\n        }\n        stream.polygonEnd();\n      }\n      activeStream = stream, segments = polygon = ring = null;\n    }\n\n    function lineStart() {\n      clipStream.point = linePoint;\n      if (polygon) polygon.push(ring = []);\n      first = true;\n      v_ = false;\n      x_ = y_ = NaN;\n    }\n\n    // TODO rather than special-case polygons, simply handle them separately.\n    // Ideally, coincident intersection points should be jittered to avoid\n    // clipping issues.\n    function lineEnd() {\n      if (segments) {\n        linePoint(x__, y__);\n        if (v__ && v_) bufferStream.rejoin();\n        segments.push(bufferStream.result());\n      }\n      clipStream.point = point;\n      if (v_) activeStream.lineEnd();\n    }\n\n    function linePoint(x, y) {\n      var v = visible(x, y);\n      if (polygon) ring.push([x, y]);\n      if (first) {\n        x__ = x, y__ = y, v__ = v;\n        first = false;\n        if (v) {\n          activeStream.lineStart();\n          activeStream.point(x, y);\n        }\n      } else {\n        if (v && v_) activeStream.point(x, y);\n        else {\n          var a = [x_ = Math.max(clipMin, Math.min(clipMax, x_)), y_ = Math.max(clipMin, Math.min(clipMax, y_))],\n              b = [x = Math.max(clipMin, Math.min(clipMax, x)), y = Math.max(clipMin, Math.min(clipMax, y))];\n          if (clipLine(a, b, x0, y0, x1, y1)) {\n            if (!v_) {\n              activeStream.lineStart();\n              activeStream.point(a[0], a[1]);\n            }\n            activeStream.point(b[0], b[1]);\n            if (!v) activeStream.lineEnd();\n            clean = false;\n          } else if (v) {\n            activeStream.lineStart();\n            activeStream.point(x, y);\n            clean = false;\n          }\n        }\n      }\n      x_ = x, y_ = y, v_ = v;\n    }\n\n    return clipStream;\n  };\n}\n", "export default x => x;\n", "import {Adder} from \"d3-array\";\nimport {abs} from \"../math.js\";\nimport noop from \"../noop.js\";\n\nvar areaSum = new Adder(),\n    areaRingSum = new Adder(),\n    x00,\n    y00,\n    x0,\n    y0;\n\nvar areaStream = {\n  point: noop,\n  lineStart: noop,\n  lineEnd: noop,\n  polygonStart: function() {\n    areaStream.lineStart = areaRingStart;\n    areaStream.lineEnd = areaRingEnd;\n  },\n  polygonEnd: function() {\n    areaStream.lineStart = areaStream.lineEnd = areaStream.point = noop;\n    areaSum.add(abs(areaRingSum));\n    areaRingSum = new Adder();\n  },\n  result: function() {\n    var area = areaSum / 2;\n    areaSum = new Adder();\n    return area;\n  }\n};\n\nfunction areaRingStart() {\n  areaStream.point = areaPointFirst;\n}\n\nfunction areaPointFirst(x, y) {\n  areaStream.point = areaPoint;\n  x00 = x0 = x, y00 = y0 = y;\n}\n\nfunction areaPoint(x, y) {\n  areaRingSum.add(y0 * x - x0 * y);\n  x0 = x, y0 = y;\n}\n\nfunction areaRingEnd() {\n  areaPoint(x00, y00);\n}\n\nexport default areaStream;\n", "import noop from \"../noop.js\";\n\nvar x0 = Infinity,\n    y0 = x0,\n    x1 = -x0,\n    y1 = x1;\n\nvar boundsStream = {\n  point: boundsPoint,\n  lineStart: noop,\n  lineEnd: noop,\n  polygonStart: noop,\n  polygonEnd: noop,\n  result: function() {\n    var bounds = [[x0, y0], [x1, y1]];\n    x1 = y1 = -(y0 = x0 = Infinity);\n    return bounds;\n  }\n};\n\nfunction boundsPoint(x, y) {\n  if (x < x0) x0 = x;\n  if (x > x1) x1 = x;\n  if (y < y0) y0 = y;\n  if (y > y1) y1 = y;\n}\n\nexport default boundsStream;\n", "import {sqrt} from \"../math.js\";\n\n// TODO Enforce positive area for exterior, negative area for interior?\n\nvar X0 = 0,\n    Y0 = 0,\n    Z0 = 0,\n    X1 = 0,\n    Y1 = 0,\n    Z1 = 0,\n    X2 = 0,\n    Y2 = 0,\n    Z2 = 0,\n    x00,\n    y00,\n    x0,\n    y0;\n\nvar centroidStream = {\n  point: centroidPoint,\n  lineStart: centroidLineStart,\n  lineEnd: centroidLineEnd,\n  polygonStart: function() {\n    centroidStream.lineStart = centroidRingStart;\n    centroidStream.lineEnd = centroidRingEnd;\n  },\n  polygonEnd: function() {\n    centroidStream.point = centroidPoint;\n    centroidStream.lineStart = centroidLineStart;\n    centroidStream.lineEnd = centroidLineEnd;\n  },\n  result: function() {\n    var centroid = Z2 ? [X2 / Z2, Y2 / Z2]\n        : Z1 ? [X1 / Z1, Y1 / Z1]\n        : Z0 ? [X0 / Z0, Y0 / Z0]\n        : [NaN, NaN];\n    X0 = Y0 = Z0 =\n    X1 = Y1 = Z1 =\n    X2 = Y2 = Z2 = 0;\n    return centroid;\n  }\n};\n\nfunction centroidPoint(x, y) {\n  X0 += x;\n  Y0 += y;\n  ++Z0;\n}\n\nfunction centroidLineStart() {\n  centroidStream.point = centroidPointFirstLine;\n}\n\nfunction centroidPointFirstLine(x, y) {\n  centroidStream.point = centroidPointLine;\n  centroidPoint(x0 = x, y0 = y);\n}\n\nfunction centroidPointLine(x, y) {\n  var dx = x - x0, dy = y - y0, z = sqrt(dx * dx + dy * dy);\n  X1 += z * (x0 + x) / 2;\n  Y1 += z * (y0 + y) / 2;\n  Z1 += z;\n  centroidPoint(x0 = x, y0 = y);\n}\n\nfunction centroidLineEnd() {\n  centroidStream.point = centroidPoint;\n}\n\nfunction centroidRingStart() {\n  centroidStream.point = centroidPointFirstRing;\n}\n\nfunction centroidRingEnd() {\n  centroidPointRing(x00, y00);\n}\n\nfunction centroidPointFirstRing(x, y) {\n  centroidStream.point = centroidPointRing;\n  centroidPoint(x00 = x0 = x, y00 = y0 = y);\n}\n\nfunction centroidPointRing(x, y) {\n  var dx = x - x0,\n      dy = y - y0,\n      z = sqrt(dx * dx + dy * dy);\n\n  X1 += z * (x0 + x) / 2;\n  Y1 += z * (y0 + y) / 2;\n  Z1 += z;\n\n  z = y0 * x - x0 * y;\n  X2 += z * (x0 + x);\n  Y2 += z * (y0 + y);\n  Z2 += z * 3;\n  centroidPoint(x0 = x, y0 = y);\n}\n\nexport default centroidStream;\n", "import {tau} from \"../math.js\";\nimport noop from \"../noop.js\";\n\nexport default function PathContext(context) {\n  this._context = context;\n}\n\nPathContext.prototype = {\n  _radius: 4.5,\n  pointRadius: function(_) {\n    return this._radius = _, this;\n  },\n  polygonStart: function() {\n    this._line = 0;\n  },\n  polygonEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line === 0) this._context.closePath();\n    this._point = NaN;\n  },\n  point: function(x, y) {\n    switch (this._point) {\n      case 0: {\n        this._context.moveTo(x, y);\n        this._point = 1;\n        break;\n      }\n      case 1: {\n        this._context.lineTo(x, y);\n        break;\n      }\n      default: {\n        this._context.moveTo(x + this._radius, y);\n        this._context.arc(x, y, this._radius, 0, tau);\n        break;\n      }\n    }\n  },\n  result: noop\n};\n", "import {Adder} from \"d3-array\";\nimport {sqrt} from \"../math.js\";\nimport noop from \"../noop.js\";\n\nvar lengthSum = new Adder(),\n    lengthRing,\n    x00,\n    y00,\n    x0,\n    y0;\n\nvar lengthStream = {\n  point: noop,\n  lineStart: function() {\n    lengthStream.point = lengthPointFirst;\n  },\n  lineEnd: function() {\n    if (lengthRing) lengthPoint(x00, y00);\n    lengthStream.point = noop;\n  },\n  polygonStart: function() {\n    lengthRing = true;\n  },\n  polygonEnd: function() {\n    lengthRing = null;\n  },\n  result: function() {\n    var length = +lengthSum;\n    lengthSum = new Adder();\n    return length;\n  }\n};\n\nfunction lengthPointFirst(x, y) {\n  lengthStream.point = lengthPoint;\n  x00 = x0 = x, y00 = y0 = y;\n}\n\nfunction lengthPoint(x, y) {\n  x0 -= x, y0 -= y;\n  lengthSum.add(sqrt(x0 * x0 + y0 * y0));\n  x0 = x, y0 = y;\n}\n\nexport default lengthStream;\n", "// Simple caching for constant-radius points.\nlet cacheDigits, cacheAppend, cacheRadius, cacheCircle;\n\nexport default class PathString {\n  constructor(digits) {\n    this._append = digits == null ? append : appendRound(digits);\n    this._radius = 4.5;\n    this._ = \"\";\n  }\n  pointRadius(_) {\n    this._radius = +_;\n    return this;\n  }\n  polygonStart() {\n    this._line = 0;\n  }\n  polygonEnd() {\n    this._line = NaN;\n  }\n  lineStart() {\n    this._point = 0;\n  }\n  lineEnd() {\n    if (this._line === 0) this._ += \"Z\";\n    this._point = NaN;\n  }\n  point(x, y) {\n    switch (this._point) {\n      case 0: {\n        this._append`M${x},${y}`;\n        this._point = 1;\n        break;\n      }\n      case 1: {\n        this._append`L${x},${y}`;\n        break;\n      }\n      default: {\n        this._append`M${x},${y}`;\n        if (this._radius !== cacheRadius || this._append !== cacheAppend) {\n          const r = this._radius;\n          const s = this._;\n          this._ = \"\"; // stash the old string so we can cache the circle path fragment\n          this._append`m0,${r}a${r},${r} 0 1,1 0,${-2 * r}a${r},${r} 0 1,1 0,${2 * r}z`;\n          cacheRadius = r;\n          cacheAppend = this._append;\n          cacheCircle = this._;\n          this._ = s;\n        }\n        this._ += cacheCircle;\n        break;\n      }\n    }\n  }\n  result() {\n    const result = this._;\n    this._ = \"\";\n    return result.length ? result : null;\n  }\n}\n\nfunction append(strings) {\n  let i = 1;\n  this._ += strings[0];\n  for (const j = strings.length; i < j; ++i) {\n    this._ += arguments[i] + strings[i];\n  }\n}\n\nfunction appendRound(digits) {\n  const d = Math.floor(digits);\n  if (!(d >= 0)) throw new RangeError(`invalid digits: ${digits}`);\n  if (d > 15) return append;\n  if (d !== cacheDigits) {\n    const k = 10 ** d;\n    cacheDigits = d;\n    cacheAppend = function append(strings) {\n      let i = 1;\n      this._ += strings[0];\n      for (const j = strings.length; i < j; ++i) {\n        this._ += Math.round(arguments[i] * k) / k + strings[i];\n      }\n    };\n  }\n  return cacheAppend;\n}\n", "import identity from \"../identity.js\";\nimport stream from \"../stream.js\";\nimport pathArea from \"./area.js\";\nimport pathBounds from \"./bounds.js\";\nimport pathCentroid from \"./centroid.js\";\nimport PathContext from \"./context.js\";\nimport pathMeasure from \"./measure.js\";\nimport PathString from \"./string.js\";\n\nexport default function(projection, context) {\n  let digits = 3,\n      pointRadius = 4.5,\n      projectionStream,\n      contextStream;\n\n  function path(object) {\n    if (object) {\n      if (typeof pointRadius === \"function\") contextStream.pointRadius(+pointRadius.apply(this, arguments));\n      stream(object, projectionStream(contextStream));\n    }\n    return contextStream.result();\n  }\n\n  path.area = function(object) {\n    stream(object, projectionStream(pathArea));\n    return pathArea.result();\n  };\n\n  path.measure = function(object) {\n    stream(object, projectionStream(pathMeasure));\n    return pathMeasure.result();\n  };\n\n  path.bounds = function(object) {\n    stream(object, projectionStream(pathBounds));\n    return pathBounds.result();\n  };\n\n  path.centroid = function(object) {\n    stream(object, projectionStream(pathCentroid));\n    return pathCentroid.result();\n  };\n\n  path.projection = function(_) {\n    if (!arguments.length) return projection;\n    projectionStream = _ == null ? (projection = null, identity) : (projection = _).stream;\n    return path;\n  };\n\n  path.context = function(_) {\n    if (!arguments.length) return context;\n    contextStream = _ == null ? (context = null, new PathString(digits)) : new PathContext(context = _);\n    if (typeof pointRadius !== \"function\") contextStream.pointRadius(pointRadius);\n    return path;\n  };\n\n  path.pointRadius = function(_) {\n    if (!arguments.length) return pointRadius;\n    pointRadius = typeof _ === \"function\" ? _ : (contextStream.pointRadius(+_), +_);\n    return path;\n  };\n\n  path.digits = function(_) {\n    if (!arguments.length) return digits;\n    if (_ == null) digits = null;\n    else {\n      const d = Math.floor(_);\n      if (!(d >= 0)) throw new RangeError(`invalid digits: ${_}`);\n      digits = d;\n    }\n    if (context === null) contextStream = new PathString(digits);\n    return path;\n  };\n\n  return path.projection(projection).digits(digits).context(context);\n}\n", "export default function(methods) {\n  return {\n    stream: transformer(methods)\n  };\n}\n\nexport function transformer(methods) {\n  return function(stream) {\n    var s = new TransformStream;\n    for (var key in methods) s[key] = methods[key];\n    s.stream = stream;\n    return s;\n  };\n}\n\nfunction TransformStream() {}\n\nTransformStream.prototype = {\n  constructor: TransformStream,\n  point: function(x, y) { this.stream.point(x, y); },\n  sphere: function() { this.stream.sphere(); },\n  lineStart: function() { this.stream.lineStart(); },\n  lineEnd: function() { this.stream.lineEnd(); },\n  polygonStart: function() { this.stream.polygonStart(); },\n  polygonEnd: function() { this.stream.polygonEnd(); }\n};\n", "import {default as geoStream} from \"../stream.js\";\nimport boundsStream from \"../path/bounds.js\";\n\nfunction fit(projection, fitBounds, object) {\n  var clip = projection.clipExtent && projection.clipExtent();\n  projection.scale(150).translate([0, 0]);\n  if (clip != null) projection.clipExtent(null);\n  geoStream(object, projection.stream(boundsStream));\n  fitBounds(boundsStream.result());\n  if (clip != null) projection.clipExtent(clip);\n  return projection;\n}\n\nexport function fitExtent(projection, extent, object) {\n  return fit(projection, function(b) {\n    var w = extent[1][0] - extent[0][0],\n        h = extent[1][1] - extent[0][1],\n        k = Math.min(w / (b[1][0] - b[0][0]), h / (b[1][1] - b[0][1])),\n        x = +extent[0][0] + (w - k * (b[1][0] + b[0][0])) / 2,\n        y = +extent[0][1] + (h - k * (b[1][1] + b[0][1])) / 2;\n    projection.scale(150 * k).translate([x, y]);\n  }, object);\n}\n\nexport function fitSize(projection, size, object) {\n  return fitExtent(projection, [[0, 0], size], object);\n}\n\nexport function fitWidth(projection, width, object) {\n  return fit(projection, function(b) {\n    var w = +width,\n        k = w / (b[1][0] - b[0][0]),\n        x = (w - k * (b[1][0] + b[0][0])) / 2,\n        y = -k * b[0][1];\n    projection.scale(150 * k).translate([x, y]);\n  }, object);\n}\n\nexport function fitHeight(projection, height, object) {\n  return fit(projection, function(b) {\n    var h = +height,\n        k = h / (b[1][1] - b[0][1]),\n        x = -k * b[0][0],\n        y = (h - k * (b[1][1] + b[0][1])) / 2;\n    projection.scale(150 * k).translate([x, y]);\n  }, object);\n}\n", "import {cartesian} from \"../cartesian.js\";\nimport {abs, asin, atan2, cos, epsilon, radians, sqrt} from \"../math.js\";\nimport {transformer} from \"../transform.js\";\n\nvar maxDepth = 16, // maximum depth of subdivision\n    cosMinDistance = cos(30 * radians); // cos(minimum angular distance)\n\nexport default function(project, delta2) {\n  return +delta2 ? resample(project, delta2) : resampleNone(project);\n}\n\nfunction resampleNone(project) {\n  return transformer({\n    point: function(x, y) {\n      x = project(x, y);\n      this.stream.point(x[0], x[1]);\n    }\n  });\n}\n\nfunction resample(project, delta2) {\n\n  function resampleLineTo(x0, y0, lambda0, a0, b0, c0, x1, y1, lambda1, a1, b1, c1, depth, stream) {\n    var dx = x1 - x0,\n        dy = y1 - y0,\n        d2 = dx * dx + dy * dy;\n    if (d2 > 4 * delta2 && depth--) {\n      var a = a0 + a1,\n          b = b0 + b1,\n          c = c0 + c1,\n          m = sqrt(a * a + b * b + c * c),\n          phi2 = asin(c /= m),\n          lambda2 = abs(abs(c) - 1) < epsilon || abs(lambda0 - lambda1) < epsilon ? (lambda0 + lambda1) / 2 : atan2(b, a),\n          p = project(lambda2, phi2),\n          x2 = p[0],\n          y2 = p[1],\n          dx2 = x2 - x0,\n          dy2 = y2 - y0,\n          dz = dy * dx2 - dx * dy2;\n      if (dz * dz / d2 > delta2 // perpendicular projected distance\n          || abs((dx * dx2 + dy * dy2) / d2 - 0.5) > 0.3 // midpoint close to an end\n          || a0 * a1 + b0 * b1 + c0 * c1 < cosMinDistance) { // angular distance\n        resampleLineTo(x0, y0, lambda0, a0, b0, c0, x2, y2, lambda2, a /= m, b /= m, c, depth, stream);\n        stream.point(x2, y2);\n        resampleLineTo(x2, y2, lambda2, a, b, c, x1, y1, lambda1, a1, b1, c1, depth, stream);\n      }\n    }\n  }\n  return function(stream) {\n    var lambda00, x00, y00, a00, b00, c00, // first point\n        lambda0, x0, y0, a0, b0, c0; // previous point\n\n    var resampleStream = {\n      point: point,\n      lineStart: lineStart,\n      lineEnd: lineEnd,\n      polygonStart: function() { stream.polygonStart(); resampleStream.lineStart = ringStart; },\n      polygonEnd: function() { stream.polygonEnd(); resampleStream.lineStart = lineStart; }\n    };\n\n    function point(x, y) {\n      x = project(x, y);\n      stream.point(x[0], x[1]);\n    }\n\n    function lineStart() {\n      x0 = NaN;\n      resampleStream.point = linePoint;\n      stream.lineStart();\n    }\n\n    function linePoint(lambda, phi) {\n      var c = cartesian([lambda, phi]), p = project(lambda, phi);\n      resampleLineTo(x0, y0, lambda0, a0, b0, c0, x0 = p[0], y0 = p[1], lambda0 = lambda, a0 = c[0], b0 = c[1], c0 = c[2], maxDepth, stream);\n      stream.point(x0, y0);\n    }\n\n    function lineEnd() {\n      resampleStream.point = point;\n      stream.lineEnd();\n    }\n\n    function ringStart() {\n      lineStart();\n      resampleStream.point = ringPoint;\n      resampleStream.lineEnd = ringEnd;\n    }\n\n    function ringPoint(lambda, phi) {\n      linePoint(lambda00 = lambda, phi), x00 = x0, y00 = y0, a00 = a0, b00 = b0, c00 = c0;\n      resampleStream.point = linePoint;\n    }\n\n    function ringEnd() {\n      resampleLineTo(x0, y0, lambda0, a0, b0, c0, x00, y00, lambda00, a00, b00, c00, maxDepth, stream);\n      resampleStream.lineEnd = lineEnd;\n      lineEnd();\n    }\n\n    return resampleStream;\n  };\n}\n", "import clipAntimeridian from \"../clip/antimeridian.js\";\nimport clipCircle from \"../clip/circle.js\";\nimport clipRectangle from \"../clip/rectangle.js\";\nimport compose from \"../compose.js\";\nimport identity from \"../identity.js\";\nimport {cos, degrees, radians, sin, sqrt} from \"../math.js\";\nimport {rotateRadians} from \"../rotation.js\";\nimport {transformer} from \"../transform.js\";\nimport {fitExtent, fitSize, fitWidth, fitHeight} from \"./fit.js\";\nimport resample from \"./resample.js\";\n\nvar transformRadians = transformer({\n  point: function(x, y) {\n    this.stream.point(x * radians, y * radians);\n  }\n});\n\nfunction transformRotate(rotate) {\n  return transformer({\n    point: function(x, y) {\n      var r = rotate(x, y);\n      return this.stream.point(r[0], r[1]);\n    }\n  });\n}\n\nfunction scaleTranslate(k, dx, dy, sx, sy) {\n  function transform(x, y) {\n    x *= sx; y *= sy;\n    return [dx + k * x, dy - k * y];\n  }\n  transform.invert = function(x, y) {\n    return [(x - dx) / k * sx, (dy - y) / k * sy];\n  };\n  return transform;\n}\n\nfunction scaleTranslateRotate(k, dx, dy, sx, sy, alpha) {\n  if (!alpha) return scaleTranslate(k, dx, dy, sx, sy);\n  var cosAlpha = cos(alpha),\n      sinAlpha = sin(alpha),\n      a = cosAlpha * k,\n      b = sinAlpha * k,\n      ai = cosAlpha / k,\n      bi = sinAlpha / k,\n      ci = (sinAlpha * dy - cosAlpha * dx) / k,\n      fi = (sinAlpha * dx + cosAlpha * dy) / k;\n  function transform(x, y) {\n    x *= sx; y *= sy;\n    return [a * x - b * y + dx, dy - b * x - a * y];\n  }\n  transform.invert = function(x, y) {\n    return [sx * (ai * x - bi * y + ci), sy * (fi - bi * x - ai * y)];\n  };\n  return transform;\n}\n\nexport default function projection(project) {\n  return projectionMutator(function() { return project; })();\n}\n\nexport function projectionMutator(projectAt) {\n  var project,\n      k = 150, // scale\n      x = 480, y = 250, // translate\n      lambda = 0, phi = 0, // center\n      deltaLambda = 0, deltaPhi = 0, deltaGamma = 0, rotate, // pre-rotate\n      alpha = 0, // post-rotate angle\n      sx = 1, // reflectX\n      sy = 1, // reflectX\n      theta = null, preclip = clipAntimeridian, // pre-clip angle\n      x0 = null, y0, x1, y1, postclip = identity, // post-clip extent\n      delta2 = 0.5, // precision\n      projectResample,\n      projectTransform,\n      projectRotateTransform,\n      cache,\n      cacheStream;\n\n  function projection(point) {\n    return projectRotateTransform(point[0] * radians, point[1] * radians);\n  }\n\n  function invert(point) {\n    point = projectRotateTransform.invert(point[0], point[1]);\n    return point && [point[0] * degrees, point[1] * degrees];\n  }\n\n  projection.stream = function(stream) {\n    return cache && cacheStream === stream ? cache : cache = transformRadians(transformRotate(rotate)(preclip(projectResample(postclip(cacheStream = stream)))));\n  };\n\n  projection.preclip = function(_) {\n    return arguments.length ? (preclip = _, theta = undefined, reset()) : preclip;\n  };\n\n  projection.postclip = function(_) {\n    return arguments.length ? (postclip = _, x0 = y0 = x1 = y1 = null, reset()) : postclip;\n  };\n\n  projection.clipAngle = function(_) {\n    return arguments.length ? (preclip = +_ ? clipCircle(theta = _ * radians) : (theta = null, clipAntimeridian), reset()) : theta * degrees;\n  };\n\n  projection.clipExtent = function(_) {\n    return arguments.length ? (postclip = _ == null ? (x0 = y0 = x1 = y1 = null, identity) : clipRectangle(x0 = +_[0][0], y0 = +_[0][1], x1 = +_[1][0], y1 = +_[1][1]), reset()) : x0 == null ? null : [[x0, y0], [x1, y1]];\n  };\n\n  projection.scale = function(_) {\n    return arguments.length ? (k = +_, recenter()) : k;\n  };\n\n  projection.translate = function(_) {\n    return arguments.length ? (x = +_[0], y = +_[1], recenter()) : [x, y];\n  };\n\n  projection.center = function(_) {\n    return arguments.length ? (lambda = _[0] % 360 * radians, phi = _[1] % 360 * radians, recenter()) : [lambda * degrees, phi * degrees];\n  };\n\n  projection.rotate = function(_) {\n    return arguments.length ? (deltaLambda = _[0] % 360 * radians, deltaPhi = _[1] % 360 * radians, deltaGamma = _.length > 2 ? _[2] % 360 * radians : 0, recenter()) : [deltaLambda * degrees, deltaPhi * degrees, deltaGamma * degrees];\n  };\n\n  projection.angle = function(_) {\n    return arguments.length ? (alpha = _ % 360 * radians, recenter()) : alpha * degrees;\n  };\n\n  projection.reflectX = function(_) {\n    return arguments.length ? (sx = _ ? -1 : 1, recenter()) : sx < 0;\n  };\n\n  projection.reflectY = function(_) {\n    return arguments.length ? (sy = _ ? -1 : 1, recenter()) : sy < 0;\n  };\n\n  projection.precision = function(_) {\n    return arguments.length ? (projectResample = resample(projectTransform, delta2 = _ * _), reset()) : sqrt(delta2);\n  };\n\n  projection.fitExtent = function(extent, object) {\n    return fitExtent(projection, extent, object);\n  };\n\n  projection.fitSize = function(size, object) {\n    return fitSize(projection, size, object);\n  };\n\n  projection.fitWidth = function(width, object) {\n    return fitWidth(projection, width, object);\n  };\n\n  projection.fitHeight = function(height, object) {\n    return fitHeight(projection, height, object);\n  };\n\n  function recenter() {\n    var center = scaleTranslateRotate(k, 0, 0, sx, sy, alpha).apply(null, project(lambda, phi)),\n        transform = scaleTranslateRotate(k, x - center[0], y - center[1], sx, sy, alpha);\n    rotate = rotateRadians(deltaLambda, deltaPhi, deltaGamma);\n    projectTransform = compose(project, transform);\n    projectRotateTransform = compose(rotate, projectTransform);\n    projectResample = resample(projectTransform, delta2);\n    return reset();\n  }\n\n  function reset() {\n    cache = cacheStream = null;\n    return projection;\n  }\n\n  return function() {\n    project = projectAt.apply(this, arguments);\n    projection.invert = project.invert && invert;\n    return recenter();\n  };\n}\n", "import {degrees, pi, radians} from \"../math.js\";\nimport {projectionMutator} from \"./index.js\";\n\nexport function conicProjection(projectAt) {\n  var phi0 = 0,\n      phi1 = pi / 3,\n      m = projectionMutator(projectAt),\n      p = m(phi0, phi1);\n\n  p.parallels = function(_) {\n    return arguments.length ? m(phi0 = _[0] * radians, phi1 = _[1] * radians) : [phi0 * degrees, phi1 * degrees];\n  };\n\n  return p;\n}\n", "import {asin, cos, sin} from \"../math.js\";\n\nexport function cylindricalEqualAreaRaw(phi0) {\n  var cosPhi0 = cos(phi0);\n\n  function forward(lambda, phi) {\n    return [lambda * cosPhi0, sin(phi) / cosPhi0];\n  }\n\n  forward.invert = function(x, y) {\n    return [x / cosPhi0, asin(y * cosPhi0)];\n  };\n\n  return forward;\n}\n", "import {abs, asin, atan2, cos, epsilon, pi, sign, sin, sqrt} from \"../math.js\";\nimport {conicProjection} from \"./conic.js\";\nimport {cylindricalEqualAreaRaw} from \"./cylindricalEqualArea.js\";\n\nexport function conicEqualAreaRaw(y0, y1) {\n  var sy0 = sin(y0), n = (sy0 + sin(y1)) / 2;\n\n  // Are the parallels symmetrical around the Equator?\n  if (abs(n) < epsilon) return cylindricalEqualAreaRaw(y0);\n\n  var c = 1 + sy0 * (2 * n - sy0), r0 = sqrt(c) / n;\n\n  function project(x, y) {\n    var r = sqrt(c - 2 * n * sin(y)) / n;\n    return [r * sin(x *= n), r0 - r * cos(x)];\n  }\n\n  project.invert = function(x, y) {\n    var r0y = r0 - y,\n        l = atan2(x, abs(r0y)) * sign(r0y);\n    if (r0y * n < 0)\n      l -= pi * sign(x) * sign(r0y);\n    return [l / n, asin((c - (x * x + r0y * r0y) * n * n) / (2 * n))];\n  };\n\n  return project;\n}\n\nexport default function() {\n  return conicProjection(conicEqualAreaRaw)\n      .scale(155.424)\n      .center([0, 33.6442]);\n}\n", "import conicEqualArea from \"./conicEqualArea.js\";\n\nexport default function() {\n  return conicEqualArea()\n      .parallels([29.5, 45.5])\n      .scale(1070)\n      .translate([480, 250])\n      .rotate([96, 0])\n      .center([-0.6, 38.7]);\n}\n", "import {epsilon} from \"../math.js\";\nimport albers from \"./albers.js\";\nimport conicEqualArea from \"./conicEqualArea.js\";\nimport {fitExtent, fitSize, fitWidth, fitHeight} from \"./fit.js\";\n\n// The projections must have mutually exclusive clip regions on the sphere,\n// as this will avoid emitting interleaving lines and polygons.\nfunction multiplex(streams) {\n  var n = streams.length;\n  return {\n    point: function(x, y) { var i = -1; while (++i < n) streams[i].point(x, y); },\n    sphere: function() { var i = -1; while (++i < n) streams[i].sphere(); },\n    lineStart: function() { var i = -1; while (++i < n) streams[i].lineStart(); },\n    lineEnd: function() { var i = -1; while (++i < n) streams[i].lineEnd(); },\n    polygonStart: function() { var i = -1; while (++i < n) streams[i].polygonStart(); },\n    polygonEnd: function() { var i = -1; while (++i < n) streams[i].polygonEnd(); }\n  };\n}\n\n// A composite projection for the United States, configured by default for\n// 960×500. The projection also works quite well at 960×600 if you change the\n// scale to 1285 and adjust the translate accordingly. The set of standard\n// parallels for each region comes from USGS, which is published here:\n// http://egsc.usgs.gov/isb/pubs/MapProjections/projections.html#albers\nexport default function() {\n  var cache,\n      cacheStream,\n      lower48 = albers(), lower48Point,\n      alaska = conicEqualArea().rotate([154, 0]).center([-2, 58.5]).parallels([55, 65]), alaskaPoint, // EPSG:3338\n      hawaii = conicEqualArea().rotate([157, 0]).center([-3, 19.9]).parallels([8, 18]), hawaiiPoint, // ESRI:102007\n      point, pointStream = {point: function(x, y) { point = [x, y]; }};\n\n  function albersUsa(coordinates) {\n    var x = coordinates[0], y = coordinates[1];\n    return point = null,\n        (lower48Point.point(x, y), point)\n        || (alaskaPoint.point(x, y), point)\n        || (hawaiiPoint.point(x, y), point);\n  }\n\n  albersUsa.invert = function(coordinates) {\n    var k = lower48.scale(),\n        t = lower48.translate(),\n        x = (coordinates[0] - t[0]) / k,\n        y = (coordinates[1] - t[1]) / k;\n    return (y >= 0.120 && y < 0.234 && x >= -0.425 && x < -0.214 ? alaska\n        : y >= 0.166 && y < 0.234 && x >= -0.214 && x < -0.115 ? hawaii\n        : lower48).invert(coordinates);\n  };\n\n  albersUsa.stream = function(stream) {\n    return cache && cacheStream === stream ? cache : cache = multiplex([lower48.stream(cacheStream = stream), alaska.stream(stream), hawaii.stream(stream)]);\n  };\n\n  albersUsa.precision = function(_) {\n    if (!arguments.length) return lower48.precision();\n    lower48.precision(_), alaska.precision(_), hawaii.precision(_);\n    return reset();\n  };\n\n  albersUsa.scale = function(_) {\n    if (!arguments.length) return lower48.scale();\n    lower48.scale(_), alaska.scale(_ * 0.35), hawaii.scale(_);\n    return albersUsa.translate(lower48.translate());\n  };\n\n  albersUsa.translate = function(_) {\n    if (!arguments.length) return lower48.translate();\n    var k = lower48.scale(), x = +_[0], y = +_[1];\n\n    lower48Point = lower48\n        .translate(_)\n        .clipExtent([[x - 0.455 * k, y - 0.238 * k], [x + 0.455 * k, y + 0.238 * k]])\n        .stream(pointStream);\n\n    alaskaPoint = alaska\n        .translate([x - 0.307 * k, y + 0.201 * k])\n        .clipExtent([[x - 0.425 * k + epsilon, y + 0.120 * k + epsilon], [x - 0.214 * k - epsilon, y + 0.234 * k - epsilon]])\n        .stream(pointStream);\n\n    hawaiiPoint = hawaii\n        .translate([x - 0.205 * k, y + 0.212 * k])\n        .clipExtent([[x - 0.214 * k + epsilon, y + 0.166 * k + epsilon], [x - 0.115 * k - epsilon, y + 0.234 * k - epsilon]])\n        .stream(pointStream);\n\n    return reset();\n  };\n\n  albersUsa.fitExtent = function(extent, object) {\n    return fitExtent(albersUsa, extent, object);\n  };\n\n  albersUsa.fitSize = function(size, object) {\n    return fitSize(albersUsa, size, object);\n  };\n\n  albersUsa.fitWidth = function(width, object) {\n    return fitWidth(albersUsa, width, object);\n  };\n\n  albersUsa.fitHeight = function(height, object) {\n    return fitHeight(albersUsa, height, object);\n  };\n\n  function reset() {\n    cache = cacheStream = null;\n    return albersUsa;\n  }\n\n  return albersUsa.scale(1070);\n}\n", "import {asin, atan2, cos, sin, sqrt} from \"../math.js\";\n\nexport function azimuthalRaw(scale) {\n  return function(x, y) {\n    var cx = cos(x),\n        cy = cos(y),\n        k = scale(cx * cy);\n        if (k === Infinity) return [2, 0];\n    return [\n      k * cy * sin(x),\n      k * sin(y)\n    ];\n  }\n}\n\nexport function azimuthalInvert(angle) {\n  return function(x, y) {\n    var z = sqrt(x * x + y * y),\n        c = angle(z),\n        sc = sin(c),\n        cc = cos(c);\n    return [\n      atan2(x * sc, z * cc),\n      asin(z && y * sc / z)\n    ];\n  }\n}\n", "import {asin, sqrt} from \"../math.js\";\nimport {azimuthalRaw, azimuthalInvert} from \"./azimuthal.js\";\nimport projection from \"./index.js\";\n\nexport var azimuthalEqualAreaRaw = azimuthalRaw(function(cxcy) {\n  return sqrt(2 / (1 + cxcy));\n});\n\nazimuthalEqualAreaRaw.invert = azimuthalInvert(function(z) {\n  return 2 * asin(z / 2);\n});\n\nexport default function() {\n  return projection(azimuthalEqualAreaRaw)\n      .scale(124.75)\n      .clipAngle(180 - 1e-3);\n}\n", "import {acos, sin} from \"../math.js\";\nimport {azimuthalRaw, azimuthalInvert} from \"./azimuthal.js\";\nimport projection from \"./index.js\";\n\nexport var azimuthalEquidistantRaw = azimuthalRaw(function(c) {\n  return (c = acos(c)) && c / sin(c);\n});\n\nazimuthalEquidistantRaw.invert = azimuthalInvert(function(z) {\n  return z;\n});\n\nexport default function() {\n  return projection(azimuthalEquidistantRaw)\n      .scale(79.4188)\n      .clipAngle(180 - 1e-3);\n}\n", "import {atan, exp, halfPi, log, pi, tan, tau} from \"../math.js\";\nimport rotation from \"../rotation.js\";\nimport projection from \"./index.js\";\n\nexport function mercatorRaw(lambda, phi) {\n  return [lambda, log(tan((halfPi + phi) / 2))];\n}\n\nmercatorRaw.invert = function(x, y) {\n  return [x, 2 * atan(exp(y)) - halfPi];\n};\n\nexport default function() {\n  return mercatorProjection(mercatorRaw)\n      .scale(961 / tau);\n}\n\nexport function mercatorProjection(project) {\n  var m = projection(project),\n      center = m.center,\n      scale = m.scale,\n      translate = m.translate,\n      clipExtent = m.clipExtent,\n      x0 = null, y0, x1, y1; // clip extent\n\n  m.scale = function(_) {\n    return arguments.length ? (scale(_), reclip()) : scale();\n  };\n\n  m.translate = function(_) {\n    return arguments.length ? (translate(_), reclip()) : translate();\n  };\n\n  m.center = function(_) {\n    return arguments.length ? (center(_), reclip()) : center();\n  };\n\n  m.clipExtent = function(_) {\n    return arguments.length ? ((_ == null ? x0 = y0 = x1 = y1 = null : (x0 = +_[0][0], y0 = +_[0][1], x1 = +_[1][0], y1 = +_[1][1])), reclip()) : x0 == null ? null : [[x0, y0], [x1, y1]];\n  };\n\n  function reclip() {\n    var k = pi * scale(),\n        t = m(rotation(m.rotate()).invert([0, 0]));\n    return clipExtent(x0 == null\n        ? [[t[0] - k, t[1] - k], [t[0] + k, t[1] + k]] : project === mercatorRaw\n        ? [[Math.max(t[0] - k, x0), y0], [Math.min(t[0] + k, x1), y1]]\n        : [[x0, Math.max(t[1] - k, y0)], [x1, Math.min(t[1] + k, y1)]]);\n  }\n\n  return reclip();\n}\n", "import {abs, atan, atan2, cos, epsilon, halfPi, log, pi, pow, sign, sin, sqrt, tan} from \"../math.js\";\nimport {conicProjection} from \"./conic.js\";\nimport {mercatorRaw} from \"./mercator.js\";\n\nfunction tany(y) {\n  return tan((halfPi + y) / 2);\n}\n\nexport function conicConformalRaw(y0, y1) {\n  var cy0 = cos(y0),\n      n = y0 === y1 ? sin(y0) : log(cy0 / cos(y1)) / log(tany(y1) / tany(y0)),\n      f = cy0 * pow(tany(y0), n) / n;\n\n  if (!n) return mercatorRaw;\n\n  function project(x, y) {\n    if (f > 0) { if (y < -halfPi + epsilon) y = -halfPi + epsilon; }\n    else { if (y > halfPi - epsilon) y = halfPi - epsilon; }\n    var r = f / pow(tany(y), n);\n    return [r * sin(n * x), f - r * cos(n * x)];\n  }\n\n  project.invert = function(x, y) {\n    var fy = f - y, r = sign(n) * sqrt(x * x + fy * fy),\n      l = atan2(x, abs(fy)) * sign(fy);\n    if (fy * n < 0)\n      l -= pi * sign(x) * sign(fy);\n    return [l / n, 2 * atan(pow(f / r, 1 / n)) - halfPi];\n  };\n\n  return project;\n}\n\nexport default function() {\n  return conicProjection(conicConformalRaw)\n      .scale(109.5)\n      .parallels([30, 30]);\n}\n", "import projection from \"./index.js\";\n\nexport function equirectangularRaw(lambda, phi) {\n  return [lambda, phi];\n}\n\nequirectangularRaw.invert = equirectangularRaw;\n\nexport default function() {\n  return projection(equirectangularRaw)\n      .scale(152.63);\n}\n", "import {abs, atan2, cos, epsilon, pi, sign, sin, sqrt} from \"../math.js\";\nimport {conicProjection} from \"./conic.js\";\nimport {equirectangularRaw} from \"./equirectangular.js\";\n\nexport function conicEquidistantRaw(y0, y1) {\n  var cy0 = cos(y0),\n      n = y0 === y1 ? sin(y0) : (cy0 - cos(y1)) / (y1 - y0),\n      g = cy0 / n + y0;\n\n  if (abs(n) < epsilon) return equirectangularRaw;\n\n  function project(x, y) {\n    var gy = g - y, nx = n * x;\n    return [gy * sin(nx), g - gy * cos(nx)];\n  }\n\n  project.invert = function(x, y) {\n    var gy = g - y,\n        l = atan2(x, abs(gy)) * sign(gy);\n    if (gy * n < 0)\n      l -= pi * sign(x) * sign(gy);\n    return [l / n, g - sign(n) * sqrt(x * x + gy * gy)];\n  };\n\n  return project;\n}\n\nexport default function() {\n  return conicProjection(conicEquidistantRaw)\n      .scale(131.154)\n      .center([0, 13.9389]);\n}\n", "import projection from \"./index.js\";\nimport {abs, asin, cos, epsilon2, sin, sqrt} from \"../math.js\";\n\nvar A1 = 1.340264,\n    A2 = -0.081106,\n    A3 = 0.000893,\n    A4 = 0.003796,\n    M = sqrt(3) / 2,\n    iterations = 12;\n\nexport function equalEarthRaw(lambda, phi) {\n  var l = asin(M * sin(phi)), l2 = l * l, l6 = l2 * l2 * l2;\n  return [\n    lambda * cos(l) / (M * (A1 + 3 * A2 * l2 + l6 * (7 * A3 + 9 * A4 * l2))),\n    l * (A1 + A2 * l2 + l6 * (A3 + A4 * l2))\n  ];\n}\n\nequalEarthRaw.invert = function(x, y) {\n  var l = y, l2 = l * l, l6 = l2 * l2 * l2;\n  for (var i = 0, delta, fy, fpy; i < iterations; ++i) {\n    fy = l * (A1 + A2 * l2 + l6 * (A3 + A4 * l2)) - y;\n    fpy = A1 + 3 * A2 * l2 + l6 * (7 * A3 + 9 * A4 * l2);\n    l -= delta = fy / fpy, l2 = l * l, l6 = l2 * l2 * l2;\n    if (abs(delta) < epsilon2) break;\n  }\n  return [\n    M * x * (A1 + 3 * A2 * l2 + l6 * (7 * A3 + 9 * A4 * l2)) / cos(l),\n    asin(sin(l) / M)\n  ];\n};\n\nexport default function() {\n  return projection(equalEarthRaw)\n      .scale(177.158);\n}\n", "import {atan, cos, sin} from \"../math.js\";\nimport {azimuthalInvert} from \"./azimuthal.js\";\nimport projection from \"./index.js\";\n\nexport function gnomonicRaw(x, y) {\n  var cy = cos(y), k = cos(x) * cy;\n  return [cy * sin(x) / k, sin(y) / k];\n}\n\ngnomonicRaw.invert = azimuthalInvert(atan);\n\nexport default function() {\n  return projection(gnomonicRaw)\n      .scale(144.049)\n      .clipAngle(60);\n}\n", "import projection from \"./index.js\";\nimport {abs, epsilon} from \"../math.js\";\n\nexport function naturalEarth1Raw(lambda, phi) {\n  var phi2 = phi * phi, phi4 = phi2 * phi2;\n  return [\n    lambda * (0.8707 - 0.131979 * phi2 + phi4 * (-0.013791 + phi4 * (0.003971 * phi2 - 0.001529 * phi4))),\n    phi * (1.007226 + phi2 * (0.015085 + phi4 * (-0.044475 + 0.028874 * phi2 - 0.005916 * phi4)))\n  ];\n}\n\nnaturalEarth1Raw.invert = function(x, y) {\n  var phi = y, i = 25, delta;\n  do {\n    var phi2 = phi * phi, phi4 = phi2 * phi2;\n    phi -= delta = (phi * (1.007226 + phi2 * (0.015085 + phi4 * (-0.044475 + 0.028874 * phi2 - 0.005916 * phi4))) - y) /\n        (1.007226 + phi2 * (0.015085 * 3 + phi4 * (-0.044475 * 7 + 0.028874 * 9 * phi2 - 0.005916 * 11 * phi4)));\n  } while (abs(delta) > epsilon && --i > 0);\n  return [\n    x / (0.8707 + (phi2 = phi * phi) * (-0.131979 + phi2 * (-0.013791 + phi2 * phi2 * phi2 * (0.003971 - 0.001529 * phi2)))),\n    phi\n  ];\n};\n\nexport default function() {\n  return projection(naturalEarth1Raw)\n      .scale(175.295);\n}\n", "import {asin, cos, epsilon, sin} from \"../math.js\";\nimport {azimuthalInvert} from \"./azimuthal.js\";\nimport projection from \"./index.js\";\n\nexport function orthographicRaw(x, y) {\n  return [cos(y) * sin(x), sin(y)];\n}\n\northographicRaw.invert = azimuthalInvert(asin);\n\nexport default function() {\n  return projection(orthographicRaw)\n      .scale(249.5)\n      .clipAngle(90 + epsilon);\n}\n", "import {atan, cos, sin} from \"../math.js\";\nimport {azimuthalInvert} from \"./azimuthal.js\";\nimport projection from \"./index.js\";\n\nexport function stereographicRaw(x, y) {\n  var cy = cos(y), k = 1 + cos(x) * cy;\n  return [cy * sin(x) / k, sin(y) / k];\n}\n\nstereographicRaw.invert = azimuthalInvert(function(z) {\n  return 2 * atan(z);\n});\n\nexport default function() {\n  return projection(stereographicRaw)\n      .scale(250)\n      .clipAngle(142);\n}\n", "import {atan, exp, halfPi, log, tan} from \"../math.js\";\nimport {mercatorProjection} from \"./mercator.js\";\n\nexport function transverseMercatorRaw(lambda, phi) {\n  return [log(tan((halfPi + phi) / 2)), -lambda];\n}\n\ntransverseMercatorRaw.invert = function(x, y) {\n  return [-y, 2 * atan(exp(x)) - halfPi];\n};\n\nexport default function() {\n  var m = mercatorProjection(transverseMercatorRaw),\n      center = m.center,\n      rotate = m.rotate;\n\n  m.center = function(_) {\n    return arguments.length ? center([-_[1], _[0]]) : (_ = center(), [_[1], -_[0]]);\n  };\n\n  m.rotate = function(_) {\n    return arguments.length ? rotate([_[0], _[1], _.length > 2 ? _[2] + 90 : 90]) : (_ = rotate(), [_[0], _[1], _[2] - 90]);\n  };\n\n  return rotate([0, 0, 90])\n      .scale(159.155);\n}\n", "export default function(x) {\n  return x;\n}\n", "import identity from \"./identity.js\";\n\nexport default function(transform) {\n  if (transform == null) return identity;\n  var x0,\n      y0,\n      kx = transform.scale[0],\n      ky = transform.scale[1],\n      dx = transform.translate[0],\n      dy = transform.translate[1];\n  return function(input, i) {\n    if (!i) x0 = y0 = 0;\n    var j = 2, n = input.length, output = new Array(n);\n    output[0] = (x0 += input[0]) * kx + dx;\n    output[1] = (y0 += input[1]) * ky + dy;\n    while (j < n) output[j] = input[j], ++j;\n    return output;\n  };\n}\n", "export default function(array, n) {\n  var t, j = array.length, i = j - n;\n  while (i < --j) t = array[i], array[i++] = array[j], array[j] = t;\n}\n", "import reverse from \"./reverse.js\";\nimport transform from \"./transform.js\";\n\nexport default function(topology, o) {\n  if (typeof o === \"string\") o = topology.objects[o];\n  return o.type === \"GeometryCollection\"\n      ? {type: \"FeatureCollection\", features: o.geometries.map(function(o) { return feature(topology, o); })}\n      : feature(topology, o);\n}\n\nfunction feature(topology, o) {\n  var id = o.id,\n      bbox = o.bbox,\n      properties = o.properties == null ? {} : o.properties,\n      geometry = object(topology, o);\n  return id == null && bbox == null ? {type: \"Feature\", properties: properties, geometry: geometry}\n      : bbox == null ? {type: \"Feature\", id: id, properties: properties, geometry: geometry}\n      : {type: \"Feature\", id: id, bbox: bbox, properties: properties, geometry: geometry};\n}\n\nexport function object(topology, o) {\n  var transformPoint = transform(topology.transform),\n      arcs = topology.arcs;\n\n  function arc(i, points) {\n    if (points.length) points.pop();\n    for (var a = arcs[i < 0 ? ~i : i], k = 0, n = a.length; k < n; ++k) {\n      points.push(transformPoint(a[k], k));\n    }\n    if (i < 0) reverse(points, n);\n  }\n\n  function point(p) {\n    return transformPoint(p);\n  }\n\n  function line(arcs) {\n    var points = [];\n    for (var i = 0, n = arcs.length; i < n; ++i) arc(arcs[i], points);\n    if (points.length < 2) points.push(points[0]); // This should never happen per the specification.\n    return points;\n  }\n\n  function ring(arcs) {\n    var points = line(arcs);\n    while (points.length < 4) points.push(points[0]); // This may happen if an arc has only two points.\n    return points;\n  }\n\n  function polygon(arcs) {\n    return arcs.map(ring);\n  }\n\n  function geometry(o) {\n    var type = o.type, coordinates;\n    switch (type) {\n      case \"GeometryCollection\": return {type: type, geometries: o.geometries.map(geometry)};\n      case \"Point\": coordinates = point(o.coordinates); break;\n      case \"MultiPoint\": coordinates = o.coordinates.map(point); break;\n      case \"LineString\": coordinates = line(o.arcs); break;\n      case \"MultiLineString\": coordinates = o.arcs.map(line); break;\n      case \"Polygon\": coordinates = polygon(o.arcs); break;\n      case \"MultiPolygon\": coordinates = o.arcs.map(polygon); break;\n      default: return null;\n    }\n    return {type: type, coordinates: coordinates};\n  }\n\n  return geometry(o);\n}\n", "// Utils\nimport { cloneDeep, isNumber, isObject, isString } from 'utils/data'\n\n// Core Data Model\nimport { CoreDataModel } from 'data-models/core'\n\n// Types\nimport { MapLink } from 'types/map'\n\nexport type MapGraphData<AreaDatum, PointDatum, LinkDatum> = {\n  areas?: AreaDatum[];\n  points?: PointDatum[];\n  links?: LinkDatum[];\n}\n\nexport class MapGraphDataModel<AreaDatum, PointDatum, LinkDatum> extends CoreDataModel<MapGraphData<AreaDatum, PointDatum, LinkDatum>> {\n  private _areas: AreaDatum[] = []\n  private _points: PointDatum[] = []\n  private _links: MapLink<PointDatum, LinkDatum>[] = []\n\n  // Model configuration\n  public pointId: ((n: PointDatum, i: number) => string) = n => (n as unknown as {id: string}).id\n  public linkSource: ((l: LinkDatum) => number | string | PointDatum) = l => (l as unknown as {source: string}).source\n  public linkTarget: ((l: LinkDatum) => number | string | PointDatum) = l => (l as unknown as {target: string}).target\n\n  get data (): MapGraphData<AreaDatum, PointDatum, LinkDatum> {\n    return this._data\n  }\n\n  set data (data: MapGraphData<AreaDatum, PointDatum, LinkDatum>) {\n    if (!data) return\n    this._data = data\n\n    this._areas = cloneDeep(data?.areas ?? [])\n    this._points = cloneDeep(data?.points ?? [])\n\n    this._links = cloneDeep(data?.links ?? []).reduce((arr, link) => {\n      const source = this.findPoint(this.points, this.linkSource(link))\n      const target = this.findPoint(this.points, this.linkTarget(link))\n      if (source && target) arr.push({ source, target })\n      return arr\n    }, [])\n  }\n\n  get areas (): AreaDatum[] {\n    return this._areas\n  }\n\n  get points (): PointDatum[] {\n    return this._points\n  }\n\n  get links (): MapLink<PointDatum, LinkDatum>[] {\n    return this._links\n  }\n\n  private findPoint (points: PointDatum[], pointIdentifier: number | string | PointDatum): PointDatum | undefined {\n    let foundPoint: PointDatum | undefined\n    if (isNumber(pointIdentifier)) foundPoint = points[pointIdentifier as number]\n    else if (isString(pointIdentifier)) foundPoint = points.find((node, i) => this.pointId(node, i) === pointIdentifier)\n    else if (isObject(pointIdentifier)) foundPoint = points.find(node => node === pointIdentifier)\n\n    if (!foundPoint) {\n      console.warn(`Point ${pointIdentifier} is missing from the points list`)\n    }\n\n    return foundPoint\n  }\n}\n", "export var abs = Math.abs;\nexport var atan = Math.atan;\nexport var atan2 = Math.atan2;\nexport var ceil = Math.ceil;\nexport var cos = Math.cos;\nexport var exp = Math.exp;\nexport var floor = Math.floor;\nexport var log = Math.log;\nexport var max = Math.max;\nexport var min = Math.min;\nexport var pow = Math.pow;\nexport var round = Math.round;\nexport var sign = Math.sign || function(x) { return x > 0 ? 1 : x < 0 ? -1 : 0; };\nexport var sin = Math.sin;\nexport var tan = Math.tan;\n\nexport var epsilon = 1e-6;\nexport var epsilon2 = 1e-12;\nexport var pi = Math.PI;\nexport var halfPi = pi / 2;\nexport var quarterPi = pi / 4;\nexport var sqrt1_2 = Math.SQRT1_2;\nexport var sqrt2 = sqrt(2);\nexport var sqrtPi = sqrt(pi);\nexport var tau = pi * 2;\nexport var degrees = 180 / pi;\nexport var radians = pi / 180;\n\nexport function sinci(x) {\n  return x ? x / Math.sin(x) : 1;\n}\n\nexport function asin(x) {\n  return x > 1 ? halfPi : x < -1 ? -halfPi : Math.asin(x);\n}\n\nexport function acos(x) {\n  return x > 1 ? 0 : x < -1 ? pi : Math.acos(x);\n}\n\nexport function sqrt(x) {\n  return x > 0 ? Math.sqrt(x) : 0;\n}\n\nexport function tanh(x) {\n  x = exp(2 * x);\n  return (x - 1) / (x + 1);\n}\n\nexport function sinh(x) {\n  return (exp(x) - exp(-x)) / 2;\n}\n\nexport function cosh(x) {\n  return (exp(x) + exp(-x)) / 2;\n}\n\nexport function arsinh(x) {\n  return log(x + sqrt(x * x + 1));\n}\n\nexport function arcosh(x) {\n  return log(x + sqrt(x * x - 1));\n}\n", "import {geoProjection as projection} from \"d3-geo\";\nimport {abs, acos, cos, epsilon, pi, sin, sinci, sqrt} from \"./math.js\";\n\nexport function aitoffRaw(x, y) {\n  var cosy = cos(y), sincia = sinci(acos(cosy * cos(x /= 2)));\n  return [2 * cosy * sin(x) * sincia, sin(y) * sincia];\n}\n\n// Abort if [x, y] is not within an ellipse centered at [0, 0] with\n// semi-major axis pi and semi-minor axis pi/2.\naitoffRaw.invert = function(x, y) {\n  if (x * x + 4 * y * y > pi * pi + epsilon) return;\n  var x1 = x, y1 = y, i = 25;\n  do {\n    var sinx = sin(x1),\n        sinx_2 = sin(x1 / 2),\n        cosx_2 = cos(x1 / 2),\n        siny = sin(y1),\n        cosy = cos(y1),\n        sin_2y = sin(2 * y1),\n        sin2y = siny * siny,\n        cos2y = cosy * cosy,\n        sin2x_2 = sinx_2 * sinx_2,\n        c = 1 - cos2y * cosx_2 * cosx_2,\n        e = c ? acos(cosy * cosx_2) * sqrt(f = 1 / c) : f = 0,\n        f,\n        fx = 2 * e * cosy * sinx_2 - x,\n        fy = e * siny - y,\n        dxdx = f * (cos2y * sin2x_2 + e * cosy * cosx_2 * sin2y),\n        dxdy = f * (0.5 * sinx * sin_2y - e * 2 * siny * sinx_2),\n        dydx = f * 0.25 * (sin_2y * sinx_2 - e * siny * cos2y * sinx),\n        dydy = f * (sin2y * cosx_2 + e * sin2x_2 * cosy),\n        z = dxdy * dydx - dydy * dxdx;\n    if (!z) break;\n    var dx = (fy * dxdy - fx * dydy) / z,\n        dy = (fx * dydx - fy * dxdx) / z;\n    x1 -= dx, y1 -= dy;\n  } while ((abs(dx) > epsilon || abs(dy) > epsilon) && --i > 0);\n  return [x1, y1];\n};\n\nexport default function() {\n  return projection(aitoffRaw)\n      .scale(152.63);\n}\n", "import {geoProjectionMutator as projectionMutator} from \"d3-geo\";\nimport {abs, atan2, cos, degrees, epsilon, radians, sin, tan} from \"./math.js\";\n\nexport function armadilloRaw(phi0) {\n  var sinPhi0 = sin(phi0),\n      cosPhi0 = cos(phi0),\n      sPhi0 = phi0 >= 0 ? 1 : -1,\n      tanPhi0 = tan(sPhi0 * phi0),\n      k = (1 + sinPhi0 - cosPhi0) / 2;\n\n  function forward(lambda, phi) {\n    var cosPhi = cos(phi),\n        cosLambda = cos(lambda /= 2);\n    return [\n      (1 + cosPhi) * sin(lambda),\n      (sPhi0 * phi > -atan2(cosLambda, tanPhi0) - 1e-3 ? 0 : -sPhi0 * 10) + k + sin(phi) * cosPhi0 - (1 + cosPhi) * sinPhi0 * cosLambda // TODO D3 core should allow null or [NaN, NaN] to be returned.\n    ];\n  }\n\n  forward.invert = function(x, y) {\n    var lambda = 0,\n        phi = 0,\n        i = 50;\n    do {\n      var cosLambda = cos(lambda),\n          sinLambda = sin(lambda),\n          cosPhi = cos(phi),\n          sinPhi = sin(phi),\n          A = 1 + cosPhi,\n          fx = A * sinLambda - x,\n          fy = k + sinPhi * cosPhi0 - A * sinPhi0 * cosLambda - y,\n          dxdLambda = A * cosLambda / 2,\n          dxdPhi = -sinLambda * sinPhi,\n          dydLambda = sinPhi0 * A * sinLambda / 2,\n          dydPhi = cosPhi0 * cosPhi + sinPhi0 * cosLambda * sinPhi,\n          denominator = dxdPhi * dydLambda - dydPhi * dxdLambda,\n          dLambda = (fy * dxdPhi - fx * dydPhi) / denominator / 2,\n          dPhi = (fx * dydLambda - fy * dxdLambda) / denominator;\n      if (abs(dPhi) > 2) dPhi /= 2;\n      lambda -= dLambda, phi -= dPhi;\n    } while ((abs(dLambda) > epsilon || abs(dPhi) > epsilon) && --i > 0);\n    return sPhi0 * phi > -atan2(cos(lambda), tanPhi0) - 1e-3 ? [lambda * 2, phi] : null;\n  };\n\n  return forward;\n}\n\nexport default function() {\n  var phi0 = 20 * radians,\n      sPhi0 = phi0 >= 0 ? 1 : -1,\n      tanPhi0 = tan(sPhi0 * phi0),\n      m = projectionMutator(armadilloRaw),\n      p = m(phi0),\n      stream_ = p.stream;\n\n  p.parallel = function(_) {\n    if (!arguments.length) return phi0 * degrees;\n    tanPhi0 = tan((sPhi0 = (phi0 = _ * radians) >= 0 ? 1 : -1) * phi0);\n    return m(phi0);\n  };\n\n  p.stream = function(stream) {\n    var rotate = p.rotate(),\n        rotateStream = stream_(stream),\n        sphereStream = (p.rotate([0, 0]), stream_(stream)),\n        precision = p.precision();\n    p.rotate(rotate);\n    rotateStream.sphere = function() {\n      sphereStream.polygonStart(), sphereStream.lineStart();\n      for (var lambda = sPhi0 * -180; sPhi0 * lambda < 180; lambda += sPhi0 * 90)\n        sphereStream.point(lambda, sPhi0 * 90);\n      if (phi0) while (sPhi0 * (lambda -= 3 * sPhi0 * precision) >= -180) {\n        sphereStream.point(lambda, sPhi0 * -atan2(cos(lambda * radians / 2), tanPhi0) * degrees);\n      }\n      sphereStream.lineEnd(), sphereStream.polygonEnd();\n    };\n    return rotateStream;\n  };\n\n  return p\n      .scale(218.695)\n      .center([0, 28.0974]);\n}\n", "import {geoProjection as projection} from \"d3-geo\";\nimport {abs, arcosh, arsinh, asin, atan2, cos, cosh, sign, sin, sinh, sqrt, tan} from \"./math.js\";\n\nexport function augustRaw(lambda, phi) {\n  var tanPhi = tan(phi / 2),\n      k = sqrt(1 - tanPhi * tanPhi),\n      c = 1 + k * cos(lambda /= 2),\n      x = sin(lambda) * k / c,\n      y = tanPhi / c,\n      x2 = x * x,\n      y2 = y * y;\n  return [\n    4 / 3 * x * (3 + x2 - 3 * y2),\n    4 / 3 * y * (3 + 3 * x2 - y2)\n  ];\n}\n\naugustRaw.invert = function(x, y) {\n  x *= 3 / 8, y *= 3 / 8;\n  if (!x && abs(y) > 1) return null;\n  var x2 = x * x,\n      y2 = y * y,\n      s = 1 + x2 + y2,\n      sin3Eta = sqrt((s - sqrt(s * s - 4 * y * y)) / 2),\n      eta = asin(sin3Eta) / 3,\n      xi = sin3Eta ? arcosh(abs(y / sin3Eta)) / 3 : arsinh(abs(x)) / 3,\n      cosEta = cos(eta),\n      coshXi = cosh(xi),\n      d = coshXi * coshXi - cosEta * cosEta;\n  return [\n    sign(x) * 2 * atan2(sinh(xi) * cosEta, 0.25 - d),\n    sign(y) * 2 * atan2(coshXi * sin(eta), 0.25 + d)\n  ];\n};\n\nexport default function() {\n  return projection(augustRaw)\n      .scale(66.1603);\n}\n", "import {geoProjection as projection} from \"d3-geo\";\nimport {abs, atan, cos, epsilon2, exp, halfPi, log, quarterPi, sign, sin, sqrt, sqrt2, tan} from \"./math.js\";\n\nvar sqrt8 = sqrt(8),\n    phi0 = log(1 + sqrt2);\n\nexport function bakerRaw(lambda, phi) {\n  var phi0 = abs(phi);\n  return phi0 < quarterPi\n      ? [lambda, log(tan(quarterPi + phi / 2))]\n      : [lambda * cos(phi0) * (2 * sqrt2 - 1 / sin(phi0)), sign(phi) * (2 * sqrt2 * (phi0 - quarterPi) - log(tan(phi0 / 2)))];\n}\n\nbakerRaw.invert = function(x, y) {\n  if ((y0 = abs(y)) < phi0) return [x, 2 * atan(exp(y)) - halfPi];\n  var phi = quarterPi, i = 25, delta, y0;\n  do {\n    var cosPhi_2 = cos(phi / 2), tanPhi_2 = tan(phi / 2);\n    phi -= delta = (sqrt8 * (phi - quarterPi) - log(tanPhi_2) - y0) / (sqrt8 - cosPhi_2 * cosPhi_2 / (2 * tanPhi_2));\n  } while (abs(delta) > epsilon2 && --i > 0);\n  return [x / (cos(phi) * (sqrt8 - 1 / sin(phi))), sign(y) * phi];\n};\n\nexport default function() {\n  return projection(bakerRaw)\n      .scale(112.314);\n}\n", "import {geoAzimuthalEqualAreaRaw as azimuthalEqualAreaRaw, geoProjectionMutator as projectionMutator} from \"d3-geo\";\nimport {asin, cos, sin} from \"./math.js\";\n\nexport function hammerRaw(A, B) {\n  if (arguments.length < 2) B = A;\n  if (B === 1) return azimuthalEqualAreaRaw;\n  if (B === Infinity) return hammerQuarticAuthalicRaw;\n\n  function forward(lambda, phi) {\n    var coordinates = azimuthalEqualAreaRaw(lambda / B, phi);\n    coordinates[0] *= A;\n    return coordinates;\n  }\n\n  forward.invert = function(x, y) {\n    var coordinates = azimuthalEqualAreaRaw.invert(x / A, y);\n    coordinates[0] *= B;\n    return coordinates;\n  };\n\n  return forward;\n}\n\nfunction hammerQuarticAuthalicRaw(lambda, phi) {\n  return [\n    lambda * cos(phi) / cos(phi /= 2),\n    2 * sin(phi)\n  ];\n}\n\nhammerQuarticAuthalicRaw.invert = function(x, y) {\n  var phi = 2 * asin(y / 2);\n  return [\n    x * cos(phi / 2) / cos(phi),\n    phi\n  ];\n};\n\nexport default function() {\n  var B = 2,\n      m = projectionMutator(hammerRaw),\n      p = m(B);\n\n  p.coefficient = function(_) {\n    if (!arguments.length) return B;\n    return m(B = +_);\n  };\n\n  return p\n    .scale(169.529);\n}\n", "import {abs, epsilon, epsilon2} from \"./math.js\";\n\n// Approximate Newton-Raphson\n// Solve f(x) = y, start from x\nexport function solve(f, y, x) {\n  var steps = 100, delta, f0, f1;\n  x = x === undefined ? 0 : +x;\n  y = +y;\n  do {\n    f0 = f(x);\n    f1 = f(x + epsilon);\n    if (f0 === f1) f1 = f0 + epsilon;\n    x -= delta = (-1 * epsilon * (f0 - y)) / (f0 - f1);\n  } while (steps-- > 0 && abs(delta) > epsilon);\n  return steps < 0 ? NaN : x;\n}\n\n// Approximate Newton-Raphson in 2D\n// Solve f(a,b) = [x,y]\nexport function solve2d(f, MAX_ITERATIONS, eps) {\n  if (MAX_ITERATIONS === undefined) MAX_ITERATIONS = 40;\n  if (eps === undefined) eps = epsilon2;\n  return function(x, y, a, b) {\n    var err2, da, db;\n    a = a === undefined ? 0 : +a;\n    b = b === undefined ? 0 : +b;\n    for (var i = 0; i < MAX_ITERATIONS; i++) {\n      var p = f(a, b),\n        // diffs\n        tx = p[0] - x,\n        ty = p[1] - y;\n      if (abs(tx) < eps && abs(ty) < eps) break; // we're there!\n\n      // backtrack if we overshot\n      var h = tx * tx + ty * ty;\n      if (h > err2) {\n        a -= da /= 2;\n        b -= db /= 2;\n        continue;\n      }\n      err2 = h;\n\n      // partial derivatives\n      var ea = (a > 0 ? -1 : 1) * eps,\n        eb = (b > 0 ? -1 : 1) * eps,\n        pa = f(a + ea, b),\n        pb = f(a, b + eb),\n        dxa = (pa[0] - p[0]) / ea,\n        dya = (pa[1] - p[1]) / ea,\n        dxb = (pb[0] - p[0]) / eb,\n        dyb = (pb[1] - p[1]) / eb,\n        // determinant\n        D = dyb * dxa - dya * dxb,\n        // newton step — or half-step for small D\n        l = (abs(D) < 0.5 ? 0.5 : 1) / D;\n      da = (ty * dxb - tx * dyb) * l;\n      db = (tx * dya - ty * dxa) * l;\n      a += da;\n      b += db;\n      if (abs(da) < eps && abs(db) < eps) break; // we're crawling\n    }\n    return [a, b];\n  };\n}", "import {geoProjection as projection} from \"d3-geo\";\nimport {abs, asin, cos, epsilon, halfPi, pi, sin, sqrt2} from \"./math.js\";\n\nexport function mollweideBromleyTheta(cp, phi) {\n  var cpsinPhi = cp * sin(phi), i = 30, delta;\n  do phi -= delta = (phi + sin(phi) - cpsinPhi) / (1 + cos(phi));\n  while (abs(delta) > epsilon && --i > 0);\n  return phi / 2;\n}\n\nexport function mollweideBromleyRaw(cx, cy, cp) {\n\n  function forward(lambda, phi) {\n    return [cx * lambda * cos(phi = mollweideBromleyTheta(cp, phi)), cy * sin(phi)];\n  }\n\n  forward.invert = function(x, y) {\n    return y = asin(y / cy), [x / (cx * cos(y)), asin((2 * y + sin(2 * y)) / cp)];\n  };\n\n  return forward;\n}\n\nexport var mollweideRaw = mollweideBromleyRaw(sqrt2 / halfPi, sqrt2, pi);\n\nexport default function() {\n  return projection(mollweideRaw)\n      .scale(169.529);\n}\n", "import {geoProjection as projection} from \"d3-geo\";\nimport {mollweideBromleyTheta} from \"./mollweide.js\";\nimport {abs, cos, epsilon, pi, quarterPi, sin, sqrt2} from \"./math.js\";\n\nvar k = 2.00276,\n    w = 1.11072;\n\nexport function boggsRaw(lambda, phi) {\n  var theta = mollweideBromleyTheta(pi, phi);\n  return [k * lambda / (1 / cos(phi) + w / cos(theta)), (phi + sqrt2 * sin(theta)) / k];\n}\n\nboggsRaw.invert = function(x, y) {\n  var ky = k * y, theta = y < 0 ? -quarterPi : quarterPi, i = 25, delta, phi;\n  do {\n    phi = ky - sqrt2 * sin(theta);\n    theta -= delta = (sin(2 * theta) + 2 * theta - pi * sin(phi)) / (2 * cos(2 * theta) + 2 + pi * cos(phi) * sqrt2 * cos(theta));\n  } while (abs(delta) > epsilon && --i > 0);\n  phi = ky - sqrt2 * sin(theta);\n  return [x * (1 / cos(phi) + w / cos(theta)) / k, phi];\n};\n\nexport default function() {\n  return projection(boggsRaw)\n      .scale(160.857);\n}\n", "import {geoProjectionMutator as projectionMutator} from \"d3-geo\";\nimport {degrees, radians} from \"./math.js\";\n\nexport default function(projectAt) {\n  var phi0 = 0,\n      m = projectionMutator(projectAt),\n      p = m(phi0);\n\n  p.parallel = function(_) {\n    return arguments.length ? m(phi0 = _ * radians) : phi0 * degrees;\n  };\n\n  return p;\n}\n", "import {geoProjection as projection} from \"d3-geo\";\nimport {cos} from \"./math.js\";\n\nexport function sinusoidalRaw(lambda, phi) {\n  return [lambda * cos(phi), phi];\n}\n\nsinusoidalRaw.invert = function(x, y) {\n  return [x / cos(y), y];\n};\n\nexport default function() {\n  return projection(sinusoidalRaw)\n      .scale(152.63);\n}\n", "import {geoProjection as projection} from \"d3-geo\";\nimport {pi} from \"./math.js\";\nimport {mollweideBromleyRaw} from \"./mollweide.js\";\n\nexport var bromleyRaw = mollweideBromleyRaw(1, 4 / pi, pi);\n\nexport default function() {\n  return projection(bromleyRaw)\n      .scale(152.63);\n}\n", "import {geoProjection as projection} from \"d3-geo\";\nimport {asin, pi, sin, sqrt, sqrtPi} from \"./math.js\";\n\nexport function collignonRaw(lambda, phi) {\n  var alpha = sqrt(1 - sin(phi));\n  return [(2 / sqrtPi) * lambda * alpha, sqrtPi * (1 - alpha)];\n}\n\ncollignonRaw.invert = function(x, y) {\n  var lambda = (lambda = y / sqrtPi - 1) * lambda;\n  return [lambda > 0 ? x * sqrt(pi / lambda) / 2 : 0, asin(1 - lambda)];\n};\n\nexport default function() {\n  return projection(collignonRaw)\n      .scale(95.6464)\n      .center([0, 30]);\n}\n", "import {geoProjection as projection} from \"d3-geo\";\nimport {asin, cos, sin, sqrt, sqrtPi} from \"./math.js\";\n\nvar sqrt3 = sqrt(3);\n\nexport function crasterRaw(lambda, phi) {\n  return [sqrt3 * lambda * (2 * cos(2 * phi / 3) - 1) / sqrtPi, sqrt3 * sqrtPi * sin(phi / 3)];\n}\n\ncrasterRaw.invert = function(x, y) {\n  var phi = 3 * asin(y / (sqrt3 * sqrtPi));\n  return [sqrtPi * x / (sqrt3 * (2 * cos(2 * phi / 3) - 1)), phi];\n};\n\nexport default function() {\n  return projection(crasterRaw)\n      .scale(156.19);\n}\n", "import {asin, cos, sin} from \"./math.js\";\nimport parallel1 from \"./parallel1.js\";\n\nexport function cylindricalEqualAreaRaw(phi0) {\n  var cosPhi0 = cos(phi0);\n\n  function forward(lambda, phi) {\n    return [lambda * cosPhi0, sin(phi) / cosPhi0];\n  }\n\n  forward.invert = function(x, y) {\n    return [x / cosPhi0, asin(y * cosPhi0)];\n  };\n\n  return forward;\n}\n\nexport default function() {\n  return parallel1(cylindricalEqualAreaRaw)\n      .parallel(38.58) // acos(sqrt(width / height / pi)) * radians\n      .scale(195.044); // width / (sqrt(width / height / pi) * 2 * pi)\n}\n", "import {atan, cos, tan} from \"./math.js\";\nimport parallel1 from \"./parallel1.js\";\n\nexport function cylindricalStereographicRaw(phi0) {\n  var cosPhi0 = cos(phi0);\n\n  function forward(lambda, phi) {\n    return [lambda * cosPhi0, (1 + cosPhi0) * tan(phi / 2)];\n  }\n\n  forward.invert = function(x, y) {\n    return [x / cosPhi0, atan(y / (1 + cosPhi0)) * 2];\n  };\n\n  return forward;\n}\n\nexport default function() {\n  return parallel1(cylindricalStereographicRaw)\n      .scale(124.75);\n}\n", "import {geoProjection as projection} from \"d3-geo\";\nimport {abs, pi, sqrt} from \"./math.js\";\n\nexport function eckert1Raw(lambda, phi) {\n  var alpha = sqrt(8 / (3 * pi));\n  return [\n    alpha * lambda * (1 - abs(phi) / pi),\n    alpha * phi\n  ];\n}\n\neckert1Raw.invert = function(x, y) {\n  var alpha = sqrt(8 / (3 * pi)),\n      phi = y / alpha;\n  return [\n    x / (alpha * (1 - abs(phi) / pi)),\n    phi\n  ];\n};\n\nexport default function() {\n  return projection(eckert1Raw)\n      .scale(165.664);\n}\n", "import {geoProjection as projection} from \"d3-geo\";\nimport {abs, asin, pi, sign, sin, sqrt} from \"./math.js\";\n\nexport function eckert2Raw(lambda, phi) {\n  var alpha = sqrt(4 - 3 * sin(abs(phi)));\n  return [\n    2 / sqrt(6 * pi) * lambda * alpha,\n    sign(phi) * sqrt(2 * pi / 3) * (2 - alpha)\n  ];\n}\n\neckert2Raw.invert = function(x, y) {\n  var alpha = 2 - abs(y) / sqrt(2 * pi / 3);\n  return [\n    x * sqrt(6 * pi) / (2 * alpha),\n    sign(y) * asin((4 - alpha * alpha) / 3)\n  ];\n};\n\nexport default function() {\n  return projection(eckert2Raw)\n      .scale(165.664);\n}\n", "import {geoProjection as projection} from \"d3-geo\";\nimport {pi, sqrt} from \"./math.js\";\n\nexport function eckert3Raw(lambda, phi) {\n  var k = sqrt(pi * (4 + pi));\n  return [\n    2 / k * lambda * (1 + sqrt(1 - 4 * phi * phi / (pi * pi))),\n    4 / k * phi\n  ];\n}\n\neckert3Raw.invert = function(x, y) {\n  var k = sqrt(pi * (4 + pi)) / 2;\n  return [\n    x * k / (1 + sqrt(1 - y * y * (4 + pi) / (4 * pi))),\n    y * k / 2\n  ];\n};\n\nexport default function() {\n  return projection(eckert3Raw)\n      .scale(180.739);\n}\n", "import {geoProjection as projection} from \"d3-geo\";\nimport {abs, asin, cos, epsilon, halfPi, pi, sin, sqrt} from \"./math.js\";\n\nexport function eckert4Raw(lambda, phi) {\n  var k = (2 + halfPi) * sin(phi);\n  phi /= 2;\n  for (var i = 0, delta = Infinity; i < 10 && abs(delta) > epsilon; i++) {\n    var cosPhi = cos(phi);\n    phi -= delta = (phi + sin(phi) * (cosPhi + 2) - k) / (2 * cosPhi * (1 + cosPhi));\n  }\n  return [\n    2 / sqrt(pi * (4 + pi)) * lambda * (1 + cos(phi)),\n    2 * sqrt(pi / (4 + pi)) * sin(phi)\n  ];\n}\n\neckert4Raw.invert = function(x, y) {\n  var A = y * sqrt((4 + pi) / pi) / 2,\n      k = asin(A),\n      c = cos(k);\n  return [\n    x / (2 / sqrt(pi * (4 + pi)) * (1 + c)),\n    asin((k + A * (c + 2)) / (2 + halfPi))\n  ];\n};\n\nexport default function() {\n  return projection(eckert4Raw)\n      .scale(180.739);\n}\n", "import {geoProjection as projection} from \"d3-geo\";\nimport {cos, pi, sqrt} from \"./math.js\";\n\nexport function eckert5Raw(lambda, phi) {\n  return [\n    lambda * (1 + cos(phi)) / sqrt(2 + pi),\n    2 * phi / sqrt(2 + pi)\n  ];\n}\n\neckert5Raw.invert = function(x, y) {\n  var k = sqrt(2 + pi),\n      phi = y * k / 2;\n  return [\n    k * x / (1 + cos(phi)),\n    phi\n  ];\n};\n\nexport default function() {\n  return projection(eckert5Raw)\n      .scale(173.044);\n}\n", "import {geoProjection as projection} from \"d3-geo\";\nimport {abs, asin, cos, epsilon, halfPi, pi, sin, sqrt} from \"./math.js\";\n\nexport function eckert6Raw(lambda, phi) {\n  var k = (1 + halfPi) * sin(phi);\n  for (var i = 0, delta = Infinity; i < 10 && abs(delta) > epsilon; i++) {\n    phi -= delta = (phi + sin(phi) - k) / (1 + cos(phi));\n  }\n  k = sqrt(2 + pi);\n  return [\n    lambda * (1 + cos(phi)) / k,\n    2 * phi / k\n  ];\n}\n\neckert6Raw.invert = function(x, y) {\n  var j = 1 + halfPi,\n      k = sqrt(j / 2);\n  return [\n    x * 2 * k / (1 + cos(y *= k)),\n    asin((y + sin(y)) / j)\n  ];\n};\n\nexport default function() {\n  return projection(eckert6Raw)\n      .scale(173.044);\n}\n", "import {geoProjection as projection} from \"d3-geo\";\nimport {augustRaw} from \"./august.js\";\nimport {abs, atan, cos, epsilon, halfPi, log, max, min, sin, sqrt, sqrt1_2, sqrt2} from \"./math.js\";\n\nvar eisenlohrK = 3 + 2 * sqrt2;\n\nexport function eisenlohrRaw(lambda, phi) {\n  var s0 = sin(lambda /= 2),\n      c0 = cos(lambda),\n      k = sqrt(cos(phi)),\n      c1 = cos(phi /= 2),\n      t = sin(phi) / (c1 + sqrt2 * c0 * k),\n      c = sqrt(2 / (1 + t * t)),\n      v = sqrt((sqrt2 * c1 + (c0 + s0) * k) / (sqrt2 * c1 + (c0 - s0) * k));\n  return [\n    eisenlohrK * (c * (v - 1 / v) - 2 * log(v)),\n    eisenlohrK * (c * t * (v + 1 / v) - 2 * atan(t))\n  ];\n}\n\neisenlohrRaw.invert = function(x, y) {\n  if (!(p = augustRaw.invert(x / 1.2, y * 1.065))) return null;\n  var lambda = p[0], phi = p[1], i = 20, p;\n  x /= eisenlohrK, y /= eisenlohrK;\n  do {\n    var _0 = lambda / 2,\n        _1 = phi / 2,\n        s0 = sin(_0),\n        c0 = cos(_0),\n        s1 = sin(_1),\n        c1 = cos(_1),\n        cos1 = cos(phi),\n        k = sqrt(cos1),\n        t = s1 / (c1 + sqrt2 * c0 * k),\n        t2 = t * t,\n        c = sqrt(2 / (1 + t2)),\n        v0 = (sqrt2 * c1 + (c0 + s0) * k),\n        v1 = (sqrt2 * c1 + (c0 - s0) * k),\n        v2 = v0 / v1,\n        v = sqrt(v2),\n        vm1v = v - 1 / v,\n        vp1v = v + 1 / v,\n        fx = c * vm1v - 2 * log(v) - x,\n        fy = c * t * vp1v - 2 * atan(t) - y,\n        deltatDeltaLambda = s1 && sqrt1_2 * k * s0 * t2 / s1,\n        deltatDeltaPhi = (sqrt2 * c0 * c1 + k) / (2 * (c1 + sqrt2 * c0 * k) * (c1 + sqrt2 * c0 * k) * k),\n        deltacDeltat = -0.5 * t * c * c * c,\n        deltacDeltaLambda = deltacDeltat * deltatDeltaLambda,\n        deltacDeltaPhi = deltacDeltat * deltatDeltaPhi,\n        A = (A = 2 * c1 + sqrt2 * k * (c0 - s0)) * A * v,\n        deltavDeltaLambda = (sqrt2 * c0 * c1 * k + cos1) / A,\n        deltavDeltaPhi = -(sqrt2 * s0 * s1) / (k * A),\n        deltaxDeltaLambda = vm1v * deltacDeltaLambda - 2 * deltavDeltaLambda / v + c * (deltavDeltaLambda + deltavDeltaLambda / v2),\n        deltaxDeltaPhi = vm1v * deltacDeltaPhi - 2 * deltavDeltaPhi / v + c * (deltavDeltaPhi + deltavDeltaPhi / v2),\n        deltayDeltaLambda = t * vp1v * deltacDeltaLambda - 2 * deltatDeltaLambda / (1 + t2) + c * vp1v * deltatDeltaLambda + c * t * (deltavDeltaLambda - deltavDeltaLambda / v2),\n        deltayDeltaPhi = t * vp1v * deltacDeltaPhi - 2 * deltatDeltaPhi / (1 + t2) + c * vp1v * deltatDeltaPhi + c * t * (deltavDeltaPhi - deltavDeltaPhi / v2),\n        denominator = deltaxDeltaPhi * deltayDeltaLambda - deltayDeltaPhi * deltaxDeltaLambda;\n    if (!denominator) break;\n    var deltaLambda = (fy * deltaxDeltaPhi - fx * deltayDeltaPhi) / denominator,\n        deltaPhi = (fx * deltayDeltaLambda - fy * deltaxDeltaLambda) / denominator;\n    lambda -= deltaLambda;\n    phi = max(-halfPi, min(halfPi, phi - deltaPhi));\n  } while ((abs(deltaLambda) > epsilon || abs(deltaPhi) > epsilon) && --i > 0);\n  return abs(abs(phi) - halfPi) < epsilon ? [0, phi] : i && [lambda, phi];\n};\n\nexport default function() {\n  return projection(eisenlohrRaw)\n      .scale(62.5271);\n}\n", "import {geoProjection as projection} from \"d3-geo\";\nimport {atan, cos, radians, sqrt, tan} from \"./math.js\";\n\nvar faheyK = cos(35 * radians);\n\nexport function faheyRaw(lambda, phi) {\n  var t = tan(phi / 2);\n  return [lambda * faheyK * sqrt(1 - t * t), (1 + faheyK) * t];\n}\n\nfaheyRaw.invert = function(x, y) {\n  var t = y / (1 + faheyK);\n  return [x && x / (faheyK * sqrt(1 - t * t)), 2 * atan(t)];\n};\n\nexport default function() {\n  return projection(faheyRaw)\n      .scale(137.152);\n}\n", "import {geoProjection as projection} from \"d3-geo\";\nimport {atan, cos, sqrtPi, tan} from \"./math.js\";\n\nexport function foucautRaw(lambda, phi) {\n  var k = phi / 2, cosk = cos(k);\n  return [ 2 * lambda / sqrtPi * cos(phi) * cosk * cosk, sqrtPi * tan(k)];\n}\n\nfoucautRaw.invert = function(x, y) {\n  var k = atan(y / sqrtPi), cosk = cos(k), phi = 2 * k;\n  return [x * sqrtPi / 2 / (cos(phi) * cosk * cosk), phi];\n};\n\nexport default function() {\n  return projection(foucautRaw)\n      .scale(135.264);\n}\n", "import {geoProjectionMutator as projectionMutator} from \"d3-geo\";\nimport {cos, halfPi, pi, sin, sqrt} from \"./math.js\";\nimport {solve} from \"./newton.js\";\n\nexport function foucautSinusoidalRaw(alpha) {\n  var beta = 1 - alpha,\n      equatorial = raw(pi, 0)[0] - raw(-pi, 0)[0],\n      polar = raw(0, halfPi)[1] - raw(0, -halfPi)[1],\n      ratio = sqrt(2 * polar / equatorial);\n\n  function raw(lambda, phi) {\n    var cosphi = cos(phi),\n        sinphi = sin(phi);\n    return [\n      cosphi / (beta + alpha * cosphi) * lambda,\n      beta * phi + alpha * sinphi\n    ];\n  }\n\n  function forward(lambda, phi) {\n    var p = raw(lambda, phi);\n    return [p[0] * ratio, p[1] / ratio];\n  }\n\n  function forwardMeridian(phi) {\n    return forward(0, phi)[1];\n  }\n\n  forward.invert = function(x, y) {\n    var phi = solve(forwardMeridian, y),\n        lambda = x / ratio * (alpha + beta / cos(phi));\n    return [lambda, phi];\n  };\n\n  return forward;\n}\n\nexport default function() {\n  var alpha = 0.5,\n      m = projectionMutator(foucautSinusoidalRaw),\n      p = m(alpha);\n\n  p.alpha = function(_) {\n    return arguments.length ? m(alpha = +_) : alpha;\n  };\n\n  return p\n      .scale(168.725);\n}\n", "import {abs, asin, cos, epsilon, pi, sin, sqrt} from \"./math.js\";\n\nexport default function(a, b, c, d, e, f, g, h) {\n  if (arguments.length < 8) h = 0;\n\n  function forward(lambda, phi) {\n    if (!phi) return [a * lambda / pi, 0];\n    var phi2 = phi * phi,\n        xB = a + phi2 * (b + phi2 * (c + phi2 * d)),\n        yB = phi * (e - 1 + phi2 * (f - h + phi2 * g)),\n        m = (xB * xB + yB * yB) / (2 * yB),\n        alpha = lambda * asin(xB / m) / pi;\n    return [m * sin(alpha), phi * (1 + phi2 * h) + m * (1 - cos(alpha))];\n  }\n\n  forward.invert = function(x, y) {\n    var lambda = pi * x / a,\n        phi = y,\n        deltaLambda, deltaPhi, i = 50;\n    do {\n      var phi2 = phi * phi,\n          xB = a + phi2 * (b + phi2 * (c + phi2 * d)),\n          yB = phi * (e - 1 + phi2 * (f - h + phi2 * g)),\n          p = xB * xB + yB * yB,\n          q = 2 * yB,\n          m = p / q,\n          m2 = m * m,\n          dAlphadLambda = asin(xB / m) / pi,\n          alpha = lambda * dAlphadLambda,\n          xB2 = xB * xB,\n          dxBdPhi = (2 * b + phi2 * (4 * c + phi2 * 6 * d)) * phi,\n          dyBdPhi = e + phi2 * (3 * f + phi2 * 5 * g),\n          dpdPhi = 2 * (xB * dxBdPhi + yB * (dyBdPhi - 1)),\n          dqdPhi = 2 * (dyBdPhi - 1),\n          dmdPhi = (dpdPhi * q - p * dqdPhi) / (q * q),\n          cosAlpha = cos(alpha),\n          sinAlpha = sin(alpha),\n          mcosAlpha = m * cosAlpha,\n          msinAlpha = m * sinAlpha,\n          dAlphadPhi = ((lambda / pi) * (1 / sqrt(1 - xB2 / m2)) * (dxBdPhi * m - xB * dmdPhi)) / m2,\n          fx = msinAlpha - x,\n          fy = phi * (1 + phi2 * h) + m - mcosAlpha - y,\n          deltaxDeltaPhi = dmdPhi * sinAlpha + mcosAlpha * dAlphadPhi,\n          deltaxDeltaLambda = mcosAlpha * dAlphadLambda,\n          deltayDeltaPhi = 1 + dmdPhi - (dmdPhi * cosAlpha - msinAlpha * dAlphadPhi),\n          deltayDeltaLambda = msinAlpha * dAlphadLambda,\n          denominator = deltaxDeltaPhi * deltayDeltaLambda - deltayDeltaPhi * deltaxDeltaLambda;\n      if (!denominator) break;\n      lambda -= deltaLambda = (fy * deltaxDeltaPhi - fx * deltayDeltaPhi) / denominator;\n      phi -= deltaPhi = (fx * deltayDeltaLambda - fy * deltaxDeltaLambda) / denominator;\n    } while ((abs(deltaLambda) > epsilon || abs(deltaPhi) > epsilon) && --i > 0);\n    return [lambda, phi];\n  };\n\n  return forward;\n}\n", "import {geoProjection as projection} from \"d3-geo\";\nimport ginzburgPolyconicRaw from \"./ginzburgPolyconic.js\";\n\nexport var ginzburg4Raw = ginzburgPolyconicRaw(2.8284, -1.6988, 0.75432, -0.18071, 1.76003, -0.38914, 0.042555);\n\nexport default function() {\n  return projection(ginzburg4Raw)\n      .scale(149.995);\n}\n", "import {geoProjection as projection} from \"d3-geo\";\nimport ginzburgPolyconicRaw from \"./ginzburgPolyconic.js\";\n\nexport var ginzburg5Raw = ginzburgPolyconicRaw(2.583819, -0.835827, 0.170354, -0.038094, 1.543313, -0.411435,0.082742);\n\nexport default function() {\n  return projection(ginzburg5Raw)\n      .scale(153.93);\n}\n", "import {geoProjection as projection} from \"d3-geo\";\nimport ginzburgPolyconicRaw from \"./ginzburgPolyconic.js\";\nimport {pi} from \"./math.js\";\n\nexport var ginzburg6Raw = ginzburgPolyconicRaw(5 / 6 * pi, -0.62636, -0.0344, 0, 1.3493, -0.05524, 0, 0.045);\n\nexport default function() {\n  return projection(ginzburg6Raw)\n      .scale(130.945);\n}\n", "import {geoProjection as projection} from \"d3-geo\";\nimport {abs, epsilon} from \"./math.js\";\n\nexport function ginzburg8Raw(lambda, phi) {\n  var lambda2 = lambda * lambda,\n      phi2 = phi * phi;\n  return [\n    lambda * (1 - 0.162388 * phi2) * (0.87 - 0.000952426 * lambda2 * lambda2),\n    phi * (1 + phi2 / 12)\n  ];\n}\n\nginzburg8Raw.invert = function(x, y) {\n  var lambda = x,\n      phi = y,\n      i = 50, delta;\n  do {\n    var phi2 = phi * phi;\n    phi -= delta = (phi * (1 + phi2 / 12) - y) / (1 + phi2 / 4);\n  } while (abs(delta) > epsilon && --i > 0);\n  i = 50;\n  x /= 1 -0.162388 * phi2;\n  do {\n    var lambda4 = (lambda4 = lambda * lambda) * lambda4;\n    lambda -= delta = (lambda * (0.87 - 0.000952426 * lambda4) - x) / (0.87 - 0.00476213 * lambda4);\n  } while (abs(delta) > epsilon && --i > 0);\n  return [lambda, phi];\n};\n\nexport default function() {\n  return projection(ginzburg8Raw)\n      .scale(131.747);\n}\n", "import {geoProjection as projection} from \"d3-geo\";\nimport ginzburgPolyconicRaw from \"./ginzburgPolyconic.js\";\n\nexport var ginzburg9Raw = ginzburgPolyconicRaw(2.6516, -0.76534, 0.19123, -0.047094, 1.36289, -0.13965,0.031762);\n\nexport default function() {\n  return projection(ginzburg9Raw)\n      .scale(131.087);\n}\n", "import {geoProjection as projection} from \"d3-geo\";\nimport {abs, asin, atan2, cos, sign, epsilon, epsilon2, halfPi, pi, sin, sqrt} from \"./math.js\";\nimport squareRaw from \"./square.js\";\n\nexport function gringortenRaw(lambda, phi) {\n  var sLambda = sign(lambda),\n      sPhi = sign(phi),\n      cosPhi = cos(phi),\n      x = cos(lambda) * cosPhi,\n      y = sin(lambda) * cosPhi,\n      z = sin(sPhi * phi);\n  lambda = abs(atan2(y, z));\n  phi = asin(x);\n  if (abs(lambda - halfPi) > epsilon) lambda %= halfPi;\n  var point = gringortenHexadecant(lambda > pi / 4 ? halfPi - lambda : lambda, phi);\n  if (lambda > pi / 4) z = point[0], point[0] = -point[1], point[1] = -z;\n  return (point[0] *= sLambda, point[1] *= -sPhi, point);\n}\n\ngringortenRaw.invert = function(x, y) {\n  if (abs(x) > 1) x = sign(x) * 2 - x;\n  if (abs(y) > 1) y = sign(y) * 2 - y;\n  var sx = sign(x),\n      sy = sign(y),\n      x0 = -sx * x,\n      y0 = -sy * y,\n      t = y0 / x0 < 1,\n      p = gringortenHexadecantInvert(t ? y0 : x0, t ? x0 : y0),\n      lambda = p[0],\n      phi = p[1],\n      cosPhi = cos(phi);\n  if (t) lambda = -halfPi - lambda;\n  return [sx * (atan2(sin(lambda) * cosPhi, -sin(phi)) + pi), sy * asin(cos(lambda) * cosPhi)];\n};\n\nfunction gringortenHexadecant(lambda, phi) {\n  if (phi === halfPi) return [0, 0];\n\n  var sinPhi = sin(phi),\n      r = sinPhi * sinPhi,\n      r2 = r * r,\n      j = 1 + r2,\n      k = 1 + 3 * r2,\n      q = 1 - r2,\n      z = asin(1 / sqrt(j)),\n      v = q + r * j * z,\n      p2 = (1 - sinPhi) / v,\n      p = sqrt(p2),\n      a2 = p2 * j,\n      a = sqrt(a2),\n      h = p * q,\n      x,\n      i;\n\n  if (lambda === 0) return [0, -(h + r * a)];\n\n  var cosPhi = cos(phi),\n      secPhi = 1 / cosPhi,\n      drdPhi = 2 * sinPhi * cosPhi,\n      dvdPhi = (-3 * r + z * k) * drdPhi,\n      dp2dPhi = (-v * cosPhi - (1 - sinPhi) * dvdPhi) / (v * v),\n      dpdPhi = (0.5 * dp2dPhi) / p,\n      dhdPhi = q * dpdPhi - 2 * r * p * drdPhi,\n      dra2dPhi = r * j * dp2dPhi + p2 * k * drdPhi,\n      mu = -secPhi * drdPhi,\n      nu = -secPhi * dra2dPhi,\n      zeta = -2 * secPhi * dhdPhi,\n      lambda1 = 4 * lambda / pi,\n      delta;\n\n  // Slower but accurate bisection method.\n  if (lambda > 0.222 * pi || phi < pi / 4 && lambda > 0.175 * pi) {\n    x = (h + r * sqrt(a2 * (1 + r2) - h * h)) / (1 + r2);\n    if (lambda > pi / 4) return [x, x];\n    var x1 = x, x0 = 0.5 * x;\n    x = 0.5 * (x0 + x1), i = 50;\n    do {\n      var g = sqrt(a2 - x * x),\n          f = (x * (zeta + mu * g) + nu * asin(x / a)) - lambda1;\n      if (!f) break;\n      if (f < 0) x0 = x;\n      else x1 = x;\n      x = 0.5 * (x0 + x1);\n    } while (abs(x1 - x0) > epsilon && --i > 0);\n  }\n\n  // Newton-Raphson.\n  else {\n    x = epsilon, i = 25;\n    do {\n      var x2 = x * x,\n          g2 = sqrt(a2 - x2),\n          zetaMug = zeta + mu * g2,\n          f2 = x * zetaMug + nu * asin(x / a) - lambda1,\n          df = zetaMug + (nu - mu * x2) / g2;\n      x -= delta = g2 ? f2 / df : 0;\n    } while (abs(delta) > epsilon && --i > 0);\n  }\n\n  return [x, -h - r * sqrt(a2 - x * x)];\n}\n\nfunction gringortenHexadecantInvert(x, y) {\n  var x0 = 0,\n      x1 = 1,\n      r = 0.5,\n      i = 50;\n\n  while (true) {\n    var r2 = r * r,\n        sinPhi = sqrt(r),\n        z = asin(1 / sqrt(1 + r2)),\n        v = (1 - r2) + r * (1 + r2) * z,\n        p2 = (1 - sinPhi) / v,\n        p = sqrt(p2),\n        a2 = p2 * (1 + r2),\n        h = p * (1 - r2),\n        g2 = a2 - x * x,\n        g = sqrt(g2),\n        y0 = y + h + r * g;\n    if (abs(x1 - x0) < epsilon2 || --i === 0 || y0 === 0) break;\n    if (y0 > 0) x0 = r;\n    else x1 = r;\n    r = 0.5 * (x0 + x1);\n  }\n\n  if (!i) return null;\n\n  var phi = asin(sinPhi),\n      cosPhi = cos(phi),\n      secPhi = 1 / cosPhi,\n      drdPhi = 2 * sinPhi * cosPhi,\n      dvdPhi = (-3 * r + z * (1 + 3 * r2)) * drdPhi,\n      dp2dPhi = (-v * cosPhi - (1 - sinPhi) * dvdPhi) / (v * v),\n      dpdPhi = 0.5 * dp2dPhi / p,\n      dhdPhi = (1 - r2) * dpdPhi - 2 * r * p * drdPhi,\n      zeta = -2 * secPhi * dhdPhi,\n      mu = -secPhi * drdPhi,\n      nu = -secPhi * (r * (1 + r2) * dp2dPhi + p2 * (1 + 3 * r2) * drdPhi);\n\n  return [pi / 4 * (x * (zeta + mu * g) + nu * asin(x / sqrt(a2))), phi];\n}\n\nexport default function() {\n  return projection(squareRaw(gringortenRaw))\n      .scale(239.75);\n}\n", "import {abs, asin, atan, cos, cosh, epsilon, exp, halfPi, log, pi, pow, quarterPi, sign, sin, sinh, sqrt, tan, tanh} from \"./math.js\";\n\n// Returns [sn, cn, dn](u + iv|m).\nexport function ellipticJi(u, v, m) {\n  var a, b, c;\n  if (!u) {\n    b = ellipticJ(v, 1 - m);\n    return [\n      [0, b[0] / b[1]],\n      [1 / b[1], 0],\n      [b[2] / b[1], 0]\n    ];\n  }\n  a = ellipticJ(u, m);\n  if (!v) return [[a[0], 0], [a[1], 0], [a[2], 0]];\n  b = ellipticJ(v, 1 - m);\n  c = b[1] * b[1] + m * a[0] * a[0] * b[0] * b[0];\n  return [\n    [a[0] * b[2] / c, a[1] * a[2] * b[0] * b[1] / c],\n    [a[1] * b[1] / c, -a[0] * a[2] * b[0] * b[2] / c],\n    [a[2] * b[1] * b[2] / c, -m * a[0] * a[1] * b[0] / c]\n  ];\n}\n\n// Returns [sn, cn, dn, ph](u|m).\nexport function ellipticJ(u, m) {\n  var ai, b, phi, t, twon;\n  if (m < epsilon) {\n    t = sin(u);\n    b = cos(u);\n    ai = m * (u - t * b) / 4;\n    return [\n      t - ai * b,\n      b + ai * t,\n      1 - m * t * t / 2,\n      u - ai\n    ];\n  }\n  if (m >= 1 - epsilon) {\n    ai = (1 - m) / 4;\n    b = cosh(u);\n    t = tanh(u);\n    phi = 1 / b;\n    twon = b * sinh(u);\n    return [\n      t + ai * (twon - u) / (b * b),\n      phi - ai * t * phi * (twon - u),\n      phi + ai * t * phi * (twon + u),\n      2 * atan(exp(u)) - halfPi + ai * (twon - u) / b\n    ];\n  }\n\n  var a = [1, 0, 0, 0, 0, 0, 0, 0, 0],\n      c = [sqrt(m), 0, 0, 0, 0, 0, 0, 0, 0],\n      i = 0;\n  b = sqrt(1 - m);\n  twon = 1;\n\n  while (abs(c[i] / a[i]) > epsilon && i < 8) {\n    ai = a[i++];\n    c[i] = (ai - b) / 2;\n    a[i] = (ai + b) / 2;\n    b = sqrt(ai * b);\n    twon *= 2;\n  }\n\n  phi = twon * a[i] * u;\n  do {\n    t = c[i] * sin(b = phi) / a[i];\n    phi = (asin(t) + phi) / 2;\n  } while (--i);\n\n  return [sin(phi), t = cos(phi), t / cos(phi - b), phi];\n}\n\n// Calculate F(phi+iPsi|m).\n// See Abramowitz and Stegun, 17.4.11.\nexport function ellipticFi(phi, psi, m) {\n  var r = abs(phi),\n      i = abs(psi),\n      sinhPsi = sinh(i);\n  if (r) {\n    var cscPhi = 1 / sin(r),\n        cotPhi2 = 1 / (tan(r) * tan(r)),\n        b = -(cotPhi2 + m * (sinhPsi * sinhPsi * cscPhi * cscPhi) - 1 + m),\n        c = (m - 1) * cotPhi2,\n        cotLambda2 = (-b + sqrt(b * b - 4 * c)) / 2;\n    return [\n      ellipticF(atan(1 / sqrt(cotLambda2)), m) * sign(phi),\n      ellipticF(atan(sqrt((cotLambda2 / cotPhi2 - 1) / m)), 1 - m) * sign(psi)\n    ];\n  }\n  return [\n    0,\n    ellipticF(atan(sinhPsi), 1 - m) * sign(psi)\n  ];\n}\n\n// Calculate F(phi|m) where m = k² = sin²α.\n// See Abramowitz and Stegun, 17.6.7.\nexport function ellipticF(phi, m) {\n  if (!m) return phi;\n  if (m === 1) return log(tan(phi / 2 + quarterPi));\n  var a = 1,\n      b = sqrt(1 - m),\n      c = sqrt(m);\n  for (var i = 0; abs(c) > epsilon; i++) {\n    if (phi % pi) {\n      var dPhi = atan(b * tan(phi) / a);\n      if (dPhi < 0) dPhi += pi;\n      phi += dPhi + ~~(phi / pi) * pi;\n    } else phi += phi;\n    c = (a + b) / 2;\n    b = sqrt(a * b);\n    c = ((a = c) - b) / 2;\n  }\n  return phi / (pow(2, i) * a);\n}\n", "import {geoProjection as projection} from \"d3-geo\";\nimport {ellipticF, ellipticFi, ellipticJi} from \"./elliptic.js\";\nimport {abs, atan, atan2, cos, exp, halfPi, log, pi, sin, sqrt, sqrt2, tan} from \"./math.js\";\nimport squareRaw from \"./square.js\";\n\nexport function guyouRaw(lambda, phi) {\n  var k_ = (sqrt2 - 1) / (sqrt2 + 1),\n      k = sqrt(1 - k_ * k_),\n      K = ellipticF(halfPi, k * k),\n      f = -1,\n      psi = log(tan(pi / 4 + abs(phi) / 2)),\n      r = exp(f * psi) / sqrt(k_),\n      at = guyouComplexAtan(r * cos(f * lambda), r * sin(f * lambda)),\n      t = ellipticFi(at[0], at[1], k * k);\n  return [-t[1], (phi >= 0 ? 1 : -1) * (0.5 * K - t[0])];\n}\n\nfunction guyouComplexAtan(x, y) {\n  var x2 = x * x,\n      y_1 = y + 1,\n      t = 1 - x2 - y * y;\n  return [\n   0.5 * ((x >= 0 ? halfPi : -halfPi) - atan2(t, 2 * x)),\n    -0.25 * log(t * t + 4 * x2) +0.5 * log(y_1 * y_1 + x2)\n  ];\n}\n\nfunction guyouComplexDivide(a, b) {\n  var denominator = b[0] * b[0] + b[1] * b[1];\n  return [\n    (a[0] * b[0] + a[1] * b[1]) / denominator,\n    (a[1] * b[0] - a[0] * b[1]) / denominator\n  ];\n}\n\nguyouRaw.invert = function(x, y) {\n  var k_ = (sqrt2 - 1) / (sqrt2 + 1),\n      k = sqrt(1 - k_ * k_),\n      K = ellipticF(halfPi, k * k),\n      f = -1,\n      j = ellipticJi(0.5 * K - y, -x, k * k),\n      tn = guyouComplexDivide(j[0], j[1]),\n      lambda = atan2(tn[1], tn[0]) / f;\n  return [\n    lambda,\n    2 * atan(exp(0.5 / f * log(k_ * tn[0] * tn[0] + k_ * tn[1] * tn[1]))) - halfPi\n  ];\n};\n\nexport default function() {\n  return projection(squareRaw(guyouRaw))\n      .scale(151.496);\n}\n", "import {range} from \"d3-array\";\nimport {geoStream, geoProjectionMutator as projectionMutator} from \"d3-geo\";\nimport {collignonRaw} from \"./collignon.js\";\nimport {cylindricalEqualAreaRaw} from \"./cylindricalEqualArea.js\";\nimport {abs, asin, degrees, epsilon, floor, max, min, pi, radians, sqrtPi, tau} from \"./math.js\";\n\nvar K = 3,\n    healpixParallel = asin(1 - 1 / K) * degrees,\n    healpixLambert = cylindricalEqualAreaRaw(0);\n\nexport function healpixRaw(H) {\n  var phi0 = healpixParallel * radians,\n      dx = collignonRaw(pi, phi0)[0] - collignonRaw(-pi, phi0)[0],\n      y0 = healpixLambert(0, phi0)[1],\n      y1 = collignonRaw(0, phi0)[1],\n      dy1 = sqrtPi - y1,\n      k = tau / H,\n      w = 4 / tau,\n      h = y0 + (dy1 * dy1 * 4) / tau;\n\n  function forward(lambda, phi) {\n    var point,\n        phi2 = abs(phi);\n    if (phi2 > phi0) {\n      var i = min(H - 1, max(0, floor((lambda + pi) / k)));\n      lambda += pi * (H - 1) / H - i * k;\n      point = collignonRaw(lambda, phi2);\n      point[0] = point[0] * tau / dx - tau * (H - 1) / (2 * H) + i * tau / H;\n      point[1] = y0 + (point[1] - y1) * 4 * dy1 / tau;\n      if (phi < 0) point[1] = -point[1];\n    } else {\n      point = healpixLambert(lambda, phi);\n    }\n    point[0] *= w, point[1] /= h;\n    return point;\n  }\n\n  forward.invert = function(x, y) {\n    x /= w, y *= h;\n    var y2 = abs(y);\n    if (y2 > y0) {\n      var i = min(H - 1, max(0, floor((x + pi) / k)));\n      x = (x + pi * (H - 1) / H - i * k) * dx / tau;\n      var point = collignonRaw.invert(x, 0.25 * (y2 - y0) * tau / dy1 + y1);\n      point[0] -= pi * (H - 1) / H - i * k;\n      if (y < 0) point[1] = -point[1];\n      return point;\n    }\n    return healpixLambert.invert(x, y);\n  };\n\n  return forward;\n}\n\nfunction sphereTop(x, i) {\n  return [x, i & 1 ? 90 - epsilon : healpixParallel];\n}\n\nfunction sphereBottom(x, i) {\n  return [x, i & 1 ? -90 + epsilon : -healpixParallel];\n}\n\nfunction sphereNudge(d) {\n  return [d[0] * (1 - epsilon), d[1]];\n}\n\nfunction sphere(step) {\n  var c = [].concat(\n    range(-180, 180 + step / 2, step).map(sphereTop),\n    range(180, -180 - step / 2, -step).map(sphereBottom)\n  );\n  return {\n    type: \"Polygon\",\n    coordinates: [step === 180 ? c.map(sphereNudge) : c]\n  };\n}\n\nexport default function() {\n  var H = 4,\n      m = projectionMutator(healpixRaw),\n      p = m(H),\n      stream_ = p.stream;\n\n  p.lobes = function(_) {\n    return arguments.length ? m(H = +_) : H;\n  };\n\n  p.stream = function(stream) {\n    var rotate = p.rotate(),\n        rotateStream = stream_(stream),\n        sphereStream = (p.rotate([0, 0]), stream_(stream));\n    p.rotate(rotate);\n    rotateStream.sphere = function() { geoStream(sphere(180 / H), sphereStream); };\n    return rotateStream;\n  };\n\n  return p\n      .scale(239.75);\n}\n", "import {geoProjection as projection} from \"d3-geo\";\nimport {mollweideRaw} from \"./mollweide.js\";\nimport {sinusoidalRaw} from \"./sinusoidal.js\";\n\nexport var sinuMollweidePhi = 0.7109889596207567;\n\nexport var sinuMollweideY = 0.0528035274542;\n\nexport function sinuMollweideRaw(lambda, phi) {\n  return phi > -sinuMollweidePhi\n      ? (lambda = mollweideRaw(lambda, phi), lambda[1] += sinuMollweideY, lambda)\n      : sinusoidalRaw(lambda, phi);\n}\n\nsinuMollweideRaw.invert = function(x, y) {\n  return y > -sinuMollweidePhi\n      ? mollweideRaw.invert(x, y - sinuMollweideY)\n      : sinusoidalRaw.invert(x, y);\n};\n\nexport default function() {\n  return projection(sinuMollweideRaw)\n      .rotate([-20, -55])\n      .scale(164.263)\n      .center([0, -5.4036]);\n}\n", "import {geoProjection as projection} from \"d3-geo\";\nimport {abs} from \"./math.js\";\nimport {mollweideRaw} from \"./mollweide.js\";\nimport {sinusoidalRaw} from \"./sinusoidal.js\";\nimport {sinuMollweidePhi, sinuMollweideY} from \"./sinuMollweide.js\";\n\nexport function homolosineRaw(lambda, phi) {\n  return abs(phi) > sinuMollweidePhi\n      ? (lambda = mollweideRaw(lambda, phi), lambda[1] -= phi > 0 ? sinuMollweideY : -sinuMollweideY, lambda)\n      : sinusoidalRaw(lambda, phi);\n}\n\nhomolosineRaw.invert = function(x, y) {\n  return abs(y) > sinuMollweidePhi\n      ? mollweideRaw.invert(x, y + (y > 0 ? sinuMollweideY : -sinuMollweideY))\n      : sinusoidalRaw.invert(x, y);\n};\n\nexport default function() {\n  return projection(homolosineRaw)\n      .scale(152.63);\n}\n", "import { geoProjectionMutator as projectionMutator } from \"d3-geo\";\nimport { asin, cos, degrees, pi, radians, sign, sin, sqrt } from \"./math.js\";\nimport { solve } from \"./newton.js\";\n\nexport function hufnagelRaw(a, b, psiMax, ratio) {\n  var k = sqrt(\n      (4 * pi) /\n        (2 * psiMax +\n          (1 + a - b / 2) * sin(2 * psiMax) +\n          ((a + b) / 2) * sin(4 * psiMax) +\n          (b / 2) * sin(6 * psiMax))\n    ),\n    c = sqrt(\n      ratio *\n        sin(psiMax) *\n        sqrt((1 + a * cos(2 * psiMax) + b * cos(4 * psiMax)) / (1 + a + b))\n    ),\n    M = psiMax * mapping(1);\n\n  function radius(psi) {\n    return sqrt(1 + a * cos(2 * psi) + b * cos(4 * psi));\n  }\n\n  function mapping(t) {\n    var psi = t * psiMax;\n    return (\n      (2 * psi +\n        (1 + a - b / 2) * sin(2 * psi) +\n        ((a + b) / 2) * sin(4 * psi) +\n        (b / 2) * sin(6 * psi)) /\n      psiMax\n    );\n  }\n\n  function inversemapping(psi) {\n    return radius(psi) * sin(psi);\n  }\n\n  var forward = function(lambda, phi) {\n    var psi = psiMax * solve(mapping, (M * sin(phi)) / psiMax, phi / pi);\n    if (isNaN(psi)) psi = psiMax * sign(phi);\n    var kr = k * radius(psi);\n    return [((kr * c * lambda) / pi) * cos(psi), (kr / c) * sin(psi)];\n  };\n\n  forward.invert = function(x, y) {\n    var psi = solve(inversemapping, (y * c) / k);\n    return [\n      (x * pi) / (cos(psi) * k * c * radius(psi)),\n      asin((psiMax * mapping(psi / psiMax)) / M)\n    ];\n  };\n\n  if (psiMax === 0) {\n    k = sqrt(ratio / pi);\n    forward = function(lambda, phi) {\n      return [lambda * k, sin(phi) / k];\n    };\n    forward.invert = function(x, y) {\n      return [x / k, asin(y * k)];\n    };\n  }\n\n  return forward;\n}\n\nexport default function() {\n  var a = 1,\n    b = 0,\n    psiMax = 45 * radians,\n    ratio = 2,\n    mutate = projectionMutator(hufnagelRaw),\n    projection = mutate(a, b, psiMax, ratio);\n\n  projection.a = function(_) {\n    return arguments.length ? mutate((a = +_), b, psiMax, ratio) : a;\n  };\n  projection.b = function(_) {\n    return arguments.length ? mutate(a, (b = +_), psiMax, ratio) : b;\n  };\n  projection.psiMax = function(_) {\n    return arguments.length\n      ? mutate(a, b, (psiMax = +_ * radians), ratio)\n      : psiMax * degrees;\n  };\n  projection.ratio = function(_) {\n    return arguments.length ? mutate(a, b, psiMax, (ratio = +_)) : ratio;\n  };\n\n  return projection.scale(180.739);\n}\n", "import {geoProjection as projection} from \"d3-geo\";\nimport {pi, sqrt, tau} from \"./math.js\";\n\nexport function kavrayskiy7Raw(lambda, phi) {\n  return [3 / tau * lambda * sqrt(pi * pi / 3 - phi * phi), phi];\n}\n\nkavrayskiy7Raw.invert = function(x, y) {\n  return [tau / 3 * x / sqrt(pi * pi / 3 - y * y), y];\n};\n\nexport default function() {\n  return projection(kavrayskiy7Raw)\n      .scale(158.837);\n}\n", "import {geoProjection as projection} from \"d3-geo\";\nimport {abs, acos, cos, epsilon, halfPi, sin, pi, sqrt, sqrt2} from \"./math.js\";\n\nvar pi_sqrt2 = pi / sqrt2;\n\nexport function larriveeRaw(lambda, phi) {\n  return [\n    lambda * (1 + sqrt(cos(phi))) / 2,\n    phi / (cos(phi / 2) * cos(lambda / 6))\n  ];\n}\n\nlarriveeRaw.invert = function(x, y) {\n  var x0 = abs(x),\n      y0 = abs(y),\n      lambda = epsilon,\n      phi = halfPi;\n  if (y0 < pi_sqrt2) phi *= y0 / pi_sqrt2;\n  else lambda += 6 * acos(pi_sqrt2 / y0);\n  for (var i = 0; i < 25; i++) {\n    var sinPhi = sin(phi),\n        sqrtcosPhi = sqrt(cos(phi)),\n        sinPhi_2 = sin(phi / 2),\n        cosPhi_2 = cos(phi / 2),\n        sinLambda_6 = sin(lambda / 6),\n        cosLambda_6 = cos(lambda / 6),\n        f0 = 0.5 * lambda * (1 + sqrtcosPhi) - x0,\n        f1 = phi / (cosPhi_2 * cosLambda_6) - y0,\n        df0dPhi = sqrtcosPhi ? -0.25 * lambda * sinPhi / sqrtcosPhi : 0,\n        df0dLambda = 0.5 * (1 + sqrtcosPhi),\n        df1dPhi = (1 + 0.5 * phi * sinPhi_2 / cosPhi_2) / (cosPhi_2 * cosLambda_6),\n        df1dLambda = (phi / cosPhi_2) * (sinLambda_6 / 6) / (cosLambda_6 * cosLambda_6),\n        denom = df0dPhi * df1dLambda - df1dPhi * df0dLambda,\n        dPhi = (f0 * df1dLambda - f1 * df0dLambda) / denom,\n        dLambda = (f1 * df0dPhi - f0 * df1dPhi) / denom;\n    phi -= dPhi;\n    lambda -= dLambda;\n    if (abs(dPhi) < epsilon && abs(dLambda) < epsilon) break;\n  }\n  return [x < 0 ? -lambda : lambda, y < 0 ? -phi : phi];\n};\n\nexport default function() {\n  return projection(larriveeRaw)\n      .scale(97.2672);\n}\n", "import {geoProjection as projection} from \"d3-geo\";\nimport {abs, epsilon, pi, sign} from \"./math.js\";\n\nexport function laskowskiRaw(lambda, phi) {\n  var lambda2 = lambda * lambda, phi2 = phi * phi;\n  return [\n    lambda * (0.975534 + phi2 * (-0.119161 + lambda2 * -0.0143059 + phi2 * -0.0547009)),\n    phi * (1.00384 + lambda2 * (0.0802894 + phi2 * -0.02855 + lambda2 * 0.000199025) + phi2 * (0.0998909 + phi2 * -0.0491032))\n  ];\n}\n\nlaskowskiRaw.invert = function(x, y) {\n  var lambda = sign(x) * pi,\n      phi = y / 2,\n      i = 50;\n  do {\n    var lambda2 = lambda * lambda,\n        phi2 = phi * phi,\n        lambdaPhi = lambda * phi,\n        fx = lambda * (0.975534 + phi2 * (-0.119161 + lambda2 * -0.0143059 + phi2 * -0.0547009)) - x,\n        fy = phi * (1.00384 + lambda2 * (0.0802894 + phi2 * -0.02855 + lambda2 * 0.000199025) + phi2 * (0.0998909 + phi2 * -0.0491032)) - y,\n        deltaxDeltaLambda = 0.975534 - phi2 * (0.119161 + 3 * lambda2 * 0.0143059 + phi2 * 0.0547009),\n        deltaxDeltaPhi = -lambdaPhi * (2 * 0.119161 + 4 * 0.0547009 * phi2 + 2 * 0.0143059 * lambda2),\n        deltayDeltaLambda = lambdaPhi * (2 * 0.0802894 + 4 * 0.000199025 * lambda2 + 2 * -0.02855 * phi2),\n        deltayDeltaPhi = 1.00384 + lambda2 * (0.0802894 + 0.000199025 * lambda2) + phi2 * (3 * (0.0998909 - 0.02855 * lambda2) - 5 * 0.0491032 * phi2),\n        denominator = deltaxDeltaPhi * deltayDeltaLambda - deltayDeltaPhi * deltaxDeltaLambda,\n        deltaLambda = (fy * deltaxDeltaPhi - fx * deltayDeltaPhi) / denominator,\n        deltaPhi = (fx * deltayDeltaLambda - fy * deltaxDeltaLambda) / denominator;\n    lambda -= deltaLambda, phi -= deltaPhi;\n  } while ((abs(deltaLambda) > epsilon || abs(deltaPhi) > epsilon) && --i > 0);\n  return i && [lambda, phi];\n};\n\nexport default function() {\n  return projection(laskowskiRaw)\n      .scale(139.98);\n}\n", "import {geoProjection as projection} from \"d3-geo\";\nimport {acos, asin, cos, sign, sin, tan, sqrt, sqrt1_2} from \"./math.js\";\n\nexport function littrowRaw(lambda, phi) {\n  return [\n    sin(lambda) / cos(phi),\n    tan(phi) * cos(lambda)\n  ];\n}\n\nlittrowRaw.invert = function(x, y) {\n  var x2 = x * x,\n      y2 = y * y,\n      y2_1 = y2 + 1,\n      x2_y2_1 = x2 + y2_1,\n      cosPhi = x\n          ? sqrt1_2 * sqrt((x2_y2_1 - sqrt(x2_y2_1 * x2_y2_1 - 4 * x2)) / x2)\n          : 1 / sqrt(y2_1);\n  return [\n    asin(x * cosPhi),\n    sign(y) * acos(cosPhi)\n  ];\n};\n\nexport default function() {\n  return projection(littrowRaw)\n      .scale(144.049)\n      .clipAngle(90 - 1e-3);\n}\n", "import {geoProjection as projection} from \"d3-geo\";\nimport {atan, exp, log, quarterPi, pi, tan} from \"./math.js\";\n\nexport function millerRaw(lambda, phi) {\n  return [lambda, 1.25 * log(tan(quarterPi + 0.4 * phi))];\n}\n\nmillerRaw.invert = function(x, y) {\n  return [x, 2.5 * atan(exp(0.8 * y)) - 0.625 * pi];\n};\n\nexport default function() {\n  return projection(millerRaw)\n      .scale(108.318);\n}\n", "import {geoProjection as projection} from \"d3-geo\";\nimport {asin, cos, sin, sqrt} from \"./math.js\";\n\nvar sqrt6 = sqrt(6),\n    sqrt7 = sqrt(7);\n\nexport function mtFlatPolarParabolicRaw(lambda, phi) {\n  var theta = asin(7 * sin(phi) / (3 * sqrt6));\n  return [\n    sqrt6 * lambda * (2 * cos(2 * theta / 3) - 1) / sqrt7,\n    9 * sin(theta / 3) / sqrt7\n  ];\n}\n\nmtFlatPolarParabolicRaw.invert = function(x, y) {\n  var theta = 3 * asin(y * sqrt7 / 9);\n  return [\n    x * sqrt7 / (sqrt6 * (2 * cos(2 * theta / 3) - 1)),\n    asin(sin(theta) * 3 * sqrt6 / 7)\n  ];\n};\n\nexport default function() {\n  return projection(mtFlatPolarParabolicRaw)\n      .scale(164.859);\n}\n", "import {geoProjection as projection} from \"d3-geo\";\nimport {abs, asin, cos, epsilon, sin, sqrt, sqrt1_2, sqrt2} from \"./math.js\";\n\nexport function mtFlatPolarQuarticRaw(lambda, phi) {\n  var k = (1 + sqrt1_2) * sin(phi),\n      theta = phi;\n  for (var i = 0, delta; i < 25; i++) {\n    theta -= delta = (sin(theta / 2) + sin(theta) - k) / (0.5 * cos(theta / 2) + cos(theta));\n    if (abs(delta) < epsilon) break;\n  }\n  return [\n    lambda * (1 + 2 * cos(theta) / cos(theta / 2)) / (3 * sqrt2),\n    2 * sqrt(3) * sin(theta / 2) / sqrt(2 + sqrt2)\n  ];\n}\n\nmtFlatPolarQuarticRaw.invert = function(x, y) {\n  var sinTheta_2 = y * sqrt(2 + sqrt2) / (2 * sqrt(3)),\n      theta = 2 * asin(sinTheta_2);\n  return [\n    3 * sqrt2 * x / (1 + 2 * cos(theta) / cos(theta / 2)),\n    asin((sinTheta_2 + sin(theta)) / (1 + sqrt1_2))\n  ];\n};\n\nexport default function() {\n  return projection(mtFlatPolarQuarticRaw)\n      .scale(188.209);\n}\n", "import {geoProjection as projection} from \"d3-geo\";\nimport {abs, asin, cos, epsilon, halfPi, pi, sin, sqrt} from \"./math.js\";\n\nexport function mtFlatPolarSinusoidalRaw(lambda, phi) {\n  var A = sqrt(6 / (4 + pi)),\n      k = (1 + pi / 4) * sin(phi),\n      theta = phi / 2;\n  for (var i = 0, delta; i < 25; i++) {\n    theta -= delta = (theta / 2 + sin(theta) - k) / (0.5 + cos(theta));\n    if (abs(delta) < epsilon) break;\n  }\n  return [\n    A * (0.5 + cos(theta)) * lambda / 1.5,\n    A * theta\n  ];\n}\n\nmtFlatPolarSinusoidalRaw.invert = function(x, y) {\n  var A = sqrt(6 / (4 + pi)),\n      theta = y / A;\n  if (abs(abs(theta) - halfPi) < epsilon) theta = theta < 0 ? -halfPi : halfPi;\n  return [\n    1.5 * x / (A * (0.5 + cos(theta))),\n    asin((theta / 2 + sin(theta)) / (1 + pi / 4))\n  ];\n};\n\nexport default function() {\n  return projection(mtFlatPolarSinusoidalRaw)\n      .scale(166.518);\n}\n", "import {geoProjection as projection} from \"d3-geo\";\nimport {abs, epsilon2} from \"./math.js\";\n\nexport function naturalEarth2Raw(lambda, phi) {\n  var phi2 = phi * phi, phi4 = phi2 * phi2, phi6 = phi2 * phi4;\n  return [\n    lambda * (0.84719 - 0.13063 * phi2 + phi6 * phi6 * (-0.04515 + 0.05494 * phi2 - 0.02326 * phi4 + 0.00331 * phi6)),\n    phi * (1.01183 + phi4 * phi4 * (-0.02625 + 0.01926 * phi2 - 0.00396 * phi4))\n  ];\n}\n\nnaturalEarth2Raw.invert = function(x, y) {\n  var phi = y, i = 25, delta, phi2, phi4, phi6;\n  do {\n    phi2 = phi * phi; phi4 = phi2 * phi2;\n    phi -= delta = ((phi * (1.01183 + phi4 * phi4 * (-0.02625 + 0.01926 * phi2 - 0.00396 * phi4))) - y) /\n      (1.01183 + phi4 * phi4 * ((9 * -0.02625) + (11 * 0.01926) * phi2 + (13 * -0.00396) * phi4));\n  } while (abs(delta) > epsilon2 && --i > 0);\n  phi2 = phi * phi; phi4 = phi2 * phi2; phi6 = phi2 * phi4;\n  return [\n    x / (0.84719 - 0.13063 * phi2 + phi6 * phi6 * (-0.04515 + 0.05494 * phi2 - 0.02326 * phi4 + 0.00331 * phi6)),\n    phi\n  ];\n};\n\nexport default function() {\n  return projection(naturalEarth2Raw)\n      .scale(175.295);\n}\n", "import {geoProjection as projection} from \"d3-geo\";\nimport {abs, cos, epsilon, tan} from \"./math.js\";\n\nexport function nellHammerRaw(lambda, phi) {\n  return [\n    lambda * (1 + cos(phi)) / 2,\n    2 * (phi - tan(phi / 2))\n  ];\n}\n\nnellHammerRaw.invert = function(x, y) {\n  var p = y / 2;\n  for (var i = 0, delta = Infinity; i < 10 && abs(delta) > epsilon; ++i) {\n    var c = cos(y / 2);\n    y -= delta = (y - tan(y / 2) - p) / (1 - 0.5 / (c * c));\n  }\n  return [\n    2 * x / (1 + cos(y)),\n    y\n  ];\n};\n\nexport default function() {\n  return projection(nellHammerRaw)\n      .scale(152.63);\n}\n", "import {geoProjection as projection} from \"d3-geo\";\nimport {abs, cos, halfPi, pi, sign, sin, sqrt} from \"./math.js\";\nimport {solve} from \"./newton.js\";\n\n// Based on Torben Jansen's implementation\n// https://beta.observablehq.com/@toja/nicolosi-globular-projection\n// https://beta.observablehq.com/@toja/nicolosi-globular-inverse\n\nexport function nicolosiRaw(lambda, phi) {\n  var sinPhi = sin(phi),\n    q = cos(phi),\n    s = sign(lambda);\n\n  if (lambda === 0 || abs(phi) === halfPi) return [0, phi];\n  else if (phi === 0) return [lambda, 0];\n  else if (abs(lambda) === halfPi) return [lambda * q, halfPi * sinPhi];\n\n  var b = pi / (2 * lambda) - (2 * lambda) / pi,\n    c = (2 * phi) / pi,\n    d = (1 - c * c) / (sinPhi - c);\n\n  var b2 = b * b,\n    d2 = d * d,\n    b2d2 = 1 + b2 / d2,\n    d2b2 = 1 + d2 / b2;\n\n  var M = ((b * sinPhi) / d - b / 2) / b2d2,\n    N = ((d2 * sinPhi) / b2 + d / 2) / d2b2,\n    m = M * M + (q * q) / b2d2,\n    n = N * N - ((d2 * sinPhi * sinPhi) / b2 + d * sinPhi - 1) / d2b2;\n\n  return [\n    halfPi * (M + sqrt(m) * s),\n    halfPi * (N + sqrt(n < 0 ? 0 : n) * sign(-phi * b) * s)\n  ];\n}\n\nnicolosiRaw.invert = function(x, y) {\n\n  x /= halfPi;\n  y /= halfPi;\n\n  var x2 = x * x,\n    y2 = y * y,\n    x2y2 = x2 + y2,\n    pi2 = pi * pi;\n\n  return [\n    x ? (x2y2 -1 + sqrt((1 - x2y2) * (1 - x2y2) + 4 * x2)) / (2 * x) * halfPi : 0,\n    solve(function(phi) {\n      return (\n        x2y2 * (pi * sin(phi) - 2 * phi) * pi +\n        4 * phi * phi * (y - sin(phi)) +\n        2 * pi * phi -\n        pi2 * y\n      );\n    }, 0)\n  ];\n};\n\nexport default function() {\n  return projection(nicolosiRaw)\n    .scale(127.267);\n}\n", "import {geoProjection as projection} from \"d3-geo\";\nimport {abs, epsilon} from \"./math.js\";\n\n// Based on Java implementation by Bojan Savric.\n// https://github.com/OSUCartography/JMapProjLib/blob/master/src/com/jhlabs/map/proj/PattersonProjection.java\n\nvar pattersonK1 = 1.0148,\n    pattersonK2 = 0.23185,\n    pattersonK3 = -0.14499,\n    pattersonK4 = 0.02406,\n    pattersonC1 = pattersonK1,\n    pattersonC2 = 5 * pattersonK2,\n    pattersonC3 = 7 * pattersonK3,\n    pattersonC4 = 9 * pattersonK4,\n    pattersonYmax = 1.790857183;\n\nexport function pattersonRaw(lambda, phi) {\n  var phi2 = phi * phi;\n  return [\n    lambda,\n    phi * (pattersonK1 + phi2 * phi2 * (pattersonK2 + phi2 * (pattersonK3 + pattersonK4 * phi2)))\n  ];\n}\n\npattersonRaw.invert = function(x, y) {\n  if (y > pattersonYmax) y = pattersonYmax;\n  else if (y < -pattersonYmax) y = -pattersonYmax;\n  var yc = y, delta;\n\n  do { // Newton-Raphson\n    var y2 = yc * yc;\n    yc -= delta = ((yc * (pattersonK1 + y2 * y2 * (pattersonK2 + y2 * (pattersonK3 + pattersonK4 * y2)))) - y) / (pattersonC1 + y2 * y2 * (pattersonC2 + y2 * (pattersonC3 + pattersonC4 * y2)));\n  } while (abs(delta) > epsilon);\n\n  return [x, yc];\n};\n\nexport default function() {\n  return projection(pattersonRaw)\n      .scale(139.319);\n}\n", "import {geoProjection as projection} from \"d3-geo\";\nimport {abs, acos, asin, cos, epsilon, halfPi, sign, sin, tan} from \"./math.js\";\n\nexport function polyconicRaw(lambda, phi) {\n  if (abs(phi) < epsilon) return [lambda, 0];\n  var tanPhi = tan(phi),\n      k = lambda * sin(phi);\n  return [\n    sin(k) / tanPhi,\n    phi + (1 - cos(k)) / tanPhi\n  ];\n}\n\npolyconicRaw.invert = function(x, y) {\n  if (abs(y) < epsilon) return [x, 0];\n  var k = x * x + y * y,\n      phi = y * 0.5,\n      i = 10, delta;\n  do {\n    var tanPhi = tan(phi),\n        secPhi = 1 / cos(phi),\n        j = k - 2 * y * phi + phi * phi;\n    phi -= delta = (tanPhi * j + 2 * (phi - y)) / (2 + j * secPhi * secPhi + 2 * (phi - y) * tanPhi);\n  } while (abs(delta) > epsilon && --i > 0);\n  tanPhi = tan(phi);\n  return [\n    (abs(y) < abs(phi + 1 / tanPhi) ? asin(x * tanPhi) : sign(y) * sign(x) * (acos(abs(x * tanPhi)) + halfPi)) / sin(phi),\n    phi\n  ];\n};\n\nexport default function() {\n  return projection(polyconicRaw)\n      .scale(103.74);\n}\n", "// TODO generate on-the-fly to avoid external modification.\nvar octahedron = [\n  [0, 90],\n  [-90, 0], [0, 0], [90, 0], [180, 0],\n  [0, -90]\n];\n\nexport default [\n  [0, 2, 1],\n  [0, 3, 2],\n  [5, 1, 2],\n  [5, 2, 3],\n  [0, 1, 4],\n  [0, 4, 3],\n  [5, 4, 1],\n  [5, 3, 4]\n].map(function(face) {\n  return face.map(function(i) {\n    return octahedron[i];\n  });\n});\n", "import {geoCentroid as centroid, geoProjection as projection} from \"d3-geo\";\nimport {collignonRaw} from \"../collignon.js\";\nimport {pi, sqrt} from \"../math.js\";\nimport polyhedral from \"./index.js\";\nimport octahedron from \"./octahedron.js\";\n\nvar kx = 2 / sqrt(3);\n\nfunction collignonK(a, b) {\n  var p = collignonRaw(a, b);\n  return [p[0] * kx, p[1]];\n}\n\ncollignonK.invert = function(x,y) {\n  return collignonRaw.invert(x / kx, y);\n};\n\nexport default function(faceProjection) {\n\n  faceProjection = faceProjection || function(face) {\n    var c = centroid({type: \"MultiPoint\", coordinates: face});\n    return projection(collignonK).translate([0, 0]).scale(1).rotate(c[1] > 0 ? [-c[0], 0] : [180 - c[0], 180]);\n  };\n\n  var faces = octahedron.map(function(face) {\n    return {face: face, project: faceProjection(face)};\n  });\n\n  [-1, 0, 0, 1, 0, 1, 4, 5].forEach(function(d, i) {\n    var node = faces[d];\n    node && (node.children || (node.children = [])).push(faces[i]);\n  });\n\n  return polyhedral(faces[0], function(lambda, phi) {\n        return faces[lambda < -pi / 2 ? phi < 0 ? 6 : 4\n            : lambda < 0 ? phi < 0 ? 2 : 0\n            : lambda < pi / 2 ? phi < 0 ? 3 : 1\n            : phi < 0 ? 7 : 5];\n      })\n      .angle(-30)\n      .scale(121.906)\n      .center([0, 48.5904]);\n}\n", "import {geoProjection as projection} from \"d3-geo\";\nimport {abs, degrees, epsilon2, floor, max, min, pi, radians, sign} from \"./math.js\";\n\nvar K = [\n  [0.9986, -0.062],\n  [1.0000, 0.0000],\n  [0.9986, 0.0620],\n  [0.9954, 0.1240],\n  [0.9900, 0.1860],\n  [0.9822, 0.2480],\n  [0.9730, 0.3100],\n  [0.9600, 0.3720],\n  [0.9427, 0.4340],\n  [0.9216, 0.4958],\n  [0.8962, 0.5571],\n  [0.8679, 0.6176],\n  [0.8350, 0.6769],\n  [0.7986, 0.7346],\n  [0.7597, 0.7903],\n  [0.7186, 0.8435],\n  [0.6732, 0.8936],\n  [0.6213, 0.9394],\n  [0.5722, 0.9761],\n  [0.5322, 1.0000]\n];\n\nK.forEach(function(d) {\n  d[1] *= 1.593415793900743;\n});\n\nexport function robinsonRaw(lambda, phi) {\n  var i = min(18, abs(phi) * 36 / pi),\n      i0 = floor(i),\n      di = i - i0,\n      ax = (k = K[i0])[0],\n      ay = k[1],\n      bx = (k = K[++i0])[0],\n      by = k[1],\n      cx = (k = K[min(19, ++i0)])[0],\n      cy = k[1],\n      k;\n  return [\n    lambda * (bx + di * (cx - ax) / 2 + di * di * (cx - 2 * bx + ax) / 2),\n    sign(phi) * (by + di * (cy - ay) / 2 + di * di * (cy - 2 * by + ay) / 2)\n  ];\n}\n\nrobinsonRaw.invert = function(x, y) {\n  var phi = y * 90,\n      i = min(18, abs(phi / 5)),\n      i0 = max(0, floor(i));\n  do {\n    var ay = K[i0][1],\n        by = K[i0 + 1][1],\n        cy = K[min(19, i0 + 2)][1],\n        u = cy - ay,\n        v = cy - 2 * by + ay,\n        t = 2 * (abs(y) - by) / u,\n        c = v / u,\n        di = t * (1 - c * t * (1 - 2 * c * t));\n    if (di >= 0 || i0 === 1) {\n      phi = (y >= 0 ? 5 : -5) * (di + i);\n      var j = 50, delta;\n      do {\n        i = min(18, abs(phi) / 5);\n        i0 = floor(i);\n        di = i - i0;\n        ay = K[i0][1];\n        by = K[i0 + 1][1];\n        cy = K[min(19, i0 + 2)][1];\n        phi -= (delta = sign(y) * (by + di * (cy - ay) / 2 + di * di * (cy - 2 * by + ay) / 2) - y) * degrees;\n      } while (abs(delta) > epsilon2 && --j > 0);\n      break;\n    }\n  } while (--i0 >= 0);\n  var ax = K[i0][0],\n      bx = K[i0 + 1][0],\n      cx = K[min(19, i0 + 2)][0];\n  return [\n    x / (bx + di * (cx - ax) / 2 + di * di * (cx - 2 * bx + ax) / 2),\n    phi * radians\n  ];\n};\n\nexport default function() {\n  return projection(robinsonRaw)\n      .scale(152.63);\n}\n", "var epsilon = 1e-4,\n    epsilonInverse = 1e4,\n    x0 = -180, x0e = x0 + epsilon,\n    x1 = 180, x1e = x1 - epsilon,\n    y0 = -90, y0e = y0 + epsilon,\n    y1 = 90, y1e = y1 - epsilon;\n\nfunction nonempty(coordinates) {\n  return coordinates.length > 0;\n}\n\nfunction quantize(x) {\n  return Math.floor(x * epsilonInverse) / epsilonInverse;\n}\n\nfunction normalizePoint(y) {\n  return y === y0 || y === y1 ? [0, y] : [x0, quantize(y)]; // pole or antimeridian?\n}\n\nfunction clampPoint(p) {\n  var x = p[0], y = p[1], clamped = false;\n  if (x <= x0e) x = x0, clamped = true;\n  else if (x >= x1e) x = x1, clamped = true;\n  if (y <= y0e) y = y0, clamped = true;\n  else if (y >= y1e) y = y1, clamped = true;\n  return clamped ? [x, y] : p;\n}\n\nfunction clampPoints(points) {\n  return points.map(clampPoint);\n}\n\n// For each ring, detect where it crosses the antimeridian or pole.\nfunction extractFragments(rings, polygon, fragments) {\n  for (var j = 0, m = rings.length; j < m; ++j) {\n    var ring = rings[j].slice();\n\n    // By default, assume that this ring doesn’t need any stitching.\n    fragments.push({index: -1, polygon: polygon, ring: ring});\n\n    for (var i = 0, n = ring.length; i < n; ++i) {\n      var point = ring[i],\n          x = point[0],\n          y = point[1];\n\n      // If this is an antimeridian or polar point…\n      if (x <= x0e || x >= x1e || y <= y0e || y >= y1e) {\n        ring[i] = clampPoint(point);\n\n        // Advance through any antimeridian or polar points…\n        for (var k = i + 1; k < n; ++k) {\n          var pointk = ring[k],\n              xk = pointk[0],\n              yk = pointk[1];\n          if (xk > x0e && xk < x1e && yk > y0e && yk < y1e) break;\n        }\n\n        // If this was just a single antimeridian or polar point,\n        // we don’t need to cut this ring into a fragment;\n        // we can just leave it as-is.\n        if (k === i + 1) continue;\n\n        // Otherwise, if this is not the first point in the ring,\n        // cut the current fragment so that it ends at the current point.\n        // The current point is also normalized for later joining.\n        if (i) {\n          var fragmentBefore = {index: -1, polygon: polygon, ring: ring.slice(0, i + 1)};\n          fragmentBefore.ring[fragmentBefore.ring.length - 1] = normalizePoint(y);\n          fragments[fragments.length - 1] = fragmentBefore;\n        }\n\n        // If the ring started with an antimeridian fragment,\n        // we can ignore that fragment entirely.\n        else fragments.pop();\n\n        // If the remainder of the ring is an antimeridian fragment,\n        // move on to the next ring.\n        if (k >= n) break;\n\n        // Otherwise, add the remaining ring fragment and continue.\n        fragments.push({index: -1, polygon: polygon, ring: ring = ring.slice(k - 1)});\n        ring[0] = normalizePoint(ring[0][1]);\n        i = -1;\n        n = ring.length;\n      }\n    }\n  }\n}\n\n// Now stitch the fragments back together into rings.\nfunction stitchFragments(fragments) {\n  var i, n = fragments.length;\n\n  // To connect the fragments start-to-end, create a simple index by end.\n  var fragmentByStart = {},\n      fragmentByEnd = {},\n      fragment,\n      start,\n      startFragment,\n      end,\n      endFragment;\n\n  // For each fragment…\n  for (i = 0; i < n; ++i) {\n    fragment = fragments[i];\n    start = fragment.ring[0];\n    end = fragment.ring[fragment.ring.length - 1];\n\n    // If this fragment is closed, add it as a standalone ring.\n    if (start[0] === end[0] && start[1] === end[1]) {\n      fragment.polygon.push(fragment.ring);\n      fragments[i] = null;\n      continue;\n    }\n\n    fragment.index = i;\n    fragmentByStart[start] = fragmentByEnd[end] = fragment;\n  }\n\n  // For each open fragment…\n  for (i = 0; i < n; ++i) {\n    fragment = fragments[i];\n    if (fragment) {\n      start = fragment.ring[0];\n      end = fragment.ring[fragment.ring.length - 1];\n      startFragment = fragmentByEnd[start];\n      endFragment = fragmentByStart[end];\n\n      delete fragmentByStart[start];\n      delete fragmentByEnd[end];\n\n      // If this fragment is closed, add it as a standalone ring.\n      if (start[0] === end[0] && start[1] === end[1]) {\n        fragment.polygon.push(fragment.ring);\n        continue;\n      }\n\n      if (startFragment) {\n        delete fragmentByEnd[start];\n        delete fragmentByStart[startFragment.ring[0]];\n        startFragment.ring.pop(); // drop the shared coordinate\n        fragments[startFragment.index] = null;\n        fragment = {index: -1, polygon: startFragment.polygon, ring: startFragment.ring.concat(fragment.ring)};\n\n        if (startFragment === endFragment) {\n          // Connect both ends to this single fragment to create a ring.\n          fragment.polygon.push(fragment.ring);\n        } else {\n          fragment.index = n++;\n          fragments.push(fragmentByStart[fragment.ring[0]] = fragmentByEnd[fragment.ring[fragment.ring.length - 1]] = fragment);\n        }\n      } else if (endFragment) {\n        delete fragmentByStart[end];\n        delete fragmentByEnd[endFragment.ring[endFragment.ring.length - 1]];\n        fragment.ring.pop(); // drop the shared coordinate\n        fragment = {index: n++, polygon: endFragment.polygon, ring: fragment.ring.concat(endFragment.ring)};\n        fragments[endFragment.index] = null;\n        fragments.push(fragmentByStart[fragment.ring[0]] = fragmentByEnd[fragment.ring[fragment.ring.length - 1]] = fragment);\n      } else {\n        fragment.ring.push(fragment.ring[0]); // close ring\n        fragment.polygon.push(fragment.ring);\n      }\n    }\n  }\n}\n\nfunction stitchFeature(input) {\n  var output = {type: \"Feature\", geometry: stitchGeometry(input.geometry)};\n  if (input.id != null) output.id = input.id;\n  if (input.bbox != null) output.bbox = input.bbox;\n  if (input.properties != null) output.properties = input.properties;\n  return output;\n}\n\nfunction stitchGeometry(input) {\n  if (input == null) return input;\n  var output, fragments, i, n;\n  switch (input.type) {\n    case \"GeometryCollection\": output = {type: \"GeometryCollection\", geometries: input.geometries.map(stitchGeometry)}; break;\n    case \"Point\": output = {type: \"Point\", coordinates: clampPoint(input.coordinates)}; break;\n    case \"MultiPoint\": case \"LineString\": output = {type: input.type, coordinates: clampPoints(input.coordinates)}; break;\n    case \"MultiLineString\": output = {type: \"MultiLineString\", coordinates: input.coordinates.map(clampPoints)}; break;\n    case \"Polygon\": {\n      var polygon = [];\n      extractFragments(input.coordinates, polygon, fragments = []);\n      stitchFragments(fragments);\n      output = {type: \"Polygon\", coordinates: polygon};\n      break;\n    }\n    case \"MultiPolygon\": {\n      fragments = [], i = -1, n = input.coordinates.length;\n      var polygons = new Array(n);\n      while (++i < n) extractFragments(input.coordinates[i], polygons[i] = [], fragments);\n      stitchFragments(fragments);\n      output = {type: \"MultiPolygon\", coordinates: polygons.filter(nonempty)};\n      break;\n    }\n    default: return input;\n  }\n  if (input.bbox != null) output.bbox = input.bbox;\n  return output;\n}\n\nexport default function(input) {\n  if (input == null) return input;\n  switch (input.type) {\n    case \"Feature\": return stitchFeature(input);\n    case \"FeatureCollection\": {\n      var output = {type: \"FeatureCollection\", features: input.features.map(stitchFeature)};\n      if (input.bbox != null) output.bbox = input.bbox;\n      return output;\n    }\n    default: return stitchGeometry(input);\n  }\n}\n", "import {geoProjection as projection} from \"d3-geo\";\nimport {atan, quarterPi, sin, tan} from \"./math.js\";\n\nexport function timesRaw(lambda, phi) {\n  var t = tan(phi / 2),\n      s = sin(quarterPi * t);\n  return [\n    lambda * (0.74482 - 0.34588 * s * s),\n    1.70711 * t\n  ];\n}\n\ntimesRaw.invert = function(x, y) {\n  var t = y / 1.70711,\n      s = sin(quarterPi * t);\n  return [\n    x / (0.74482 - 0.34588 * s * s),\n    2 * atan(t)\n  ];\n};\n\nexport default function() {\n  return projection(timesRaw)\n      .scale(146.153);\n}\n", "import {geoProjection as projection} from \"d3-geo\";\nimport {abs, acos, asin, atan, cos, epsilon, halfPi, pi, sign, sin, sqrt, tan} from \"./math.js\";\n\nexport function vanDerGrintenRaw(lambda, phi) {\n  if (abs(phi) < epsilon) return [lambda, 0];\n  var sinTheta = abs(phi / halfPi),\n      theta = asin(sinTheta);\n  if (abs(lambda) < epsilon || abs(abs(phi) - halfPi) < epsilon) return [0, sign(phi) * pi * tan(theta / 2)];\n  var cosTheta = cos(theta),\n      A = abs(pi / lambda - lambda / pi) / 2,\n      A2 = A * A,\n      G = cosTheta / (sinTheta + cosTheta - 1),\n      P = G * (2 / sinTheta - 1),\n      P2 = P * P,\n      P2_A2 = P2 + A2,\n      G_P2 = G - P2,\n      Q = A2 + G;\n  return [\n    sign(lambda) * pi * (A * G_P2 + sqrt(A2 * G_P2 * G_P2 - P2_A2 * (G * G - P2))) / P2_A2,\n    sign(phi) * pi * (P * Q - A * sqrt((A2 + 1) * P2_A2 - Q * Q)) / P2_A2\n  ];\n}\n\nvanDerGrintenRaw.invert = function(x, y) {\n  if (abs(y) < epsilon) return [x, 0];\n  if (abs(x) < epsilon) return [0, halfPi * sin(2 * atan(y / pi))];\n  var x2 = (x /= pi) * x,\n      y2 = (y /= pi) * y,\n      x2_y2 = x2 + y2,\n      z = x2_y2 * x2_y2,\n      c1 = -abs(y) * (1 + x2_y2),\n      c2 = c1 - 2 * y2 + x2,\n      c3 = -2 * c1 + 1 + 2 * y2 + z,\n      d = y2 / c3 + (2 * c2 * c2 * c2 / (c3 * c3 * c3) - 9 * c1 * c2 / (c3 * c3)) / 27,\n      a1 = (c1 - c2 * c2 / (3 * c3)) / c3,\n      m1 = 2 * sqrt(-a1 / 3),\n      theta1 = acos(3 * d / (a1 * m1)) / 3;\n  return [\n    pi * (x2_y2 - 1 + sqrt(1 + 2 * (x2 - y2) + z)) / (2 * x),\n    sign(y) * pi * (-m1 * cos(theta1 + pi / 3) - c2 / (3 * c3))\n  ];\n};\n\nexport default function() {\n  return projection(vanDerGrintenRaw)\n      .scale(79.4183);\n}\n", "import {geoProjection as projection} from \"d3-geo\";\nimport {abs, asin, atan, atan2, cos, halfPi, epsilon, pi, sign, sin, sqrt, tan} from \"./math.js\";\n\nexport function vanDerGrinten2Raw(lambda, phi) {\n  if (abs(phi) < epsilon) return [lambda, 0];\n  var sinTheta = abs(phi / halfPi),\n      theta = asin(sinTheta);\n  if (abs(lambda) < epsilon || abs(abs(phi) - halfPi) < epsilon) return [0, sign(phi) * pi * tan(theta / 2)];\n  var cosTheta = cos(theta),\n      A = abs(pi / lambda - lambda / pi) / 2,\n      A2 = A * A,\n      x1 = cosTheta * (sqrt(1 + A2) - A * cosTheta) / (1 + A2 * sinTheta * sinTheta);\n  return [\n    sign(lambda) * pi * x1,\n    sign(phi) * pi * sqrt(1 - x1 * (2 * A + x1))\n  ];\n}\n\nvanDerGrinten2Raw.invert = function(x, y) {\n  if (!x) return [0, halfPi * sin(2 * atan(y / pi))];\n  var x1 = abs(x / pi),\n      A = (1 - x1 * x1 - (y /= pi) * y) / (2 * x1),\n      A2 = A * A,\n      B = sqrt(A2 + 1);\n  return [\n    sign(x) * pi * (B - A),\n    sign(y) * halfPi * sin(2 * atan2(sqrt((1 - 2 * A * x1) * (A + B) - x1), sqrt(B + A + x1)))\n  ];\n};\n\nexport default function() {\n  return projection(vanDerGrinten2Raw)\n      .scale(79.4183);\n}\n", "import {geoProjection as projection} from \"d3-geo\";\nimport {abs, asin, atan, cos, epsilon, halfPi, pi, sign, sin, sqrt, tan} from \"./math.js\";\n\nexport function vanDerGrinten3Raw(lambda, phi) {\n  if (abs(phi) < epsilon) return [lambda, 0];\n  var sinTheta = phi / halfPi,\n      theta = asin(sinTheta);\n  if (abs(lambda) < epsilon || abs(abs(phi) - halfPi) < epsilon) return [0, pi * tan(theta / 2)];\n  var A = (pi / lambda - lambda / pi) / 2,\n      y1 = sinTheta / (1 + cos(theta));\n  return [\n    pi * (sign(lambda) * sqrt(A * A + 1 - y1 * y1) - A),\n    pi * y1\n  ];\n}\n\nvanDerGrinten3Raw.invert = function(x, y) {\n  if (!y) return [x, 0];\n  var y1 = y / pi,\n      A = (pi * pi * (1 - y1 * y1) - x * x) / (2 * pi * x);\n  return [\n    x ? pi * (sign(x) * sqrt(A * A + 1) - A) : 0,\n    halfPi * sin(2 * atan(y1))\n  ];\n};\n\nexport default function() {\n  return projection(vanDerGrinten3Raw)\n        .scale(79.4183);\n}\n", "import {geoProjection as projection} from \"d3-geo\";\nimport {abs, epsilon, halfPi, min, pi, sign, sqrt} from \"./math.js\";\n\nexport function vanDerGrinten4Raw(lambda, phi) {\n  if (!phi) return [lambda, 0];\n  var phi0 = abs(phi);\n  if (!lambda || phi0 === halfPi) return [0, phi];\n  var B = phi0 / halfPi,\n      B2 = B * B,\n      C = (8 * B - B2 * (B2 + 2) - 5) / (2 * B2 * (B - 1)),\n      C2 = C * C,\n      BC = B * C,\n      B_C2 = B2 + C2 + 2 * BC,\n      B_3C = B + 3 * C,\n      lambda0 = lambda / halfPi,\n      lambda1 = lambda0 + 1 / lambda0,\n      D = sign(abs(lambda) - halfPi) * sqrt(lambda1 * lambda1 - 4),\n      D2 = D * D,\n      F = B_C2 * (B2 + C2 * D2 - 1) + (1 - B2) * (B2 * (B_3C * B_3C + 4 * C2) + 12 * BC * C2 + 4 * C2 * C2),\n      x1 = (D * (B_C2 + C2 - 1) + 2 * sqrt(F)) / (4 * B_C2 + D2);\n  return [\n    sign(lambda) * halfPi * x1,\n    sign(phi) * halfPi * sqrt(1 + D * abs(x1) - x1 * x1)\n  ];\n}\n\nvanDerGrinten4Raw.invert = function(x, y) {\n  var delta;\n  if (!x || !y) return [x, y];\n  var sy = sign(y);\n  y = abs(y) / pi;\n  var x1 = sign(x) * x / halfPi,\n      D = (x1 * x1 - 1 + 4 * y * y) / abs(x1),\n      D2 = D * D,\n      B = y * (2 - (y > 0.5 ? min(y, abs(x)) : 0)),\n      r = x * x + y * y,\n      i = 50;\n  do {\n    var B2 = B * B,\n        C = (8 * B - B2 * (B2 + 2) - 5) / (2 * B2 * (B - 1)),\n        C_ = (3 * B - B2 * B - 10) / (2 * B2 * B),\n        C2 = C * C,\n        BC = B * C,\n        B_C = B + C,\n        B_C2 = B_C * B_C,\n        B_3C = B + 3 * C,\n        F = B_C2 * (B2 + C2 * D2 - 1) + (1 - B2) * (B2 * (B_3C * B_3C + 4 * C2) + C2 * (12 * BC + 4 * C2)),\n        F_ = -2 * B_C * (4 * BC * C2 + (1 - 4 * B2 + 3 * B2 * B2) * (1 + C_) + C2 * (-6 + 14 * B2 - D2 + (-8 + 8 * B2 - 2 * D2) * C_) + BC * (-8 + 12 * B2 + (-10 + 10 * B2 - D2) * C_)),\n        sqrtF = sqrt(F),\n        f = D * (B_C2 + C2 - 1) + 2 * sqrtF - x1 * (4 * B_C2 + D2),\n        f_ = D * (2 * C * C_ + 2 * B_C * (1 + C_)) + F_ / sqrtF - 8 * B_C * (D * (-1 + C2 + B_C2) + 2 * sqrtF) * (1 + C_) / (D2 + 4 * B_C2);\n    B -= delta = f / f_;\n  } while (delta * r * r > epsilon && --i > 0);\n  return [\n    sign(x) * (sqrt(D * D + 4) + D) * pi / 4,\n    sy * halfPi * B\n  ];\n};\n\nexport default function() {\n  return projection(vanDerGrinten4Raw)\n      .scale(127.16);\n}\n", "import {geoProjection as projection} from \"d3-geo\";\nimport {sqrt, pi} from \"./math.js\";\nimport {mollweideBromleyRaw} from \"./mollweide.js\";\n\nvar A = 4 * pi + 3 * sqrt(3),\n    B = 2 * sqrt(2 * pi * sqrt(3) / A);\n\nexport var wagner4Raw = mollweideBromleyRaw(B * sqrt(3) / pi, B, A / 6);\n\nexport default function() {\n  return projection(wagner4Raw)\n      .scale(176.84);\n}\n", "import {geoProjection as projection} from \"d3-geo\";\nimport {pi, sqrt} from \"./math.js\";\n\nexport function wagner6Raw(lambda, phi) {\n  return [lambda * sqrt(1 - 3 * phi * phi / (pi * pi)), phi];\n}\n\nwagner6Raw.invert = function(x, y) {\n  return [x / sqrt(1 - 3 * y * y / (pi * pi)), y];\n};\n\nexport default function() {\n  return projection(wagner6Raw)\n      .scale(152.63);\n}\n", "import {geoProjection as projection} from \"d3-geo\";\nimport {asin, atan2, cos, sin, sqrt} from \"./math.js\";\n\nexport function wiechelRaw(lambda, phi) {\n  var cosPhi = cos(phi),\n      sinPhi = cos(lambda) * cosPhi,\n      sin1_Phi = 1 - sinPhi,\n      cosLambda = cos(lambda = atan2(sin(lambda) * cosPhi, -sin(phi))),\n      sinLambda = sin(lambda);\n  cosPhi = sqrt(1 - sinPhi * sinPhi);\n  return [\n    sinLambda * cosPhi - cosLambda * sin1_Phi,\n    -cosLambda * cosPhi - sinLambda * sin1_Phi\n  ];\n}\n\nwiechelRaw.invert = function(x, y) {\n  var w = (x * x + y * y) / -2,\n      k = sqrt(-w * (2 + w)),\n      b = y * w + x * k,\n      a = x * w - y * k,\n      D = sqrt(a * a + b * b);\n  return [\n    atan2(k * b, D * (1 + w)),\n    D ? -asin(k * a / D) : 0\n  ];\n};\n\nexport default function() {\n  return projection(wiechelRaw)\n      .rotate([0, -90, 45])\n      .scale(124.75)\n      .clipAngle(180 - 1e-3);\n}\n", "import {geoProjection as projection} from \"d3-geo\";\nimport {aitoffRaw} from \"./aitoff.js\";\nimport {halfPi, epsilon, sin, cos, sqrt, abs, acos} from \"./math.js\";\n\nexport function winkel3Raw(lambda, phi) {\n  var coordinates = aitoffRaw(lambda, phi);\n  return [\n    (coordinates[0] + lambda / halfPi) / 2,\n    (coordinates[1] + phi) / 2\n  ];\n}\n\nwinkel3Raw.invert = function(x, y) {\n  var lambda = x, phi = y, i = 25;\n  do {\n    var cosphi = cos(phi),\n        sinphi = sin(phi),\n        sin_2phi = sin(2 * phi),\n        sin2phi = sinphi * sinphi,\n        cos2phi = cosphi * cosphi,\n        sinlambda = sin(lambda),\n        coslambda_2 = cos(lambda / 2),\n        sinlambda_2 = sin(lambda / 2),\n        sin2lambda_2 = sinlambda_2 * sinlambda_2,\n        C = 1 - cos2phi * coslambda_2 * coslambda_2,\n        E = C ? acos(cosphi * coslambda_2) * sqrt(F = 1 / C) : F = 0,\n        F,\n        fx = 0.5 * (2 * E * cosphi * sinlambda_2 + lambda / halfPi) - x,\n        fy = 0.5 * (E * sinphi + phi) - y,\n        dxdlambda = 0.5 * F * (cos2phi * sin2lambda_2 + E * cosphi * coslambda_2 * sin2phi) + 0.5 / halfPi,\n        dxdphi = F * (sinlambda * sin_2phi / 4 - E * sinphi * sinlambda_2),\n        dydlambda = 0.125 * F * (sin_2phi * sinlambda_2 - E * sinphi * cos2phi * sinlambda),\n        dydphi = 0.5 * F * (sin2phi * coslambda_2 + E * sin2lambda_2 * cosphi) + 0.5,\n        denominator = dxdphi * dydlambda - dydphi * dxdlambda,\n        dlambda = (fy * dxdphi - fx * dydphi) / denominator,\n        dphi = (fx * dydlambda - fy * dxdlambda) / denominator;\n    lambda -= dlambda, phi -= dphi;\n  } while ((abs(dlambda) > epsilon || abs(dphi) > epsilon) && --i > 0);\n  return [lambda, phi];\n};\n\nexport default function() {\n  return projection(winkel3Raw)\n      .scale(158.837);\n}\n", "import { Feature, Geometry } from 'geojson'\nimport {\n  GeoProjection,\n  geoMercator,\n  geoEquirectangular,\n  geoAzimuthalEqualArea,\n  geoAzimuthalEquidistant,\n  geoGnomonic,\n  geoOrthographic,\n  geoStereographic,\n  geoEqualEarth,\n  geoAlbersUsa,\n  geoAlbers,\n  geoConicConformal,\n  geoConicEqualArea,\n  geoConicEquidistant,\n  geoTransverseMercator,\n  geoNaturalEarth1,\n} from 'd3-geo'\n\nimport {\n  geoBromley,\n  geoNaturalEarth2,\n  geoKavrayskiy7,\n  geoHufnagel,\n  geoFoucautSinusoidal,\n  geoFahey,\n  geoEckert1,\n  geoEckert3,\n  geoBoggs,\n  geoCylindricalStereographic,\n  geoCraster,\n  geoBaker,\n  geoArmadillo,\n  geoAitoff,\n  geoRobinson,\n} from 'd3-geo-projection'\n\nexport type MapData<AreaDatum, PointDatum = unknown, LinkDatum = unknown> = {\n  areas?: AreaDatum[];\n  points?: PointDatum[];\n  links?: LinkDatum[] ;\n}\n\nexport enum MapPointLabelPosition {\n  Center = 'center',\n  Bottom = 'bottom',\n}\n\nexport type MapFeature<D> = Feature<Geometry> & { data: D }\n\nexport enum MapProjectionKind {\n  // Projections form `d3-geo`\n  Mercator = 'Mercator',\n  Equirectangular = 'Equirectangular',\n  AzimuthalEqualArea = 'AzimuthalEqualArea',\n  AzimuthalEquidistant = 'AzimuthalEquidistant',\n  Gnomonic = 'Gnomonic',\n  Orthographic = 'Orthographic',\n  Stereographic = 'Stereographic',\n  EqualEarth = 'EqualEarth',\n  AlbersUsa = 'AlbersUsa',\n  Albers = 'Albers',\n  ConicConformal = 'ConicConformal',\n  ConicEqualArea = 'ConicEqualArea',\n  ConicEquidistant = 'ConicEquidistant',\n  TransverseMercator = 'TransverseMercator',\n  NaturalEarth1 = 'NaturalEarth1',\n\n  // Projections form `d3-geo-projection`\n  Bromley = 'Bromley',\n  NaturalEarth2 = 'NaturalEarth2',\n  Kavrayskiy7 = 'Kavrayskiy7',\n  Hufnagel = 'Hufnagel',\n  FoucautSinusoidal = 'FoucautSinusoidal',\n  Eckert1 = 'Eckert1',\n  Eckert3 = 'Eckert3',\n  Boggs = 'Boggs',\n  CylindricalStereographic = 'CylindricalStereographic',\n  Craster = 'Craster',\n  Baker = 'Baker',\n  Armadillo = 'Armadillo',\n  Aitoff = 'Aitoff',\n  Fahey = 'Fahey',\n  Robinson = 'Robinson',\n}\n\nexport const MapProjection = {\n  // Projections form `d3-geo`\n  [MapProjectionKind.Mercator]: geoMercator,\n  [MapProjectionKind.Equirectangular]: geoEquirectangular,\n  [MapProjectionKind.AzimuthalEqualArea]: geoAzimuthalEqualArea,\n  [MapProjectionKind.AzimuthalEquidistant]: geoAzimuthalEquidistant,\n  [MapProjectionKind.Gnomonic]: geoGnomonic,\n  [MapProjectionKind.Orthographic]: geoOrthographic,\n  [MapProjectionKind.Stereographic]: geoStereographic,\n  [MapProjectionKind.EqualEarth]: geoEqualEarth,\n  [MapProjectionKind.AlbersUsa]: geoAlbersUsa,\n  [MapProjectionKind.Albers]: geoAlbers,\n  [MapProjectionKind.ConicConformal]: geoConicConformal,\n  [MapProjectionKind.ConicEqualArea]: geoConicEqualArea,\n  [MapProjectionKind.ConicEquidistant]: geoConicEquidistant,\n  [MapProjectionKind.TransverseMercator]: geoTransverseMercator,\n  [MapProjectionKind.NaturalEarth1]: geoNaturalEarth1,\n\n  // Projections form `d3-geo-projection`\n  [MapProjectionKind.Bromley]: geoBromley as () => GeoProjection,\n  [MapProjectionKind.NaturalEarth2]: geoNaturalEarth2 as () => GeoProjection,\n  [MapProjectionKind.Kavrayskiy7]: geoKavrayskiy7 as () => GeoProjection,\n  [MapProjectionKind.Hufnagel]: geoHufnagel as () => GeoProjection,\n  [MapProjectionKind.FoucautSinusoidal]: geoFoucautSinusoidal as () => GeoProjection,\n  [MapProjectionKind.Eckert1]: geoEckert1 as () => GeoProjection,\n  [MapProjectionKind.Eckert3]: geoEckert3 as () => GeoProjection,\n  [MapProjectionKind.Boggs]: geoBoggs as () => GeoProjection,\n  [MapProjectionKind.CylindricalStereographic]: geoCylindricalStereographic as () => GeoProjection,\n  [MapProjectionKind.Craster]: geoCraster as () => GeoProjection,\n  [MapProjectionKind.Baker]: geoBaker as () => GeoProjection,\n  [MapProjectionKind.Armadillo]: geoArmadillo as () => GeoProjection,\n  [MapProjectionKind.Aitoff]: geoAitoff as () => GeoProjection,\n  [MapProjectionKind.Fahey]: geoFahey as () => GeoProjection,\n  [MapProjectionKind.Robinson]: geoRobinson as () => GeoProjection,\n}\n\n", "import { GeoProjection } from 'd3-geo'\nimport { ComponentConfigInterface, ComponentDefaultConfig } from 'core/component/config'\n\n// Types\nimport { ColorAccessor, NumericAccessor, StringAccessor } from 'types/accessor'\n\n// Local Types\nimport { MapPointLabelPosition } from './types'\n\nexport interface TopoJSONMapConfigInterface<\n  AreaDatum,\n  PointDatum = unknown,\n  LinkDatum = unknown,\n> extends ComponentConfigInterface {\n  // General\n  /** MapProjection (aka D3's GeoProjection) instance. Default: `MapProjection.Kavrayskiy7()` */\n  projection?: GeoProjection;\n  /** Map data in the TopoJSON topology format. Default: `undefined` */\n  topojson?: TopoJSON.Topology;\n  /** Name of the map features to be displayed, e.g. 'countries' or 'counties'. Default: `countries` */\n  mapFeatureName?: string;\n  /** Set initial map fit to points instead of topojson features. Default: `false` */\n  mapFitToPoints?: boolean;\n  /** Initial zoom level. Default: `undefined` */\n  zoomFactor?: number;\n  /** Disable pan / zoom interactions. Default: `false` */\n  disableZoom?: boolean;\n  /** Zoom extent. Default: `[0.5, 6]` */\n  zoomExtent?: number[];\n  /** Zoom animation duration. Default: `400` */\n  zoomDuration?: number;\n\n  /** Link width value or accessor function. Default: `d => d.width ?? 1` */\n  linkWidth?: NumericAccessor<LinkDatum>;\n  /** Link color value or accessor function. Default: `d => d.color ?? null` */\n  linkColor?: ColorAccessor<LinkDatum>;\n  /** Link cursor value or accessor function. Default: `null` */\n  linkCursor?: StringAccessor<LinkDatum>;\n  /** Link id accessor function. Default: `d => d.id` */\n  linkId?: StringAccessor<LinkDatum>;\n  /** Link source accessor function. Default: `d => d.source` */\n  linkSource?: ((l: LinkDatum) => number | string | PointDatum);\n  /** Link target accessor function. Default: `d => d.target` */\n  linkTarget?: ((l: LinkDatum) => number | string | PointDatum);\n\n  /** Area id accessor function corresponding to the feature id from TopoJSON. Default: `d => d.id ?? ''` */\n  areaId?: StringAccessor<AreaDatum>;\n  /** Area color value or accessor function. Default: `d => d.color ?? null` */\n  areaColor?: ColorAccessor<AreaDatum>;\n  /** Area cursor value or accessor function. Default: `null` */\n  areaCursor?: StringAccessor<AreaDatum>;\n\n  /** Point color accessor. Default: `d => d.color ?? null` */\n  pointColor?: ColorAccessor<PointDatum>;\n  /** Point radius accessor. Default: `d => d.radius ?? 8` */\n  pointRadius?: NumericAccessor<PointDatum>;\n  /** Point stroke width accessor. Default: `d => d.strokeWidth ?? null` */\n  pointStrokeWidth?: NumericAccessor<PointDatum>;\n  /** Point cursor constant value or accessor function. Default: `null` */\n  pointCursor?: StringAccessor<PointDatum>;\n  /** Point longitude accessor function. Default: `d => d.longitude ?? null` */\n  longitude?: NumericAccessor<PointDatum>;\n  /** Point latitude accessor function. Default: `d => d.latitude ?? null` */\n  latitude?: NumericAccessor<PointDatum>;\n  /** Point label accessor function. Default: `undefined` */\n  pointLabel?: StringAccessor<PointDatum>;\n  /** Point label position. Default: `Position.Bottom` */\n  pointLabelPosition?: MapPointLabelPosition;\n  /** Point color brightness ratio for switching between dark and light text label color. Default: `0.65` */\n  pointLabelTextBrightnessRatio?: number;\n  /** Point id accessor function. Default: `d => d.id` */\n  pointId?: ((d: PointDatum, i: number) => string);\n\n  /** Enables blur and blending between neighbouring points. Default: `false` */\n  heatmapMode?: boolean;\n  /** Heatmap blur filter stdDeviation value. Default: `10` */\n  heatmapModeBlurStdDeviation?: number;\n  /** Zoom level at which the heatmap mode will be disabled. Default: `2.5` */\n  heatmapModeZoomLevelThreshold?: number;\n}\n\nexport const TopoJSONMapDefaultConfig: TopoJSONMapConfigInterface<unknown, unknown, unknown> = {\n  ...ComponentDefaultConfig,\n  projection: undefined,\n  duration: 1500,\n  topojson: undefined,\n  mapFeatureName: 'countries',\n  mapFitToPoints: false,\n\n  zoomExtent: [0.5, 6],\n  zoomDuration: 400,\n  disableZoom: false,\n  zoomFactor: undefined,\n\n  linkWidth: (d: unknown): number => (d as { width: number }).width ?? 1,\n  linkColor: (d: unknown): string => (d as { color: string }).color ?? null,\n  linkCursor: null,\n  linkId: (d: unknown, i: number | undefined): string => `${(d as { id: string }).id ?? i}`,\n  linkSource: (d: unknown): (number | string | unknown) => (d as { source: string }).source,\n  linkTarget: (d: unknown): (number | string | unknown) => (d as { target: string }).target,\n\n  areaId: (d: unknown): string => (d as { id: string }).id ?? '',\n  areaColor: (d: unknown): string => (d as { color: string }).color ?? null,\n  areaCursor: null,\n\n  longitude: (d: unknown): number => (d as { longitude: number }).longitude,\n  latitude: (d: unknown): number => (d as { latitude: number }).latitude,\n  pointColor: (d: unknown): string => (d as { color: string }).color ?? null,\n  pointRadius: (d: unknown): number => (d as { radius: number }).radius ?? 8,\n  pointStrokeWidth: (d: unknown): number => (d as { strokeWidth: number }).strokeWidth ?? 0,\n  pointCursor: null,\n  pointLabel: undefined,\n  pointLabelPosition: MapPointLabelPosition.Bottom,\n  pointLabelTextBrightnessRatio: 0.65,\n  pointId: (d: unknown): string => (d as { id: string }).id,\n\n  heatmapMode: false,\n  heatmapModeBlurStdDeviation: 8,\n  heatmapModeZoomLevelThreshold: 2.5,\n}\n\n", "import { getNumber } from 'utils/data'\n\n// Config\nimport { NumericAccessor } from 'types/accessor'\n\nexport function getLonLat<Datum> (d: Datum, pointLongitude: NumericAccessor<Datum>, pointLatitude: NumericAccessor<Datum>): [number, number] {\n  const lat = getNumber(d, pointLatitude)\n  const lon = getNumber(d, pointLongitude)\n  return [lon, lat]\n}\n\nexport function arc (source?: number[], target?: number[], curvature?: number): string {\n  if (!target || !source) return 'M0,0,l0,0z'\n  const d = 3\n  const angleOffset = curvature || 0\n  const s = { x: source[0], y: source[1] }\n  const t = { x: target[0], y: target[1] }\n  const ds = { x: (t.x - s.x) / d, y: (t.y - s.y) / d }\n  const dt = { x: (s.x - t.x) / d, y: (s.y - t.y) / d }\n  let angle = 0.16667 * Math.PI * (1 + angleOffset)\n  if (s.x < t.x) angle = -angle\n  const cs = Math.cos(angle)\n  const ss = Math.sin(angle)\n  const ct = Math.cos(-angle)\n  const st = Math.sin(-angle)\n  const dds = { x: (cs * ds.x) - (ss * ds.y), y: (ss * ds.x) + (cs * ds.y) }\n  const ddt = { x: (ct * dt.x) - (st * dt.y), y: (st * dt.x) + (ct * dt.y) }\n  return `M${s.x},${s.y} C${s.x + dds.x},${s.y + dds.y} ${t.x + ddt.x},${t.y + ddt.y} ${t.x},${t.y}`\n}\n", "import { css, injectGlobal } from '@emotion/css'\n\nexport const root = css`\n  label: topojson-map-component;\n\n  &.draggable {\n    &:active {\n      cursor: grabbing;\n      cursor: -moz-grabbing;\n      cursor: -webkit-grabbing;\n    }\n  }\n`\n\nexport const variables = injectGlobal`\n  :root {\n    --vis-map-feature-color: #dce3eb;\n    --vis-map-boundary-color: #ffffff;\n\n    --vis-map-point-label-text-color-dark: #5b5f6d;\n    --vis-map-point-label-text-color-light: #fff;\n\n    // Undefined by default to allow proper fallback to var(--vis-font-family)\n    /* --vis-map-point-label-font-family: */\n    --vis-map-point-label-font-weight: 600;\n    --vis-map-point-label-font-size: 12px;\n\n    /* Dark Theme */\n    --vis-dark-map-feature-color: #5b5f6d;\n    --vis-dark-map-boundary-color: #2a2a2a;\n    --vis-dark-map-point-label-text-color-dark: #fff;\n    --vis-dark-map-point-label-text-color-light:#5b5f6d;\n  }\n\n  body.theme-dark ${`.${root}`} {\n    --vis-map-feature-color: var(--vis-dark-map-feature-color);\n    --vis-map-boundary-color: var(--vis-dark-map-boundary-color);\n    --vis-map-point-label-text-color-dark: var(--vis-dark-map-point-label-text-color-dark);\n    --vis-map-point-label-text-color-light: var(--vis-dark-map-point-label-text-color-light);\n  }\n`\n\nexport const features = css`\n  label: features;\n`\n\nexport const feature = css`\n  label: feature;\n  fill: var(--vis-map-feature-color);\n  stroke: var(--vis-map-boundary-color);\n  stroke-opacity: 0.5;\n`\n\nexport const background = css`\n  label: background;\n\n  fill-opacity: 0;\n  pointer-events: all;\n`\n\nexport const points = css`\n  label: points;\n`\n\nexport const point = css`\n  label: point;\n`\n\nexport const pointCircle = css`\n  label: point;\n\n  stroke-opacity: 0.4;\n  pointer-events: fill;\n\n  &:active {\n    cursor: default;\n  }\n`\n\nexport const pointLabel = css`\n  label: label;\n\n  text-anchor: middle;\n  cursor: default;\n  pointer-events:none;\n\n  font-size: var(--vis-map-point-label-font-size);\n  font-family: var(--vis-map-point-label-font-family, var(--vis-font-family));\n  font-weight: var(--vis-map-point-label-font-weight);\n  fill: var(--vis-map-point-label-text-color-dark);\n`\n\nexport const links = css`\n  label: links;\n`\n\nexport const link = css`\n  label: link;\n\n  fill: none;\n  stroke-opacity: .50;\n  stroke-linecap: round;\n\n  &:hover {\n    stroke-opacity: .90;\n  }\n`\n", "import { Selection } from 'd3-selection'\nimport { D3ZoomEvent, zoom, ZoomBehavior, zoomIdentity, ZoomTransform } from 'd3-zoom'\nimport { timeout } from 'd3-timer'\nimport { geoPath, GeoProjection, ExtendedFeatureCollection } from 'd3-geo'\nimport { color } from 'd3-color'\nimport { feature } from 'topojson-client'\n\n// Core\nimport { ComponentCore } from 'core/component'\nimport { MapGraphDataModel } from 'data-models/map-graph'\n\n// Utils\nimport { clamp, getNumber, getString, isNumber } from 'utils/data'\nimport { smartTransition } from 'utils/d3'\nimport { getColor, hexToBrightness } from 'utils/color'\nimport { getCSSVariableValue, isStringCSSVariable } from 'utils/misc'\n\n// Types\nimport { MapLink } from 'types/map'\n\n// Local Types\nimport { MapData, MapFeature, MapPointLabelPosition, MapProjection } from './types'\n\n// Config\nimport { TopoJSONMapDefaultConfig, TopoJSONMapConfigInterface } from './config'\n\n// Modules\nimport { arc, getLonLat } from './utils'\n\n// Styles\nimport * as s from './style'\n\nexport class TopoJSONMap<\n  AreaDatum,\n  PointDatum = unknown,\n  LinkDatum = unknown,\n> extends ComponentCore<\n  MapData<AreaDatum, PointDatum, LinkDatum>,\n  TopoJSONMapConfigInterface<AreaDatum, PointDatum, LinkDatum>\n  > {\n  static selectors = s\n  protected _defaultConfig = TopoJSONMapDefaultConfig as TopoJSONMapConfigInterface<AreaDatum, PointDatum, LinkDatum>\n  public config: TopoJSONMapConfigInterface<AreaDatum, PointDatum, LinkDatum> = this._defaultConfig\n\n  datamodel: MapGraphDataModel<AreaDatum, PointDatum, LinkDatum> = new MapGraphDataModel()\n  g: Selection<SVGGElement, unknown, null, undefined>\n  private _firstRender = true\n  private _isResizing = false\n  private _initialScale: number = undefined\n  private _center: [number, number]\n  private _currentZoomLevel: number = undefined\n  private _transform: ZoomTransform\n  private _path = geoPath()\n  private _projection: GeoProjection\n  private _prevWidth: number\n  private _prevHeight: number\n  private _animFrameId: number\n\n  private _featureCollection: GeoJSON.FeatureCollection\n  private _zoomBehavior: ZoomBehavior<SVGGElement, unknown> = zoom()\n  private _backgroundRect = this.g.append('rect').attr('class', s.background)\n  private _featuresGroup = this.g.append('g').attr('class', s.features)\n  private _linksGroup = this.g.append('g').attr('class', s.links)\n  private _pointsGroup = this.g.append('g').attr('class', s.points)\n\n  events = {\n    [TopoJSONMap.selectors.point]: {},\n    [TopoJSONMap.selectors.feature]: {},\n  }\n\n  constructor (config?: TopoJSONMapConfigInterface<AreaDatum, PointDatum, LinkDatum>, data?: MapData<AreaDatum, PointDatum, LinkDatum>) {\n    super()\n    this._zoomBehavior.on('zoom', this._onZoom.bind(this))\n\n    if (config) this.setConfig(config)\n    if (data) this.setData(data)\n\n    this.g.append('defs')\n      .append('filter')\n      .attr('id', 'heatmapFilter')\n      .html(`\n        <feGaussianBlur in=\"SourceGraphic\" stdDeviation=\"${this.config.heatmapModeBlurStdDeviation}\" color-interpolation-filters=\"sRGB\" result=\"blur\"></feGaussianBlur>\n        <feColorMatrix class=\"blurValues\" in=\"blur\" mode=\"matrix\" values=\"1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 20 -4\"></feColorMatrix>\n      `)\n  }\n\n  setData (data: MapData<AreaDatum, PointDatum, LinkDatum>): void {\n    const { config } = this\n\n    this.datamodel.pointId = config.pointId\n    this.datamodel.linkSource = config.linkSource\n    this.datamodel.linkTarget = config.linkTarget\n    this.datamodel.data = data\n\n    // If there was a data change and mapFitToPoints is enabled, we will need to re-fit the map\n    this._firstRender = this._firstRender || config.mapFitToPoints\n  }\n\n  setConfig (config?: TopoJSONMapConfigInterface<AreaDatum, PointDatum, LinkDatum>): void {\n    super.setConfig(config)\n\n    // Setting the default here instead of defaultConfig to prevent mutation from other TopoJSONMap instances\n    const newProjection = this.config.projection ?? MapProjection.Kavrayskiy7()\n    if (this._projection) {\n      newProjection.scale(this._projection.scale()).translate(this._projection.translate())\n    }\n    this._projection = newProjection\n  }\n\n  _render (customDuration?: number): void {\n    const { config } = this\n    const duration = isNumber(customDuration) ? customDuration : config.duration\n\n    this._renderBackground()\n    this._renderMap(duration)\n    this._renderGroups(duration)\n    this._renderLinks(duration)\n    this._renderPoints(duration)\n\n    // When animation is running we need to temporary disable zoom behaviour\n    if (duration && !config.disableZoom) {\n      this.g.on('.zoom', null)\n      timeout(() => {\n        this.g.call(this._zoomBehavior)\n      }, duration)\n    }\n\n    // When zoom behaviour is active we assign the `draggable` class to show the grabbing cursor\n    this.g.classed('draggable', !config.disableZoom)\n    this._firstRender = false\n  }\n\n  _renderBackground (): void {\n    this._backgroundRect\n      .attr('width', '100%')\n      .attr('height', '100%')\n      .attr('transform', `translate(${-this.bleed.left}, ${-this.bleed.top})`)\n  }\n\n  _renderGroups (duration: number): void {\n    const transformString = this._transform.toString()\n    smartTransition(this._featuresGroup, duration)\n      .attr('transform', transformString)\n      .attr('stroke-width', 1 / this._currentZoomLevel)\n\n    smartTransition(this._linksGroup, duration)\n      .attr('transform', transformString)\n\n    smartTransition(this._pointsGroup, duration)\n      .attr('transform', transformString)\n  }\n\n  _renderMap (duration: number): void {\n    const { bleed, config, datamodel } = this\n\n    this.g.attr('transform', `translate(${bleed.left}, ${bleed.top})`)\n    const mapData: TopoJSON.Topology = config.topojson\n    const featureName = config.mapFeatureName\n    const featureObject = mapData?.objects?.[featureName]\n    if (!featureObject) return\n\n    this._featureCollection = feature(mapData, featureObject) as GeoJSON.FeatureCollection\n    const featureData = (this._featureCollection?.features ?? []) as MapFeature<AreaDatum>[]\n\n    if (this._firstRender) {\n      // Rendering the map for the first time.\n      this._projection.fitExtent([[0, 0], [this._width, this._height]], this._featureCollection)\n      this._initialScale = this._projection.scale()\n      this._center = this._projection.translate()\n\n      if (config.mapFitToPoints) {\n        this._fitToPoints()\n      }\n\n      const zoomExtent = config.zoomExtent\n      this._zoomBehavior.scaleExtent([zoomExtent[0] * this._initialScale, zoomExtent[1] * this._initialScale])\n      this.setZoom(config.zoomFactor || 1)\n\n      if (!config.disableZoom) {\n        this.g.call(this._zoomBehavior)\n        this._applyZoom()\n      }\n\n      this._prevWidth = this._width\n      this._prevHeight = this._height\n    }\n\n    if (this._prevWidth !== this._width || this._prevHeight !== this._height) {\n      this._onResize()\n    }\n\n\n    this._path.projection(this._projection)\n\n    // Merge passed area data and map feature data\n    const areaData = datamodel.areas\n    areaData.forEach(a => {\n      const feature = featureData.find(f => f.id.toString() === getString(a, config.areaId).toString())\n      if (feature) feature.data = a\n      else if (this._firstRender) console.warn(`Can't find feature by area code ${getString(a, config.areaId)}`)\n    })\n\n    const features = this._featuresGroup\n      .selectAll<SVGPathElement, unknown>(`.${s.feature}`)\n      .data(featureData)\n\n    const featuresEnter = features.enter().append('path').attr('class', s.feature)\n    smartTransition(featuresEnter.merge(features), duration)\n      .attr('d', this._path)\n      .style('fill', (d, i) => d.data ? getColor(d.data, config.areaColor, i) : null)\n      .style('cursor', d => d.data ? getString(d.data, config.areaCursor) : null)\n    features.exit().remove()\n  }\n\n  _renderLinks (duration: number): void {\n    const { config, datamodel } = this\n    const links = datamodel.links\n\n    const edges = this._linksGroup\n      .selectAll<SVGPathElement, MapLink<PointDatum, LinkDatum>>(`.${s.link}`)\n      .data(links, (d, i) => getString(d, config.linkId, i))\n\n    const edgesEnter = edges.enter().append('path').attr('class', s.link)\n      .style('stroke-width', 0)\n\n    smartTransition(edgesEnter.merge(edges), duration)\n      .attr('d', link => {\n        const source = this._projection(getLonLat(link.source, config.longitude, config.latitude))\n        const target = this._projection(getLonLat(link.target, config.longitude, config.latitude))\n        return arc(source, target)\n      })\n      .style('stroke-width', link => getNumber(link, config.linkWidth) / this._currentZoomLevel)\n      .style('cursor', link => getString(link, config.linkCursor))\n      .style('stroke', (link, i) => getColor(link, config.linkColor, i))\n    edges.exit().remove()\n  }\n\n  _renderPoints (duration: number): void {\n    const { config, datamodel } = this\n    const pointData = datamodel.points\n\n    const points = this._pointsGroup\n      .selectAll<SVGGElement, PointDatum>(`.${s.point}`)\n      .data(pointData, (d, i) => getString(d, config.pointId, i))\n\n    // Enter\n    const pointsEnter = points.enter().append('g').attr('class', s.point)\n      .attr('transform', d => {\n        const pos = this._projection(getLonLat(d, config.longitude, config.latitude))\n        return `translate(${pos[0]},${pos[1]})`\n      })\n      .style('opacity', 0)\n\n    pointsEnter.append('circle').attr('class', s.pointCircle)\n      .attr('r', 0)\n      .style('fill', (d, i) => getColor(d, config.pointColor, i))\n      .style('stroke-width', d => getNumber(d, config.pointStrokeWidth))\n\n    pointsEnter.append('text').attr('class', s.pointLabel)\n      .style('opacity', 0)\n\n    // Update\n    const pointsMerged = pointsEnter.merge(points)\n    smartTransition(pointsMerged, duration)\n      .attr('transform', d => {\n        const pos = this._projection(getLonLat(d, config.longitude, config.latitude))\n        return `translate(${pos[0]},${pos[1]})`\n      })\n      .style('cursor', d => getString(d, config.pointCursor))\n      .style('opacity', 1)\n\n    smartTransition(pointsMerged.select(`.${s.pointCircle}`), duration)\n      .attr('r', d => getNumber(d, config.pointRadius) / this._currentZoomLevel)\n      .style('fill', (d, i) => getColor(d, config.pointColor, i))\n      .style('stroke', (d, i) => getColor(d, config.pointColor, i))\n      .style('stroke-width', d => getNumber(d, config.pointStrokeWidth) / this._currentZoomLevel)\n\n    const pointLabelsMerged = pointsMerged.select(`.${s.pointLabel}`)\n    pointLabelsMerged\n      .text(d => getString(d, config.pointLabel) ?? '')\n      .style('font-size', d => {\n        if (config.pointLabelPosition === MapPointLabelPosition.Bottom) {\n          return `calc(var(--vis-map-point-label-font-size) / ${this._currentZoomLevel}`\n        }\n        const pointDiameter = 2 * getNumber(d, config.pointRadius)\n        const pointLabelText = getString(d, config.pointLabel) || ''\n        const textLength = pointLabelText.length\n        const fontSize = 0.5 * pointDiameter / Math.pow(textLength, 0.4)\n        return clamp(fontSize, fontSize, 16)\n      })\n      .attr('y', d => {\n        if (config.pointLabelPosition === MapPointLabelPosition.Center) return null\n\n        const pointRadius = getNumber(d, config.pointRadius) / this._currentZoomLevel\n        return pointRadius\n      })\n      .attr('dy', config.pointLabelPosition === MapPointLabelPosition.Center ? '0.32em' : '1em')\n\n    smartTransition(pointLabelsMerged, duration)\n      .style('fill', (d, i) => {\n        if (config.pointLabelPosition === MapPointLabelPosition.Bottom) return null\n\n        const pointColor = getColor(d, config.pointColor, i)\n        const hex = color(isStringCSSVariable(pointColor) ? getCSSVariableValue(pointColor, this.element) : pointColor)?.hex()\n        if (!hex) return null\n\n        const brightness = hexToBrightness(hex)\n        return brightness > config.pointLabelTextBrightnessRatio ? 'var(--vis-map-point-label-text-color-dark)' : 'var(--vis-map-point-label-text-color-light)'\n      })\n      .style('opacity', 1)\n\n    // Exit\n    points.exit().remove()\n\n    // Heatmap\n    this._pointsGroup.style('filter', (config.heatmapMode && this._currentZoomLevel < config.heatmapModeZoomLevelThreshold) ? 'url(#heatmapFilter)' : null)\n    this._pointsGroup.selectAll(`.${s.pointLabel}`).style('display', (config.heatmapMode && (this._currentZoomLevel < config.heatmapModeZoomLevelThreshold)) ? 'none' : null)\n  }\n\n  _fitToPoints (points?: PointDatum[], pad = 0.1): void {\n    const { config, datamodel } = this\n    const pointData = points || datamodel.points\n    if (pointData.length === 0) return\n\n    this.fitView()\n\n    const featureCollection: ExtendedFeatureCollection = {\n      type: 'FeatureCollection',\n      features: [{\n        type: 'Feature',\n        properties: {},\n        geometry: {\n          type: 'MultiPoint',\n          coordinates: pointData.map(p => {\n            return [\n              getNumber(p, d => getNumber(d, config.longitude)),\n              getNumber(p, d => getNumber(d, config.latitude)),\n            ]\n          }),\n        },\n      }],\n    }\n\n    this._projection.fitExtent([\n      [this._width * pad, this._height * pad],\n      [this._width * (1 - pad), this._height * (1 - pad)],\n    ], featureCollection)\n\n    const maxScale = config.zoomExtent[1] * this._initialScale\n    const fittedScale = this._projection.scale()\n\n    if (fittedScale > maxScale) {\n      const fittedTranslate = this._projection.translate()\n      const scaleRatio = maxScale / fittedScale\n\n      this._projection.scale(maxScale)\n      this._projection.translate([\n        this._width / 2 - (this._width / 2 - fittedTranslate[0]) * scaleRatio,\n        this._height / 2 - (this._height / 2 - fittedTranslate[1]) * scaleRatio,\n      ])\n    }\n\n    // If we don't update the center, the next zoom will be centered around the previous value\n    this._center = this._projection.translate()\n    this._applyZoom()\n  }\n\n  _applyZoom (): void {\n    const translate = this._center ?? this._projection.translate()\n    const scale = this._initialScale * this._currentZoomLevel\n    this.g.call(this._zoomBehavior.transform, zoomIdentity.translate(translate[0], translate[1]).scale(scale))\n  }\n\n  _onResize (): void {\n    this._isResizing = true\n    const prevTranslate = this._projection.translate()\n\n    this._projection.fitExtent([[0, 0], [this._width, this._height]], this._featureCollection)\n    this._initialScale = this._projection.scale()\n    this._center = [\n      this._projection.translate()[0] * this._center[0] / prevTranslate[0],\n      this._projection.translate()[1] * this._center[1] / prevTranslate[1],\n    ]\n    this._applyZoom()\n\n    this._isResizing = false\n    this._prevWidth = this._width\n    this._prevHeight = this._height\n  }\n\n  _onZoom (event: D3ZoomEvent<any, any>): void {\n    if (this._firstRender) return // To prevent double render because of binding zoom behaviour\n    const isMouseEvent = event.sourceEvent !== undefined\n    const isExternalEvent = !event?.sourceEvent && !this._isResizing\n\n    window.cancelAnimationFrame(this._animFrameId)\n    this._animFrameId = window.requestAnimationFrame(this._onZoomHandler.bind(this, event.transform, isMouseEvent, isExternalEvent))\n\n    if (isMouseEvent) {\n      // Update the center coordinate so that the next call to _applyZoom()\n      // will zoom with respect to the current view\n      this._center = [event.transform.x, event.transform.y]\n    }\n    this._currentZoomLevel = (event?.transform.k / this._initialScale) || 1\n  }\n\n  _onZoomHandler (transform: ZoomTransform, isMouseEvent: boolean, isExternalEvent: boolean): void {\n    const scale = transform.k / this._initialScale || 1\n    const center = this._projection.translate()\n\n    this._transform = zoomIdentity\n      .translate(transform.x - center[0] * scale, transform.y - center[1] * scale)\n      .scale(scale)\n\n    const customDuration = isExternalEvent\n      ? this.config.zoomDuration\n      : (isMouseEvent ? 0 : null)\n\n    // Call render functions that depend on this._transform\n    this._renderGroups(customDuration)\n    this._renderLinks(customDuration)\n    this._renderPoints(customDuration)\n  }\n\n  public zoomIn (increment = 0.5): void {\n    this.setZoom(this._currentZoomLevel + increment)\n  }\n\n  public zoomOut (increment = 0.5): void {\n    this.setZoom(this._currentZoomLevel - increment)\n  }\n\n  public setZoom (zoomLevel: number): void {\n    const { config } = this\n    this._currentZoomLevel = clamp(zoomLevel, config.zoomExtent[0], config.zoomExtent[1])\n    this._transform = zoomIdentity\n      .translate(this._center[0] * (1 - this._currentZoomLevel), this._center[1] * (1 - this._currentZoomLevel))\n      .scale(this._currentZoomLevel)\n    // We are using this._applyZoom() instead of directly calling this._render(config.zoomDuration) because\n    // we've to \"attach\" new transform to the map group element. Otherwise zoomBehavior  will not know\n    // that the zoom state has changed\n    this._applyZoom()\n  }\n\n  public fitView (): void {\n    this._projection.fitExtent([[0, 0], [this._width, this._height]], this._featureCollection)\n    this._currentZoomLevel = (this._projection?.scale() / this._initialScale) || 1\n    this._center = this._projection.translate()\n    // We are using this._applyZoom() instead of directly calling this._render(config.zoomDuration) because\n    // we've to \"attach\" new transform to the map group element. Otherwise zoomBehavior  will not know\n    // that the zoom state has changed\n    this._applyZoom()\n  }\n\n  destroy (): void {\n    window.cancelAnimationFrame(this._animFrameId)\n  }\n}\n", "function count(node) {\n  var sum = 0,\n      children = node.children,\n      i = children && children.length;\n  if (!i) sum = 1;\n  else while (--i >= 0) sum += children[i].value;\n  node.value = sum;\n}\n\nexport default function() {\n  return this.eachAfter(count);\n}\n", "export default function(callback, that) {\n  let index = -1;\n  for (const node of this) {\n    callback.call(that, node, ++index, this);\n  }\n  return this;\n}\n", "export default function(callback, that) {\n  var node = this, nodes = [node], children, i, index = -1;\n  while (node = nodes.pop()) {\n    callback.call(that, node, ++index, this);\n    if (children = node.children) {\n      for (i = children.length - 1; i >= 0; --i) {\n        nodes.push(children[i]);\n      }\n    }\n  }\n  return this;\n}\n", "export default function(callback, that) {\n  var node = this, nodes = [node], next = [], children, i, n, index = -1;\n  while (node = nodes.pop()) {\n    next.push(node);\n    if (children = node.children) {\n      for (i = 0, n = children.length; i < n; ++i) {\n        nodes.push(children[i]);\n      }\n    }\n  }\n  while (node = next.pop()) {\n    callback.call(that, node, ++index, this);\n  }\n  return this;\n}\n", "export default function(callback, that) {\n  let index = -1;\n  for (const node of this) {\n    if (callback.call(that, node, ++index, this)) {\n      return node;\n    }\n  }\n}\n", "export default function(value) {\n  return this.eachAfter(function(node) {\n    var sum = +value(node.data) || 0,\n        children = node.children,\n        i = children && children.length;\n    while (--i >= 0) sum += children[i].value;\n    node.value = sum;\n  });\n}\n", "export default function(compare) {\n  return this.eachBefore(function(node) {\n    if (node.children) {\n      node.children.sort(compare);\n    }\n  });\n}\n", "export default function(end) {\n  var start = this,\n      ancestor = leastCommonAncestor(start, end),\n      nodes = [start];\n  while (start !== ancestor) {\n    start = start.parent;\n    nodes.push(start);\n  }\n  var k = nodes.length;\n  while (end !== ancestor) {\n    nodes.splice(k, 0, end);\n    end = end.parent;\n  }\n  return nodes;\n}\n\nfunction leastCommonAncestor(a, b) {\n  if (a === b) return a;\n  var aNodes = a.ancestors(),\n      bNodes = b.ancestors(),\n      c = null;\n  a = aNodes.pop();\n  b = bNodes.pop();\n  while (a === b) {\n    c = a;\n    a = aNodes.pop();\n    b = bNodes.pop();\n  }\n  return c;\n}\n", "export default function() {\n  var node = this, nodes = [node];\n  while (node = node.parent) {\n    nodes.push(node);\n  }\n  return nodes;\n}\n", "export default function() {\n  return Array.from(this);\n}\n", "export default function() {\n  var leaves = [];\n  this.eachBefore(function(node) {\n    if (!node.children) {\n      leaves.push(node);\n    }\n  });\n  return leaves;\n}\n", "export default function() {\n  var root = this, links = [];\n  root.each(function(node) {\n    if (node !== root) { // Don’t include the root’s parent, if any.\n      links.push({source: node.parent, target: node});\n    }\n  });\n  return links;\n}\n", "export default function*() {\n  var node = this, current, next = [node], children, i, n;\n  do {\n    current = next.reverse(), next = [];\n    while (node = current.pop()) {\n      yield node;\n      if (children = node.children) {\n        for (i = 0, n = children.length; i < n; ++i) {\n          next.push(children[i]);\n        }\n      }\n    }\n  } while (next.length);\n}\n", "import node_count from \"./count.js\";\nimport node_each from \"./each.js\";\nimport node_eachBefore from \"./eachBefore.js\";\nimport node_eachAfter from \"./eachAfter.js\";\nimport node_find from \"./find.js\";\nimport node_sum from \"./sum.js\";\nimport node_sort from \"./sort.js\";\nimport node_path from \"./path.js\";\nimport node_ancestors from \"./ancestors.js\";\nimport node_descendants from \"./descendants.js\";\nimport node_leaves from \"./leaves.js\";\nimport node_links from \"./links.js\";\nimport node_iterator from \"./iterator.js\";\n\nexport default function hierarchy(data, children) {\n  if (data instanceof Map) {\n    data = [undefined, data];\n    if (children === undefined) children = mapChildren;\n  } else if (children === undefined) {\n    children = objectChildren;\n  }\n\n  var root = new Node(data),\n      node,\n      nodes = [root],\n      child,\n      childs,\n      i,\n      n;\n\n  while (node = nodes.pop()) {\n    if ((childs = children(node.data)) && (n = (childs = Array.from(childs)).length)) {\n      node.children = childs;\n      for (i = n - 1; i >= 0; --i) {\n        nodes.push(child = childs[i] = new Node(childs[i]));\n        child.parent = node;\n        child.depth = node.depth + 1;\n      }\n    }\n  }\n\n  return root.eachBefore(computeHeight);\n}\n\nfunction node_copy() {\n  return hierarchy(this).eachBefore(copyData);\n}\n\nfunction objectChildren(d) {\n  return d.children;\n}\n\nfunction mapChildren(d) {\n  return Array.isArray(d) ? d[1] : null;\n}\n\nfunction copyData(node) {\n  if (node.data.value !== undefined) node.value = node.data.value;\n  node.data = node.data.data;\n}\n\nexport function computeHeight(node) {\n  var height = 0;\n  do node.height = height;\n  while ((node = node.parent) && (node.height < ++height));\n}\n\nexport function Node(data) {\n  this.data = data;\n  this.depth =\n  this.height = 0;\n  this.parent = null;\n}\n\nNode.prototype = hierarchy.prototype = {\n  constructor: Node,\n  count: node_count,\n  each: node_each,\n  eachAfter: node_eachAfter,\n  eachBefore: node_eachBefore,\n  find: node_find,\n  sum: node_sum,\n  sort: node_sort,\n  path: node_path,\n  ancestors: node_ancestors,\n  descendants: node_descendants,\n  leaves: node_leaves,\n  links: node_links,\n  copy: node_copy,\n  [Symbol.iterator]: node_iterator\n};\n", "// https://en.wikipedia.org/wiki/Linear_congruential_generator#Parameters_in_common_use\nconst a = 1664525;\nconst c = 1013904223;\nconst m = 4294967296; // 2^32\n\nexport default function() {\n  let s = 1;\n  return () => (s = (a * s + c) % m) / m;\n}\n", "export default function(x) {\n  return typeof x === \"object\" && \"length\" in x\n    ? x // Array, TypedArray, NodeList, array-like\n    : Array.from(x); // Map, Set, iterable, string, or anything else\n}\n\nexport function shuffle(array, random) {\n  let m = array.length,\n      t,\n      i;\n\n  while (m) {\n    i = random() * m-- | 0;\n    t = array[m];\n    array[m] = array[i];\n    array[i] = t;\n  }\n\n  return array;\n}\n", "import {shuffle} from \"../array.js\";\nimport lcg from \"../lcg.js\";\n\nexport default function(circles) {\n  return packEncloseRandom(circles, lcg());\n}\n\nexport function packEncloseRandom(circles, random) {\n  var i = 0, n = (circles = shuffle(Array.from(circles), random)).length, B = [], p, e;\n\n  while (i < n) {\n    p = circles[i];\n    if (e && enclosesWeak(e, p)) ++i;\n    else e = encloseBasis(B = extendBasis(B, p)), i = 0;\n  }\n\n  return e;\n}\n\nfunction extendBasis(B, p) {\n  var i, j;\n\n  if (enclosesWeakAll(p, B)) return [p];\n\n  // If we get here then B must have at least one element.\n  for (i = 0; i < B.length; ++i) {\n    if (enclosesNot(p, B[i])\n        && enclosesWeakAll(encloseBasis2(B[i], p), B)) {\n      return [B[i], p];\n    }\n  }\n\n  // If we get here then B must have at least two elements.\n  for (i = 0; i < B.length - 1; ++i) {\n    for (j = i + 1; j < B.length; ++j) {\n      if (enclosesNot(encloseBasis2(B[i], B[j]), p)\n          && enclosesNot(encloseBasis2(B[i], p), B[j])\n          && enclosesNot(encloseBasis2(B[j], p), B[i])\n          && enclosesWeakAll(encloseBasis3(B[i], B[j], p), B)) {\n        return [B[i], B[j], p];\n      }\n    }\n  }\n\n  // If we get here then something is very wrong.\n  throw new Error;\n}\n\nfunction enclosesNot(a, b) {\n  var dr = a.r - b.r, dx = b.x - a.x, dy = b.y - a.y;\n  return dr < 0 || dr * dr < dx * dx + dy * dy;\n}\n\nfunction enclosesWeak(a, b) {\n  var dr = a.r - b.r + Math.max(a.r, b.r, 1) * 1e-9, dx = b.x - a.x, dy = b.y - a.y;\n  return dr > 0 && dr * dr > dx * dx + dy * dy;\n}\n\nfunction enclosesWeakAll(a, B) {\n  for (var i = 0; i < B.length; ++i) {\n    if (!enclosesWeak(a, B[i])) {\n      return false;\n    }\n  }\n  return true;\n}\n\nfunction encloseBasis(B) {\n  switch (B.length) {\n    case 1: return encloseBasis1(B[0]);\n    case 2: return encloseBasis2(B[0], B[1]);\n    case 3: return encloseBasis3(B[0], B[1], B[2]);\n  }\n}\n\nfunction encloseBasis1(a) {\n  return {\n    x: a.x,\n    y: a.y,\n    r: a.r\n  };\n}\n\nfunction encloseBasis2(a, b) {\n  var x1 = a.x, y1 = a.y, r1 = a.r,\n      x2 = b.x, y2 = b.y, r2 = b.r,\n      x21 = x2 - x1, y21 = y2 - y1, r21 = r2 - r1,\n      l = Math.sqrt(x21 * x21 + y21 * y21);\n  return {\n    x: (x1 + x2 + x21 / l * r21) / 2,\n    y: (y1 + y2 + y21 / l * r21) / 2,\n    r: (l + r1 + r2) / 2\n  };\n}\n\nfunction encloseBasis3(a, b, c) {\n  var x1 = a.x, y1 = a.y, r1 = a.r,\n      x2 = b.x, y2 = b.y, r2 = b.r,\n      x3 = c.x, y3 = c.y, r3 = c.r,\n      a2 = x1 - x2,\n      a3 = x1 - x3,\n      b2 = y1 - y2,\n      b3 = y1 - y3,\n      c2 = r2 - r1,\n      c3 = r3 - r1,\n      d1 = x1 * x1 + y1 * y1 - r1 * r1,\n      d2 = d1 - x2 * x2 - y2 * y2 + r2 * r2,\n      d3 = d1 - x3 * x3 - y3 * y3 + r3 * r3,\n      ab = a3 * b2 - a2 * b3,\n      xa = (b2 * d3 - b3 * d2) / (ab * 2) - x1,\n      xb = (b3 * c2 - b2 * c3) / ab,\n      ya = (a3 * d2 - a2 * d3) / (ab * 2) - y1,\n      yb = (a2 * c3 - a3 * c2) / ab,\n      A = xb * xb + yb * yb - 1,\n      B = 2 * (r1 + xa * xb + ya * yb),\n      C = xa * xa + ya * ya - r1 * r1,\n      r = -(Math.abs(A) > 1e-6 ? (B + Math.sqrt(B * B - 4 * A * C)) / (2 * A) : C / B);\n  return {\n    x: x1 + xa + xb * r,\n    y: y1 + ya + yb * r,\n    r: r\n  };\n}\n", "import array from \"../array.js\";\nimport lcg from \"../lcg.js\";\nimport {packEncloseRandom} from \"./enclose.js\";\n\nfunction place(b, a, c) {\n  var dx = b.x - a.x, x, a2,\n      dy = b.y - a.y, y, b2,\n      d2 = dx * dx + dy * dy;\n  if (d2) {\n    a2 = a.r + c.r, a2 *= a2;\n    b2 = b.r + c.r, b2 *= b2;\n    if (a2 > b2) {\n      x = (d2 + b2 - a2) / (2 * d2);\n      y = Math.sqrt(Math.max(0, b2 / d2 - x * x));\n      c.x = b.x - x * dx - y * dy;\n      c.y = b.y - x * dy + y * dx;\n    } else {\n      x = (d2 + a2 - b2) / (2 * d2);\n      y = Math.sqrt(Math.max(0, a2 / d2 - x * x));\n      c.x = a.x + x * dx - y * dy;\n      c.y = a.y + x * dy + y * dx;\n    }\n  } else {\n    c.x = a.x + c.r;\n    c.y = a.y;\n  }\n}\n\nfunction intersects(a, b) {\n  var dr = a.r + b.r - 1e-6, dx = b.x - a.x, dy = b.y - a.y;\n  return dr > 0 && dr * dr > dx * dx + dy * dy;\n}\n\nfunction score(node) {\n  var a = node._,\n      b = node.next._,\n      ab = a.r + b.r,\n      dx = (a.x * b.r + b.x * a.r) / ab,\n      dy = (a.y * b.r + b.y * a.r) / ab;\n  return dx * dx + dy * dy;\n}\n\nfunction Node(circle) {\n  this._ = circle;\n  this.next = null;\n  this.previous = null;\n}\n\nexport function packSiblingsRandom(circles, random) {\n  if (!(n = (circles = array(circles)).length)) return 0;\n\n  var a, b, c, n, aa, ca, i, j, k, sj, sk;\n\n  // Place the first circle.\n  a = circles[0], a.x = 0, a.y = 0;\n  if (!(n > 1)) return a.r;\n\n  // Place the second circle.\n  b = circles[1], a.x = -b.r, b.x = a.r, b.y = 0;\n  if (!(n > 2)) return a.r + b.r;\n\n  // Place the third circle.\n  place(b, a, c = circles[2]);\n\n  // Initialize the front-chain using the first three circles a, b and c.\n  a = new Node(a), b = new Node(b), c = new Node(c);\n  a.next = c.previous = b;\n  b.next = a.previous = c;\n  c.next = b.previous = a;\n\n  // Attempt to place each remaining circle…\n  pack: for (i = 3; i < n; ++i) {\n    place(a._, b._, c = circles[i]), c = new Node(c);\n\n    // Find the closest intersecting circle on the front-chain, if any.\n    // “Closeness” is determined by linear distance along the front-chain.\n    // “Ahead” or “behind” is likewise determined by linear distance.\n    j = b.next, k = a.previous, sj = b._.r, sk = a._.r;\n    do {\n      if (sj <= sk) {\n        if (intersects(j._, c._)) {\n          b = j, a.next = b, b.previous = a, --i;\n          continue pack;\n        }\n        sj += j._.r, j = j.next;\n      } else {\n        if (intersects(k._, c._)) {\n          a = k, a.next = b, b.previous = a, --i;\n          continue pack;\n        }\n        sk += k._.r, k = k.previous;\n      }\n    } while (j !== k.next);\n\n    // Success! Insert the new circle c between a and b.\n    c.previous = a, c.next = b, a.next = b.previous = b = c;\n\n    // Compute the new closest circle pair to the centroid.\n    aa = score(a);\n    while ((c = c.next) !== b) {\n      if ((ca = score(c)) < aa) {\n        a = c, aa = ca;\n      }\n    }\n    b = a.next;\n  }\n\n  // Compute the enclosing circle of the front chain.\n  a = [b._], c = b; while ((c = c.next) !== b) a.push(c._); c = packEncloseRandom(a, random);\n\n  // Translate the circles to put the enclosing circle around the origin.\n  for (i = 0; i < n; ++i) a = circles[i], a.x -= c.x, a.y -= c.y;\n\n  return c.r;\n}\n\nexport default function(circles) {\n  packSiblingsRandom(circles, lcg());\n  return circles;\n}\n", "export default function(node) {\n  node.x0 = Math.round(node.x0);\n  node.y0 = Math.round(node.y0);\n  node.x1 = Math.round(node.x1);\n  node.y1 = Math.round(node.y1);\n}\n", "export default function(parent, x0, y0, x1, y1) {\n  var nodes = parent.children,\n      node,\n      i = -1,\n      n = nodes.length,\n      k = parent.value && (x1 - x0) / parent.value;\n\n  while (++i < n) {\n    node = nodes[i], node.y0 = y0, node.y1 = y1;\n    node.x0 = x0, node.x1 = x0 += node.value * k;\n  }\n}\n", "import roundNode from \"./treemap/round.js\";\nimport treemapDice from \"./treemap/dice.js\";\n\nexport default function() {\n  var dx = 1,\n      dy = 1,\n      padding = 0,\n      round = false;\n\n  function partition(root) {\n    var n = root.height + 1;\n    root.x0 =\n    root.y0 = padding;\n    root.x1 = dx;\n    root.y1 = dy / n;\n    root.eachBefore(positionNode(dy, n));\n    if (round) root.eachBefore(roundNode);\n    return root;\n  }\n\n  function positionNode(dy, n) {\n    return function(node) {\n      if (node.children) {\n        treemapDice(node, node.x0, dy * (node.depth + 1) / n, node.x1, dy * (node.depth + 2) / n);\n      }\n      var x0 = node.x0,\n          y0 = node.y0,\n          x1 = node.x1 - padding,\n          y1 = node.y1 - padding;\n      if (x1 < x0) x0 = x1 = (x0 + x1) / 2;\n      if (y1 < y0) y0 = y1 = (y0 + y1) / 2;\n      node.x0 = x0;\n      node.y0 = y0;\n      node.x1 = x1;\n      node.y1 = y1;\n    };\n  }\n\n  partition.round = function(x) {\n    return arguments.length ? (round = !!x, partition) : round;\n  };\n\n  partition.size = function(x) {\n    return arguments.length ? (dx = +x[0], dy = +x[1], partition) : [dx, dy];\n  };\n\n  partition.padding = function(x) {\n    return arguments.length ? (padding = +x, partition) : padding;\n  };\n\n  return partition;\n}\n", "import {Node} from \"./hierarchy/index.js\";\n\nfunction defaultSeparation(a, b) {\n  return a.parent === b.parent ? 1 : 2;\n}\n\n// function radialSeparation(a, b) {\n//   return (a.parent === b.parent ? 1 : 2) / a.depth;\n// }\n\n// This function is used to traverse the left contour of a subtree (or\n// subforest). It returns the successor of v on this contour. This successor is\n// either given by the leftmost child of v or by the thread of v. The function\n// returns null if and only if v is on the highest level of its subtree.\nfunction nextLeft(v) {\n  var children = v.children;\n  return children ? children[0] : v.t;\n}\n\n// This function works analogously to nextLeft.\nfunction nextRight(v) {\n  var children = v.children;\n  return children ? children[children.length - 1] : v.t;\n}\n\n// Shifts the current subtree rooted at w+. This is done by increasing\n// prelim(w+) and mod(w+) by shift.\nfunction moveSubtree(wm, wp, shift) {\n  var change = shift / (wp.i - wm.i);\n  wp.c -= change;\n  wp.s += shift;\n  wm.c += change;\n  wp.z += shift;\n  wp.m += shift;\n}\n\n// All other shifts, applied to the smaller subtrees between w- and w+, are\n// performed by this function. To prepare the shifts, we have to adjust\n// change(w+), shift(w+), and change(w-).\nfunction executeShifts(v) {\n  var shift = 0,\n      change = 0,\n      children = v.children,\n      i = children.length,\n      w;\n  while (--i >= 0) {\n    w = children[i];\n    w.z += shift;\n    w.m += shift;\n    shift += w.s + (change += w.c);\n  }\n}\n\n// If vi-’s ancestor is a sibling of v, returns vi-’s ancestor. Otherwise,\n// returns the specified (default) ancestor.\nfunction nextAncestor(vim, v, ancestor) {\n  return vim.a.parent === v.parent ? vim.a : ancestor;\n}\n\nfunction TreeNode(node, i) {\n  this._ = node;\n  this.parent = null;\n  this.children = null;\n  this.A = null; // default ancestor\n  this.a = this; // ancestor\n  this.z = 0; // prelim\n  this.m = 0; // mod\n  this.c = 0; // change\n  this.s = 0; // shift\n  this.t = null; // thread\n  this.i = i; // number\n}\n\nTreeNode.prototype = Object.create(Node.prototype);\n\nfunction treeRoot(root) {\n  var tree = new TreeNode(root, 0),\n      node,\n      nodes = [tree],\n      child,\n      children,\n      i,\n      n;\n\n  while (node = nodes.pop()) {\n    if (children = node._.children) {\n      node.children = new Array(n = children.length);\n      for (i = n - 1; i >= 0; --i) {\n        nodes.push(child = node.children[i] = new TreeNode(children[i], i));\n        child.parent = node;\n      }\n    }\n  }\n\n  (tree.parent = new TreeNode(null, 0)).children = [tree];\n  return tree;\n}\n\n// Node-link tree diagram using the Reingold-Tilford \"tidy\" algorithm\nexport default function() {\n  var separation = defaultSeparation,\n      dx = 1,\n      dy = 1,\n      nodeSize = null;\n\n  function tree(root) {\n    var t = treeRoot(root);\n\n    // Compute the layout using Buchheim et al.’s algorithm.\n    t.eachAfter(firstWalk), t.parent.m = -t.z;\n    t.eachBefore(secondWalk);\n\n    // If a fixed node size is specified, scale x and y.\n    if (nodeSize) root.eachBefore(sizeNode);\n\n    // If a fixed tree size is specified, scale x and y based on the extent.\n    // Compute the left-most, right-most, and depth-most nodes for extents.\n    else {\n      var left = root,\n          right = root,\n          bottom = root;\n      root.eachBefore(function(node) {\n        if (node.x < left.x) left = node;\n        if (node.x > right.x) right = node;\n        if (node.depth > bottom.depth) bottom = node;\n      });\n      var s = left === right ? 1 : separation(left, right) / 2,\n          tx = s - left.x,\n          kx = dx / (right.x + s + tx),\n          ky = dy / (bottom.depth || 1);\n      root.eachBefore(function(node) {\n        node.x = (node.x + tx) * kx;\n        node.y = node.depth * ky;\n      });\n    }\n\n    return root;\n  }\n\n  // Computes a preliminary x-coordinate for v. Before that, FIRST WALK is\n  // applied recursively to the children of v, as well as the function\n  // APPORTION. After spacing out the children by calling EXECUTE SHIFTS, the\n  // node v is placed to the midpoint of its outermost children.\n  function firstWalk(v) {\n    var children = v.children,\n        siblings = v.parent.children,\n        w = v.i ? siblings[v.i - 1] : null;\n    if (children) {\n      executeShifts(v);\n      var midpoint = (children[0].z + children[children.length - 1].z) / 2;\n      if (w) {\n        v.z = w.z + separation(v._, w._);\n        v.m = v.z - midpoint;\n      } else {\n        v.z = midpoint;\n      }\n    } else if (w) {\n      v.z = w.z + separation(v._, w._);\n    }\n    v.parent.A = apportion(v, w, v.parent.A || siblings[0]);\n  }\n\n  // Computes all real x-coordinates by summing up the modifiers recursively.\n  function secondWalk(v) {\n    v._.x = v.z + v.parent.m;\n    v.m += v.parent.m;\n  }\n\n  // The core of the algorithm. Here, a new subtree is combined with the\n  // previous subtrees. Threads are used to traverse the inside and outside\n  // contours of the left and right subtree up to the highest common level. The\n  // vertices used for the traversals are vi+, vi-, vo-, and vo+, where the\n  // superscript o means outside and i means inside, the subscript - means left\n  // subtree and + means right subtree. For summing up the modifiers along the\n  // contour, we use respective variables si+, si-, so-, and so+. Whenever two\n  // nodes of the inside contours conflict, we compute the left one of the\n  // greatest uncommon ancestors using the function ANCESTOR and call MOVE\n  // SUBTREE to shift the subtree and prepare the shifts of smaller subtrees.\n  // Finally, we add a new thread (if necessary).\n  function apportion(v, w, ancestor) {\n    if (w) {\n      var vip = v,\n          vop = v,\n          vim = w,\n          vom = vip.parent.children[0],\n          sip = vip.m,\n          sop = vop.m,\n          sim = vim.m,\n          som = vom.m,\n          shift;\n      while (vim = nextRight(vim), vip = nextLeft(vip), vim && vip) {\n        vom = nextLeft(vom);\n        vop = nextRight(vop);\n        vop.a = v;\n        shift = vim.z + sim - vip.z - sip + separation(vim._, vip._);\n        if (shift > 0) {\n          moveSubtree(nextAncestor(vim, v, ancestor), v, shift);\n          sip += shift;\n          sop += shift;\n        }\n        sim += vim.m;\n        sip += vip.m;\n        som += vom.m;\n        sop += vop.m;\n      }\n      if (vim && !nextRight(vop)) {\n        vop.t = vim;\n        vop.m += sim - sop;\n      }\n      if (vip && !nextLeft(vom)) {\n        vom.t = vip;\n        vom.m += sip - som;\n        ancestor = v;\n      }\n    }\n    return ancestor;\n  }\n\n  function sizeNode(node) {\n    node.x *= dx;\n    node.y = node.depth * dy;\n  }\n\n  tree.separation = function(x) {\n    return arguments.length ? (separation = x, tree) : separation;\n  };\n\n  tree.size = function(x) {\n    return arguments.length ? (nodeSize = false, dx = +x[0], dy = +x[1], tree) : (nodeSize ? null : [dx, dy]);\n  };\n\n  tree.nodeSize = function(x) {\n    return arguments.length ? (nodeSize = true, dx = +x[0], dy = +x[1], tree) : (nodeSize ? [dx, dy] : null);\n  };\n\n  return tree;\n}\n", "export default function(parent, x0, y0, x1, y1) {\n  var nodes = parent.children,\n      node,\n      i = -1,\n      n = nodes.length,\n      k = parent.value && (y1 - y0) / parent.value;\n\n  while (++i < n) {\n    node = nodes[i], node.x0 = x0, node.x1 = x1;\n    node.y0 = y0, node.y1 = y0 += node.value * k;\n  }\n}\n", "import treemapDice from \"./dice.js\";\nimport treemapSlice from \"./slice.js\";\n\nexport var phi = (1 + Math.sqrt(5)) / 2;\n\nexport function squarifyRatio(ratio, parent, x0, y0, x1, y1) {\n  var rows = [],\n      nodes = parent.children,\n      row,\n      nodeValue,\n      i0 = 0,\n      i1 = 0,\n      n = nodes.length,\n      dx, dy,\n      value = parent.value,\n      sumValue,\n      minValue,\n      maxValue,\n      newRatio,\n      minRatio,\n      alpha,\n      beta;\n\n  while (i0 < n) {\n    dx = x1 - x0, dy = y1 - y0;\n\n    // Find the next non-empty node.\n    do sumValue = nodes[i1++].value; while (!sumValue && i1 < n);\n    minValue = maxValue = sumValue;\n    alpha = Math.max(dy / dx, dx / dy) / (value * ratio);\n    beta = sumValue * sumValue * alpha;\n    minRatio = Math.max(maxValue / beta, beta / minValue);\n\n    // Keep adding nodes while the aspect ratio maintains or improves.\n    for (; i1 < n; ++i1) {\n      sumValue += nodeValue = nodes[i1].value;\n      if (nodeValue < minValue) minValue = nodeValue;\n      if (nodeValue > maxValue) maxValue = nodeValue;\n      beta = sumValue * sumValue * alpha;\n      newRatio = Math.max(maxValue / beta, beta / minValue);\n      if (newRatio > minRatio) { sumValue -= nodeValue; break; }\n      minRatio = newRatio;\n    }\n\n    // Position and record the row orientation.\n    rows.push(row = {value: sumValue, dice: dx < dy, children: nodes.slice(i0, i1)});\n    if (row.dice) treemapDice(row, x0, y0, x1, value ? y0 += dy * sumValue / value : y1);\n    else treemapSlice(row, x0, y0, value ? x0 += dx * sumValue / value : x1, y1);\n    value -= sumValue, i0 = i1;\n  }\n\n  return rows;\n}\n\nexport default (function custom(ratio) {\n\n  function squarify(parent, x0, y0, x1, y1) {\n    squarifyRatio(ratio, parent, x0, y0, x1, y1);\n  }\n\n  squarify.ratio = function(x) {\n    return custom((x = +x) > 1 ? x : 1);\n  };\n\n  return squarify;\n})(phi);\n", "import treemapDice from \"./dice.js\";\nimport treemapSlice from \"./slice.js\";\nimport {phi, squarifyRatio} from \"./squarify.js\";\n\nexport default (function custom(ratio) {\n\n  function resquarify(parent, x0, y0, x1, y1) {\n    if ((rows = parent._squarify) && (rows.ratio === ratio)) {\n      var rows,\n          row,\n          nodes,\n          i,\n          j = -1,\n          n,\n          m = rows.length,\n          value = parent.value;\n\n      while (++j < m) {\n        row = rows[j], nodes = row.children;\n        for (i = row.value = 0, n = nodes.length; i < n; ++i) row.value += nodes[i].value;\n        if (row.dice) treemapDice(row, x0, y0, x1, value ? y0 += (y1 - y0) * row.value / value : y1);\n        else treemapSlice(row, x0, y0, value ? x0 += (x1 - x0) * row.value / value : x1, y1);\n        value -= row.value;\n      }\n    } else {\n      parent._squarify = rows = squarifyRatio(ratio, parent, x0, y0, x1, y1);\n      rows.ratio = ratio;\n    }\n  }\n\n  resquarify.ratio = function(x) {\n    return custom((x = +x) > 1 ? x : 1);\n  };\n\n  return resquarify;\n})(phi);\n", "import { min, max } from 'd3-array'\n\n// Types\nimport { NumericAccessor } from 'types/accessor'\n\n// Utils\nimport { getNumber } from 'utils/data'\n\nexport function getDataLatLngBounds<D> (\n  data: D[],\n  pointLatitude: NumericAccessor<D>,\n  pointLongitude: NumericAccessor<D>,\n  paddingDegrees = 1\n): [[number, number], [number, number]] {\n  const northWest = {\n    lat: max(data ?? [], d => getNumber(d, pointLatitude)),\n    lng: min(data ?? [], d => getNumber(d, pointLongitude)),\n  }\n\n  const southEast = {\n    lat: min(data ?? [], d => getNumber(d, pointLatitude)),\n    lng: max(data ?? [], d => getNumber(d, pointLongitude)),\n  }\n\n  return [\n    [northWest.lat + paddingDegrees || 90, northWest.lng - paddingDegrees || -180],\n    [southEast.lat - paddingDegrees || -70, southEast.lng + paddingDegrees || 180],\n  ]\n}\n", "// Core\nimport { CoreDataModel } from 'data-models/core'\n\n// Types\nimport { NumericAccessor } from 'types/accessor'\n\n// Utils\nimport { getDataLatLngBounds } from 'utils/map'\n\nexport class MapDataModel<PointDatum> extends CoreDataModel<PointDatum[]> {\n  getDataLatLngBounds (\n    pointLatitude: NumericAccessor<PointDatum>,\n    pointLongitude: NumericAccessor<PointDatum>,\n    paddingDegrees = 1\n  ): [[number, number], [number, number]] {\n    return getDataLatLngBounds(this.data, pointLatitude, pointLongitude, paddingDegrees)\n  }\n}\n", "import type L from 'leaflet'\nimport type { Map } from 'maplibre-gl'\n\n// Utils\nimport { throttle } from 'utils/data'\n\nexport function constraintMapView (map: L.Map, latMin = -75, latMax = 85): void {\n  const bounds = map.getBounds()\n  const northEast = bounds.getNorthEast()\n  const southWest = bounds.getSouthWest()\n\n  if (northEast.lat > latMax && southWest.lat < latMin) {\n    map.fitBounds([\n      [latMin, 0],\n      [latMax, 0],\n    ])\n  }\n}\n\nexport function mapboxglWheelEvent (\n  map: L.Map,\n  layer: L.Layer & { getMaplibreMap(): Map },\n  event: WheelEvent\n): void {\n  const { deltaY } = event\n  if (!layer || !layer.getMaplibreMap) return\n  const mapboxmap = layer.getMaplibreMap()\n  const delta = deltaY * -1\n\n  // Prevent Map from being zoomed-out too far away\n  const bounds = map.getBounds()\n  const northEast = bounds.getNorthEast()\n  const southWest = bounds.getSouthWest()\n  const latMin = -70\n  const latMax = 80\n  if (delta < 0 && northEast.lat > latMax && southWest.lat < latMin) {\n    constraintMapView(map)\n    return\n  }\n\n  const zoom = mapboxmap.getZoom() + delta * 0.001\n  const xy = map.mouseEventToLayerPoint(event)\n  map.setZoomAround(xy, zoom + 1, { animate: false })\n}\n\nexport const mapboxglWheelEventThrottled = throttle(mapboxglWheelEvent, 32)\nexport const constraintMapViewThrottled = throttle(constraintMapView, 1000)\n", "\nexport default function sortKD(ids, coords, nodeSize, left, right, depth) {\n    if (right - left <= nodeSize) return;\n\n    const m = (left + right) >> 1;\n\n    select(ids, coords, m, left, right, depth % 2);\n\n    sortKD(ids, coords, nodeSize, left, m - 1, depth + 1);\n    sortKD(ids, coords, nodeSize, m + 1, right, depth + 1);\n}\n\nfunction select(ids, coords, k, left, right, inc) {\n\n    while (right > left) {\n        if (right - left > 600) {\n            const n = right - left + 1;\n            const m = k - left + 1;\n            const z = Math.log(n);\n            const s = 0.5 * Math.exp(2 * z / 3);\n            const sd = 0.5 * Math.sqrt(z * s * (n - s) / n) * (m - n / 2 < 0 ? -1 : 1);\n            const newLeft = Math.max(left, Math.floor(k - m * s / n + sd));\n            const newRight = Math.min(right, Math.floor(k + (n - m) * s / n + sd));\n            select(ids, coords, k, newLeft, newRight, inc);\n        }\n\n        const t = coords[2 * k + inc];\n        let i = left;\n        let j = right;\n\n        swapItem(ids, coords, left, k);\n        if (coords[2 * right + inc] > t) swapItem(ids, coords, left, right);\n\n        while (i < j) {\n            swapItem(ids, coords, i, j);\n            i++;\n            j--;\n            while (coords[2 * i + inc] < t) i++;\n            while (coords[2 * j + inc] > t) j--;\n        }\n\n        if (coords[2 * left + inc] === t) swapItem(ids, coords, left, j);\n        else {\n            j++;\n            swapItem(ids, coords, j, right);\n        }\n\n        if (j <= k) left = j + 1;\n        if (k <= j) right = j - 1;\n    }\n}\n\nfunction swapItem(ids, coords, i, j) {\n    swap(ids, i, j);\n    swap(coords, 2 * i, 2 * j);\n    swap(coords, 2 * i + 1, 2 * j + 1);\n}\n\nfunction swap(arr, i, j) {\n    const tmp = arr[i];\n    arr[i] = arr[j];\n    arr[j] = tmp;\n}\n", "\nexport default function range(ids, coords, minX, minY, maxX, maxY, nodeSize) {\n    const stack = [0, ids.length - 1, 0];\n    const result = [];\n    let x, y;\n\n    while (stack.length) {\n        const axis = stack.pop();\n        const right = stack.pop();\n        const left = stack.pop();\n\n        if (right - left <= nodeSize) {\n            for (let i = left; i <= right; i++) {\n                x = coords[2 * i];\n                y = coords[2 * i + 1];\n                if (x >= minX && x <= maxX && y >= minY && y <= maxY) result.push(ids[i]);\n            }\n            continue;\n        }\n\n        const m = Math.floor((left + right) / 2);\n\n        x = coords[2 * m];\n        y = coords[2 * m + 1];\n\n        if (x >= minX && x <= maxX && y >= minY && y <= maxY) result.push(ids[m]);\n\n        const nextAxis = (axis + 1) % 2;\n\n        if (axis === 0 ? minX <= x : minY <= y) {\n            stack.push(left);\n            stack.push(m - 1);\n            stack.push(nextAxis);\n        }\n        if (axis === 0 ? maxX >= x : maxY >= y) {\n            stack.push(m + 1);\n            stack.push(right);\n            stack.push(nextAxis);\n        }\n    }\n\n    return result;\n}\n", "\nexport default function within(ids, coords, qx, qy, r, nodeSize) {\n    const stack = [0, ids.length - 1, 0];\n    const result = [];\n    const r2 = r * r;\n\n    while (stack.length) {\n        const axis = stack.pop();\n        const right = stack.pop();\n        const left = stack.pop();\n\n        if (right - left <= nodeSize) {\n            for (let i = left; i <= right; i++) {\n                if (sqDist(coords[2 * i], coords[2 * i + 1], qx, qy) <= r2) result.push(ids[i]);\n            }\n            continue;\n        }\n\n        const m = Math.floor((left + right) / 2);\n\n        const x = coords[2 * m];\n        const y = coords[2 * m + 1];\n\n        if (sqDist(x, y, qx, qy) <= r2) result.push(ids[m]);\n\n        const nextAxis = (axis + 1) % 2;\n\n        if (axis === 0 ? qx - r <= x : qy - r <= y) {\n            stack.push(left);\n            stack.push(m - 1);\n            stack.push(nextAxis);\n        }\n        if (axis === 0 ? qx + r >= x : qy + r >= y) {\n            stack.push(m + 1);\n            stack.push(right);\n            stack.push(nextAxis);\n        }\n    }\n\n    return result;\n}\n\nfunction sqDist(ax, ay, bx, by) {\n    const dx = ax - bx;\n    const dy = ay - by;\n    return dx * dx + dy * dy;\n}\n", "\nimport sort from './sort';\nimport range from './range';\nimport within from './within';\n\nconst defaultGetX = p => p[0];\nconst defaultGetY = p => p[1];\n\nexport default class KDBush {\n    constructor(points, getX = defaultGetX, getY = defaultGetY, nodeSize = 64, ArrayType = Float64Array) {\n        this.nodeSize = nodeSize;\n        this.points = points;\n\n        const IndexArrayType = points.length < 65536 ? Uint16Array : Uint32Array;\n\n        const ids = this.ids = new IndexArrayType(points.length);\n        const coords = this.coords = new ArrayType(points.length * 2);\n\n        for (let i = 0; i < points.length; i++) {\n            ids[i] = i;\n            coords[2 * i] = getX(points[i]);\n            coords[2 * i + 1] = getY(points[i]);\n        }\n\n        sort(ids, coords, nodeSize, 0, ids.length - 1, 0);\n    }\n\n    range(minX, minY, maxX, maxY) {\n        return range(this.ids, this.coords, minX, minY, maxX, maxY, this.nodeSize);\n    }\n\n    within(x, y, r) {\n        return within(this.ids, this.coords, x, y, r, this.nodeSize);\n    }\n}\n", "\nimport KDBush from 'kdbush';\n\nconst defaultOptions = {\n    minZoom: 0,   // min zoom to generate clusters on\n    maxZoom: 16,  // max zoom level to cluster the points on\n    minPoints: 2, // minimum points to form a cluster\n    radius: 40,   // cluster radius in pixels\n    extent: 512,  // tile extent (radius is calculated relative to it)\n    nodeSize: 64, // size of the KD-tree leaf node, affects performance\n    log: false,   // whether to log timing info\n\n    // whether to generate numeric ids for input features (in vector tiles)\n    generateId: false,\n\n    // a reduce function for calculating custom cluster properties\n    reduce: null, // (accumulated, props) => { accumulated.sum += props.sum; }\n\n    // properties to use for individual points when running the reducer\n    map: props => props // props => ({sum: props.my_value})\n};\n\nconst fround = Math.fround || (tmp => ((x) => { tmp[0] = +x; return tmp[0]; }))(new Float32Array(1));\n\nexport default class Supercluster {\n    constructor(options) {\n        this.options = extend(Object.create(defaultOptions), options);\n        this.trees = new Array(this.options.maxZoom + 1);\n    }\n\n    load(points) {\n        const {log, minZoom, maxZoom, nodeSize} = this.options;\n\n        if (log) console.time('total time');\n\n        const timerId = `prepare ${  points.length  } points`;\n        if (log) console.time(timerId);\n\n        this.points = points;\n\n        // generate a cluster object for each point and index input points into a KD-tree\n        let clusters = [];\n        for (let i = 0; i < points.length; i++) {\n            if (!points[i].geometry) continue;\n            clusters.push(createPointCluster(points[i], i));\n        }\n        this.trees[maxZoom + 1] = new KDBush(clusters, getX, getY, nodeSize, Float32Array);\n\n        if (log) console.timeEnd(timerId);\n\n        // cluster points on max zoom, then cluster the results on previous zoom, etc.;\n        // results in a cluster hierarchy across zoom levels\n        for (let z = maxZoom; z >= minZoom; z--) {\n            const now = +Date.now();\n\n            // create a new set of clusters for the zoom and index them with a KD-tree\n            clusters = this._cluster(clusters, z);\n            this.trees[z] = new KDBush(clusters, getX, getY, nodeSize, Float32Array);\n\n            if (log) console.log('z%d: %d clusters in %dms', z, clusters.length, +Date.now() - now);\n        }\n\n        if (log) console.timeEnd('total time');\n\n        return this;\n    }\n\n    getClusters(bbox, zoom) {\n        let minLng = ((bbox[0] + 180) % 360 + 360) % 360 - 180;\n        const minLat = Math.max(-90, Math.min(90, bbox[1]));\n        let maxLng = bbox[2] === 180 ? 180 : ((bbox[2] + 180) % 360 + 360) % 360 - 180;\n        const maxLat = Math.max(-90, Math.min(90, bbox[3]));\n\n        if (bbox[2] - bbox[0] >= 360) {\n            minLng = -180;\n            maxLng = 180;\n        } else if (minLng > maxLng) {\n            const easternHem = this.getClusters([minLng, minLat, 180, maxLat], zoom);\n            const westernHem = this.getClusters([-180, minLat, maxLng, maxLat], zoom);\n            return easternHem.concat(westernHem);\n        }\n\n        const tree = this.trees[this._limitZoom(zoom)];\n        const ids = tree.range(lngX(minLng), latY(maxLat), lngX(maxLng), latY(minLat));\n        const clusters = [];\n        for (const id of ids) {\n            const c = tree.points[id];\n            clusters.push(c.numPoints ? getClusterJSON(c) : this.points[c.index]);\n        }\n        return clusters;\n    }\n\n    getChildren(clusterId) {\n        const originId = this._getOriginId(clusterId);\n        const originZoom = this._getOriginZoom(clusterId);\n        const errorMsg = 'No cluster with the specified id.';\n\n        const index = this.trees[originZoom];\n        if (!index) throw new Error(errorMsg);\n\n        const origin = index.points[originId];\n        if (!origin) throw new Error(errorMsg);\n\n        const r = this.options.radius / (this.options.extent * Math.pow(2, originZoom - 1));\n        const ids = index.within(origin.x, origin.y, r);\n        const children = [];\n        for (const id of ids) {\n            const c = index.points[id];\n            if (c.parentId === clusterId) {\n                children.push(c.numPoints ? getClusterJSON(c) : this.points[c.index]);\n            }\n        }\n\n        if (children.length === 0) throw new Error(errorMsg);\n\n        return children;\n    }\n\n    getLeaves(clusterId, limit, offset) {\n        limit = limit || 10;\n        offset = offset || 0;\n\n        const leaves = [];\n        this._appendLeaves(leaves, clusterId, limit, offset, 0);\n\n        return leaves;\n    }\n\n    getTile(z, x, y) {\n        const tree = this.trees[this._limitZoom(z)];\n        const z2 = Math.pow(2, z);\n        const {extent, radius} = this.options;\n        const p = radius / extent;\n        const top = (y - p) / z2;\n        const bottom = (y + 1 + p) / z2;\n\n        const tile = {\n            features: []\n        };\n\n        this._addTileFeatures(\n            tree.range((x - p) / z2, top, (x + 1 + p) / z2, bottom),\n            tree.points, x, y, z2, tile);\n\n        if (x === 0) {\n            this._addTileFeatures(\n                tree.range(1 - p / z2, top, 1, bottom),\n                tree.points, z2, y, z2, tile);\n        }\n        if (x === z2 - 1) {\n            this._addTileFeatures(\n                tree.range(0, top, p / z2, bottom),\n                tree.points, -1, y, z2, tile);\n        }\n\n        return tile.features.length ? tile : null;\n    }\n\n    getClusterExpansionZoom(clusterId) {\n        let expansionZoom = this._getOriginZoom(clusterId) - 1;\n        while (expansionZoom <= this.options.maxZoom) {\n            const children = this.getChildren(clusterId);\n            expansionZoom++;\n            if (children.length !== 1) break;\n            clusterId = children[0].properties.cluster_id;\n        }\n        return expansionZoom;\n    }\n\n    _appendLeaves(result, clusterId, limit, offset, skipped) {\n        const children = this.getChildren(clusterId);\n\n        for (const child of children) {\n            const props = child.properties;\n\n            if (props && props.cluster) {\n                if (skipped + props.point_count <= offset) {\n                    // skip the whole cluster\n                    skipped += props.point_count;\n                } else {\n                    // enter the cluster\n                    skipped = this._appendLeaves(result, props.cluster_id, limit, offset, skipped);\n                    // exit the cluster\n                }\n            } else if (skipped < offset) {\n                // skip a single point\n                skipped++;\n            } else {\n                // add a single point\n                result.push(child);\n            }\n            if (result.length === limit) break;\n        }\n\n        return skipped;\n    }\n\n    _addTileFeatures(ids, points, x, y, z2, tile) {\n        for (const i of ids) {\n            const c = points[i];\n            const isCluster = c.numPoints;\n\n            let tags, px, py;\n            if (isCluster) {\n                tags = getClusterProperties(c);\n                px = c.x;\n                py = c.y;\n            } else {\n                const p = this.points[c.index];\n                tags = p.properties;\n                px = lngX(p.geometry.coordinates[0]);\n                py = latY(p.geometry.coordinates[1]);\n            }\n\n            const f = {\n                type: 1,\n                geometry: [[\n                    Math.round(this.options.extent * (px * z2 - x)),\n                    Math.round(this.options.extent * (py * z2 - y))\n                ]],\n                tags\n            };\n\n            // assign id\n            let id;\n            if (isCluster) {\n                id = c.id;\n            } else if (this.options.generateId) {\n                // optionally generate id\n                id = c.index;\n            } else if (this.points[c.index].id) {\n                // keep id if already assigned\n                id = this.points[c.index].id;\n            }\n\n            if (id !== undefined) f.id = id;\n\n            tile.features.push(f);\n        }\n    }\n\n    _limitZoom(z) {\n        return Math.max(this.options.minZoom, Math.min(Math.floor(+z), this.options.maxZoom + 1));\n    }\n\n    _cluster(points, zoom) {\n        const clusters = [];\n        const {radius, extent, reduce, minPoints} = this.options;\n        const r = radius / (extent * Math.pow(2, zoom));\n\n        // loop through each point\n        for (let i = 0; i < points.length; i++) {\n            const p = points[i];\n            // if we've already visited the point at this zoom level, skip it\n            if (p.zoom <= zoom) continue;\n            p.zoom = zoom;\n\n            // find all nearby points\n            const tree = this.trees[zoom + 1];\n            const neighborIds = tree.within(p.x, p.y, r);\n\n            const numPointsOrigin = p.numPoints || 1;\n            let numPoints = numPointsOrigin;\n\n            // count the number of points in a potential cluster\n            for (const neighborId of neighborIds) {\n                const b = tree.points[neighborId];\n                // filter out neighbors that are already processed\n                if (b.zoom > zoom) numPoints += b.numPoints || 1;\n            }\n\n            // if there were neighbors to merge, and there are enough points to form a cluster\n            if (numPoints > numPointsOrigin && numPoints >= minPoints) {\n                let wx = p.x * numPointsOrigin;\n                let wy = p.y * numPointsOrigin;\n\n                let clusterProperties = reduce && numPointsOrigin > 1 ? this._map(p, true) : null;\n\n                // encode both zoom and point index on which the cluster originated -- offset by total length of features\n                const id = (i << 5) + (zoom + 1) + this.points.length;\n\n                for (const neighborId of neighborIds) {\n                    const b = tree.points[neighborId];\n\n                    if (b.zoom <= zoom) continue;\n                    b.zoom = zoom; // save the zoom (so it doesn't get processed twice)\n\n                    const numPoints2 = b.numPoints || 1;\n                    wx += b.x * numPoints2; // accumulate coordinates for calculating weighted center\n                    wy += b.y * numPoints2;\n\n                    b.parentId = id;\n\n                    if (reduce) {\n                        if (!clusterProperties) clusterProperties = this._map(p, true);\n                        reduce(clusterProperties, this._map(b));\n                    }\n                }\n\n                p.parentId = id;\n                clusters.push(createCluster(wx / numPoints, wy / numPoints, id, numPoints, clusterProperties));\n\n            } else { // left points as unclustered\n                clusters.push(p);\n\n                if (numPoints > 1) {\n                    for (const neighborId of neighborIds) {\n                        const b = tree.points[neighborId];\n                        if (b.zoom <= zoom) continue;\n                        b.zoom = zoom;\n                        clusters.push(b);\n                    }\n                }\n            }\n        }\n\n        return clusters;\n    }\n\n    // get index of the point from which the cluster originated\n    _getOriginId(clusterId) {\n        return (clusterId - this.points.length) >> 5;\n    }\n\n    // get zoom of the point from which the cluster originated\n    _getOriginZoom(clusterId) {\n        return (clusterId - this.points.length) % 32;\n    }\n\n    _map(point, clone) {\n        if (point.numPoints) {\n            return clone ? extend({}, point.properties) : point.properties;\n        }\n        const original = this.points[point.index].properties;\n        const result = this.options.map(original);\n        return clone && result === original ? extend({}, result) : result;\n    }\n}\n\nfunction createCluster(x, y, id, numPoints, properties) {\n    return {\n        x: fround(x), // weighted cluster center; round for consistency with Float32Array index\n        y: fround(y),\n        zoom: Infinity, // the last zoom the cluster was processed at\n        id, // encodes index of the first child of the cluster and its zoom level\n        parentId: -1, // parent cluster id\n        numPoints,\n        properties\n    };\n}\n\nfunction createPointCluster(p, id) {\n    const [x, y] = p.geometry.coordinates;\n    return {\n        x: fround(lngX(x)), // projected point coordinates\n        y: fround(latY(y)),\n        zoom: Infinity, // the last zoom the point was processed at\n        index: id, // index of the source feature in the original input array,\n        parentId: -1 // parent cluster id\n    };\n}\n\nfunction getClusterJSON(cluster) {\n    return {\n        type: 'Feature',\n        id: cluster.id,\n        properties: getClusterProperties(cluster),\n        geometry: {\n            type: 'Point',\n            coordinates: [xLng(cluster.x), yLat(cluster.y)]\n        }\n    };\n}\n\nfunction getClusterProperties(cluster) {\n    const count = cluster.numPoints;\n    const abbrev =\n        count >= 10000 ? `${Math.round(count / 1000)  }k` :\n        count >= 1000 ? `${Math.round(count / 100) / 10  }k` : count;\n    return extend(extend({}, cluster.properties), {\n        cluster: true,\n        cluster_id: cluster.id,\n        point_count: count,\n        point_count_abbreviated: abbrev\n    });\n}\n\n// longitude/latitude to spherical mercator in [0..1] range\nfunction lngX(lng) {\n    return lng / 360 + 0.5;\n}\nfunction latY(lat) {\n    const sin = Math.sin(lat * Math.PI / 180);\n    const y = (0.5 - 0.25 * Math.log((1 + sin) / (1 - sin)) / Math.PI);\n    return y < 0 ? 0 : y > 1 ? 1 : y;\n}\n\n// spherical mercator to longitude/latitude\nfunction xLng(x) {\n    return (x - 0.5) * 360;\n}\nfunction yLat(y) {\n    const y2 = (180 - y * 360) * Math.PI / 180;\n    return 360 * Math.atan(Math.exp(y2)) / Math.PI - 90;\n}\n\nfunction extend(dest, src) {\n    for (const id in src) dest[id] = src[id];\n    return dest;\n}\n\nfunction getX(p) {\n    return p.x;\n}\nfunction getY(p) {\n    return p.y;\n}\n", "import { select } from 'd3-selection'\n\nexport function getHTMLTransform (el: HTMLElement): number[] {\n  const styleTransform = select(el).style('transform')\n\n  // Create a regular expression to match the transform values\n  const match3D = styleTransform.match(/matrix3d\\((.*?)\\)/)\n  const match2D = styleTransform.match(/matrix\\((.*?)\\)/)\n\n  // If neither regex matched, return [0, 0, 0]\n  if (!match3D && !match2D) return [0, 0, 0]\n\n  // If matrix3d matched, parse the values and return them\n  if (match3D) {\n    const values = match3D[1].split(',').map(d => parseFloat(d.trim()))\n    return values.slice(0, 3)\n  }\n\n  // If matrix matched, parse the values and return them, with 0 as the third value\n  const values = match2D[1].split(',').map(d => parseFloat(d.trim()))\n  values.push(0)\n  return values.slice(0, 3)\n}\n", "import { LatLng } from 'leaflet'\nimport Supercluster, { ClusterProperties, PointFeature } from 'supercluster'\nimport { GenericDataRecord } from 'types/data'\n\nexport enum LeafletMapRenderer {\n  Raster = 'raster',\n  MapLibre = 'maplibre',\n}\n\nexport enum LeafletMapPointShape {\n  Square = 'square',\n  Circle = 'circle',\n  Triangle = 'triangle',\n  Ring = 'ring',\n}\n\nexport type LeafletMapPieDatum = {\n  value: number;\n  name: string;\n  color: string;\n  className?: string;\n}\n\nexport interface LeafletMapPointStyle {\n  color: string;\n  className?: string;\n}\n\nexport type LeafletMapPointStyles<D> = { [key in keyof D]?: LeafletMapPointStyle }\n\nexport type PointExpandedClusterProperties<D extends GenericDataRecord> = D & {\n  // Expanded cluster related data:\n  // eslint-disable-next-line no-use-before-define\n  expandedClusterPoint?: LeafletMapPoint<D>;\n  r?: number;\n  dx?: number;\n  dy?: number;\n}\n\nexport type LeafletMapClusterDatum<D extends GenericDataRecord> = Partial<D> & ClusterProperties & {\n  clusterIndex?: Supercluster<D>;\n  clusterPoints?: D[];\n}\n\nexport type LeafletMapPointDatum<D extends GenericDataRecord> = D & PointExpandedClusterProperties<D> & {\n  id: string | number;\n  shape: LeafletMapPointShape;\n  _index: number;\n};\n\nexport type LeafletMapPoint<D extends GenericDataRecord> = {\n  geometry: GeoJSON.Point;\n  bbox: { x1: number; x2: number; y1: number; y2: number };\n  radius: number;\n  path: string;\n  color: string;\n  id: number | string;\n  properties: LeafletMapPointDatum<D> | LeafletMapClusterDatum<D>;\n  donutData: LeafletMapPieDatum[];\n  isCluster: boolean;\n  clusterIndex: Supercluster<D, Supercluster.AnyProps>;\n  clusterPoints?: D[];\n  _zIndex: number;\n}\n\nexport type Bounds = {\n  northEast: { lat: number; lng: number };\n  southWest: { lat: number; lng: number };\n}\n\nexport type MapZoomState = {\n  mapCenter: LatLng;\n  zoomLevel: number;\n  bounds: Bounds;\n  userDriven: boolean;\n}\n\nexport type LeafletMapExpandedCluster<Datum extends GenericDataRecord> = {\n  points: PointFeature<PointExpandedClusterProperties<Datum>>[];\n  cluster: LeafletMapPoint<Datum>;\n}\n", "import type L from 'leaflet'\nimport { min, max } from 'd3-array'\nimport Supercluster, { ClusterFeature, PointFeature } from 'supercluster'\n\n// Utils\nimport { clamp, getString, getNumber } from 'utils/data'\nimport { getColor } from 'utils/color'\nimport { polygon, circlePath } from 'utils/path'\nimport { getHTMLTransform } from 'utils/html'\n\n// Types\nimport { ColorAccessor, NumericAccessor, StringAccessor } from 'types/accessor'\nimport { GenericDataRecord } from 'types/data'\n\n// Local Types\nimport {\n  LeafletMapPoint,\n  LeafletMapPointShape,\n  LeafletMapPieDatum,\n  LeafletMapPointStyles,\n  PointExpandedClusterProperties,\n  LeafletMapPointDatum,\n  LeafletMapClusterDatum,\n} from '../types'\n\n// Config\nimport { LeafletMapConfigInterface } from '../config'\n\nexport function bBoxMerge (\n  bBoxArray: ({x1: number; x2: number; y1: number; y2: number})[]):\n  { x: number; y: number; width: number; height: number } {\n  let box = { x1: 0, x2: 0, y1: 0, y2: 0 }\n  bBoxArray.forEach(coords => {\n    if (!box) {\n      box = { ...coords }\n    } else {\n      if (box.x1 > coords.x1) box.x1 = coords.x1\n      if (box.y1 > coords.y1) box.y1 = coords.y1\n      if (box.x2 < coords.x2) box.x2 = coords.x2\n      if (box.y2 < coords.y2) box.y2 = coords.y2\n    }\n  })\n\n  return {\n    x: box.x1,\n    y: box.y1,\n    width: box.x2 - box.x1,\n    height: box.y2 - box.y1,\n  }\n}\n\nexport const getNextZoomLevelOnClusterClick = (level: number): number => clamp(1 + level * 1.5, level, 12)\n\nexport function projectPoint<D extends GenericDataRecord> (\n  geoJSONPoint: LeafletMapPoint<D> | ClusterFeature<LeafletMapClusterDatum<D>> | PointFeature<LeafletMapPointDatum<D>>,\n  leafletMap: L.Map\n): { x: number; y: number } {\n  const lat = geoJSONPoint.geometry.coordinates[1]\n  const lon = geoJSONPoint.geometry.coordinates[0]\n  const projected = leafletMap.latLngToLayerPoint([lat, lon])\n  return projected\n}\n\nexport function getPointRadius<D extends GenericDataRecord> (\n  geoPoint: ClusterFeature<LeafletMapClusterDatum<D>> | PointFeature<LeafletMapPointDatum<D>> | PointFeature<PointExpandedClusterProperties<D>>,\n  pointRadius: NumericAccessor<LeafletMapPointDatum<D>> | NumericAccessor<LeafletMapClusterDatum<D>>,\n  zoomLevel: number\n): number {\n  const isDynamic = !pointRadius\n  const radius = isDynamic\n    ? 1 + 2 * Math.pow(zoomLevel, 0.80)\n    // Todo: Needs a better typings handling\n    : getNumber((geoPoint.properties as LeafletMapPointDatum<D>), pointRadius as NumericAccessor<LeafletMapPointDatum<D>>)\n\n  const isCluster = (geoPoint as ClusterFeature<D>).properties.cluster\n  return (isCluster && isDynamic)\n    ? clamp(Math.pow((geoPoint as ClusterFeature<D>).properties.point_count, 0.35) * radius, radius * 1.1, radius * 3)\n    : radius\n}\n\nexport function getPointPos<D extends GenericDataRecord> (point: LeafletMapPoint<D> | ClusterFeature<LeafletMapClusterDatum<D>> | PointFeature<LeafletMapPointDatum<D>>, leafletMap: L.Map): { x: number; y: number } {\n  const properties = point.properties as LeafletMapPointDatum<D>\n  const isFromCluster = !!(properties).expandedClusterPoint\n\n  if (isFromCluster) {\n    const { x, y } = projectPoint(properties.expandedClusterPoint, leafletMap)\n    return {\n      x: x + properties.dx,\n      y: y + properties.dy,\n    }\n  } else {\n    return projectPoint(point, leafletMap)\n  }\n}\n\nexport function getPointDisplayOrder<D extends GenericDataRecord> (\n  d: LeafletMapPoint<D>,\n  pointStatus: StringAccessor<LeafletMapPointDatum<D> | LeafletMapClusterDatum<D>>,\n  colorMap: LeafletMapPointStyles<D>\n): number {\n  const status = getString(d.properties, pointStatus)\n  const statusList = Object.keys(colorMap)\n  return Object.keys(statusList).indexOf(status)\n}\n\nexport function toGeoJSONPoint<D extends GenericDataRecord> (d: D, i: number, pointLatitude: NumericAccessor<D>, pointLongitude: NumericAccessor<D>): PointFeature<D> {\n  const lat = getNumber(d, pointLatitude) as number\n  const lon = getNumber(d, pointLongitude) as number\n\n  return {\n    type: 'Feature',\n    properties: {\n      ...d,\n      _index: i,\n    },\n    geometry: {\n      type: 'Point',\n      coordinates: [lon, lat],\n    },\n  }\n}\n\nexport function calculateClusterIndex<D extends GenericDataRecord> (data: D[], config: LeafletMapConfigInterface<D>, maxClusterZoomLevel = 23): Supercluster<D> {\n  const { colorMap, pointShape, pointLatitude, pointLongitude, clusteringDistance } = config\n  return new Supercluster<D, Supercluster.AnyProps>({\n    radius: clusteringDistance,\n    maxZoom: maxClusterZoomLevel,\n    map: (d): Supercluster.AnyProps => {\n      const shape = getString(d, pointShape)\n\n      const clusterPoint = { shape } as Supercluster.AnyProps\n      for (const key of Object.keys(colorMap)) {\n        clusterPoint[key] = d[key] || 0\n      }\n\n      return clusterPoint\n    },\n    reduce: (acc, clusterPoint): void => {\n      acc.shape = acc.shape === clusterPoint.shape ? acc.shape : LeafletMapPointShape.Circle\n      acc.value = (acc.value ?? 0) + (clusterPoint.value ?? 0)\n\n      for (const key of Object.keys(colorMap)) {\n        acc[key] += clusterPoint[key]\n      }\n    },\n  }).load(data.map((d, i) => toGeoJSONPoint(d, i, pointLatitude, pointLongitude)))\n}\n\nexport function getNodePathData ({ x, y }: { x: number; y: number }, radius: number, shape: LeafletMapPointShape): string {\n  switch (shape) {\n    case LeafletMapPointShape.Triangle:\n      return polygon(radius * 2, 3)\n    case LeafletMapPointShape.Square:\n      return polygon(radius * 2, 4)\n    case LeafletMapPointShape.Circle:\n    case LeafletMapPointShape.Ring:\n    default:\n      return circlePath(x, y, radius)\n  }\n}\n\nexport function getDonutData<D extends GenericDataRecord> (\n  d: LeafletMapClusterDatum<D> | LeafletMapPointDatum<D>,\n  colorMap: LeafletMapPointStyles<D>\n): LeafletMapPieDatum[] {\n  return Object.keys(colorMap).map(key => ({\n    name: key,\n    value: d[key] as number,\n    color: colorMap[key].color,\n    className: colorMap[key].className,\n  }))\n}\n\nexport function geoJsonPointToScreenPoint<D extends GenericDataRecord> (\n  geoPoint: ClusterFeature<LeafletMapClusterDatum<D>> | PointFeature<LeafletMapPointDatum<D>>,\n  i: number,\n  leafletMap: L.Map,\n  config: LeafletMapConfigInterface<D>\n): LeafletMapPoint<D> {\n  const zoomLevel = leafletMap.getZoom()\n  const isCluster = (geoPoint.properties as LeafletMapClusterDatum<D>).cluster\n  const clusterIndex = (geoPoint.properties as LeafletMapClusterDatum<D>).clusterIndex\n  const clusterPoints = isCluster ? clusterIndex.getLeaves((geoPoint.properties as LeafletMapClusterDatum<D>).cluster_id as number, Infinity).map(d => d.properties) : undefined\n  const { x, y } = getPointPos(geoPoint, leafletMap)\n\n  const id = isCluster ? `cluster-${geoPoint.id}` : (getString(geoPoint.properties as LeafletMapPointDatum<D>, config.pointId) ?? geoPoint.geometry.coordinates.join(''))\n  // Todo: Needs a better typings handling\n  const pointColor = getColor(geoPoint.properties as LeafletMapPointDatum<D>, (isCluster ? config.clusterColor : config.pointColor) as ColorAccessor<LeafletMapPointDatum<D>>)\n  const radius = getPointRadius(geoPoint, isCluster ? config.clusterRadius : config.pointRadius, zoomLevel)\n  const shape = isCluster ? LeafletMapPointShape.Circle : getString(geoPoint.properties as LeafletMapPointDatum<D>, config.pointShape) as LeafletMapPointShape\n  const isRing = shape === LeafletMapPointShape.Ring\n\n  const donutData = getDonutData(geoPoint.properties, config.colorMap)\n  const maxValue = max(donutData, d => d.value)\n  const maxValueIndex = donutData.map(d => d.value).indexOf(maxValue)\n  const biggestDatum = donutData[maxValueIndex ?? 0]\n\n  const color = isCluster ? pointColor\n    : (isRing ? null : (pointColor ?? biggestDatum?.color))\n  const bbox = { x1: x - radius, y1: y - radius, x2: x + radius, y2: y + radius }\n  const path = getNodePathData({ x: 0, y: 0 }, radius, shape)\n  const _zIndex = 0\n\n  const screenPoint: LeafletMapPoint<D> = {\n    ...geoPoint,\n    id,\n    bbox,\n    radius,\n    donutData,\n    path,\n    color,\n    isCluster,\n    clusterIndex,\n    clusterPoints,\n    _zIndex,\n  }\n\n  return screenPoint\n}\n\nexport function shouldClusterExpand<D extends GenericDataRecord> (\n  cluster: LeafletMapPoint<D>,\n  zoomLevel: number,\n  midLevel = 4,\n  maxLevel = 8,\n  maxClusterZoomLevel = 23\n): boolean {\n  if (!cluster) return false\n\n  const clusterExpansionZoomLevel = cluster.clusterIndex.getClusterExpansionZoom(cluster.properties.cluster_id as number)\n  return zoomLevel >= maxLevel ||\n        (zoomLevel >= midLevel && (cluster.properties.point_count < 20 || clusterExpansionZoomLevel >= maxClusterZoomLevel))\n}\n\nexport function findPointAndClusterByPointId<D extends GenericDataRecord> (\n  points: LeafletMapPoint<D>[],\n  id: string,\n  pointId: StringAccessor<D>\n): {\n    point: PointFeature<D> | undefined;\n    cluster: LeafletMapPoint<D> | undefined;\n  } {\n  let point\n  let cluster\n  points.forEach(p => {\n    if (p.isCluster) {\n      const leaves = p.clusterIndex.getLeaves((p.properties as LeafletMapClusterDatum<D>).cluster_id as number, Infinity) ?? []\n      const foundPoint = leaves.find(d => getString(d.properties, pointId) === id)\n      if (foundPoint) {\n        point = foundPoint\n        cluster = p\n      }\n    }\n  })\n  return { point, cluster }\n}\n\nexport function getNodeRelativePosition<D extends GenericDataRecord> (d: LeafletMapPoint<D>, leafletMap: L.Map): { x: number; y: number } {\n  const paneTransform = getHTMLTransform(leafletMap.getPane('mapPane'))\n  const { x, y } = getPointPos(d, leafletMap)\n  return { x: x + paneTransform[0], y: y + paneTransform[1] }\n}\n\nexport function getClusterRadius<D extends GenericDataRecord> (cluster: { points: PointFeature<PointExpandedClusterProperties<D>>[]; cluster: LeafletMapPoint<D> }): number {\n  const { points } = cluster\n  const minX = min<number>(points.map(d => d.properties.dx - d.properties.r))\n  const maxX = max<number>(points.map(d => d.properties.dx + d.properties.r))\n  const minY = min<number>(points.map(d => d.properties.dy - d.properties.r))\n  const maxY = max<number>(points.map(d => d.properties.dy + d.properties.r))\n  return Math.sqrt((maxX - minX) ** 2 + (maxY - minY) ** 2) * 0.5\n}\n\nexport function getClustersAndPoints<D extends GenericDataRecord> (\n  clusterIndex: Supercluster<D>,\n  leafletMap: L.Map,\n  customBounds?: [number, number, number, number]\n): (ClusterFeature<LeafletMapClusterDatum<D>> | PointFeature<D>)[] {\n  const leafletBounds = leafletMap.getBounds()\n  const southWest = leafletBounds.getSouthWest()\n  const northEast = leafletBounds.getNorthEast()\n  const bounds = customBounds || [southWest.lng, southWest.lat, northEast.lng, northEast.lat]\n  const zoom = Math.round(leafletMap.getZoom())\n  const points = clusterIndex.getClusters(bounds, zoom) // as ClusterFeature<LeafletMapPointDatum<D>>[]\n\n  for (const p of points) {\n    const point = p as ClusterFeature<LeafletMapClusterDatum<D>>\n    const isCluster = point.properties.cluster\n    if (isCluster) {\n      point.properties.clusterIndex = clusterIndex\n      point.properties.clusterPoints = clusterIndex.getLeaves(point.properties.cluster_id, Infinity).map(d => d.properties)\n    }\n  }\n\n  return points as (ClusterFeature<LeafletMapClusterDatum<D>> | PointFeature<D>)[]\n}\n", "/* eslint-disable no-irregular-whitespace */\n\n// Core\nimport { ComponentDefaultConfig, ComponentConfigInterface } from 'core/component/config'\nimport { Tooltip } from 'components/tooltip'\n\n// Types\nimport { ColorAccessor, GenericAccessor, NumericAccessor, StringAccessor } from 'types/accessor'\nimport { GenericDataRecord } from 'types/data'\n\n// Local Types\nimport {\n  Bounds,\n  LeafletMapPointStyles,\n  MapZoomState,\n  LeafletMapPointDatum,\n  LeafletMapPointShape,\n  LeafletMapClusterDatum,\n  LeafletMapRenderer,\n} from './types'\n\n// Renderer settings\nimport { MapLibreStyleSpecs } from './renderer/map-style'\n\nexport interface LeafletMapConfigInterface<Datum extends GenericDataRecord> extends ComponentConfigInterface {\n  // General\n  /** Width in pixels or in CSS units. By default, the map will automatically fit to the size of the parent element. Default: `undefined`. */\n  width?: number | string;\n  /** Height in pixels or in CSS units. By default, the map will automatically fit to the size of the parent element. Default: `undefined`. */\n  height?: number | string;\n  /** Animation duration when the map is automatically panning or zooming to a point or area. Default: `1500` ms */\n  flyToDuration?: number;\n  /** Padding to be used when the `fitView` function has been called. The value is in pixels, [topLeft, bottomRight]. Default: `[150, 150]` */\n  fitViewPadding?: [number, number];\n  /** Animation duration for the `setZoom` function. Default: `800` ms */\n  zoomDuration?: number;\n  /** Default bounds that will be applied on the first map render if the bounds property is not set. Default: `undefined` */\n  initialBounds?: Bounds;\n  /** Force set map bounds on config and data updates. Default: `undefined` */\n  fitBoundsOnUpdate?: Bounds;\n  /** Fit the view to contain the data points on map initialization. Default: `true` */\n  fitViewOnInit?: boolean;\n  /** Fit the view to contain the data points on map config and data updates. Default: `false` */\n  fitViewOnUpdate?: boolean;\n  /** MapLibre `StyleSpecification` settings, or a URL to it. When renderer is set to`LeafletMapRenderer.Raster`, provide a template URL. Default: `undefined` */\n  style: MapLibreStyleSpecs | string | undefined;\n  /** MapLibre `StyleSpecification` settings or URL for dark theme. Default: `undefined` */\n  styleDarkTheme?: MapLibreStyleSpecs | string | undefined;\n  /** Tile server access token or API key. Default: `''` */\n  accessToken?: string;\n  /** Array of attribution labels. Default: `['<a href=\"https://www.openstreetmap.org/copyright\" target=\"_blank\">OpenStreetMap contributors</a>']` */\n  attribution?: string[];\n  /** Rendering mode for map's tile layer. For raster files, use `LeafletMapRenderer.Raster`. Default: `LeafletMapRenderer.MapLibre` */\n  renderer?: LeafletMapRenderer | string;\n\n  // Map events\n  /** Function to be called after the map's async initialization is done. Default: `undefined` */\n  onMapInitialized?: (() => void);\n  /** Map Move / Zoom unified callback function. Default: `undefined` */\n  onMapMoveZoom?: (({ mapCenter, zoomLevel, bounds }: MapZoomState) => void);\n  /** Map Move Start callback function. Default: `undefined` */\n  onMapMoveStart?: (({ mapCenter, zoomLevel, bounds }: MapZoomState) => void);\n  /** Map Move End callback function. Default: `undefined` */\n  onMapMoveEnd?: (({ mapCenter, zoomLevel, bounds }: MapZoomState) => void);\n  /** Map Zoom Start callback function. Default: `undefined` */\n  onMapZoomStart?: (({ mapCenter, zoomLevel, bounds }: MapZoomState) => void);\n  /** Map Zoom End callback function. Default: `undefined` */\n  onMapZoomEnd?: (({ mapCenter, zoomLevel, bounds }: MapZoomState) => void);\n  /** Map Zoom Click callback function. Default: `undefined` */\n  onMapClick?: (({ mapCenter, zoomLevel, bounds }: MapZoomState) => void);\n\n  // Point\n  /** Point longitude accessor function. Default: `d => d.longitude` */\n  pointLongitude?: NumericAccessor<Datum>;\n  /** Point latitude accessor function. Default: `d => d.latitude` */\n  pointLatitude?: NumericAccessor<Datum>;\n  /** Point id accessor function or constant value. Default: `d => d.id`  */\n  pointId?: StringAccessor<Datum>;\n  /** Point shape accessor function or constant value. Default: `d => d.shape`  */\n  pointShape?: GenericAccessor<LeafletMapPointShape | string, Datum>;\n  /** Point color accessor function or constant value. Default: `d => d.color`  */\n  pointColor?: ColorAccessor<LeafletMapPointDatum<Datum>>;\n  /** Point radius accessor function or constant value. Default: `undefined`  */\n  pointRadius?: NumericAccessor<LeafletMapPointDatum<Datum>>;\n  /** Point inner label accessor function. Default: `undefined`  */\n  pointLabel?: StringAccessor<LeafletMapPointDatum<Datum>>;\n  /** Point inner label color accessor function or constant value.\n   * By default, the label color will be set, depending on the point brightness, either to\n   * `--vis-map-point-inner-label-text-color-light` or to `--vis-map-point-inner-label-text-color-dark` CSS variable.\n   * Default: `undefined`\n  */\n  pointLabelColor?: StringAccessor<LeafletMapPointDatum<Datum>>;\n  /** Point bottom label accessor function. Default: `''` */\n  pointBottomLabel?: StringAccessor<LeafletMapPointDatum<Datum>>;\n  /** Point cursor value or accessor function. Default: `null` */\n  pointCursor?: StringAccessor<LeafletMapPointDatum<Datum>>;\n  /** The width of the ring when a point has a `LeafletMapPointShape.Ring` shape. Default: `1.25` */\n  pointRingWidth?: number;\n  /** Set selected point by its unique id. Default: `undefined` */\n  selectedPointId?: string;\n\n  // Cluster\n  /** Cluster color accessor function or constant value. Default: `undefined`  */\n  clusterColor?: ColorAccessor<LeafletMapClusterDatum<Datum>>;\n  /** Cluster radius accessor function or constant value. Default: `undefined`  */\n  clusterRadius?: NumericAccessor<LeafletMapClusterDatum<Datum>>;\n  /** Cluster inner label accessor function. Default: `d => d.point_count`  */\n  clusterLabel?: StringAccessor<LeafletMapClusterDatum<Datum>>;\n  /** Cluster inner label color accessor function or constant value.\n   * By default, the label color will be set, depending on the point brightness, either to\n   * `--vis-map-cluster-inner-label-text-color-light` or to `--vis-map-cluster-inner-label-text-color-dark` CSS variable.\n   * Default: `undefined`\n  */\n  clusterLabelColor?: StringAccessor<LeafletMapClusterDatum<Datum>>;\n  /** Cluster bottom label accessor function. Default: `''` */\n  clusterBottomLabel?: StringAccessor<LeafletMapClusterDatum<Datum>>;\n  /** The width of the cluster point ring. Default: `1.25` */\n  clusterRingWidth?: number;\n  /** When cluster is expanded, show a background circle to better separate points from the base map. Default: `true` */\n  clusterBackground?: boolean;\n  /** Defines whether the cluster should expand on click or not. Default: `true` */\n  clusterExpandOnClick?: boolean;\n  /** Clustering distance in pixels. This value will be passed to Supercluster as the `radius` property https://github.com/mapbox/supercluster. Default: `55` */\n  clusteringDistance?: number;\n  /** A single map point can have multiple properties displayed as a small pie chart (or a donut chart for a cluster of points).\n   * By setting the colorMap configuration you can specify data properties that should be mapped to various pie / donut segments.\n   *\n   * ```\n   * {\n   *   [key in keyof Datum]?: { color: string, className?: string }\n   * }\n   * ```\n   * e.g.:\n   * ```\n   * {\n   *   healthy: { color: 'green' },\n   *   warning: { color: 'orange' },\n   *   danger: { color: 'red' }\n   * }\n   * ```\n   * where every data point has the `healthy`, `warning` and `danger` numerical or boolean property.\n   */\n  colorMap?: LeafletMapPointStyles<Datum>;\n\n  // TopoJSON overlay\n  /** A TopoJSON Geometry layer to be displayed on top of the map. Supports fill and stroke */\n  topoJSONLayer?: {\n    /** The TopoJSON.Topology object. Default: `undefined` */\n    sources: any;\n    /** Name of the geometry feature to be displayed. Default: `undefined` */\n    featureName?: string;\n    /** Name of the property to be used for defining the fill color of the geometry. Default: `undefined` */\n    fillProperty?: string;\n    /** Name of the property to be used for defining the stroke color of the geometry. Default: `undefined` */\n    strokeProperty?: string;\n    /** Geometry fill opacity value. Default: `0.6` */\n    fillOpacity?: number;\n    /** Geometry stroke opacity value. Default: `0.8` */\n    strokeOpacity?: number;\n    /** Geometry stroke width. Default: `2` */\n    strokeWidth?: number;\n  };\n\n  // Misc\n  /** Tooltip component. Default: `undefined` */\n  tooltip?: Tooltip;\n\n  /** Alternative text description of the chart for accessibility purposes. It will be applied as an\n   * `aria-label` attribute to the div element containing your chart. Default: `undefined`.\n  */\n  ariaLabel?: string | null | undefined;\n}\n\nexport const LeafletMapDefaultConfig: LeafletMapConfigInterface<GenericDataRecord> = {\n  ...ComponentDefaultConfig,\n  // General\n  width: undefined,\n  height: undefined,\n  flyToDuration: 1500,\n  fitViewPadding: [150, 150],\n  zoomDuration: 800,\n  initialBounds: undefined,\n  fitBoundsOnUpdate: undefined,\n  fitViewOnInit: true,\n  fitViewOnUpdate: false,\n  attribution: ['<a href=\"https://www.openstreetmap.org/copyright\" target=\"_blank\">OpenStreetMap contributors</a>'],\n  accessToken: '',\n  style: undefined,\n  styleDarkTheme: undefined,\n  renderer: LeafletMapRenderer.MapLibre,\n\n  // Map events\n  onMapInitialized: undefined,\n  onMapMoveZoom: undefined,\n  onMapMoveStart: undefined,\n  onMapMoveEnd: undefined,\n  onMapZoomStart: undefined,\n  onMapZoomEnd: undefined,\n  onMapClick: undefined,\n\n  // Point\n  pointLongitude: (d: unknown): number => (d as { longitude: number }).longitude,\n  pointLatitude: (d: unknown): number => (d as { latitude: number }).latitude,\n  pointId: (d: unknown): string => (d as { id: string }).id,\n  pointShape: (d: unknown): string => (d as { shape: string }).shape,\n  pointColor: (d: unknown): string => (d as { color: string }).color,\n  pointRadius: undefined,\n  pointLabel: undefined,\n  pointLabelColor: undefined,\n  pointBottomLabel: '',\n  pointCursor: null,\n  pointRingWidth: 1.25,\n  selectedPointId: undefined,\n\n  // Cluster\n  clusterColor: undefined,\n  clusterRadius: undefined,\n  clusterLabel: <Datum extends GenericDataRecord>(d: LeafletMapClusterDatum<Datum>): string => `${d.point_count}`,\n  clusterLabelColor: undefined,\n  clusterBottomLabel: '',\n  clusterRingWidth: 1.25,\n  clusterBackground: true,\n  clusterExpandOnClick: true,\n  clusteringDistance: 55,\n  colorMap: {},\n\n  // TopoJSON Overlay\n  topoJSONLayer: {\n    sources: undefined,\n    fillOpacity: 0.6,\n    strokeOpacity: 0.8,\n    strokeWidth: 1,\n    featureName: undefined,\n    fillProperty: undefined,\n    strokeProperty: undefined,\n  },\n\n  // Misc\n  tooltip: undefined,\n  ariaLabel: undefined,\n}\n", "var css_248z = \".leaflet-image-layer,.leaflet-layer,.leaflet-marker-icon,.leaflet-marker-shadow,.leaflet-pane,.leaflet-pane>canvas,.leaflet-pane>svg,.leaflet-tile,.leaflet-tile-container,.leaflet-zoom-box{left:0;position:absolute;top:0}.leaflet-container{overflow:hidden}.leaflet-marker-icon,.leaflet-marker-shadow,.leaflet-tile{-webkit-user-drag:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.leaflet-safari .leaflet-tile{image-rendering:-webkit-optimize-contrast}.leaflet-safari .leaflet-tile-container{height:1600px;-webkit-transform-origin:0 0;width:1600px}.leaflet-marker-icon,.leaflet-marker-shadow{display:block}.leaflet-container .leaflet-marker-pane img,.leaflet-container .leaflet-overlay-pane svg,.leaflet-container .leaflet-shadow-pane img,.leaflet-container .leaflet-tile,.leaflet-container .leaflet-tile-pane img,.leaflet-container img.leaflet-image-layer{max-height:none!important;max-width:none!important}.leaflet-container.leaflet-touch-zoom{-ms-touch-action:pan-x pan-y;touch-action:pan-x pan-y}.leaflet-container.leaflet-touch-drag{-ms-touch-action:pinch-zoom;touch-action:none;touch-action:pinch-zoom}.leaflet-container.leaflet-touch-drag.leaflet-touch-zoom{-ms-touch-action:none;touch-action:none}.leaflet-container{-webkit-tap-highlight-color:transparent}.leaflet-container a{-webkit-tap-highlight-color:rgba(51,181,229,.4)}.leaflet-tile{filter:inherit;visibility:hidden}.leaflet-tile-loaded{visibility:inherit}.leaflet-zoom-box{-moz-box-sizing:border-box;box-sizing:border-box;height:0;width:0;z-index:800}.leaflet-overlay-pane svg{-moz-user-select:none}.leaflet-overlay-pane{z-index:1}.leaflet-vml-shape{height:1px;width:1px}.lvml{behavior:url(#default#VML);display:inline-block;position:absolute}.leaflet-control{pointer-events:visiblePainted;pointer-events:auto;position:relative;z-index:800}.leaflet-bottom,.leaflet-top{pointer-events:none;position:absolute;z-index:1}.leaflet-top{top:0}.leaflet-right{right:0}.leaflet-bottom{bottom:0}.leaflet-left{left:0}.leaflet-control{clear:both;float:left}.leaflet-right .leaflet-control{float:right}.leaflet-top .leaflet-control{margin-top:10px}.leaflet-bottom .leaflet-control{margin-bottom:10px}.leaflet-left .leaflet-control{margin-left:10px}.leaflet-right .leaflet-control{margin-right:10px}.leaflet-fade-anim .leaflet-tile{will-change:opacity}.leaflet-fade-anim .leaflet-popup{opacity:0;-webkit-transition:opacity .2s linear;-moz-transition:opacity .2s linear;transition:opacity .2s linear}.leaflet-fade-anim .leaflet-map-pane .leaflet-popup{opacity:1}.leaflet-zoom-animated{-webkit-transform-origin:0 0;-ms-transform-origin:0 0;transform-origin:0 0}.leaflet-zoom-anim .leaflet-zoom-animated{-webkit-transition:-webkit-transform .25s cubic-bezier(0,0,.25,1);-moz-transition:-moz-transform .25s cubic-bezier(0,0,.25,1);transition:transform .25s cubic-bezier(0,0,.25,1);will-change:transform}.leaflet-pan-anim .leaflet-tile,.leaflet-zoom-anim .leaflet-tile{-webkit-transition:none;-moz-transition:none;transition:none}.leaflet-zoom-anim .leaflet-zoom-hide{visibility:hidden}.leaflet-interactive{cursor:pointer}.leaflet-grab{cursor:-webkit-grab;cursor:-moz-grab;cursor:grab}.leaflet-crosshair,.leaflet-crosshair .leaflet-interactive{cursor:crosshair}.leaflet-control,.leaflet-popup-pane{cursor:auto}.leaflet-dragging .leaflet-grab,.leaflet-dragging .leaflet-grab .leaflet-interactive,.leaflet-dragging .leaflet-marker-draggable{cursor:move;cursor:-webkit-grabbing;cursor:-moz-grabbing;cursor:grabbing}.leaflet-image-layer,.leaflet-marker-icon,.leaflet-marker-shadow,.leaflet-pane>svg path,.leaflet-tile-container{pointer-events:none}.leaflet-image-layer.leaflet-interactive,.leaflet-marker-icon.leaflet-interactive,.leaflet-pane>svg path.leaflet-interactive{pointer-events:visiblePainted;pointer-events:auto}.leaflet-container{background:#dfe5eb;outline:0}.leaflet-container a{color:#0078a8}.leaflet-container a.leaflet-active{outline:2px solid orange}.leaflet-zoom-box{background:rgba(255,255,255,.5);border:2px dotted #38f}.leaflet-container{font:12px/1.5 Helvetica Neue,Arial,Helvetica,sans-serif}.leaflet-bar{border-radius:4px;box-shadow:0 1px 5px rgba(0,0,0,.65)}.leaflet-bar a,.leaflet-bar a:hover{background-color:#fff;border-bottom:1px solid rgba(130,130,130,.2);color:#000;display:block;height:26px;line-height:26px;text-align:center;text-decoration:none;width:26px}.leaflet-bar a,.leaflet-control-layers-toggle{background-position:50% 50%;background-repeat:no-repeat;display:block}.leaflet-bar a:hover{background-color:#f4f4f4}.leaflet-bar a:first-child{border-top-left-radius:4px;border-top-right-radius:4px}.leaflet-bar a:last-child{border-bottom:none;border-bottom-left-radius:4px;border-bottom-right-radius:4px}.leaflet-bar a.leaflet-disabled{background-color:#f4f4f4;color:#bbb;cursor:default}.leaflet-touch .leaflet-bar a{height:30px;line-height:30px;width:30px}.leaflet-touch .leaflet-bar a:first-child{border-top-left-radius:2px;border-top-right-radius:2px}.leaflet-touch .leaflet-bar a:last-child{border-bottom-left-radius:2px;border-bottom-right-radius:2px}.leaflet-control-zoom-in,.leaflet-control-zoom-out{font:700 18px Lucida Console,Monaco,monospace;text-indent:1px}.leaflet-touch .leaflet-control-zoom-in,.leaflet-touch .leaflet-control-zoom-out{font-size:22px}.leaflet-control-layers{background:#fff;border-radius:5px;box-shadow:0 1px 5px rgba(0,0,0,.4)}.leaflet-touch .leaflet-control-layers-toggle{height:44px;width:44px}.leaflet-control-layers-expanded .leaflet-control-layers-toggle,.leaflet-control-layers .leaflet-control-layers-list{display:none}.leaflet-control-layers-expanded .leaflet-control-layers-list{display:block;position:relative}.leaflet-control-layers-expanded{background:#fff;color:#333;padding:6px 10px 6px 6px}.leaflet-control-layers-scrollbar{overflow-x:hidden;overflow-y:scroll;padding-right:5px}.leaflet-control-layers-selector{margin-top:2px;position:relative;top:1px}.leaflet-control-layers label{display:block}.leaflet-control-layers-separator{border-top:1px solid #ddd;height:0;margin:5px -10px 5px -6px}.leaflet-container .leaflet-control-attribution{background:#fff;background:hsla(0,0%,100%,.7);margin:0}.leaflet-control-attribution,.leaflet-control-scale-line{color:#333;padding:0 5px}.leaflet-control-attribution a{color:#333;font-size:7pt;opacity:.6;text-decoration:none}.leaflet-control-attribution a:hover{text-decoration:underline}.leaflet-container .leaflet-control-attribution,.leaflet-container .leaflet-control-scale{font-size:11px}.leaflet-left .leaflet-control-scale{margin-left:5px}.leaflet-bottom .leaflet-control-scale{margin-bottom:5px}.leaflet-control-scale-line{background:#fff;background:hsla(0,0%,100%,.5);border:2px solid #777;border-top:none;-moz-box-sizing:border-box;box-sizing:border-box;font-size:11px;line-height:1.1;overflow:hidden;padding:2px 5px 1px;white-space:nowrap}.leaflet-control-scale-line:not(:first-child){border-bottom:none;border-top:2px solid #777;margin-top:-2px}.leaflet-control-scale-line:not(:first-child):not(:last-child){border-bottom:2px solid #777}.leaflet-touch .leaflet-bar,.leaflet-touch .leaflet-control-attribution,.leaflet-touch .leaflet-control-layers{box-shadow:none}.leaflet-touch .leaflet-bar,.leaflet-touch .leaflet-control-layers{background-clip:padding-box;border:1px solid rgba(0,0,0,.15)}.leaflet-popup{margin-bottom:20px;position:absolute;text-align:center}.leaflet-popup-content-wrapper{border-radius:12px;padding:1px;text-align:left}.leaflet-popup-content{line-height:1.4;margin:13px 19px}.leaflet-popup-content p{margin:18px 0}.leaflet-popup-tip-container{height:20px;left:50%;margin-left:-20px;overflow:hidden;pointer-events:none;position:absolute;width:40px}.leaflet-popup-tip{height:17px;margin:-10px auto 0;padding:1px;-webkit-transform:rotate(45deg);-moz-transform:rotate(45deg);-ms-transform:rotate(45deg);transform:rotate(45deg);width:17px}.leaflet-popup-content-wrapper,.leaflet-popup-tip{background:#fff;box-shadow:0 3px 14px rgba(0,0,0,.4);color:#333}.leaflet-container a.leaflet-popup-close-button{background:transparent;border:none;color:#c3c3c3;font:16px/14px Tahoma,Verdana,sans-serif;font-weight:700;height:14px;padding:4px 4px 0 0;position:absolute;right:0;text-align:center;text-decoration:none;top:0;width:18px}.leaflet-container a.leaflet-popup-close-button:hover{color:#999}.leaflet-popup-scrolled{border-bottom:1px solid #ddd;border-top:1px solid #ddd;overflow:auto}.leaflet-oldie .leaflet-popup-content-wrapper{zoom:1}.leaflet-oldie .leaflet-popup-tip{-ms-filter:\\\"progid:DXImageTransform.Microsoft.Matrix(M11=0.70710678, M12=0.70710678, M21=-0.70710678, M22=0.70710678)\\\";filter:progid:DXImageTransform.Microsoft.Matrix(M11=0.70710678,M12=0.70710678,M21=-0.70710678,M22=0.70710678);margin:0 auto;width:24px}.leaflet-oldie .leaflet-popup-tip-container{margin-top:-1px}.leaflet-oldie .leaflet-control-layers,.leaflet-oldie .leaflet-control-zoom,.leaflet-oldie .leaflet-popup-content-wrapper,.leaflet-oldie .leaflet-popup-tip{border:1px solid #999}.leaflet-div-icon{background:#fff;border:1px solid #666}.leaflet-tooltip{background-color:#fff;border:1px solid #fff;border-radius:3px;box-shadow:0 1px 3px rgba(0,0,0,.4);color:#222;padding:6px;pointer-events:none;position:absolute;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap}.leaflet-tooltip.leaflet-clickable{cursor:pointer;pointer-events:auto}.leaflet-tooltip-bottom:before,.leaflet-tooltip-left:before,.leaflet-tooltip-right:before,.leaflet-tooltip-top:before{background:transparent;border:6px solid transparent;content:\\\"\\\";pointer-events:none;position:absolute}.leaflet-tooltip-bottom{margin-top:6px}.leaflet-tooltip-top{margin-top:-6px}.leaflet-tooltip-bottom:before,.leaflet-tooltip-top:before{left:50%;margin-left:-6px}.leaflet-tooltip-top:before{border-top-color:#fff;bottom:0;margin-bottom:-12px}.leaflet-tooltip-bottom:before{border-bottom-color:#fff;margin-left:-6px;margin-top:-12px;top:0}.leaflet-tooltip-left{margin-left:-6px}.leaflet-tooltip-right{margin-left:6px}.leaflet-tooltip-left:before,.leaflet-tooltip-right:before{margin-top:-6px;top:50%}.leaflet-tooltip-left:before{border-left-color:#fff;margin-right:-12px;right:0}.leaflet-tooltip-right:before{border-right-color:#fff;left:0;margin-left:-12px}\";\nvar stylesheet=\".leaflet-image-layer,.leaflet-layer,.leaflet-marker-icon,.leaflet-marker-shadow,.leaflet-pane,.leaflet-pane>canvas,.leaflet-pane>svg,.leaflet-tile,.leaflet-tile-container,.leaflet-zoom-box{left:0;position:absolute;top:0}.leaflet-container{overflow:hidden}.leaflet-marker-icon,.leaflet-marker-shadow,.leaflet-tile{-webkit-user-drag:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.leaflet-safari .leaflet-tile{image-rendering:-webkit-optimize-contrast}.leaflet-safari .leaflet-tile-container{height:1600px;-webkit-transform-origin:0 0;width:1600px}.leaflet-marker-icon,.leaflet-marker-shadow{display:block}.leaflet-container .leaflet-marker-pane img,.leaflet-container .leaflet-overlay-pane svg,.leaflet-container .leaflet-shadow-pane img,.leaflet-container .leaflet-tile,.leaflet-container .leaflet-tile-pane img,.leaflet-container img.leaflet-image-layer{max-height:none!important;max-width:none!important}.leaflet-container.leaflet-touch-zoom{-ms-touch-action:pan-x pan-y;touch-action:pan-x pan-y}.leaflet-container.leaflet-touch-drag{-ms-touch-action:pinch-zoom;touch-action:none;touch-action:pinch-zoom}.leaflet-container.leaflet-touch-drag.leaflet-touch-zoom{-ms-touch-action:none;touch-action:none}.leaflet-container{-webkit-tap-highlight-color:transparent}.leaflet-container a{-webkit-tap-highlight-color:rgba(51,181,229,.4)}.leaflet-tile{filter:inherit;visibility:hidden}.leaflet-tile-loaded{visibility:inherit}.leaflet-zoom-box{-moz-box-sizing:border-box;box-sizing:border-box;height:0;width:0;z-index:800}.leaflet-overlay-pane svg{-moz-user-select:none}.leaflet-overlay-pane{z-index:1}.leaflet-vml-shape{height:1px;width:1px}.lvml{behavior:url(#default#VML);display:inline-block;position:absolute}.leaflet-control{pointer-events:visiblePainted;pointer-events:auto;position:relative;z-index:800}.leaflet-bottom,.leaflet-top{pointer-events:none;position:absolute;z-index:1}.leaflet-top{top:0}.leaflet-right{right:0}.leaflet-bottom{bottom:0}.leaflet-left{left:0}.leaflet-control{clear:both;float:left}.leaflet-right .leaflet-control{float:right}.leaflet-top .leaflet-control{margin-top:10px}.leaflet-bottom .leaflet-control{margin-bottom:10px}.leaflet-left .leaflet-control{margin-left:10px}.leaflet-right .leaflet-control{margin-right:10px}.leaflet-fade-anim .leaflet-tile{will-change:opacity}.leaflet-fade-anim .leaflet-popup{opacity:0;-webkit-transition:opacity .2s linear;-moz-transition:opacity .2s linear;transition:opacity .2s linear}.leaflet-fade-anim .leaflet-map-pane .leaflet-popup{opacity:1}.leaflet-zoom-animated{-webkit-transform-origin:0 0;-ms-transform-origin:0 0;transform-origin:0 0}.leaflet-zoom-anim .leaflet-zoom-animated{-webkit-transition:-webkit-transform .25s cubic-bezier(0,0,.25,1);-moz-transition:-moz-transform .25s cubic-bezier(0,0,.25,1);transition:transform .25s cubic-bezier(0,0,.25,1);will-change:transform}.leaflet-pan-anim .leaflet-tile,.leaflet-zoom-anim .leaflet-tile{-webkit-transition:none;-moz-transition:none;transition:none}.leaflet-zoom-anim .leaflet-zoom-hide{visibility:hidden}.leaflet-interactive{cursor:pointer}.leaflet-grab{cursor:-webkit-grab;cursor:-moz-grab;cursor:grab}.leaflet-crosshair,.leaflet-crosshair .leaflet-interactive{cursor:crosshair}.leaflet-control,.leaflet-popup-pane{cursor:auto}.leaflet-dragging .leaflet-grab,.leaflet-dragging .leaflet-grab .leaflet-interactive,.leaflet-dragging .leaflet-marker-draggable{cursor:move;cursor:-webkit-grabbing;cursor:-moz-grabbing;cursor:grabbing}.leaflet-image-layer,.leaflet-marker-icon,.leaflet-marker-shadow,.leaflet-pane>svg path,.leaflet-tile-container{pointer-events:none}.leaflet-image-layer.leaflet-interactive,.leaflet-marker-icon.leaflet-interactive,.leaflet-pane>svg path.leaflet-interactive{pointer-events:visiblePainted;pointer-events:auto}.leaflet-container{background:#dfe5eb;outline:0}.leaflet-container a{color:#0078a8}.leaflet-container a.leaflet-active{outline:2px solid orange}.leaflet-zoom-box{background:rgba(255,255,255,.5);border:2px dotted #38f}.leaflet-container{font:12px/1.5 Helvetica Neue,Arial,Helvetica,sans-serif}.leaflet-bar{border-radius:4px;box-shadow:0 1px 5px rgba(0,0,0,.65)}.leaflet-bar a,.leaflet-bar a:hover{background-color:#fff;border-bottom:1px solid rgba(130,130,130,.2);color:#000;display:block;height:26px;line-height:26px;text-align:center;text-decoration:none;width:26px}.leaflet-bar a,.leaflet-control-layers-toggle{background-position:50% 50%;background-repeat:no-repeat;display:block}.leaflet-bar a:hover{background-color:#f4f4f4}.leaflet-bar a:first-child{border-top-left-radius:4px;border-top-right-radius:4px}.leaflet-bar a:last-child{border-bottom:none;border-bottom-left-radius:4px;border-bottom-right-radius:4px}.leaflet-bar a.leaflet-disabled{background-color:#f4f4f4;color:#bbb;cursor:default}.leaflet-touch .leaflet-bar a{height:30px;line-height:30px;width:30px}.leaflet-touch .leaflet-bar a:first-child{border-top-left-radius:2px;border-top-right-radius:2px}.leaflet-touch .leaflet-bar a:last-child{border-bottom-left-radius:2px;border-bottom-right-radius:2px}.leaflet-control-zoom-in,.leaflet-control-zoom-out{font:700 18px Lucida Console,Monaco,monospace;text-indent:1px}.leaflet-touch .leaflet-control-zoom-in,.leaflet-touch .leaflet-control-zoom-out{font-size:22px}.leaflet-control-layers{background:#fff;border-radius:5px;box-shadow:0 1px 5px rgba(0,0,0,.4)}.leaflet-touch .leaflet-control-layers-toggle{height:44px;width:44px}.leaflet-control-layers-expanded .leaflet-control-layers-toggle,.leaflet-control-layers .leaflet-control-layers-list{display:none}.leaflet-control-layers-expanded .leaflet-control-layers-list{display:block;position:relative}.leaflet-control-layers-expanded{background:#fff;color:#333;padding:6px 10px 6px 6px}.leaflet-control-layers-scrollbar{overflow-x:hidden;overflow-y:scroll;padding-right:5px}.leaflet-control-layers-selector{margin-top:2px;position:relative;top:1px}.leaflet-control-layers label{display:block}.leaflet-control-layers-separator{border-top:1px solid #ddd;height:0;margin:5px -10px 5px -6px}.leaflet-container .leaflet-control-attribution{background:#fff;background:hsla(0,0%,100%,.7);margin:0}.leaflet-control-attribution,.leaflet-control-scale-line{color:#333;padding:0 5px}.leaflet-control-attribution a{color:#333;font-size:7pt;opacity:.6;text-decoration:none}.leaflet-control-attribution a:hover{text-decoration:underline}.leaflet-container .leaflet-control-attribution,.leaflet-container .leaflet-control-scale{font-size:11px}.leaflet-left .leaflet-control-scale{margin-left:5px}.leaflet-bottom .leaflet-control-scale{margin-bottom:5px}.leaflet-control-scale-line{background:#fff;background:hsla(0,0%,100%,.5);border:2px solid #777;border-top:none;-moz-box-sizing:border-box;box-sizing:border-box;font-size:11px;line-height:1.1;overflow:hidden;padding:2px 5px 1px;white-space:nowrap}.leaflet-control-scale-line:not(:first-child){border-bottom:none;border-top:2px solid #777;margin-top:-2px}.leaflet-control-scale-line:not(:first-child):not(:last-child){border-bottom:2px solid #777}.leaflet-touch .leaflet-bar,.leaflet-touch .leaflet-control-attribution,.leaflet-touch .leaflet-control-layers{box-shadow:none}.leaflet-touch .leaflet-bar,.leaflet-touch .leaflet-control-layers{background-clip:padding-box;border:1px solid rgba(0,0,0,.15)}.leaflet-popup{margin-bottom:20px;position:absolute;text-align:center}.leaflet-popup-content-wrapper{border-radius:12px;padding:1px;text-align:left}.leaflet-popup-content{line-height:1.4;margin:13px 19px}.leaflet-popup-content p{margin:18px 0}.leaflet-popup-tip-container{height:20px;left:50%;margin-left:-20px;overflow:hidden;pointer-events:none;position:absolute;width:40px}.leaflet-popup-tip{height:17px;margin:-10px auto 0;padding:1px;-webkit-transform:rotate(45deg);-moz-transform:rotate(45deg);-ms-transform:rotate(45deg);transform:rotate(45deg);width:17px}.leaflet-popup-content-wrapper,.leaflet-popup-tip{background:#fff;box-shadow:0 3px 14px rgba(0,0,0,.4);color:#333}.leaflet-container a.leaflet-popup-close-button{background:transparent;border:none;color:#c3c3c3;font:16px/14px Tahoma,Verdana,sans-serif;font-weight:700;height:14px;padding:4px 4px 0 0;position:absolute;right:0;text-align:center;text-decoration:none;top:0;width:18px}.leaflet-container a.leaflet-popup-close-button:hover{color:#999}.leaflet-popup-scrolled{border-bottom:1px solid #ddd;border-top:1px solid #ddd;overflow:auto}.leaflet-oldie .leaflet-popup-content-wrapper{zoom:1}.leaflet-oldie .leaflet-popup-tip{-ms-filter:\\\"progid:DXImageTransform.Microsoft.Matrix(M11=0.70710678, M12=0.70710678, M21=-0.70710678, M22=0.70710678)\\\";filter:progid:DXImageTransform.Microsoft.Matrix(M11=0.70710678,M12=0.70710678,M21=-0.70710678,M22=0.70710678);margin:0 auto;width:24px}.leaflet-oldie .leaflet-popup-tip-container{margin-top:-1px}.leaflet-oldie .leaflet-control-layers,.leaflet-oldie .leaflet-control-zoom,.leaflet-oldie .leaflet-popup-content-wrapper,.leaflet-oldie .leaflet-popup-tip{border:1px solid #999}.leaflet-div-icon{background:#fff;border:1px solid #666}.leaflet-tooltip{background-color:#fff;border:1px solid #fff;border-radius:3px;box-shadow:0 1px 3px rgba(0,0,0,.4);color:#222;padding:6px;pointer-events:none;position:absolute;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap}.leaflet-tooltip.leaflet-clickable{cursor:pointer;pointer-events:auto}.leaflet-tooltip-bottom:before,.leaflet-tooltip-left:before,.leaflet-tooltip-right:before,.leaflet-tooltip-top:before{background:transparent;border:6px solid transparent;content:\\\"\\\";pointer-events:none;position:absolute}.leaflet-tooltip-bottom{margin-top:6px}.leaflet-tooltip-top{margin-top:-6px}.leaflet-tooltip-bottom:before,.leaflet-tooltip-top:before{left:50%;margin-left:-6px}.leaflet-tooltip-top:before{border-top-color:#fff;bottom:0;margin-bottom:-12px}.leaflet-tooltip-bottom:before{border-bottom-color:#fff;margin-left:-6px;margin-top:-12px;top:0}.leaflet-tooltip-left{margin-left:-6px}.leaflet-tooltip-right{margin-left:6px}.leaflet-tooltip-left:before,.leaflet-tooltip-right:before{margin-top:-6px;top:50%}.leaflet-tooltip-left:before{border-left-color:#fff;margin-right:-12px;right:0}.leaflet-tooltip-right:before{border-right-color:#fff;left:0;margin-left:-12px}\";\n\nexport { css_248z as default, stylesheet };\n//# sourceMappingURL=leaflet.css.js.map\n", "import { css, injectGlobal } from '@emotion/css'\n\n// Utils\nimport { getCssVarNames, injectGlobalCssVariables } from 'utils/style'\n\n// Inject Leaflet global style\n// eslint-disable-next-line\nimport leafletCSS from './leaflet.css'\ninjectGlobal(leafletCSS)\n\nconst cssVarDefaults = {\n  '--vis-map-container-background-color': '#dfe5eb',\n  /* Undefined by default to allow proper fallback to var(--vis-font-family) */\n  '--vis-map-label-font-family': undefined as undefined,\n\n  '--vis-map-point-default-fill-color': '#B9BEC3',\n  '--vis-map-point-ring-fill-color': '#ffffff',\n  '--vis-map-point-default-stroke-color': '#959da3',\n  '--vis-map-point-default-stroke-width': '0px',\n  '--vis-map-point-default-cursor': 'default',\n\n  '--vis-map-cluster-default-fill-color': '#fff',\n  '--vis-map-cluster-default-stroke-color': '#B9BEC3',\n  '--vis-map-cluster-default-stroke-width': '1.5px',\n  '--vis-map-cluster-donut-fill-color': '#959da3',\n\n  '--vis-map-cluster-inner-label-text-color-dark': '#5b5f6d',\n  '--vis-map-cluster-inner-label-text-color-light': '#fff',\n\n  '--vis-map-point-inner-label-text-color-dark': '#5b5f6d',\n  '--vis-map-point-inner-label-text-color-light': '#fff',\n\n  '--vis-map-point-bottom-label-text-color': '#5b5f6d',\n  '--vis-map-point-bottom-label-font-size': '10px',\n\n  '--vis-map-cluster-expanded-background-fill-color': '#fff',\n\n  /* Dark Theme */\n  '--vis-dark-map-container-background-color': '#dfe5eb',\n  '--vis-dark-map-point-default-fill-color': '#B9BEC3',\n  '--vis-dark-map-point-default-stroke-color': '#959da3',\n  '--vis-dark-map-point-ring-fill-color': '#5b5f6d',\n\n  '--vis-dark-map-cluster-default-fill-color': '#5b5f6d',\n  '--vis-dark-map-cluster-default-stroke-color': '#B9BEC3',\n  '--vis-dark-map-cluster-donut-fill-color': '#959da3',\n\n  '--vis-dark-map-cluster-inner-label-text-color-dark': '#5b5f6d',\n  '--vis-dark-map-cluster-inner-label-text-color-light': '#fff',\n\n  '--vis-dark-map-point-inner-label-text-color-dark': '#5b5f6d',\n  '--vis-dark-map-point-inner-label-text-color-light': '#fff',\n\n  '--vis-dark-map-point-bottom-label-text-color': '#5b5f6d',\n\n  '--vis-dark-map-cluster-expanded-background-fill-color': '#fff',\n}\n\nexport const root = css`\n  label: leaflet-map-component;\n\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  background-color: var(--vis-map-container-background-color);\n\n  canvas {\n    pointer-events: all;\n  }\n`\n\nexport const variables = getCssVarNames(cssVarDefaults)\ninjectGlobalCssVariables(cssVarDefaults, root)\n\nexport const background = `${root} canvas`\n\nexport const points = css`\n  label: g-points;\n`\n\nexport const point = css`\n  label: g-point;\n`\n\nexport const pointPath = css`\n  label: point-path;\n\n  stroke-opacity: 1;\n  fill-opacity: 1.0;\n  fill: var(${variables.mapPointDefaultFillColor});\n  stroke: var(${variables.mapPointDefaultStrokeColor});\n  stroke-width: var(${variables.mapPointDefaultStrokeWidth});\n  pointer-events: fill !important;\n  transition: .2s stroke-width, .3s transform;\n  cursor: var(${variables.mapPointDefaultCursor});\n\n  &:hover {\n    stroke-width: 2;\n    fill-opacity: 1;\n    animation: none;\n    transform: scale(1.1);\n  }\n`\n\nexport const pointPathRing = css`\n  label: point-path-ring;\n  fill: var(${variables.mapPointRingFillColor});\n`\n\nexport const pointPathCluster = css`\n  label: point-path-cluster;\n  fill-opacity: 0.9;\n  stroke: none;\n  animation: none;\n  fill: var(${variables.mapClusterDefaultFillColor});\n  stroke: var(${variables.mapClusterDefaultStrokeColor});\n  stroke-width: var(${variables.mapClusterDefaultStrokeWidth});\n`\n\nexport const pointSelectionRing = css`\n  label: point-selection-ring;\n  stroke: var(${variables.mapPointDefaultFillColor});\n`\n\nexport const pointSelection = css`\n  label: point-selection;\n\n  opacity: 0;\n  transform: scale(1);\n\n  &.active {\n    transition: all 400ms cubic-bezier(0.230, 1.000, 0.320, 1.000);\n    opacity: 1;\n    transform: scale(1.25);\n  }\n`\n\nexport const innerLabel = css`\n  label: inner-label;\n\n  text-anchor: middle;\n  fill: var(${variables.mapPointInnerLabelTextColorDark});\n  font-family: var(${variables.mapLabelFontFamily}, var(--vis-font-family));\n  pointer-events: none;\n  font-weight: 600;\n`\n\nexport const innerLabelCluster = css`\n  label: inner-label-cluster;\n  fill: var(${variables.mapPointInnerLabelTextColorDark});\n`\n\nexport const bottomLabel = css`\n  label: bottom-label;\n\n  text-anchor: middle;\n  fill: var(${variables.mapPointBottomLabelTextColor});\n  font-family: var(${variables.mapLabelFontFamily}, var(--vis-font-family));\n  pointer-events: none;\n  font-weight: 600;\n`\n\nexport const donutCluster = css`\n  label: donut-cluster;\n\n  transform: scale(1);\n  transition: .3s transform;\n  path {\n    fill: var(${variables.mapClusterDonutFillColor});\n    stroke-width: 0.5;\n  }\n\n  &:hover {\n    transform: scale(1.1);\n  }\n`\n\nexport const svgOverlay = css`\n  label: svg-overlay;\n  position: absolute;\n  pointer-events: none;\n`\n\nexport const backgroundRect = css`\n  label: background-rect;\n\n  opacity: 0;\n`\n\nexport const clusterBackground = css`\n  label: cluster-background;\n\n  fill: var(${variables.mapClusterExpandedBackgroundFillColor});\n  opacity: 0.6;\n  visibility: hidden;\n\n  &.active {\n    visibility: visible;\n  }\n`\n\nexport const onFeatureHover = css`\n  label: feature-hovered;\n`\n\nexport const mapboxglCanvas = css`\n  pointer-events: all;\n  cursor: grab;\n\n  &${`.${onFeatureHover}`} {\n    cursor: default;\n  }\n`\n\nexport const map = css`\n  label: map;\n`\n", "/******************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\n/* global Reflect, Promise, SuppressedError, Symbol, Iterator */\n\nvar extendStatics = function(d, b) {\n  extendStatics = Object.setPrototypeOf ||\n      ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n      function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n  return extendStatics(d, b);\n};\n\nexport function __extends(d, b) {\n  if (typeof b !== \"function\" && b !== null)\n      throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n  extendStatics(d, b);\n  function __() { this.constructor = d; }\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nexport var __assign = function() {\n  __assign = Object.assign || function __assign(t) {\n      for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n      return t;\n  }\n  return __assign.apply(this, arguments);\n}\n\nexport function __rest(s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n      t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n      for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n              t[p[i]] = s[p[i]];\n      }\n  return t;\n}\n\nexport function __decorate(decorators, target, key, desc) {\n  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n  else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}\n\nexport function __param(paramIndex, decorator) {\n  return function (target, key) { decorator(target, key, paramIndex); }\n}\n\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n  function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\n  var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n  var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n  var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n  var _, done = false;\n  for (var i = decorators.length - 1; i >= 0; i--) {\n      var context = {};\n      for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n      for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n      context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\n      var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\n      if (kind === \"accessor\") {\n          if (result === void 0) continue;\n          if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n          if (_ = accept(result.get)) descriptor.get = _;\n          if (_ = accept(result.set)) descriptor.set = _;\n          if (_ = accept(result.init)) initializers.unshift(_);\n      }\n      else if (_ = accept(result)) {\n          if (kind === \"field\") initializers.unshift(_);\n          else descriptor[key] = _;\n      }\n  }\n  if (target) Object.defineProperty(target, contextIn.name, descriptor);\n  done = true;\n};\n\nexport function __runInitializers(thisArg, initializers, value) {\n  var useValue = arguments.length > 2;\n  for (var i = 0; i < initializers.length; i++) {\n      value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n  }\n  return useValue ? value : void 0;\n};\n\nexport function __propKey(x) {\n  return typeof x === \"symbol\" ? x : \"\".concat(x);\n};\n\nexport function __setFunctionName(f, name, prefix) {\n  if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\n  return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\n};\n\nexport function __metadata(metadataKey, metadataValue) {\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\n}\n\nexport function __awaiter(thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n      function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n      function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n      function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n      step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\n\nexport function __generator(thisArg, body) {\n  var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\n  return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n  function verb(n) { return function (v) { return step([n, v]); }; }\n  function step(op) {\n      if (f) throw new TypeError(\"Generator is already executing.\");\n      while (g && (g = 0, op[0] && (_ = 0)), _) try {\n          if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n          if (y = 0, t) op = [op[0] & 2, t.value];\n          switch (op[0]) {\n              case 0: case 1: t = op; break;\n              case 4: _.label++; return { value: op[1], done: false };\n              case 5: _.label++; y = op[1]; op = [0]; continue;\n              case 7: op = _.ops.pop(); _.trys.pop(); continue;\n              default:\n                  if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                  if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                  if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                  if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                  if (t[2]) _.ops.pop();\n                  _.trys.pop(); continue;\n          }\n          op = body.call(thisArg, _);\n      } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n      if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n  }\n}\n\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n  }\n  Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nexport function __exportStar(m, o) {\n  for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\n}\n\nexport function __values(o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n      next: function () {\n          if (o && i >= o.length) o = void 0;\n          return { value: o && o[i++], done: !o };\n      }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n}\n\nexport function __read(o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o), r, ar = [], e;\n  try {\n      while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  }\n  catch (error) { e = { error: error }; }\n  finally {\n      try {\n          if (r && !r.done && (m = i[\"return\"])) m.call(i);\n      }\n      finally { if (e) throw e.error; }\n  }\n  return ar;\n}\n\n/** @deprecated */\nexport function __spread() {\n  for (var ar = [], i = 0; i < arguments.length; i++)\n      ar = ar.concat(__read(arguments[i]));\n  return ar;\n}\n\n/** @deprecated */\nexport function __spreadArrays() {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n  for (var r = Array(s), k = 0, i = 0; i < il; i++)\n      for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n          r[k] = a[j];\n  return r;\n}\n\nexport function __spreadArray(to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n      if (ar || !(i in from)) {\n          if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n          ar[i] = from[i];\n      }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n}\n\nexport function __await(v) {\n  return this instanceof __await ? (this.v = v, this) : new __await(v);\n}\n\nexport function __asyncGenerator(thisArg, _arguments, generator) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var g = generator.apply(thisArg, _arguments || []), i, q = [];\n  return i = Object.create((typeof AsyncIterator === \"function\" ? AsyncIterator : Object).prototype), verb(\"next\"), verb(\"throw\"), verb(\"return\", awaitReturn), i[Symbol.asyncIterator] = function () { return this; }, i;\n  function awaitReturn(f) { return function (v) { return Promise.resolve(v).then(f, reject); }; }\n  function verb(n, f) { if (g[n]) { i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; if (f) i[n] = f(i[n]); } }\n  function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\n  function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\n  function fulfill(value) { resume(\"next\", value); }\n  function reject(value) { resume(\"throw\", value); }\n  function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\n}\n\nexport function __asyncDelegator(o) {\n  var i, p;\n  return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\n  function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\n}\n\nexport function __asyncValues(o) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var m = o[Symbol.asyncIterator], i;\n  return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n  function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n  function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n}\n\nexport function __makeTemplateObject(cooked, raw) {\n  if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n  return cooked;\n};\n\nvar __setModuleDefault = Object.create ? (function(o, v) {\n  Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n  o[\"default\"] = v;\n};\n\nvar ownKeys = function(o) {\n  ownKeys = Object.getOwnPropertyNames || function (o) {\n    var ar = [];\n    for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n    return ar;\n  };\n  return ownKeys(o);\n};\n\nexport function __importStar(mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n  __setModuleDefault(result, mod);\n  return result;\n}\n\nexport function __importDefault(mod) {\n  return (mod && mod.__esModule) ? mod : { default: mod };\n}\n\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n}\n\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\n  if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n  return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n}\n\nexport function __classPrivateFieldIn(state, receiver) {\n  if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\n  return typeof state === \"function\" ? receiver === state : state.has(receiver);\n}\n\nexport function __addDisposableResource(env, value, async) {\n  if (value !== null && value !== void 0) {\n    if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\n    var dispose, inner;\n    if (async) {\n      if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\n      dispose = value[Symbol.asyncDispose];\n    }\n    if (dispose === void 0) {\n      if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\n      dispose = value[Symbol.dispose];\n      if (async) inner = dispose;\n    }\n    if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\n    if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\n    env.stack.push({ value: value, dispose: dispose, async: async });\n  }\n  else if (async) {\n    env.stack.push({ async: true });\n  }\n  return value;\n}\n\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n  var e = new Error(message);\n  return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n};\n\nexport function __disposeResources(env) {\n  function fail(e) {\n    env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\n    env.hasError = true;\n  }\n  var r, s = 0;\n  function next() {\n    while (r = env.stack.pop()) {\n      try {\n        if (!r.async && s === 1) return s = 0, env.stack.push(r), Promise.resolve().then(next);\n        if (r.dispose) {\n          var result = r.dispose.call(r.value);\n          if (r.async) return s |= 2, Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\n        }\n        else s |= 1;\n      }\n      catch (e) {\n        fail(e);\n      }\n    }\n    if (s === 1) return env.hasError ? Promise.reject(env.error) : Promise.resolve();\n    if (env.hasError) throw env.error;\n  }\n  return next();\n}\n\nexport function __rewriteRelativeImportExtension(path, preserveJsx) {\n  if (typeof path === \"string\" && /^\\.\\.?\\//.test(path)) {\n      return path.replace(/\\.(tsx)$|((?:\\.d)?)((?:\\.[^./]+?)?)\\.([cm]?)ts$/i, function (m, tsx, d, ext, cm) {\n          return tsx ? preserveJsx ? \".jsx\" : \".js\" : d && (!ext || !cm) ? m : (d + ext + \".\" + cm.toLowerCase() + \"js\");\n      });\n  }\n  return path;\n}\n\nexport default {\n  __extends,\n  __assign,\n  __rest,\n  __decorate,\n  __param,\n  __esDecorate,\n  __runInitializers,\n  __propKey,\n  __setFunctionName,\n  __metadata,\n  __awaiter,\n  __generator,\n  __createBinding,\n  __exportStar,\n  __values,\n  __read,\n  __spread,\n  __spreadArrays,\n  __spreadArray,\n  __await,\n  __asyncGenerator,\n  __asyncDelegator,\n  __asyncValues,\n  __makeTemplateObject,\n  __importStar,\n  __importDefault,\n  __classPrivateFieldGet,\n  __classPrivateFieldSet,\n  __classPrivateFieldIn,\n  __addDisposableResource,\n  __disposeResources,\n  __rewriteRelativeImportExtension,\n};\n", "import type L from 'leaflet'\nimport { select, Selection } from 'd3-selection'\nimport type { GeoJSONSource, Map } from 'maplibre-gl'\nimport { feature } from 'topojson-client'\n\n// Types\nimport { GenericDataRecord } from 'types/data'\n\n// Config\nimport { LeafletMapConfigInterface } from '../config'\n\n// Local Types\n\n// Utils\nimport { constraintMapView, mapboxglWheelEventThrottled } from '../renderer/mapboxgl-utils'\n\n// Styles\nimport * as s from '../style'\nimport { LeafletMapRenderer } from '../types'\n\nexport const initialMapCenter: L.LatLngExpression = [36, 14]\nexport const initialMapZoom = 1.9\n\nexport function updateTopoJson<T extends GenericDataRecord> (maplibreMap: Map, config: LeafletMapConfigInterface<T>): void {\n  const { topoJSONLayer } = config\n\n  if (topoJSONLayer.sources) {\n    const featureObject = topoJSONLayer.sources?.objects?.[topoJSONLayer.featureName]\n    if (featureObject) {\n      const mapSource = maplibreMap.getSource(topoJSONLayer.featureName) as GeoJSONSource\n      const featureCollection = feature(topoJSONLayer.sources, featureObject)\n      if (mapSource) {\n        mapSource.setData(featureCollection)\n      } else {\n        maplibreMap.addSource(topoJSONLayer.featureName, { type: 'geojson', data: featureCollection })\n      }\n    }\n  }\n\n  const fillLayer = maplibreMap.getLayer(`${topoJSONLayer.featureName}-area`)\n  if (topoJSONLayer.fillProperty) {\n    if (!fillLayer) {\n      maplibreMap.addLayer({\n        id: `${topoJSONLayer.featureName}-area`,\n        type: 'fill',\n        source: topoJSONLayer.featureName,\n        paint: {\n          // eslint-disable-next-line @typescript-eslint/naming-convention\n          'fill-antialias': false,\n          // eslint-disable-next-line @typescript-eslint/naming-convention\n          'fill-opacity': topoJSONLayer.fillOpacity,\n        },\n      })\n    }\n    maplibreMap.setPaintProperty(`${topoJSONLayer.featureName}-area`, 'fill-color', [\n      'case',\n      ['!', ['has', topoJSONLayer.fillProperty]],\n      'rgba(255, 255, 255, 0)',\n      ['get', topoJSONLayer.fillProperty],\n    ])\n  } else if (fillLayer) maplibreMap.removeLayer(`${topoJSONLayer.featureName}-area`)\n\n  const strokeLayer = maplibreMap.getLayer(`${topoJSONLayer.featureName}-stroke`)\n  if (topoJSONLayer.strokeProperty) {\n    if (!strokeLayer) {\n      maplibreMap.addLayer({\n        id: `${topoJSONLayer.featureName}-stroke`,\n        type: 'line',\n        source: topoJSONLayer.featureName,\n        paint: {\n          // eslint-disable-next-line @typescript-eslint/naming-convention\n          'line-opacity': topoJSONLayer.strokeOpacity,\n          // eslint-disable-next-line @typescript-eslint/naming-convention\n          'line-width': topoJSONLayer.strokeWidth,\n        },\n      })\n    }\n    maplibreMap.setPaintProperty(`${topoJSONLayer.featureName}-stroke`, 'line-color', [\n      'case',\n      ['!', ['has', topoJSONLayer.strokeProperty]],\n      'rgba(255, 255, 255, 0)',\n      ['get', topoJSONLayer.strokeProperty],\n    ])\n  } else if (strokeLayer) { maplibreMap.removeLayer(`${topoJSONLayer.featureName}-stroke`) }\n}\n\nexport async function setupMap<T extends GenericDataRecord> (mapContainer: HTMLElement, config: LeafletMapConfigInterface<T>): Promise<{\n  leaflet: L.Map;\n  layer: L.Layer;\n  svgOverlay: Selection<SVGSVGElement, unknown, null, undefined>;\n  svgGroup: Selection<SVGGElement, unknown, SVGElement, undefined>;\n}> {\n  const { style, renderer, topoJSONLayer } = config\n  const leaflet = await import('leaflet')\n  const L = leaflet.default\n\n  if (!style) {\n    console.error('Unovis | Leaflet Map: Please provide style settings in the map configuration object')\n    return\n  }\n\n  const leafletMap = L.map(mapContainer, {\n    scrollWheelZoom: renderer === LeafletMapRenderer.Raster, // We define custom scroll event for MapboxGL to enabling smooth zooming\n    zoomControl: false,\n    zoomDelta: renderer === LeafletMapRenderer.Raster ? 1 : 0.5,\n    zoomSnap: renderer === LeafletMapRenderer.Raster ? 1 : 0,\n    attributionControl: true,\n    center: initialMapCenter,\n    zoom: initialMapZoom,\n    minZoom: Math.sqrt(mapContainer.offsetWidth) / 17,\n    maxZoom: 23,\n    maxBounds: L.latLngBounds(\n      [-75, -290],\n      [85, 290]\n    ),\n    maxBoundsViscosity: 1,\n  })\n\n  for (const attr of config.attribution) {\n    leafletMap.attributionControl.addAttribution(attr)\n  }\n\n  let layer: L.Layer | (L.Layer & { getMaplibreMap(): Map })\n  let maplibreMap: Map = null\n\n  switch (renderer) {\n    case LeafletMapRenderer.MapLibre:\n      // eslint-disable-next-line no-case-declarations\n      const maplibre = await import('maplibre-gl')\n      // eslint-disable-next-line no-case-declarations\n      const { getMaplibreGLLayer } = await import('../renderer/mapboxgl-layer')\n      layer = getMaplibreGLLayer(config, L, maplibre.default)\n      layer.addTo(leafletMap)\n      maplibreMap = (layer as ReturnType<typeof getMaplibreGLLayer>).getMaplibreMap?.()\n\n      select(mapContainer).on('wheel', (event: WheelEvent) => {\n        event.preventDefault()\n        mapboxglWheelEventThrottled(leafletMap, layer as (L.Layer & { getMaplibreMap(): Map }), event)\n      })\n      break\n    case LeafletMapRenderer.Raster:\n      layer = L.tileLayer(style as string)\n      layer.addTo(leafletMap)\n      break\n  }\n  // leaflet-mapbox-gl has a layer positioning issue on far zoom levels which leads to having wrong\n  //   map points projection. We constrain the view to prevent that.\n  constraintMapView(leafletMap)\n\n  if (maplibreMap && topoJSONLayer?.sources) {\n    const canvas = maplibreMap.getCanvas()\n    const canvasSelection = select(canvas).classed(s.mapboxglCanvas, true)\n    const tilePaneSelection = select(leafletMap.getPanes().tilePane)\n\n    maplibreMap.on('mousemove', (event) => {\n      const layerName = `${topoJSONLayer.featureName}-area`\n      const layer = maplibreMap.getLayer(layerName)\n      if (!layer) return\n\n      const features = maplibreMap.queryRenderedFeatures(event.point, { layers: [layerName] })\n      tilePaneSelection.datum(features[0])\n      canvasSelection.classed(s.onFeatureHover, Boolean(features[0]))\n    })\n\n    maplibreMap.on('load', () => {\n      updateTopoJson(maplibreMap, config)\n    })\n  }\n\n  const svgOverlay = select(leafletMap.getPanes().overlayPane).append('svg')\n  const svgGroup = svgOverlay.append('g')\n\n  return {\n    leaflet: leafletMap,\n    layer,\n    svgOverlay,\n    svgGroup,\n  }\n}\n", "import { Selection } from 'd3-selection'\nimport { pie, arc, PieArcDatum } from 'd3-shape'\n\n// Local Types\nimport { LeafletMapPieDatum } from '../types'\n\nconst pieConstructor = pie<LeafletMapPieDatum>()\n  .sort(null)\n  .value((d: LeafletMapPieDatum): number => d.value)\n\nexport function updateDonut (\n  selection: Selection<SVGGElement, unknown, null, undefined>,\n  data: LeafletMapPieDatum[],\n  radius: number,\n  arcWidth = 2,\n  padAngle = 0.05\n): void {\n  pieConstructor.padAngle(padAngle)\n  const arcs = pieConstructor(data.filter(d => d.value))\n\n  const arcPathGen = arc<PieArcDatum<LeafletMapPieDatum>>()\n    .innerRadius(arcWidth ? radius - arcWidth / 2 : 0)\n    .outerRadius(arcWidth ? radius + arcWidth / 2 : radius)\n\n  const donuts = selection.selectAll<SVGPathElement, LeafletMapPieDatum>('path')\n    .data(arcs)\n\n  donuts.exit().remove()\n\n  donuts.enter()\n    .append('path')\n    .merge(donuts)\n    .attr('class', d => d.data.className ?? null)\n    .attr('d', arcPathGen)\n    .style('fill', d => d.data.color ?? null)\n    .style('stroke', d => d.data.color ?? null)\n}\n", "import { select, Selection } from 'd3-selection'\nimport { color } from 'd3-color'\nimport type L from 'leaflet'\n\n// Types\nimport { Rect } from 'types/misc'\nimport { GenericDataRecord } from 'types/data'\n\n// Utils\nimport { smartTransition } from 'utils/d3'\nimport { estimateTextSize, trimStringMiddle } from 'utils/text'\nimport { clamp, getString } from 'utils/data'\nimport { getCSSVariableValueInPixels, rectIntersect } from 'utils/misc'\nimport { hexToBrightness } from 'utils/color'\nimport { cssvar } from 'utils/style'\nimport { getPointPos } from './utils'\n\n\n// Local Types\nimport { LeafletMapPointDatum, LeafletMapClusterDatum, LeafletMapPoint, LeafletMapPointShape } from '../types'\n\n// Modules\nimport { updateDonut } from './donut'\n\n// Config\nimport { LeafletMapConfigInterface } from '../config'\n\nimport * as s from '../style'\n\nconst BOTTOM_LABEL_TOP_MARGIN = 10\n\nexport function createNodes<D extends GenericDataRecord> (\n  selection: Selection<SVGGElement, LeafletMapPoint<D>, SVGGElement, unknown>\n): void {\n  selection.append('path')\n    .attr('class', s.pointPath)\n    .attr('id', d => `point-${d.id}`)\n    .style('opacity', 0)\n\n  selection.append('g')\n    .attr('class', s.donutCluster)\n\n  selection.append('text')\n    .attr('class', s.innerLabel)\n    .classed(s.innerLabelCluster, d => (d.properties as LeafletMapClusterDatum<D>).cluster)\n    .attr('id', d => `label-${d.id}`)\n    .attr('dy', '0.32em')\n\n  selection.append('text')\n    .attr('class', s.bottomLabel)\n    .attr('dy', '0.32em')\n    .attr('opacity', 1)\n}\n\nexport function updateNodes<D extends GenericDataRecord> (\n  selection: Selection<SVGGElement, LeafletMapPoint<D>, SVGGElement, unknown>,\n  config: LeafletMapConfigInterface<D>,\n  leafletMap: L.Map,\n  mapMoveZoomUpdateOnly: boolean\n): void {\n  selection.each((d, i, elements) => {\n    const group = select(elements[i])\n    const node: Selection<SVGPathElement, any, SVGGElement, any> = group.select(`.${s.pointPath}`)\n    const innerLabel: Selection<SVGTextElement, any, SVGElement, any> = group.select(`.${s.innerLabel}`)\n    const bottomLabel: Selection<SVGTextElement, any, SVGElement, any> = group.select(`.${s.bottomLabel}`)\n\n    const { x, y } = getPointPos(d, leafletMap)\n    const donutData = d.donutData\n    const isCluster = (d.properties as LeafletMapClusterDatum<D>).cluster\n    const fromExpandedCluster = !!(d.properties as LeafletMapPointDatum<D>).expandedClusterPoint\n\n    const innerLabelText = (isCluster\n      ? getString(d.properties as LeafletMapClusterDatum<D>, config.clusterLabel)\n      : getString(d.properties as LeafletMapPointDatum<D>, config.pointLabel)\n    ) ?? ''\n    const innerLabelColor = (isCluster\n      ? getString(d.properties as LeafletMapClusterDatum<D>, config.clusterLabelColor)\n      : getString(d.properties as LeafletMapPointDatum<D>, config.pointLabelColor)\n    ) ?? null\n    const bottomLabelText = (isCluster\n      ? getString(d.properties as LeafletMapClusterDatum<D>, config.clusterBottomLabel)\n      : getString(d.properties as LeafletMapPointDatum<D>, config.pointBottomLabel)\n    ) ?? ''\n    const pointCursor = getString(d.properties as LeafletMapPointDatum<D>, config.pointCursor)\n    const pointShape = getString(d.properties as LeafletMapPointDatum<D>, config.pointShape)\n    const isRing = pointShape === LeafletMapPointShape.Ring\n    const isCircular = (pointShape === LeafletMapPointShape.Circle) || isRing || isCluster || !pointShape\n\n    // To get updated on every render call\n    const ringWidth = (isCluster && config.clusterRingWidth) || (isRing && config.pointRingWidth) || 0\n    group.attr('transform', `translate(${x},${y})`)\n    group.select<SVGGElement>(`.${s.donutCluster}`)\n      .call(updateDonut, donutData, isCircular ? d.radius : 0, ringWidth)\n\n    node.attr('d', d.path)\n    node.style('cursor', isCluster ? 'pointer' : pointCursor)\n    bottomLabel.attr('transform', `translate(0,${d.radius + BOTTOM_LABEL_TOP_MARGIN})`)\n    innerLabel.attr('font-size', () => {\n      const fontSize = d.radius / Math.pow(innerLabelText.length, 0.4)\n      return clamp(fontSize, fontSize, 16)\n    })\n\n    if (mapMoveZoomUpdateOnly) return\n\n    // Updates required only when data changes\n    node\n      .classed(s.pointPathCluster, isCluster)\n      .classed(s.pointPathRing, isRing)\n      .style('fill', d.color)\n      .style('stroke', d.color) // being used for hover\n      .style('stroke-width', ringWidth)\n      .style('opacity', 1)\n\n    innerLabel\n      .text(innerLabelText || null)\n      .attr('visibility', innerLabelText ? null : 'hidden')\n      .style('fill', () => {\n        if (innerLabelColor) return innerLabelColor\n\n        // Determine the label color based on the point brightness\n        const c = getComputedStyle(node.node()).fill\n        const hex = color(c)?.hex()\n        if (!hex) return null\n\n        const brightness = hexToBrightness(hex)\n        return brightness > 0.5\n          ? (isCluster ? cssvar(s.variables.mapClusterInnerLabelTextColorDark) : cssvar(s.variables.mapPointInnerLabelTextColorDark))\n          : (isCluster ? cssvar(s.variables.mapClusterInnerLabelTextColorLight) : cssvar(s.variables.mapPointInnerLabelTextColorLight))\n      })\n\n    const bottomLabelTextTrimmed = trimStringMiddle(bottomLabelText, 15)\n    bottomLabel\n      .text(bottomLabelTextTrimmed)\n      .attr('font-size', getCSSVariableValueInPixels(cssvar(s.variables.mapPointBottomLabelFontSize), selection.node()))\n      .attr('visibility', fromExpandedCluster ? 'hidden' : null)\n  })\n}\n\nexport interface LabelSVGGElement extends SVGGElement {\n  labelVisible?: boolean;\n}\n\nexport function collideLabels<D extends GenericDataRecord> (\n  selection: Selection<SVGGElement, LeafletMapPoint<D>, SVGGElement, unknown>,\n  leafletMap: L.Map\n): void {\n  selection.each((datum1: LeafletMapPoint<D>, i, elements: ArrayLike<LabelSVGGElement>) => {\n    const group1LabelElement = elements[i]\n    const group1 = select(group1LabelElement)\n    const label1: Selection<SVGTextElement, any, SVGElement, any> = group1.select(`.${s.bottomLabel}`)\n    group1LabelElement.labelVisible = true\n\n    // Calculate bounding rect of point's bottom label\n    const bottomLabelFontSizePx = getCSSVariableValueInPixels(cssvar(s.variables.mapPointBottomLabelFontSize), selection.node())\n    const p1Pos = getPointPos(datum1, leafletMap)\n    const label1Size = estimateTextSize(label1, bottomLabelFontSizePx, 0.32, true, 0.6)\n    const label1BoundingRect: Rect = {\n      x: p1Pos.x - label1Size.width / 2,\n      y: p1Pos.y - label1Size.height / 2 + datum1.radius + BOTTOM_LABEL_TOP_MARGIN,\n      width: label1Size.width,\n      height: label1Size.height,\n    }\n\n    for (let j = 0; j < elements.length; j += 1) {\n      if (i === j) continue\n      const group2LabelElement = elements[j]\n      const group2 = select(group2LabelElement)\n      const label2: Selection<SVGTextElement, any, SVGElement, any> = group2.select(`.${s.bottomLabel}`)\n      const datum2 = group2.datum() as LeafletMapPoint<D>\n\n      // Calculate bounding rect of the second point's circle\n      const p2Pos = getPointPos(datum2, leafletMap)\n      const point2BoundingRect = {\n        x: p2Pos.x - datum2.radius,\n        y: p2Pos.y - datum2.radius,\n        width: 2 * datum2.radius,\n        height: 2 * datum2.radius,\n      }\n\n      let intersect = rectIntersect(label1BoundingRect, point2BoundingRect)\n\n      // If there's not intersection, check a collision with the second point's label\n      const label2Visible = group2LabelElement.labelVisible\n      if (!intersect && label2Visible) {\n        const label2Size = estimateTextSize(label2, bottomLabelFontSizePx, 0.32, true, 0.6)\n        intersect = rectIntersect(label1BoundingRect, {\n          x: p2Pos.x - label2Size.width / 2,\n          y: p2Pos.y + datum2.radius + BOTTOM_LABEL_TOP_MARGIN - label2Size.height / 2,\n          width: label2Size.width,\n          height: label2Size.height,\n        })\n      }\n\n      if (intersect) {\n        group1LabelElement.labelVisible = false\n        break\n      }\n    }\n\n    smartTransition(label1, 0).attr('opacity', group1LabelElement.labelVisible ? 1 : 0)\n  })\n}\n\nexport function removeNodes<D extends GenericDataRecord> (\n  selection: Selection<SVGGElement, LeafletMapPoint<D>, SVGGElement, unknown>\n): void {\n  selection.remove()\n}\n", "import type L from 'leaflet'\nimport { Selection } from 'd3-selection'\n\n// Types\nimport { GenericDataRecord } from 'types/data'\n\n// Utils\nimport { getString } from 'utils/data'\nimport { getPointPos } from './utils'\n\n// Local Types\nimport { LeafletMapPoint, LeafletMapPointDatum } from '../types'\n\n// Config\nimport { LeafletMapConfigInterface } from '../config'\n\nimport * as s from '../style'\n\n\nexport function createNodeSelectionRing (\n  selection: Selection<SVGGElement, unknown, SVGElement, undefined>\n): void {\n  selection.datum({ _zIndex: 3 })\n  selection.append('path').attr('class', s.pointSelection)\n}\n\nexport function updateNodeSelectionRing<D extends GenericDataRecord> (\n  selection: Selection<SVGGElement, unknown, SVGElement, undefined>,\n  selectedPoint: LeafletMapPoint<D>,\n  pointData: LeafletMapPoint<D>[],\n  config: LeafletMapConfigInterface<D>,\n  leafletMap: L.Map\n): void {\n  selection.attr('class', s.pointSelectionRing)\n  const pointSelection = selection.select(`.${s.pointSelection}`)\n  if (selectedPoint) {\n    const isCluster = selectedPoint.isCluster\n    const selectedPointId: string | undefined = getString(selectedPoint.properties as LeafletMapPointDatum<D>, config.pointId)\n    const foundPoint = pointData.find(d =>\n      isCluster\n        ? (d.id === selectedPoint.id)\n        : (selectedPointId && (getString(d.properties as LeafletMapPointDatum<D>, config.pointId) === selectedPointId))\n    )\n    selection\n      .attr('transform', d => {\n        const { x, y } = getPointPos<D>(foundPoint ?? selectedPoint, leafletMap)\n        return `translate(${x},${y})`\n      })\n      .classed(`${(selectedPoint.properties as LeafletMapPointDatum<D>).shape}`, true)\n\n    pointSelection\n      .classed('active', Boolean(foundPoint))\n      .attr('d', foundPoint ? foundPoint.path : null)\n      .style('fill', 'transparent')\n      .style('stroke-width', 1)\n      .style('stroke', d => {\n        const node = foundPoint || selectedPoint\n        return node?.color\n      })\n  } else {\n    pointSelection.classed('active', false)\n  }\n}\n", "import { Selection } from 'd3-selection'\nimport type L from 'leaflet'\n\n// Types\nimport { GenericDataRecord } from 'types/data'\n\n// Utils\nimport { cloneDeep } from 'utils/data'\nimport { getPointPos, getNodePathData } from './utils'\n\n// Local Types\nimport { LeafletMapPointShape, LeafletMapExpandedCluster } from '../types'\n\n// Config Interface\nimport { LeafletMapConfigInterface } from '../config'\n\nexport function createBackgroundNode (selection: Selection<SVGGElement, unknown, SVGElement, undefined>): void {\n  selection.datum({ _zIndex: 1 })\n  selection.append('path')\n}\n\nexport function updateBackgroundNode<D extends GenericDataRecord> (\n  selection: Selection<SVGGElement, unknown, SVGElement, undefined>,\n  expandedCluster: LeafletMapExpandedCluster<D>,\n  config: LeafletMapConfigInterface<D>,\n  leafletMap: L.Map,\n  clusterBackgroundRadius: number\n): void {\n  const { clusterBackground } = config\n  if (expandedCluster && clusterBackground) {\n    const node = cloneDeep(expandedCluster.cluster)\n    const { x, y } = getPointPos(node, leafletMap)\n    const path = getNodePathData({ x: 0, y: 0 }, clusterBackgroundRadius, LeafletMapPointShape.Circle)\n    selection.select('path').attr('d', d => path)\n    selection\n      .classed('active', true)\n      .attr('transform', `translate(${x},${y})`)\n  } else {\n    selection.classed('active', false)\n  }\n}\n", "import { select, Selection } from 'd3-selection'\nimport { packSiblings } from 'd3-hierarchy'\nimport type L from 'leaflet'\nimport Supercluster, { ClusterFeature, PointFeature } from 'supercluster'\nimport { StyleSpecification } from 'maplibre-gl'\n\n// Core\nimport { ComponentCore } from 'core/component'\n\n// Model\nimport { MapDataModel } from 'data-models/map'\n\n// Types\nimport { ComponentType } from 'types/component'\nimport { GenericDataRecord } from 'types/data'\n\n// Utils\nimport { ResizeObserver } from 'utils/resize-observer'\nimport { clamp, isNil, getNumber, getString, isString } from 'utils/data'\nimport { constraintMapViewThrottled } from './renderer/mapboxgl-utils'\nimport {\n  projectPoint,\n  bBoxMerge,\n  calculateClusterIndex,\n  getNextZoomLevelOnClusterClick,\n  findPointAndClusterByPointId,\n  geoJsonPointToScreenPoint,\n  getClusterRadius,\n  getClustersAndPoints,\n  getNodeRelativePosition,\n  getPointRadius,\n  shouldClusterExpand,\n} from './modules/utils'\n\n// Local Types\nimport {\n  Bounds,\n  LeafletMapClusterDatum,\n  LeafletMapPoint,\n  LeafletMapPointDatum,\n  LeafletMapRenderer,\n  LeafletMapExpandedCluster,\n  MapZoomState,\n  PointExpandedClusterProperties,\n} from './types'\n\n// Config\nimport { LeafletMapDefaultConfig, LeafletMapConfigInterface } from './config'\n\n// Styles\nimport * as s from './style'\n\n// Modules\nimport { initialMapCenter, initialMapZoom, setupMap, updateTopoJson } from './modules/map'\nimport { collideLabels, createNodes, removeNodes, updateNodes } from './modules/node'\nimport { createNodeSelectionRing, updateNodeSelectionRing } from './modules/selectionRing'\nimport { createBackgroundNode, updateBackgroundNode } from './modules/clusterBackground'\n\nexport class LeafletMap<Datum extends GenericDataRecord> extends ComponentCore<Datum[], LeafletMapConfigInterface<Datum>> {\n  static selectors = s\n  static cssVariables = s.variables\n  protected _defaultConfig = LeafletMapDefaultConfig as LeafletMapConfigInterface<Datum>\n  public config: LeafletMapConfigInterface<Datum> = this._defaultConfig\n\n  g: Selection<HTMLElement, unknown, null, undefined>\n  type = ComponentType.HTML\n  element: HTMLElement\n  datamodel: MapDataModel<Datum> = new MapDataModel()\n  protected _container: HTMLElement\n  protected _containerSelection: Selection<HTMLElement, unknown, null, undefined>\n  public _onMapMoveEndInternal: (leaflet: L.Map) => void // Internal callback needed by Leaflet Flow Map\n  private _map: {\n    leaflet: L.Map;\n    layer: L.Layer;\n    svgOverlay: Selection<SVGSVGElement, unknown, null, undefined>;\n    svgGroup: Selection<SVGGElement, unknown, SVGElement, undefined>;\n  }\n\n  private _clusterIndex: Supercluster<Datum>\n  private _expandedCluster: LeafletMapExpandedCluster<Datum> = null\n  private _cancelBackgroundClick = false\n  private _hasBeenMoved = false\n  private _hasBeenZoomed = false\n  private _isMoving = false\n  private _isZooming = false\n  private _eventInitiatedByComponent = false\n  private _triggerBackgroundClick = false\n  private _externallySelectedPoint: LeafletMapPoint<Datum> | PointFeature<Datum> | null = null\n  private _zoomingToExternallySelectedPoint = false\n  private _forceExpandCluster = false\n  private _pointGroup: Selection<SVGGElement, unknown, SVGElement, undefined>\n  private _pointSelectionRing: Selection<SVGGElement, unknown, SVGElement, undefined>\n  private _clusterBackground: Selection<SVGGElement, unknown, SVGElement, undefined>\n  private _clusterBackgroundRadius = 0\n  private _selectedPoint: LeafletMapPoint<Datum> = null\n  private _currentZoomLevel: number | null = null\n  private _firstRender = true\n  private _isDarkThemeActive = false\n  private resizeObserver: ResizeObserver\n  private themeObserver: MutationObserver\n  private _renderDataAnimationFrameId: number | null = null\n  private _flyToBoundsAnimationFrameId: number | null = null\n  readonly _leafletInitializationPromise: Promise<L.Map>\n\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  static DEFAULT_CONTAINER_HEIGHT = 600\n\n  protected events = {\n    [LeafletMap.selectors.point]: {\n      mouseup: this._onPointMouseUp.bind(this),\n      mousedown: this._onPointMouseDown.bind(this),\n      click: this._onPointClick.bind(this),\n    },\n  }\n\n  constructor (container: HTMLElement, config?: LeafletMapConfigInterface<Datum>, data?: Datum[]) {\n    super(ComponentType.HTML)\n    this._container = container\n    this._containerSelection = select(this._container).attr('role', 'figure')\n\n    this._container.appendChild(this.element)\n    this.g\n      .attr('class', s.root)\n      .attr('aria-hidden', true)\n\n    if (config) this.setConfig(config)\n\n    if (!this._container.clientWidth) {\n      console.warn('Unovis | Leaflet Map: The width of the container is not set. Setting to 100%.')\n      this._containerSelection.style('width', '100%')\n    }\n\n    if (!this._container.clientHeight) {\n      console.warn(`Unovis | Leaflet Map: The height of the container is not set. Setting to ${LeafletMap.DEFAULT_CONTAINER_HEIGHT}px.`)\n      this._containerSelection.style('height', `${LeafletMap.DEFAULT_CONTAINER_HEIGHT}px`)\n    }\n\n    // Initialize map asynchronously\n    this._leafletInitializationPromise = new Promise((resolve) => {\n      setupMap(this.element, this.config).then(map => {\n        // Apply the `s.map` class to `tilePane` to allow tooltip interactions\n        select(map.leaflet.getPanes().tilePane).classed(s.map, true)\n        if (config) this.setConfig(config)\n\n        this._map = map\n        this._map.leaflet.on('drag', this._onMapDragLeaflet.bind(this))\n        this._map.leaflet.on('move', this._onMapMove.bind(this))\n        this._map.leaflet.on('movestart', this._onMapMoveStart.bind(this))\n        this._map.leaflet.on('moveend', this._onMapMoveEnd.bind(this))\n        this._map.leaflet.on('zoom', this._onMapZoom.bind(this))\n        this._map.leaflet.on('zoomstart', this._onMapZoomStart.bind(this))\n        this._map.leaflet.on('zoomend', this._onMapZoomEnd.bind(this))\n\n        // We need to handle background click in a special way to deal\n        //   with d3 svg overlay that might have smaller size than the map itself\n        //   (see this._onNodeMouseDown() and this this._onNodeMouseDown())\n        this._map.leaflet.on('mousedown', () => {\n          if (!this._cancelBackgroundClick) this._triggerBackgroundClick = true\n        })\n\n        this._map.leaflet.on('mouseup', (e) => {\n          if (this._triggerBackgroundClick) {\n            this._triggerBackgroundClick = false\n            const originalEvent = (e as any).originalEvent\n            this._onBackgroundClick(originalEvent.target, originalEvent)\n          }\n        })\n\n        this._map.svgOverlay\n          .attr('class', s.svgOverlay)\n          .insert('rect', ':first-child')\n          .attr('class', s.backgroundRect)\n          .attr('width', '100%')\n          .attr('height', '100%')\n\n        this._pointGroup = this._map.svgGroup.append('g').attr('class', s.points)\n        this._clusterBackground = this._pointGroup.append('g')\n          .attr('class', s.clusterBackground)\n          .call(createBackgroundNode)\n        this._pointSelectionRing = this._pointGroup.append('g')\n          .attr('class', s.pointSelectionRing)\n          .call(createNodeSelectionRing)\n\n        this._map.leaflet.setView(initialMapCenter, initialMapZoom)\n\n        if (document.body.classList.contains('theme-dark') && config.styleDarkTheme) {\n          this._isDarkThemeActive = true\n          this.setTheme(config.styleDarkTheme)\n        }\n\n        this.config.onMapInitialized?.()\n        resolve(this._map.leaflet)\n      })\n    })\n\n\n    // Set data and render the map when it's ready\n    this.setData(data ?? [])\n\n    // When the container size changes we have to initiate map resize in order to update its dimensions\n    this.resizeObserver = new ResizeObserver(() => {\n      this._map?.leaflet?.invalidateSize()\n      this.config.tooltip?.hide()\n    })\n    this.resizeObserver.observe(container)\n\n    // If dark theme is enabled, update map's style when document body's class list changes\n    if (this.config.styleDarkTheme) {\n      this.themeObserver = new MutationObserver((mutations) => {\n        mutations.forEach(change => {\n          if (change.attributeName === 'class') {\n            const isDarkTheme = (change.target as HTMLElement).classList.contains('theme-dark')\n            if (this._isDarkThemeActive !== isDarkTheme) {\n              this.setTheme(isDarkTheme ? this.config.styleDarkTheme : this.config.style)\n              this._isDarkThemeActive = isDarkTheme\n            }\n          }\n        })\n      })\n      this.themeObserver.observe(document.body, { attributes: true })\n    }\n  }\n\n  setConfig (config: LeafletMapConfigInterface<Datum>): void {\n    super.setConfig(config)\n\n    if (config.width) this._containerSelection.style('width', isString(config.width) ? config.width : `${config.width}px`)\n    if (config.height) this._containerSelection.style('height', isString(config.height) ? config.height : `${config.height}px`)\n\n    if (this._map && config.renderer === LeafletMapRenderer.MapLibre) {\n      const layer = this._map.layer as any // Using any because the typings are not full\n      const maplibreMap = layer.getMaplibreMap()\n      if (maplibreMap.isStyleLoaded()) updateTopoJson(maplibreMap, this.config)\n    }\n\n    if (this.config.tooltip) {\n      this.config.tooltip.setContainer(this._container)\n      this.config.tooltip.setComponents([this])\n      this.config.tooltip.update()\n    }\n\n    // Apply the `aria-label` attribute\n    this._containerSelection.attr('aria-label', config.ariaLabel)\n  }\n\n  setData (data: Datum[]): void {\n    const { config, datamodel } = this\n\n    const dataValid = data.filter(d => {\n      const lat = getNumber(d, config.pointLatitude)\n      const lon = getNumber(d, config.pointLongitude)\n      const valid = isFinite(lat) && isFinite(lon)\n\n      if (!valid) console.warn('Unovis | Leaflet Map: Invalid point coordinates', d)\n      return valid\n    })\n\n    datamodel.data = dataValid\n\n    // We use Supercluster for real-time node clustering\n    this._clusterIndex = calculateClusterIndex<Datum>(dataValid, this.config)\n\n    // If there was an expanded cluster, try to find its successor and expand it too\n    if (this._expandedCluster && this._map.leaflet) {\n      // Reset expanded cluster before calling `_getPointData()` to get data with all clusters collapsed\n      const expandedCluster = this._expandedCluster\n      this._resetExpandedCluster()\n      const pointData = this._getPointData()\n\n      const expandedClusterCenterPx = projectPoint(expandedCluster.cluster, this._map.leaflet)\n      const expandedClusterRadiusPx = expandedCluster.cluster.radius\n      const cluster = pointData.find((c) => {\n        if (!c.isCluster) return false\n        const pos = projectPoint(c, this._map.leaflet)\n        const r = c.radius\n        const distance = Math.sqrt((expandedClusterCenterPx.x - pos.x) ** 2 + (expandedClusterCenterPx.y - pos.y) ** 2)\n        return distance < (expandedClusterRadiusPx + r)\n      })\n\n      if (cluster) this._expandCluster(cluster, true)\n    }\n\n    // Render\n    this._leafletInitializationPromise.then(() => {\n      this.render()\n    })\n  }\n\n  setTheme (theme: StyleSpecification | string): void {\n    const layer = this._map.layer as any // Using any because the typings are not full\n    if (this.config.renderer === LeafletMapRenderer.MapLibre) {\n      const maplibreMap = layer.getMaplibreMap()\n      maplibreMap.setStyle?.(theme)\n      updateTopoJson(maplibreMap, this.config)\n    } else {\n      if (typeof theme !== 'string') {\n        console.warn('Unovis | Leaflet Map: Invalid style. Provide a URL string for raster rendering mode.')\n        return\n      }\n      layer.setUrl(theme)\n    }\n  }\n\n  // We redefine the ComponentCore render function to bind event to newly created elements in this._renderData(),\n  // which is being called after almost every map interaction\n  render (): void {\n    const { config } = this\n    if (!this._map) return\n\n    this._renderData()\n    if (this._firstRender) {\n      if (config.initialBounds) this.fitToBounds(config.initialBounds)\n      else if (config.fitViewOnInit) this.fitToPoints(0, config.fitViewPadding)\n    } else {\n      if (config.fitViewOnUpdate) this.fitToPoints(0, config.fitViewPadding)\n      else if (config.fitBoundsOnUpdate) this.fitToBounds(config.fitBoundsOnUpdate)\n    }\n\n    this._firstRender = false\n  }\n\n  public getLeafletInstancePromise (): Promise<L.Map> {\n    return this._leafletInitializationPromise\n  }\n\n  public fitToPoints (duration = this.config.flyToDuration, padding = this.config.fitViewPadding): void {\n    const { config, datamodel, datamodel: { data } } = this\n\n    if (!this._map || !this._map.leaflet) return\n    if (!data?.length) return\n    const bounds = datamodel.getDataLatLngBounds(config.pointLatitude, config.pointLongitude)\n    this._flyToBoundsAnimationFrameId = requestAnimationFrame(() => this._flyToBounds(bounds, duration, padding))\n  }\n\n  public fitToBounds (bounds: Bounds, duration = this.config.flyToDuration, padding = this.config.fitViewPadding): void {\n    const { northEast, southWest } = bounds\n    if (isNil(northEast) || isNil(southWest)) return\n    if (isNil(northEast.lat) || isNil(northEast.lng)) return\n    if (isNil(southWest.lat) || isNil(southWest.lng)) return\n    if (!this._map || !this._map.leaflet) return\n    this._flyToBoundsAnimationFrameId = requestAnimationFrame(() => this._flyToBounds([\n      [northEast.lat, southWest.lng],\n      [southWest.lat, northEast.lng],\n    ], duration, padding))\n  }\n\n  /* Select a point by id and optionally center the map view.\n   * This method was designed to be used mainly with the `[LeafletMap.selectors.point]` click events\n   * (when the user actually clicks on a point) and the specified point is inside one of the collapsed\n   * clusters it won't be selected. You can use the `zoomToPointById` method to achieve that.\n   */\n  public selectPointById (id: string, centerView = false): void {\n    const { config } = this\n    const pointData = this._getPointData()\n    const foundPoint = pointData.find(d => (d.properties as LeafletMapPointDatum<Datum>).id === id)\n\n    if (!foundPoint) {\n      console.warn(`Unovis | Leaflet Map: Node with id ${id} can not be found`)\n      return\n    }\n\n    if ((foundPoint.properties as LeafletMapClusterDatum<Datum>)?.cluster) {\n      console.warn('Unovis | Leaflet Map: Cluster can\\'t be selected')\n      return\n    }\n\n    this._selectedPoint = foundPoint\n\n    const isPointInsideExpandedCluster = this._expandedCluster?.points?.find(d => getString(d.properties, config.pointId) === id)\n    if (!isPointInsideExpandedCluster) this._resetExpandedCluster()\n\n    if (centerView) {\n      const coordinates = {\n        lng: getNumber(foundPoint.properties as LeafletMapPointDatum<Datum>, config.pointLongitude),\n        lat: getNumber(foundPoint.properties as LeafletMapPointDatum<Datum>, config.pointLatitude),\n      }\n\n      const zoomLevel = this._map.leaflet.getZoom()\n      this._eventInitiatedByComponent = true\n      this._map.leaflet.flyTo(coordinates, zoomLevel, { duration: 0 })\n    } else {\n      this._renderData()\n    }\n  }\n\n  /* Get the id of the selected point */\n  public getSelectedPointId (): string | number | undefined {\n    return this._selectedPoint?.id\n  }\n\n  /* Unselect point if it was selected before */\n  public unselectPoint (): void {\n    this._selectedPoint = null\n    this._externallySelectedPoint = null\n    this.render()\n  }\n\n  /** Get the currently expanded cluster */\n  public getExpandedCluster (): { id: string; points: Datum[] } | undefined {\n    if (!this._expandedCluster) return\n    const id = this._expandedCluster.cluster?.id as string\n    const points = this._expandedCluster.cluster?.clusterPoints.map(d => this.datamodel.data[(d as LeafletMapPointDatum<Datum>)._index])\n    return { id, points }\n  }\n\n  /* Zoom to a point by id and optionally select it.\n   * If the point is inside a cluster, it'll be automatically expanded to show the enclosed point.\n   * You can also force set the zoom level by providing the `customZoomLevel` argument.\n   */\n  public zoomToPointById (id: string, selectPoint = false, customZoomLevel?: number): void {\n    const { config, datamodel } = this\n    if (!datamodel.data.length) {\n      console.warn('Unovis | Leaflet Map: There are no points on the map')\n      return\n    }\n    const dataBoundsAll = datamodel.getDataLatLngBounds(config.pointLatitude, config.pointLongitude)\n    const bounds: [number, number, number, number] = [dataBoundsAll[0][1], dataBoundsAll[1][0], dataBoundsAll[1][1], dataBoundsAll[0][0]]\n    const pointDataAll = this._getPointData(bounds)\n\n    let foundPoint: LeafletMapPoint<Datum> | PointFeature<Datum> = pointDataAll\n      .find((d: LeafletMapPoint<Datum>) => getString(d.properties as LeafletMapPointDatum<Datum>, config.pointId) === id)\n\n    // If point was found and it's a cluster -> do nothing\n    if ((foundPoint?.properties as LeafletMapClusterDatum<Datum>)?.cluster) {\n      console.warn('Unovis | Leaflet Map: Cluster can\\'t be zoomed in')\n      return\n    }\n\n    // If point was not found -> search for it in all collapsed clusters\n    if (!foundPoint) {\n      const { point } = findPointAndClusterByPointId(pointDataAll, id, config.pointId)\n      foundPoint = point\n    }\n\n    if (foundPoint) {\n      // If point was found and it's inside an expanded cluster -> simply select it\n      const isPointInsideExpandedCluster = this._expandedCluster?.points?.find(d => getString(d.properties, config.pointId) === id)\n      if (isPointInsideExpandedCluster && selectPoint) {\n        this._selectedPoint = foundPoint as LeafletMapPoint<Datum>\n        this._renderData()\n        return\n      }\n\n      // Else - trigger zoom\n      this._externallySelectedPoint = foundPoint\n      this._zoomingToExternallySelectedPoint = true\n\n      this._forceExpandCluster = !isNil(customZoomLevel)\n      if (selectPoint) this._selectedPoint = foundPoint as LeafletMapPoint<Datum>\n\n      const zoomLevel = isNil(customZoomLevel) ? this._map.leaflet.getZoom() : customZoomLevel\n      const pointDatum = foundPoint.properties as LeafletMapPointDatum<Datum>\n      const coordinates = {\n        lng: getNumber(pointDatum, config.pointLongitude),\n        lat: getNumber(pointDatum, config.pointLatitude),\n      }\n      this._eventInitiatedByComponent = true\n      this._map.leaflet.flyTo(coordinates, zoomLevel, { duration: 0 })\n    } else {\n      console.warn(`Unovis | Leaflet Map: Node with id ${id} can not be found`)\n    }\n  }\n\n  public getNodeRelativePosition (node: LeafletMapPoint<Datum>): { x: number; y: number } {\n    return getNodeRelativePosition(node, this._map.leaflet)\n  }\n\n  public hasBeenZoomed (): boolean {\n    return this._hasBeenZoomed\n  }\n\n  public hasBeenMoved (): boolean {\n    return this._hasBeenMoved\n  }\n\n  public isZooming (): boolean {\n    return this._isZooming\n  }\n\n  public isMoving (): boolean {\n    return this._isMoving\n  }\n\n\n  private _flyToBounds (bounds: [[number, number], [number, number]], durationMs: number, paddingPx?: [number, number]): void {\n    this._eventInitiatedByComponent = true\n    const duration = durationMs / 1000\n    const padding: [number, number] | undefined = paddingPx ? [\n      paddingPx[0] < this._container.clientWidth / 2 ? paddingPx[0] : this._container.clientWidth / 2,\n      paddingPx[1] < this._container.clientHeight / 2 ? paddingPx[1] : this._container.clientHeight / 2,\n    ] : undefined\n    if (duration) {\n      this._map.leaflet.flyToBounds(bounds, { duration, padding })\n    } else {\n      this._map.leaflet.fitBounds(bounds, { padding })\n    }\n  }\n\n  private _renderData (mapMoveZoomUpdateOnly = false): void {\n    const { config } = this\n\n    const pointData = this._getPointData()\n    const contentBBox = pointData.length ? bBoxMerge(pointData.map(d => d.bbox)) : { x: 0, y: 0, width: 0, height: 0 }\n\n    // Set SVG size to match Leaflet transform\n    const svgExtraPadding = 40 + this._clusterBackgroundRadius // We need it to fit point labels and expanded cluster background circle\n    const dx = contentBBox.x - svgExtraPadding\n    const dy = contentBBox.y - svgExtraPadding\n    this._map.svgOverlay\n      .attr('width', contentBBox.width + 2 * svgExtraPadding)\n      .attr('height', contentBBox.height + 2 * svgExtraPadding)\n      .style('left', `${dx}px`)\n      .style('top', `${dy}px`)\n\n    this._map.svgGroup\n      .attr('transform', `translate(${-dx},${-dy})`)\n\n    // Render content\n    const points = this._pointGroup.selectAll<SVGGElement, LeafletMapPoint<Datum>>(`.${s.point}:not(.exit)`)\n      .data(pointData, (d: LeafletMapPoint<Datum>, i) => `${d.id || d.geometry.coordinates.join('')}`)\n\n    points.exit<LeafletMapPoint<Datum>>().classed('exit', true).call(removeNodes)\n    const pointsEnter = points.enter().append('g').attr('class', s.point)\n      .call(createNodes)\n\n    const pointsMerged = points.merge(pointsEnter)\n    pointsEnter.call(updateNodes, config, this._map.leaflet)\n    points.call(updateNodes, config, this._map.leaflet, mapMoveZoomUpdateOnly)\n    pointsMerged.call(collideLabels, this._map.leaflet)\n\n    this._clusterBackground.call(updateBackgroundNode, this._expandedCluster, config, this._map.leaflet, this._clusterBackgroundRadius)\n    if (this._expandedCluster && config.clusterBackground) {\n      pointData.forEach((d, i) => { d._zIndex = (d.properties as LeafletMapPointDatum<Datum>)?.expandedClusterPoint ? 2 : 0 })\n      this._pointGroup\n        .selectAll<SVGGElement, LeafletMapPoint<Datum>>(`.${s.point}, .${s.clusterBackground}, .${s.pointSelectionRing}`)\n        .sort((a: LeafletMapPoint<Datum>, b: LeafletMapPoint<Datum>) => a._zIndex - b._zIndex)\n    }\n\n    // Show selection border and hide it when the node\n    // is out of visible box\n    if (config.selectedPointId) {\n      const foundPoint = pointData.find(d => getString(d.properties as LeafletMapPointDatum<Datum>, config.pointId) === config.selectedPointId)\n      const { cluster } = findPointAndClusterByPointId(pointData, config.selectedPointId, config.pointId)\n      if (foundPoint) this._selectedPoint = foundPoint\n      else this._selectedPoint = cluster\n    }\n    this._pointSelectionRing.call(updateNodeSelectionRing, this._selectedPoint, pointData, config, this._map.leaflet)\n\n    // Set up events and attributes for the rendered points\n    this._setUpComponentEventsThrottled()\n    this._setCustomAttributesThrottled()\n\n    // Tooltip\n    config.tooltip?.update()\n  }\n\n  private _zoomToExternallySelectedPoint (): void {\n    const { config } = this\n    if (!this._externallySelectedPoint) return\n\n    const externallySelectedPointDatum = this._externallySelectedPoint.properties as LeafletMapPointDatum<Datum>\n    const externallySelectedPointId = getString(externallySelectedPointDatum, config.pointId)\n    const pointData = this._getPointData()\n    const foundPoint: LeafletMapPoint<Datum> = pointData.find(\n      d => getString(d.properties as Datum, config.pointId) === externallySelectedPointId\n    )\n\n    if (foundPoint) {\n      this._zoomingToExternallySelectedPoint = false\n      this._currentZoomLevel = null\n    } else {\n      const { cluster } = findPointAndClusterByPointId(pointData, externallySelectedPointId, config.pointId)\n      if (!cluster) return\n\n      const zoomLevel = this._map.leaflet.getZoom()\n      // Expand cluster or fly further\n      if (this._forceExpandCluster || shouldClusterExpand(cluster, zoomLevel, 8, 13)) {\n        this._expandCluster(cluster)\n      } else {\n        const newZoomLevel = getNextZoomLevelOnClusterClick(zoomLevel)\n        const coordinates = {\n          lng: getNumber(externallySelectedPointDatum, config.pointLongitude),\n          lat: getNumber(externallySelectedPointDatum, config.pointLatitude),\n        }\n        if (this._currentZoomLevel !== newZoomLevel) {\n          this._currentZoomLevel = newZoomLevel\n          this._eventInitiatedByComponent = true\n          this._map.leaflet.flyTo(coordinates, newZoomLevel, { duration: 0 })\n        }\n      }\n    }\n  }\n\n  private _expandCluster (clusterPoint: LeafletMapPoint<Datum>, preventRender?: boolean): void {\n    const { config, config: { clusterBackground } } = this\n    const padding = 1\n\n    config.tooltip?.hide()\n\n    this._forceExpandCluster = false\n    if (clusterPoint) {\n      const points: PointFeature<PointExpandedClusterProperties<Datum>>[] =\n        clusterPoint.clusterIndex.getLeaves((clusterPoint.properties as LeafletMapClusterDatum<Datum>).cluster_id as number, Infinity)\n      const packPoints: {x: number; y: number; r: number }[] = points.map(p => ({\n        x: null,\n        y: null,\n        r: getPointRadius(p, config.pointRadius, this._map.leaflet.getZoom()) + padding,\n      }))\n      packSiblings(packPoints)\n\n      points.forEach((p, i) => {\n        p.properties.expandedClusterPoint = clusterPoint\n        p.properties.r = packPoints[i].r\n        p.properties.dx = packPoints[i].x\n        p.properties.dy = packPoints[i].y\n      })\n\n      this._resetExpandedCluster()\n      this._expandedCluster = {\n        cluster: clusterPoint,\n        points,\n      }\n\n      if (clusterBackground) this._clusterBackgroundRadius = getClusterRadius(this._expandedCluster)\n\n      if (!preventRender) this._renderData()\n    }\n\n    this._zoomingToExternallySelectedPoint = false\n  }\n\n  private _resetExpandedCluster (): void {\n    this._expandedCluster?.points?.forEach(d => { delete d.properties.expandedClusterPoint })\n    this._expandedCluster = null\n  }\n\n  private _getPointData (customBounds?: [number, number, number, number]): LeafletMapPoint<Datum>[] {\n    const { config, datamodel: { data } } = this\n\n    if (!data || !this._clusterIndex) return []\n\n    let geoJSONPoints: (ClusterFeature<LeafletMapClusterDatum<Datum>> | PointFeature<PointExpandedClusterProperties<Datum>>)[] =\n      getClustersAndPoints<Datum>(this._clusterIndex, this._map.leaflet, customBounds)\n\n    if (this._expandedCluster) {\n      // Remove expanded cluster from the data\n      geoJSONPoints = geoJSONPoints.filter(c => (c as ClusterFeature<LeafletMapClusterDatum<Datum>>).properties.cluster_id !== (this._expandedCluster.cluster.properties as LeafletMapClusterDatum<Datum>).cluster_id)\n      // Add points from the expanded cluster\n      geoJSONPoints = geoJSONPoints.concat(this._expandedCluster.points)\n    }\n\n    const pointData = geoJSONPoints\n      // Todo: Remove explicitly set ClusterFeature<LeafletMapPointDatum<Datum>> type\n      .map((d, i: number) => {\n        return geoJsonPointToScreenPoint(d as ClusterFeature<LeafletMapPointDatum<Datum>>, i, this._map.leaflet, config)\n      })\n      // .sort((a, b) => getPointDisplayOrder(a, config.pointStatus, config.colorMap) - getPointDisplayOrder(b, config.pointStatus, config.colorMap))\n\n    return pointData\n  }\n\n  private _getMapZoomState (): MapZoomState {\n    const leafletBounds = this._map.leaflet.getBounds()\n    const southWest = leafletBounds.getSouthWest()\n    const northEast = leafletBounds.getNorthEast()\n\n    return {\n      mapCenter: this._map.leaflet.getCenter(),\n      zoomLevel: this._map.leaflet.getZoom(),\n      bounds: { southWest, northEast },\n      userDriven: !this._eventInitiatedByComponent,\n    }\n  }\n\n  private _onMapDragLeaflet (): void {\n    this._cancelBackgroundClick = true\n  }\n\n  private _onMapMove (): void {\n    const { config } = this\n    if (!this._map) return\n    this._hasBeenMoved = true\n    this._renderDataAnimationFrameId = requestAnimationFrame(() => {\n      this._renderData(true)\n    })\n    config.onMapMoveZoom?.(this._getMapZoomState())\n  }\n\n  private _onMapMoveStart (): void {\n    const { config } = this\n    if (!this._map) return\n    this._isMoving = true\n    config.onMapMoveStart?.(this._getMapZoomState())\n  }\n\n  private _onMapMoveEnd (): void {\n    const { config } = this\n    if (!this._map) return\n    this._onMapMoveEndInternal?.(this._map.leaflet)\n    config.onMapMoveEnd?.(this._getMapZoomState())\n\n    constraintMapViewThrottled(this._map.leaflet)\n    const events = this._map.layer.getEvents()\n\n    if (events.zoomend) {\n      const zoomEndEvent = events.zoomend.bind(this._map.layer)\n      zoomEndEvent(null)\n    }\n\n    if (this._externallySelectedPoint || this._zoomingToExternallySelectedPoint) {\n      this._zoomToExternallySelectedPoint()\n    }\n\n    this._isMoving = false\n    this._eventInitiatedByComponent = false\n  }\n\n  private _onMapZoomStart (): void {\n    const { config } = this\n    if (!this._map) return\n    this._isZooming = true\n    config.onMapZoomStart?.(this._getMapZoomState())\n  }\n\n  private _onMapZoomEnd (): void {\n    const { config } = this\n    if (!this._map) return\n    config.onMapZoomEnd?.(this._getMapZoomState())\n    this._isZooming = false\n    if (!this._isMoving) this._eventInitiatedByComponent = false\n  }\n\n  private _onMapZoom (): void {\n    const { config } = this\n    if (!this._map) return\n    this._hasBeenZoomed = true\n\n    if (!this._externallySelectedPoint) this._resetExpandedCluster()\n    else if (!this._zoomingToExternallySelectedPoint) {\n      this._externallySelectedPoint = null\n    }\n\n    config.tooltip?.hide()\n    config.onMapMoveZoom?.(this._getMapZoomState())\n  }\n\n  private _onBackgroundClick (el: HTMLElement, event: MouseEvent): void {\n    const { config } = this\n\n    if (this._cancelBackgroundClick) {\n      this._cancelBackgroundClick = false\n      return\n    }\n\n    this._externallySelectedPoint = null\n    this._resetExpandedCluster()\n    this._renderData()\n    config.onMapClick?.(this._getMapZoomState())\n  }\n\n  private _onPointClick (d: LeafletMapPoint<Datum>, event: MouseEvent): void {\n    const { config: { flyToDuration, clusterExpandOnClick } } = this\n    this._externallySelectedPoint = null\n    event.stopPropagation()\n\n    if ((d.properties as LeafletMapClusterDatum<Datum>).cluster) {\n      const zoomLevel = this._map.leaflet.getZoom()\n      const coordinates = { lng: d.geometry.coordinates[0], lat: d.geometry.coordinates[1] }\n\n      if (clusterExpandOnClick && shouldClusterExpand(d, zoomLevel)) this._expandCluster(d)\n      else {\n        const newZoomLevel = getNextZoomLevelOnClusterClick(zoomLevel)\n        this._eventInitiatedByComponent = true\n        this._map.leaflet.flyTo(coordinates, newZoomLevel, { duration: flyToDuration / 1000 })\n      }\n    }\n  }\n\n  private _onPointMouseDown (d: LeafletMapPoint<Datum>, event: MouseEvent): void {\n    this._cancelBackgroundClick = true\n  }\n\n  private _onPointMouseUp (d: LeafletMapPoint<Datum>, event: MouseEvent): void {\n    this._cancelBackgroundClick = false\n  }\n\n  public zoomIn (increment = 1): void {\n    if (!this._map?.leaflet) return\n    this.setZoom(this._map.leaflet.getZoom() + increment)\n  }\n\n  public zoomOut (increment = 1): void {\n    if (!this._map?.leaflet) return\n    this.setZoom(this._map.leaflet.getZoom() - increment)\n  }\n\n  public setZoom (zoomLevel: number): void {\n    const leaflet = this._map?.leaflet\n    if (!leaflet) return\n\n    this._eventInitiatedByComponent = true\n    leaflet.flyTo(\n      leaflet.getCenter(),\n      clamp(zoomLevel, leaflet.getMinZoom(), leaflet.getMaxZoom()),\n      { duration: this.config.zoomDuration / 1000 }\n    )\n  }\n\n  public fitView (): void {\n    this.fitToPoints()\n  }\n\n  public destroy (): void {\n    constraintMapViewThrottled.cancel()\n    cancelAnimationFrame(this._renderDataAnimationFrameId)\n    cancelAnimationFrame(this._flyToBoundsAnimationFrameId)\n    const map = this._map?.leaflet\n    this._map = undefined\n\n    map?.stop()\n    map?.remove()\n    this.g.remove()\n    this.resizeObserver.disconnect()\n    this.themeObserver?.disconnect()\n  }\n}\n", "var bearing = 0;\nvar name = \"F5XC Map Light\";\nvar owner = \"F5, Inc.\";\nvar glyphs = \"https://api.maptiler.com/fonts/{fontstack}/{range}.pbf\";\nvar sources = {\n\topenmaptiles: {\n\t\turl: \"https://api.maptiler.com/tiles/v3/tiles.json\",\n\t\ttype: \"vector\"\n\t}\n};\nvar layers = [\n\t{\n\t\tid: \"park_outline\",\n\t\ttype: \"line\",\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"park\",\n\t\tfilter: [\n\t\t\t\"all\"\n\t\t],\n\t\tlayout: {\n\t\t},\n\t\tpaint: {\n\t\t\t\"line-color\": \"rgb(255, 255, 255)\",\n\t\t\t\"line-dasharray\": [\n\t\t\t\t1,\n\t\t\t\t1.5\n\t\t\t],\n\t\t\t\"line-opacity\": 1\n\t\t}\n\t},\n\t{\n\t\tid: \"landuse_residential\",\n\t\ttype: \"fill\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"landuse\",\n\t\tmaxzoom: 8,\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"in\",\n\t\t\t\t\"class\",\n\t\t\t\t\"residential\",\n\t\t\t\t\"suburbs\",\n\t\t\t\t\"neighbourhood\"\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\tvisibility: \"visible\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"fill-color\": {\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t9,\n\t\t\t\t\t\t\"rgba(236, 236, 236, 0.8)\"\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t12,\n\t\t\t\t\t\t\"rgba(236, 236, 236, 0.8)\"\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tid: \"landcover_wood\",\n\t\ttype: \"fill\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"landcover\",\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"class\",\n\t\t\t\t\"wood\"\n\t\t\t]\n\t\t],\n\t\tpaint: {\n\t\t\t\"fill-antialias\": false,\n\t\t\t\"fill-color\": \"rgba(255, 255, 255, 0.7)\",\n\t\t\t\"fill-opacity\": 0.4\n\t\t}\n\t},\n\t{\n\t\tid: \"landcover_grass\",\n\t\ttype: \"fill\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"landcover\",\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"class\",\n\t\t\t\t\"grass\"\n\t\t\t]\n\t\t],\n\t\tpaint: {\n\t\t\t\"fill-antialias\": false,\n\t\t\t\"fill-color\": \"rgb(255, 255, 255)\",\n\t\t\t\"fill-opacity\": 0.3\n\t\t}\n\t},\n\t{\n\t\tid: \"landuse_cemetery\",\n\t\ttype: \"fill\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"landuse\",\n\t\tfilter: [\n\t\t\t\"==\",\n\t\t\t\"class\",\n\t\t\t\"cemetery\"\n\t\t],\n\t\tlayout: {\n\t\t\tvisibility: \"visible\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"fill-color\": \"rgb(221, 221, 221)\"\n\t\t}\n\t},\n\t{\n\t\tid: \"landuse_hospital\",\n\t\ttype: \"fill\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"landuse\",\n\t\tfilter: [\n\t\t\t\"==\",\n\t\t\t\"class\",\n\t\t\t\"hospital\"\n\t\t],\n\t\tpaint: {\n\t\t\t\"fill-color\": \"rgb(249, 249, 249)\"\n\t\t}\n\t},\n\t{\n\t\tid: \"landuse_school\",\n\t\ttype: \"fill\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"landuse\",\n\t\tfilter: [\n\t\t\t\"==\",\n\t\t\t\"class\",\n\t\t\t\"school\"\n\t\t],\n\t\tpaint: {\n\t\t\t\"fill-color\": \"rgb(236, 236, 236)\"\n\t\t}\n\t},\n\t{\n\t\tid: \"landuse_stadium\",\n\t\ttype: \"fill\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"landuse\",\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"in\",\n\t\t\t\t\"class\",\n\t\t\t\t\"stadium\",\n\t\t\t\t\"pitch\",\n\t\t\t\t\"track\"\n\t\t\t]\n\t\t],\n\t\tpaint: {\n\t\t\t\"fill-color\": \"rgb(236, 236, 236)\"\n\t\t}\n\t},\n\t{\n\t\tid: \"waterway_tunnel\",\n\t\ttype: \"line\",\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"waterway\",\n\t\tminzoom: 14,\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"brunnel\",\n\t\t\t\t\"tunnel\"\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\t\"line-cap\": \"round\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"line-color\": \"rgb(236, 237, 238)\",\n\t\t\t\"line-dasharray\": [\n\t\t\t\t2,\n\t\t\t\t4\n\t\t\t],\n\t\t\t\"line-width\": {\n\t\t\t\tbase: 1.3,\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t13,\n\t\t\t\t\t\t0.5\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t20,\n\t\t\t\t\t\t6\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tid: \"waterway_river\",\n\t\ttype: \"line\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"waterway\",\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"class\",\n\t\t\t\t\"river\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"!=\",\n\t\t\t\t\"brunnel\",\n\t\t\t\t\"tunnel\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"!=\",\n\t\t\t\t\"intermittent\",\n\t\t\t\t1\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\t\"line-cap\": \"round\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"line-color\": \"rgb(236, 237, 238)\",\n\t\t\t\"line-width\": {\n\t\t\t\tbase: 1.2,\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t11,\n\t\t\t\t\t\t0.5\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t20,\n\t\t\t\t\t\t6\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tid: \"waterway_river_intermittent\",\n\t\ttype: \"line\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"waterway\",\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"class\",\n\t\t\t\t\"river\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"!=\",\n\t\t\t\t\"brunnel\",\n\t\t\t\t\"tunnel\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"intermittent\",\n\t\t\t\t1\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\t\"line-cap\": \"round\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"line-color\": \"#a0c8f0\",\n\t\t\t\"line-dasharray\": [\n\t\t\t\t3,\n\t\t\t\t2\n\t\t\t],\n\t\t\t\"line-width\": {\n\t\t\t\tbase: 1.2,\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t11,\n\t\t\t\t\t\t0.5\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t20,\n\t\t\t\t\t\t6\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tid: \"waterway_other\",\n\t\ttype: \"line\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"waterway\",\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"!=\",\n\t\t\t\t\"class\",\n\t\t\t\t\"river\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"!=\",\n\t\t\t\t\"brunnel\",\n\t\t\t\t\"tunnel\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"!=\",\n\t\t\t\t\"intermittent\",\n\t\t\t\t1\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\t\"line-cap\": \"round\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"line-color\": \"rgb(236, 237, 238)\",\n\t\t\t\"line-width\": {\n\t\t\t\tbase: 1.3,\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t13,\n\t\t\t\t\t\t0.5\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t20,\n\t\t\t\t\t\t6\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tid: \"waterway_other_intermittent\",\n\t\ttype: \"line\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"waterway\",\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"!=\",\n\t\t\t\t\"class\",\n\t\t\t\t\"river\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"!=\",\n\t\t\t\t\"brunnel\",\n\t\t\t\t\"tunnel\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"intermittent\",\n\t\t\t\t1\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\t\"line-cap\": \"round\",\n\t\t\tvisibility: \"visible\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"line-color\": \"#a0c8f0\",\n\t\t\t\"line-dasharray\": [\n\t\t\t\t4,\n\t\t\t\t3\n\t\t\t],\n\t\t\t\"line-width\": {\n\t\t\t\tbase: 1.3,\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t13,\n\t\t\t\t\t\t0.5\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t20,\n\t\t\t\t\t\t6\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tid: \"water_intermittent\",\n\t\ttype: \"fill\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"water\",\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"intermittent\",\n\t\t\t\t1\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\tvisibility: \"visible\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"fill-color\": \"rgba(172, 218, 251, 1)\",\n\t\t\t\"fill-opacity\": 0.85\n\t\t}\n\t},\n\t{\n\t\tid: \"landcover_sand\",\n\t\ttype: \"fill\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"landcover\",\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"in\",\n\t\t\t\t\"class\",\n\t\t\t\t\"sand\"\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\tvisibility: \"visible\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"fill-antialias\": false,\n\t\t\t\"fill-color\": \"rgb(222, 222, 222)\",\n\t\t\t\"fill-opacity\": 1\n\t\t}\n\t},\n\t{\n\t\tid: \"landcover_sand_outline\",\n\t\ttype: \"line\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"landcover\",\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"in\",\n\t\t\t\t\"class\",\n\t\t\t\t\"sand\"\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\tvisibility: \"visible\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"line-color\": \"#f2e9ac\",\n\t\t\t\"line-width\": 2\n\t\t}\n\t},\n\t{\n\t\tid: \"aeroway_fill\",\n\t\ttype: \"fill\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"aeroway\",\n\t\tminzoom: 11,\n\t\tfilter: [\n\t\t\t\"==\",\n\t\t\t\"$type\",\n\t\t\t\"Polygon\"\n\t\t],\n\t\tpaint: {\n\t\t\t\"fill-color\": \"rgb(241, 241, 241)\",\n\t\t\t\"fill-opacity\": 0.7\n\t\t}\n\t},\n\t{\n\t\tid: \"aeroway_runway\",\n\t\ttype: \"line\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"aeroway\",\n\t\tminzoom: 11,\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"$type\",\n\t\t\t\t\"LineString\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"class\",\n\t\t\t\t\"runway\"\n\t\t\t]\n\t\t],\n\t\tpaint: {\n\t\t\t\"line-color\": \"rgb(255, 255, 255)\",\n\t\t\t\"line-width\": {\n\t\t\t\tbase: 1.2,\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t11,\n\t\t\t\t\t\t3\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t20,\n\t\t\t\t\t\t16\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tid: \"aeroway_taxiway\",\n\t\ttype: \"line\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"aeroway\",\n\t\tminzoom: 11,\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"$type\",\n\t\t\t\t\"LineString\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"class\",\n\t\t\t\t\"taxiway\"\n\t\t\t]\n\t\t],\n\t\tpaint: {\n\t\t\t\"line-color\": \"rgb(255, 255, 255)\",\n\t\t\t\"line-width\": {\n\t\t\t\tbase: 1.2,\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t11,\n\t\t\t\t\t\t0.5\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t20,\n\t\t\t\t\t\t6\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tid: \"ferry\",\n\t\ttype: \"line\",\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"transportation\",\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"in\",\n\t\t\t\t\"class\",\n\t\t\t\t\"ferry\"\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\t\"line-join\": \"round\",\n\t\t\tvisibility: \"visible\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"line-color\": \"rgb(182, 182, 182)\",\n\t\t\t\"line-dasharray\": [\n\t\t\t\t2,\n\t\t\t\t2\n\t\t\t],\n\t\t\t\"line-width\": 1.1\n\t\t}\n\t},\n\t{\n\t\tid: \"tunnel_motorway_link_casing\",\n\t\ttype: \"line\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"transportation\",\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"class\",\n\t\t\t\t\"motorway\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"ramp\",\n\t\t\t\t1\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"brunnel\",\n\t\t\t\t\"tunnel\"\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\t\"line-join\": \"round\",\n\t\t\tvisibility: \"visible\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"line-color\": \"rgb(233, 160, 182)\",\n\t\t\t\"line-dasharray\": [\n\t\t\t\t0.5,\n\t\t\t\t0.25\n\t\t\t],\n\t\t\t\"line-opacity\": 1,\n\t\t\t\"line-width\": {\n\t\t\t\tbase: 1.2,\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t12,\n\t\t\t\t\t\t1\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t13,\n\t\t\t\t\t\t3\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t14,\n\t\t\t\t\t\t4\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t20,\n\t\t\t\t\t\t15\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tid: \"tunnel_service_track_casing\",\n\t\ttype: \"line\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"transportation\",\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"brunnel\",\n\t\t\t\t\"tunnel\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"in\",\n\t\t\t\t\"class\",\n\t\t\t\t\"service\",\n\t\t\t\t\"track\"\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\t\"line-join\": \"round\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"line-color\": \"rgb(225, 225, 225)\",\n\t\t\t\"line-dasharray\": [\n\t\t\t\t0.5,\n\t\t\t\t0.25\n\t\t\t],\n\t\t\t\"line-width\": {\n\t\t\t\tbase: 1.2,\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t15,\n\t\t\t\t\t\t1\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t16,\n\t\t\t\t\t\t4\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t20,\n\t\t\t\t\t\t11\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tid: \"tunnel_link_casing\",\n\t\ttype: \"line\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"transportation\",\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"ramp\",\n\t\t\t\t\"1\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"brunnel\",\n\t\t\t\t\"tunnel\"\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\t\"line-join\": \"round\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"line-color\": \"rgb(233, 160, 182)\",\n\t\t\t\"line-opacity\": 1,\n\t\t\t\"line-width\": {\n\t\t\t\tbase: 1.2,\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t12,\n\t\t\t\t\t\t1\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t13,\n\t\t\t\t\t\t3\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t14,\n\t\t\t\t\t\t4\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t20,\n\t\t\t\t\t\t15\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tid: \"tunnel_street_casing\",\n\t\ttype: \"line\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"transportation\",\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"brunnel\",\n\t\t\t\t\"tunnel\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"in\",\n\t\t\t\t\"class\",\n\t\t\t\t\"street\",\n\t\t\t\t\"street_limited\"\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\t\"line-join\": \"round\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"line-color\": \"rgb(225, 225, 225)\",\n\t\t\t\"line-opacity\": {\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t12,\n\t\t\t\t\t\t0\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t12.5,\n\t\t\t\t\t\t1\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t},\n\t\t\t\"line-width\": {\n\t\t\t\tbase: 1.2,\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t12,\n\t\t\t\t\t\t0.5\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t13,\n\t\t\t\t\t\t1\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t14,\n\t\t\t\t\t\t4\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t20,\n\t\t\t\t\t\t15\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tid: \"tunnel_secondary_tertiary_casing\",\n\t\ttype: \"line\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"transportation\",\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"brunnel\",\n\t\t\t\t\"tunnel\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"in\",\n\t\t\t\t\"class\",\n\t\t\t\t\"secondary\",\n\t\t\t\t\"tertiary\"\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\t\"line-join\": \"round\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"line-color\": \"rgb(212, 212, 212)\",\n\t\t\t\"line-dasharray\": [\n\t\t\t\t0.5,\n\t\t\t\t0.25\n\t\t\t],\n\t\t\t\"line-opacity\": 1,\n\t\t\t\"line-width\": {\n\t\t\t\tbase: 1.2,\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t8,\n\t\t\t\t\t\t1.5\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t20,\n\t\t\t\t\t\t17\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tid: \"tunnel_trunk_primary_casing\",\n\t\ttype: \"line\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"transportation\",\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"brunnel\",\n\t\t\t\t\"tunnel\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"in\",\n\t\t\t\t\"class\",\n\t\t\t\t\"primary\",\n\t\t\t\t\"trunk\"\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\t\"line-join\": \"round\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"line-color\": \"rgb(233, 160, 182)\",\n\t\t\t\"line-dasharray\": [\n\t\t\t\t0.5,\n\t\t\t\t0.25\n\t\t\t],\n\t\t\t\"line-width\": {\n\t\t\t\tbase: 1.2,\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t5,\n\t\t\t\t\t\t0.4\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t6,\n\t\t\t\t\t\t0.7\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t7,\n\t\t\t\t\t\t1.75\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t20,\n\t\t\t\t\t\t22\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tid: \"tunnel_motorway_casing\",\n\t\ttype: \"line\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"transportation\",\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"class\",\n\t\t\t\t\"motorway\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"brunnel\",\n\t\t\t\t\"tunnel\"\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\t\"line-join\": \"round\",\n\t\t\tvisibility: \"visible\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"line-color\": \"rgb(233, 160, 182)\",\n\t\t\t\"line-dasharray\": [\n\t\t\t\t0.5,\n\t\t\t\t0.25\n\t\t\t],\n\t\t\t\"line-width\": {\n\t\t\t\tbase: 1.2,\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t5,\n\t\t\t\t\t\t0.4\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t6,\n\t\t\t\t\t\t0.7\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t7,\n\t\t\t\t\t\t1.75\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t20,\n\t\t\t\t\t\t22\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tid: \"tunnel_path_pedestrian\",\n\t\ttype: \"line\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"transportation\",\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"$type\",\n\t\t\t\t\"LineString\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"brunnel\",\n\t\t\t\t\"tunnel\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"in\",\n\t\t\t\t\"class\",\n\t\t\t\t\"path\",\n\t\t\t\t\"pedestrian\"\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\tvisibility: \"visible\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"line-color\": \"rgba(216, 205, 206, 0.45)\",\n\t\t\t\"line-dasharray\": [\n\t\t\t\t1,\n\t\t\t\t0.75\n\t\t\t],\n\t\t\t\"line-width\": {\n\t\t\t\tbase: 1.2,\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t14,\n\t\t\t\t\t\t0.5\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t20,\n\t\t\t\t\t\t6\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tid: \"tunnel_motorway_link\",\n\t\ttype: \"line\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"transportation\",\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"class\",\n\t\t\t\t\"motorway_link\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"ramp\",\n\t\t\t\t1\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"brunnel\",\n\t\t\t\t\"tunnel\"\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\t\"line-join\": \"round\",\n\t\t\tvisibility: \"visible\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"line-color\": \"rgb(251, 181, 195)\",\n\t\t\t\"line-width\": {\n\t\t\t\tbase: 1.2,\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t12.5,\n\t\t\t\t\t\t0\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t13,\n\t\t\t\t\t\t1.5\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t14,\n\t\t\t\t\t\t2.5\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t20,\n\t\t\t\t\t\t11.5\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tid: \"tunnel_service_track\",\n\t\ttype: \"line\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"transportation\",\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"brunnel\",\n\t\t\t\t\"tunnel\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"in\",\n\t\t\t\t\"class\",\n\t\t\t\t\"service\",\n\t\t\t\t\"track\"\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\t\"line-join\": \"round\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"line-color\": \"rgb(255, 255, 255)\",\n\t\t\t\"line-width\": {\n\t\t\t\tbase: 1.2,\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t15.5,\n\t\t\t\t\t\t0\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t16,\n\t\t\t\t\t\t2\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t20,\n\t\t\t\t\t\t7.5\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tid: \"tunnel_link\",\n\t\ttype: \"line\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"transportation\",\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"ramp\",\n\t\t\t\t\"1\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"brunnel\",\n\t\t\t\t\"tunnel\"\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\t\"line-join\": \"round\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"line-color\": \"rgb(254, 240, 240)\",\n\t\t\t\"line-width\": {\n\t\t\t\tbase: 1.2,\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t12.5,\n\t\t\t\t\t\t0\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t13,\n\t\t\t\t\t\t1.5\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t14,\n\t\t\t\t\t\t2.5\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t20,\n\t\t\t\t\t\t11.5\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tid: \"tunnel_minor\",\n\t\ttype: \"line\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"transportation\",\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"brunnel\",\n\t\t\t\t\"tunnel\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"in\",\n\t\t\t\t\"class\",\n\t\t\t\t\"minor\"\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\t\"line-join\": \"round\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"line-color\": \"rgb(255, 255, 255)\",\n\t\t\t\"line-opacity\": 1,\n\t\t\t\"line-width\": {\n\t\t\t\tbase: 1.2,\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t13.5,\n\t\t\t\t\t\t0\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t14,\n\t\t\t\t\t\t2.5\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t20,\n\t\t\t\t\t\t11.5\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tid: \"tunnel_secondary_tertiary\",\n\t\ttype: \"line\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"transportation\",\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"brunnel\",\n\t\t\t\t\"tunnel\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"in\",\n\t\t\t\t\"class\",\n\t\t\t\t\"secondary\",\n\t\t\t\t\"tertiary\"\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\t\"line-join\": \"round\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"line-color\": \"rgb(255, 255, 255)\",\n\t\t\t\"line-width\": {\n\t\t\t\tbase: 1.2,\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t6.5,\n\t\t\t\t\t\t0\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t8,\n\t\t\t\t\t\t0.5\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t20,\n\t\t\t\t\t\t13\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tid: \"tunnel_trunk_primary\",\n\t\ttype: \"line\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"transportation\",\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"brunnel\",\n\t\t\t\t\"tunnel\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"in\",\n\t\t\t\t\"class\",\n\t\t\t\t\"primary\",\n\t\t\t\t\"trunk\"\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\t\"line-join\": \"round\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"line-color\": \"rgb(254, 240, 240)\",\n\t\t\t\"line-width\": {\n\t\t\t\tbase: 1.2,\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t5,\n\t\t\t\t\t\t0\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t7,\n\t\t\t\t\t\t1\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t20,\n\t\t\t\t\t\t18\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tid: \"tunnel_motorway\",\n\t\ttype: \"line\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"transportation\",\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"class\",\n\t\t\t\t\"motorway\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"brunnel\",\n\t\t\t\t\"tunnel\"\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\t\"line-join\": \"round\",\n\t\t\tvisibility: \"visible\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"line-color\": \"rgb(253, 209, 217)\",\n\t\t\t\"line-width\": {\n\t\t\t\tbase: 1.2,\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t5,\n\t\t\t\t\t\t0\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t7,\n\t\t\t\t\t\t1\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t20,\n\t\t\t\t\t\t18\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tid: \"tunnel_major_rail\",\n\t\ttype: \"line\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"transportation\",\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"brunnel\",\n\t\t\t\t\"tunnel\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"in\",\n\t\t\t\t\"class\",\n\t\t\t\t\"rail\"\n\t\t\t]\n\t\t],\n\t\tpaint: {\n\t\t\t\"line-color\": \"rgb(208, 208, 208)\",\n\t\t\t\"line-width\": {\n\t\t\t\tbase: 1.4,\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t14,\n\t\t\t\t\t\t0.4\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t15,\n\t\t\t\t\t\t0.75\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t20,\n\t\t\t\t\t\t2\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tid: \"tunnel_major_rail_hatching\",\n\t\ttype: \"line\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"transportation\",\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"brunnel\",\n\t\t\t\t\"tunnel\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"class\",\n\t\t\t\t\"rail\"\n\t\t\t]\n\t\t],\n\t\tpaint: {\n\t\t\t\"line-color\": \"rgb(208, 208, 208)\",\n\t\t\t\"line-dasharray\": [\n\t\t\t\t0.2,\n\t\t\t\t8\n\t\t\t],\n\t\t\t\"line-width\": {\n\t\t\t\tbase: 1.4,\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t14.5,\n\t\t\t\t\t\t0\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t15,\n\t\t\t\t\t\t3\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t20,\n\t\t\t\t\t\t8\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tid: \"road_area_pier\",\n\t\ttype: \"fill\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"transportation\",\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"$type\",\n\t\t\t\t\"Polygon\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"class\",\n\t\t\t\t\"pier\"\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\tvisibility: \"visible\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"fill-antialias\": true,\n\t\t\t\"fill-color\": \"rgb(252, 252, 252)\"\n\t\t}\n\t},\n\t{\n\t\tid: \"road_pier\",\n\t\ttype: \"line\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"transportation\",\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"$type\",\n\t\t\t\t\"LineString\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"in\",\n\t\t\t\t\"class\",\n\t\t\t\t\"pier\"\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\t\"line-cap\": \"round\",\n\t\t\t\"line-join\": \"round\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"line-color\": \"rgba(246, 241, 229, 1)\",\n\t\t\t\"line-width\": {\n\t\t\t\tbase: 1.2,\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t15,\n\t\t\t\t\t\t1\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t17,\n\t\t\t\t\t\t4\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tid: \"road_area_bridge\",\n\t\ttype: \"fill\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"transportation\",\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"$type\",\n\t\t\t\t\"Polygon\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"brunnel\",\n\t\t\t\t\"bridge\"\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\tvisibility: \"visible\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"fill-antialias\": true,\n\t\t\t\"fill-color\": \"rgba(255, 255, 255, 0.6)\"\n\t\t}\n\t},\n\t{\n\t\tid: \"road_area_pattern\",\n\t\ttype: \"fill\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"transportation\",\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"$type\",\n\t\t\t\t\"Polygon\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"!has\",\n\t\t\t\t\"brunnel\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"!in\",\n\t\t\t\t\"class\",\n\t\t\t\t\"bridge\",\n\t\t\t\t\"pier\"\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\tvisibility: \"visible\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"fill-color\": \"rgba(252, 252, 252, 1.0)\"\n\t\t}\n\t},\n\t{\n\t\tid: \"road_service_track_casing\",\n\t\ttype: \"line\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"transportation\",\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"!in\",\n\t\t\t\t\"brunnel\",\n\t\t\t\t\"bridge\",\n\t\t\t\t\"tunnel\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"in\",\n\t\t\t\t\"class\",\n\t\t\t\t\"service\",\n\t\t\t\t\"track\"\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\t\"line-cap\": \"round\",\n\t\t\t\"line-join\": \"round\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"line-color\": \"rgb(225, 225, 225)\",\n\t\t\t\"line-width\": {\n\t\t\t\tbase: 1.2,\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t15,\n\t\t\t\t\t\t1\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t16,\n\t\t\t\t\t\t4\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t20,\n\t\t\t\t\t\t11\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tid: \"road_link_casing\",\n\t\ttype: \"line\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"transportation\",\n\t\tminzoom: 13,\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"!in\",\n\t\t\t\t\"brunnel\",\n\t\t\t\t\"bridge\",\n\t\t\t\t\"tunnel\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"!in\",\n\t\t\t\t\"class\",\n\t\t\t\t\"motorway\",\n\t\t\t\t\"trunk\",\n\t\t\t\t\"primary\",\n\t\t\t\t\"pedestrian\",\n\t\t\t\t\"path\",\n\t\t\t\t\"track\",\n\t\t\t\t\"service\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"ramp\",\n\t\t\t\t1\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\t\"line-cap\": \"round\",\n\t\t\t\"line-join\": \"round\",\n\t\t\tvisibility: \"visible\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"line-color\": \"rgb(233, 160, 182)\",\n\t\t\t\"line-opacity\": 1,\n\t\t\t\"line-width\": {\n\t\t\t\tbase: 1.2,\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t12,\n\t\t\t\t\t\t1\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t13,\n\t\t\t\t\t\t3\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t14,\n\t\t\t\t\t\t4\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t20,\n\t\t\t\t\t\t15\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tid: \"road_trunk_primary_link_casing\",\n\t\ttype: \"line\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"transportation\",\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"!in\",\n\t\t\t\t\"brunnel\",\n\t\t\t\t\"bridge\",\n\t\t\t\t\"tunnel\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"ramp\",\n\t\t\t\t1\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"in\",\n\t\t\t\t\"class\",\n\t\t\t\t\"primary\",\n\t\t\t\t\"trunk\"\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\t\"line-cap\": \"butt\",\n\t\t\t\"line-join\": \"round\",\n\t\t\tvisibility: \"visible\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"line-color\": \"rgba(246, 241, 232, 1)\",\n\t\t\t\"line-width\": {\n\t\t\t\tbase: 1.2,\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t5,\n\t\t\t\t\t\t0\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t7,\n\t\t\t\t\t\t0.7\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t20,\n\t\t\t\t\t\t14\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tid: \"road_motorway_link_casing\",\n\t\ttype: \"line\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"transportation\",\n\t\tminzoom: 12,\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"!in\",\n\t\t\t\t\"brunnel\",\n\t\t\t\t\"bridge\",\n\t\t\t\t\"tunnel\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"class\",\n\t\t\t\t\"motorway\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"ramp\",\n\t\t\t\t1\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\t\"line-cap\": \"butt\",\n\t\t\t\"line-join\": \"round\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"line-color\": \"rgba(246, 241, 232, 1)\",\n\t\t\t\"line-opacity\": 1,\n\t\t\t\"line-width\": {\n\t\t\t\tbase: 1.2,\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t12,\n\t\t\t\t\t\t1\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t13,\n\t\t\t\t\t\t3\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t14,\n\t\t\t\t\t\t4\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t20,\n\t\t\t\t\t\t15\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tid: \"road_minor_casing\",\n\t\ttype: \"line\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"transportation\",\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"$type\",\n\t\t\t\t\"LineString\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"!in\",\n\t\t\t\t\"brunnel\",\n\t\t\t\t\"bridge\",\n\t\t\t\t\"tunnel\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"in\",\n\t\t\t\t\"class\",\n\t\t\t\t\"minor\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"!=\",\n\t\t\t\t\"ramp\",\n\t\t\t\t\"1\"\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\t\"line-cap\": \"round\",\n\t\t\t\"line-join\": \"round\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"line-color\": \"rgb(225, 225, 225)\",\n\t\t\t\"line-opacity\": {\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t12,\n\t\t\t\t\t\t0\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t12.5,\n\t\t\t\t\t\t1\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t},\n\t\t\t\"line-width\": {\n\t\t\t\tbase: 1.2,\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t12,\n\t\t\t\t\t\t0.5\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t13,\n\t\t\t\t\t\t1\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t14,\n\t\t\t\t\t\t4\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t20,\n\t\t\t\t\t\t20\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tid: \"road_secondary_tertiary_casing\",\n\t\ttype: \"line\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"transportation\",\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"!in\",\n\t\t\t\t\"brunnel\",\n\t\t\t\t\"bridge\",\n\t\t\t\t\"tunnel\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"in\",\n\t\t\t\t\"class\",\n\t\t\t\t\"secondary\",\n\t\t\t\t\"tertiary\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"!=\",\n\t\t\t\t\"ramp\",\n\t\t\t\t1\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\t\"line-cap\": \"round\",\n\t\t\t\"line-join\": \"round\",\n\t\t\tvisibility: \"none\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"line-color\": \"rgb(212, 212, 212)\",\n\t\t\t\"line-opacity\": 1,\n\t\t\t\"line-width\": {\n\t\t\t\tbase: 1.2,\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t8,\n\t\t\t\t\t\t1.5\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t20,\n\t\t\t\t\t\t17\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tid: \"road_trunk_primary_casing\",\n\t\ttype: \"line\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"transportation\",\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"!in\",\n\t\t\t\t\"brunnel\",\n\t\t\t\t\"bridge\",\n\t\t\t\t\"tunnel\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"!=\",\n\t\t\t\t\"ramp\",\n\t\t\t\t1\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"in\",\n\t\t\t\t\"class\",\n\t\t\t\t\"primary\",\n\t\t\t\t\"trunk\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"!=\",\n\t\t\t\t\"ramp\",\n\t\t\t\t1\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\t\"line-cap\": \"butt\",\n\t\t\t\"line-join\": \"round\",\n\t\t\tvisibility: \"none\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"line-color\": \"rgba(246, 241, 232, 1)\",\n\t\t\t\"line-opacity\": 1,\n\t\t\t\"line-width\": {\n\t\t\t\tbase: 1.2,\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t5,\n\t\t\t\t\t\t0.4\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t6,\n\t\t\t\t\t\t0.7\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t7,\n\t\t\t\t\t\t1.75\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t20,\n\t\t\t\t\t\t22\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tid: \"road_motorway_casing\",\n\t\ttype: \"line\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"transportation\",\n\t\tminzoom: 5,\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"!in\",\n\t\t\t\t\"brunnel\",\n\t\t\t\t\"bridge\",\n\t\t\t\t\"tunnel\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"class\",\n\t\t\t\t\"motorway\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"!=\",\n\t\t\t\t\"ramp\",\n\t\t\t\t1\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\t\"line-cap\": \"butt\",\n\t\t\t\"line-join\": \"round\",\n\t\t\tvisibility: \"visible\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"line-color\": \"rgba(163, 213, 217, .)\",\n\t\t\t\"line-width\": {\n\t\t\t\tbase: 1.2,\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t5,\n\t\t\t\t\t\t0.4\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t6,\n\t\t\t\t\t\t0.7\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t7,\n\t\t\t\t\t\t1.75\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t20,\n\t\t\t\t\t\t22\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tid: \"road_path_pedestrian\",\n\t\ttype: \"line\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"transportation\",\n\t\tminzoom: 14,\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"$type\",\n\t\t\t\t\"LineString\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"!in\",\n\t\t\t\t\"brunnel\",\n\t\t\t\t\"bridge\",\n\t\t\t\t\"tunnel\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"in\",\n\t\t\t\t\"class\",\n\t\t\t\t\"path\",\n\t\t\t\t\"pedestrian\"\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\t\"line-join\": \"round\",\n\t\t\tvisibility: \"visible\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"line-color\": \"rgba(216, 205, 206, 0.45)\",\n\t\t\t\"line-dasharray\": [\n\t\t\t\t1,\n\t\t\t\t1\n\t\t\t],\n\t\t\t\"line-width\": {\n\t\t\t\tbase: 1.2,\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t14,\n\t\t\t\t\t\t1\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t20,\n\t\t\t\t\t\t6\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tid: \"road_link\",\n\t\ttype: \"line\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"transportation\",\n\t\tminzoom: 13,\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"!in\",\n\t\t\t\t\"brunnel\",\n\t\t\t\t\"bridge\",\n\t\t\t\t\"tunnel\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"ramp\",\n\t\t\t\t1\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"!in\",\n\t\t\t\t\"class\",\n\t\t\t\t\"motorway\",\n\t\t\t\t\"trunk\",\n\t\t\t\t\"primary\",\n\t\t\t\t\"pedestrian\",\n\t\t\t\t\"path\",\n\t\t\t\t\"track\",\n\t\t\t\t\"service\"\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\t\"line-cap\": \"round\",\n\t\t\t\"line-join\": \"round\",\n\t\t\tvisibility: \"visible\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"line-color\": \"rgba(246, 241, 232, 1)\",\n\t\t\t\"line-width\": {\n\t\t\t\tbase: 1.2,\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t12.5,\n\t\t\t\t\t\t0\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t13,\n\t\t\t\t\t\t1.5\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t14,\n\t\t\t\t\t\t2.5\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t20,\n\t\t\t\t\t\t11.5\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tid: \"road_trunk_primary_link\",\n\t\ttype: \"line\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"transportation\",\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"!in\",\n\t\t\t\t\"brunnel\",\n\t\t\t\t\"bridge\",\n\t\t\t\t\"tunnel\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"ramp\",\n\t\t\t\t1\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"in\",\n\t\t\t\t\"class\",\n\t\t\t\t\"primary\",\n\t\t\t\t\"trunk\"\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\t\"line-cap\": \"round\",\n\t\t\t\"line-join\": \"round\",\n\t\t\tvisibility: \"visible\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"line-color\": \"rgba(246, 241, 232, 1)\",\n\t\t\t\"line-width\": {\n\t\t\t\tbase: 1.2,\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t5,\n\t\t\t\t\t\t0\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t7,\n\t\t\t\t\t\t0.5\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t20,\n\t\t\t\t\t\t10\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tid: \"road_motorway_link\",\n\t\ttype: \"line\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"transportation\",\n\t\tminzoom: 12,\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"!in\",\n\t\t\t\t\"brunnel\",\n\t\t\t\t\"bridge\",\n\t\t\t\t\"tunnel\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"class\",\n\t\t\t\t\"motorway\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"ramp\",\n\t\t\t\t1\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\t\"line-cap\": \"round\",\n\t\t\t\"line-join\": \"round\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"line-color\": \"rgba(246, 241, 232, 1)\",\n\t\t\t\"line-width\": {\n\t\t\t\tbase: 1.2,\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t12.5,\n\t\t\t\t\t\t0\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t13,\n\t\t\t\t\t\t1.5\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t14,\n\t\t\t\t\t\t2.5\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t20,\n\t\t\t\t\t\t11.5\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tid: \"road_service_track\",\n\t\ttype: \"line\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"transportation\",\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"!in\",\n\t\t\t\t\"brunnel\",\n\t\t\t\t\"bridge\",\n\t\t\t\t\"tunnel\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"in\",\n\t\t\t\t\"class\",\n\t\t\t\t\"service\",\n\t\t\t\t\"track\"\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\t\"line-cap\": \"round\",\n\t\t\t\"line-join\": \"round\",\n\t\t\tvisibility: \"visible\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"line-color\": \"rgb(255, 255, 255)\",\n\t\t\t\"line-width\": {\n\t\t\t\tbase: 1.2,\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t15.5,\n\t\t\t\t\t\t0\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t16,\n\t\t\t\t\t\t2\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t20,\n\t\t\t\t\t\t7.5\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tid: \"road_minor\",\n\t\ttype: \"line\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"transportation\",\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"$type\",\n\t\t\t\t\"LineString\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"all\",\n\t\t\t\t[\n\t\t\t\t\t\"!in\",\n\t\t\t\t\t\"brunnel\",\n\t\t\t\t\t\"bridge\",\n\t\t\t\t\t\"tunnel\"\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t\"in\",\n\t\t\t\t\t\"class\",\n\t\t\t\t\t\"minor\"\n\t\t\t\t]\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\t\"line-cap\": \"round\",\n\t\t\t\"line-join\": \"round\",\n\t\t\tvisibility: \"none\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"line-color\": \"rgb(255, 255, 255)\",\n\t\t\t\"line-opacity\": 1,\n\t\t\t\"line-width\": {\n\t\t\t\tbase: 1.2,\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t13.5,\n\t\t\t\t\t\t0\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t14,\n\t\t\t\t\t\t2.5\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t20,\n\t\t\t\t\t\t18\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tid: \"road_secondary_tertiary\",\n\t\ttype: \"line\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"transportation\",\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"!in\",\n\t\t\t\t\"brunnel\",\n\t\t\t\t\"bridge\",\n\t\t\t\t\"tunnel\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"in\",\n\t\t\t\t\"class\",\n\t\t\t\t\"secondary\",\n\t\t\t\t\"tertiary\"\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\t\"line-cap\": \"round\",\n\t\t\t\"line-join\": \"round\",\n\t\t\tvisibility: \"none\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"line-color\": \"rgb(255, 255, 255)\",\n\t\t\t\"line-width\": {\n\t\t\t\tbase: 1.2,\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t6.5,\n\t\t\t\t\t\t0\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t8,\n\t\t\t\t\t\t0.5\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t20,\n\t\t\t\t\t\t13\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tid: \"road_trunk_primary\",\n\t\ttype: \"line\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"transportation\",\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"!in\",\n\t\t\t\t\"brunnel\",\n\t\t\t\t\"bridge\",\n\t\t\t\t\"tunnel\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"!=\",\n\t\t\t\t\"ramp\",\n\t\t\t\t1\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"in\",\n\t\t\t\t\"class\",\n\t\t\t\t\"primary\",\n\t\t\t\t\"trunk\"\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\t\"line-cap\": \"round\",\n\t\t\t\"line-join\": \"round\",\n\t\t\tvisibility: \"visible\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"line-color\": \"rgba(246, 241, 232, 1)\",\n\t\t\t\"line-width\": {\n\t\t\t\tbase: 1.2,\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t5,\n\t\t\t\t\t\t0\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t7,\n\t\t\t\t\t\t1\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t20,\n\t\t\t\t\t\t18\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tid: \"road_motorway\",\n\t\ttype: \"line\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"transportation\",\n\t\tminzoom: 5,\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"!in\",\n\t\t\t\t\"brunnel\",\n\t\t\t\t\"bridge\",\n\t\t\t\t\"tunnel\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"class\",\n\t\t\t\t\"motorway\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"!=\",\n\t\t\t\t\"ramp\",\n\t\t\t\t1\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\t\"line-cap\": \"round\",\n\t\t\t\"line-join\": \"round\",\n\t\t\tvisibility: \"visible\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"line-color\": {\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t5,\n\t\t\t\t\t\t\"rgba(246, 241, 232, 1)\"\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t6,\n\t\t\t\t\t\t\"rgba(246, 241, 232, 1)\"\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t},\n\t\t\t\"line-width\": {\n\t\t\t\tbase: 1.2,\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t5,\n\t\t\t\t\t\t0\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t7,\n\t\t\t\t\t\t1\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t20,\n\t\t\t\t\t\t18\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tid: \"road_major_rail\",\n\t\ttype: \"line\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"transportation\",\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"!in\",\n\t\t\t\t\"brunnel\",\n\t\t\t\t\"bridge\",\n\t\t\t\t\"tunnel\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"class\",\n\t\t\t\t\"rail\"\n\t\t\t]\n\t\t],\n\t\tpaint: {\n\t\t\t\"line-color\": \"rgb(208, 208, 208)\",\n\t\t\t\"line-width\": {\n\t\t\t\tbase: 1.4,\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t14,\n\t\t\t\t\t\t0.4\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t15,\n\t\t\t\t\t\t0.75\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t20,\n\t\t\t\t\t\t2\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tid: \"road_major_rail_hatching\",\n\t\ttype: \"line\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"transportation\",\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"!in\",\n\t\t\t\t\"brunnel\",\n\t\t\t\t\"bridge\",\n\t\t\t\t\"tunnel\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"class\",\n\t\t\t\t\"rail\"\n\t\t\t]\n\t\t],\n\t\tpaint: {\n\t\t\t\"line-color\": \"rgb(208, 208, 208)\",\n\t\t\t\"line-dasharray\": [\n\t\t\t\t0.2,\n\t\t\t\t8\n\t\t\t],\n\t\t\t\"line-width\": {\n\t\t\t\tbase: 1.4,\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t14.5,\n\t\t\t\t\t\t0\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t15,\n\t\t\t\t\t\t3\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t20,\n\t\t\t\t\t\t8\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tid: \"building\",\n\t\ttype: \"fill\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"building\",\n\t\tminzoom: 13,\n\t\tmaxzoom: 14,\n\t\tlayout: {\n\t\t\tvisibility: \"visible\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"fill-color\": \"rgba(181, 181, 181, 0.3)\",\n\t\t\t\"fill-outline-color\": {\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t13,\n\t\t\t\t\t\t\"rgba(198, 197, 197, 0.32)\"\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t14,\n\t\t\t\t\t\t\"rgb(198, 197, 197)\"\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tid: \"building-3d\",\n\t\ttype: \"fill-extrusion\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"building\",\n\t\tminzoom: 14,\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"!has\",\n\t\t\t\t\"hide_3d\"\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\tvisibility: \"visible\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"fill-extrusion-base\": {\n\t\t\t\tproperty: \"render_min_height\",\n\t\t\t\ttype: \"identity\"\n\t\t\t},\n\t\t\t\"fill-extrusion-color\": \"rgb(181, 181, 181)\",\n\t\t\t\"fill-extrusion-height\": {\n\t\t\t\tproperty: \"render_height\",\n\t\t\t\ttype: \"identity\"\n\t\t\t},\n\t\t\t\"fill-extrusion-opacity\": 0.3\n\t\t}\n\t},\n\t{\n\t\tid: \"waterway-bridge-case\",\n\t\ttype: \"line\",\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"waterway\",\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"$type\",\n\t\t\t\t\"LineString\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"brunnel\",\n\t\t\t\t\"bridge\"\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\t\"line-cap\": \"butt\",\n\t\t\t\"line-join\": \"miter\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"line-color\": \"rgb(224, 224, 224)\",\n\t\t\t\"line-gap-width\": {\n\t\t\t\tbase: 1.3,\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t13,\n\t\t\t\t\t\t0.5\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t20,\n\t\t\t\t\t\t6\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t},\n\t\t\t\"line-width\": {\n\t\t\t\tbase: 1.6,\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t12,\n\t\t\t\t\t\t0.5\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t20,\n\t\t\t\t\t\t5\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tid: \"waterway-bridge\",\n\t\ttype: \"line\",\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"waterway\",\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"$type\",\n\t\t\t\t\"LineString\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"brunnel\",\n\t\t\t\t\"bridge\"\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\t\"line-cap\": \"round\",\n\t\t\t\"line-join\": \"round\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"line-color\": \"rgb(223, 229, 235)\",\n\t\t\t\"line-width\": {\n\t\t\t\tbase: 1.3,\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t13,\n\t\t\t\t\t\t0.5\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t20,\n\t\t\t\t\t\t6\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tid: \"bridge_motorway_link_casing\",\n\t\ttype: \"line\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"transportation\",\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"class\",\n\t\t\t\t\"motorway\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"ramp\",\n\t\t\t\t1\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"brunnel\",\n\t\t\t\t\"bridge\"\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\t\"line-join\": \"round\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"line-color\": \"rgba(223, 219, 202, 1)\",\n\t\t\t\"line-opacity\": 1,\n\t\t\t\"line-width\": {\n\t\t\t\tbase: 1.2,\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t12,\n\t\t\t\t\t\t1\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t13,\n\t\t\t\t\t\t3\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t14,\n\t\t\t\t\t\t4\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t20,\n\t\t\t\t\t\t15\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tid: \"bridge_service_track_casing\",\n\t\ttype: \"line\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"transportation\",\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"brunnel\",\n\t\t\t\t\"bridge\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"in\",\n\t\t\t\t\"class\",\n\t\t\t\t\"service\",\n\t\t\t\t\"track\"\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\t\"line-join\": \"round\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"line-color\": \"rgb(225, 225, 225)\",\n\t\t\t\"line-width\": {\n\t\t\t\tbase: 1.2,\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t15,\n\t\t\t\t\t\t1\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t16,\n\t\t\t\t\t\t4\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t20,\n\t\t\t\t\t\t11\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tid: \"bridge_link_casing\",\n\t\ttype: \"line\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"transportation\",\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"class\",\n\t\t\t\t\"link\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"brunnel\",\n\t\t\t\t\"bridge\"\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\t\"line-join\": \"round\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"line-color\": \"rgba(223, 219, 202, 1)\",\n\t\t\t\"line-opacity\": 1,\n\t\t\t\"line-width\": {\n\t\t\t\tbase: 1.2,\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t12,\n\t\t\t\t\t\t1\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t13,\n\t\t\t\t\t\t3\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t14,\n\t\t\t\t\t\t4\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t20,\n\t\t\t\t\t\t15\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tid: \"bridge_street_casing\",\n\t\ttype: \"line\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"transportation\",\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"brunnel\",\n\t\t\t\t\"bridge\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"in\",\n\t\t\t\t\"class\",\n\t\t\t\t\"street\",\n\t\t\t\t\"street_limited\"\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\t\"line-join\": \"round\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"line-color\": \"rgb(209, 209, 209)\",\n\t\t\t\"line-opacity\": {\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t12,\n\t\t\t\t\t\t0\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t12.5,\n\t\t\t\t\t\t1\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t},\n\t\t\t\"line-width\": {\n\t\t\t\tbase: 1.2,\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t12,\n\t\t\t\t\t\t0.5\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t13,\n\t\t\t\t\t\t1\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t14,\n\t\t\t\t\t\t4\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t20,\n\t\t\t\t\t\t25\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tid: \"bridge_path_pedestrian_casing\",\n\t\ttype: \"line\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"transportation\",\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"$type\",\n\t\t\t\t\"LineString\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"brunnel\",\n\t\t\t\t\"bridge\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"in\",\n\t\t\t\t\"class\",\n\t\t\t\t\"path\",\n\t\t\t\t\"pedestrian\"\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\t\"line-join\": \"miter\",\n\t\t\tvisibility: \"visible\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"line-color\": \"rgb(225, 225, 225)\",\n\t\t\t\"line-dasharray\": [\n\t\t\t\t1,\n\t\t\t\t0\n\t\t\t],\n\t\t\t\"line-width\": {\n\t\t\t\tbase: 1.2,\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t14,\n\t\t\t\t\t\t1.5\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t20,\n\t\t\t\t\t\t18\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tid: \"bridge_secondary_tertiary_casing\",\n\t\ttype: \"line\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"transportation\",\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"brunnel\",\n\t\t\t\t\"bridge\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"in\",\n\t\t\t\t\"class\",\n\t\t\t\t\"secondary\",\n\t\t\t\t\"tertiary\"\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\t\"line-join\": \"round\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"line-color\": \"rgb(212, 212, 212)\",\n\t\t\t\"line-opacity\": 1,\n\t\t\t\"line-width\": {\n\t\t\t\tbase: 1.2,\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t8,\n\t\t\t\t\t\t1.5\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t20,\n\t\t\t\t\t\t17\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tid: \"bridge_trunk_primary_casing\",\n\t\ttype: \"line\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"transportation\",\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"brunnel\",\n\t\t\t\t\"bridge\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"in\",\n\t\t\t\t\"class\",\n\t\t\t\t\"primary\",\n\t\t\t\t\"trunk\"\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\t\"line-join\": \"round\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"line-color\": \"rgba(223, 219, 202, 1)\",\n\t\t\t\"line-width\": {\n\t\t\t\tbase: 1.2,\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t5,\n\t\t\t\t\t\t0.4\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t6,\n\t\t\t\t\t\t0.7\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t7,\n\t\t\t\t\t\t1.75\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t20,\n\t\t\t\t\t\t22\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tid: \"bridge_motorway_casing\",\n\t\ttype: \"line\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"transportation\",\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"class\",\n\t\t\t\t\"motorway\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"brunnel\",\n\t\t\t\t\"bridge\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"!=\",\n\t\t\t\t\"ramp\",\n\t\t\t\t1\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\t\"line-join\": \"round\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"line-color\": \"rgba(223, 219, 202, 1)\",\n\t\t\t\"line-width\": {\n\t\t\t\tbase: 1.2,\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t5,\n\t\t\t\t\t\t0.4\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t6,\n\t\t\t\t\t\t0.7\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t7,\n\t\t\t\t\t\t1.75\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t20,\n\t\t\t\t\t\t22\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tid: \"bridge_path_pedestrian\",\n\t\ttype: \"line\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"transportation\",\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"$type\",\n\t\t\t\t\"LineString\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"brunnel\",\n\t\t\t\t\"bridge\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"in\",\n\t\t\t\t\"class\",\n\t\t\t\t\"path\",\n\t\t\t\t\"pedestrian\"\n\t\t\t]\n\t\t],\n\t\tpaint: {\n\t\t\t\"line-color\": \"rgb(255, 255, 255)\",\n\t\t\t\"line-dasharray\": [\n\t\t\t\t1,\n\t\t\t\t0.3\n\t\t\t],\n\t\t\t\"line-width\": {\n\t\t\t\tbase: 1.2,\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t14,\n\t\t\t\t\t\t0.5\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t20,\n\t\t\t\t\t\t10\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tid: \"bridge_motorway_link\",\n\t\ttype: \"line\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"transportation\",\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"class\",\n\t\t\t\t\"motorway\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"ramp\",\n\t\t\t\t1\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"brunnel\",\n\t\t\t\t\"bridge\"\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\t\"line-join\": \"round\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"line-color\": \"rgba(223, 219, 202, 1)\",\n\t\t\t\"line-width\": {\n\t\t\t\tbase: 1.2,\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t12.5,\n\t\t\t\t\t\t0\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t13,\n\t\t\t\t\t\t1.5\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t14,\n\t\t\t\t\t\t2.5\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t20,\n\t\t\t\t\t\t11.5\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tid: \"bridge_service_track\",\n\t\ttype: \"line\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"transportation\",\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"brunnel\",\n\t\t\t\t\"bridge\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"in\",\n\t\t\t\t\"class\",\n\t\t\t\t\"service\",\n\t\t\t\t\"track\"\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\t\"line-join\": \"round\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"line-color\": \"rgb(255, 255, 255)\",\n\t\t\t\"line-width\": {\n\t\t\t\tbase: 1.2,\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t15.5,\n\t\t\t\t\t\t0\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t16,\n\t\t\t\t\t\t2\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t20,\n\t\t\t\t\t\t7.5\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tid: \"bridge_link\",\n\t\ttype: \"line\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"transportation\",\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"class\",\n\t\t\t\t\"link\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"brunnel\",\n\t\t\t\t\"bridge\"\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\t\"line-join\": \"round\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"line-color\": \"rgba(223, 219, 202, 1)\",\n\t\t\t\"line-width\": {\n\t\t\t\tbase: 1.2,\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t12.5,\n\t\t\t\t\t\t0\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t13,\n\t\t\t\t\t\t1.5\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t14,\n\t\t\t\t\t\t2.5\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t20,\n\t\t\t\t\t\t11.5\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tid: \"bridge_street\",\n\t\ttype: \"line\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"transportation\",\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"brunnel\",\n\t\t\t\t\"bridge\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"in\",\n\t\t\t\t\"class\",\n\t\t\t\t\"minor\"\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\t\"line-join\": \"round\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"line-color\": \"rgb(255, 255, 255)\",\n\t\t\t\"line-opacity\": 1,\n\t\t\t\"line-width\": {\n\t\t\t\tbase: 1.2,\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t13.5,\n\t\t\t\t\t\t0\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t14,\n\t\t\t\t\t\t2.5\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t20,\n\t\t\t\t\t\t18\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tid: \"bridge_secondary_tertiary\",\n\t\ttype: \"line\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"transportation\",\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"brunnel\",\n\t\t\t\t\"bridge\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"in\",\n\t\t\t\t\"class\",\n\t\t\t\t\"secondary\",\n\t\t\t\t\"tertiary\"\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\t\"line-join\": \"round\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"line-color\": \"rgb(255, 255, 255)\",\n\t\t\t\"line-width\": {\n\t\t\t\tbase: 1.2,\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t6.5,\n\t\t\t\t\t\t0\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t8,\n\t\t\t\t\t\t0.5\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t20,\n\t\t\t\t\t\t13\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tid: \"bridge_trunk_primary\",\n\t\ttype: \"line\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"transportation\",\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"brunnel\",\n\t\t\t\t\"bridge\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"in\",\n\t\t\t\t\"class\",\n\t\t\t\t\"primary\",\n\t\t\t\t\"trunk\"\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\t\"line-join\": \"round\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"line-color\": \"rgba(223, 219, 202, 1)\",\n\t\t\t\"line-width\": {\n\t\t\t\tbase: 1.2,\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t5,\n\t\t\t\t\t\t0\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t7,\n\t\t\t\t\t\t1\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t20,\n\t\t\t\t\t\t18\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tid: \"bridge_motorway\",\n\t\ttype: \"line\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"transportation\",\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"class\",\n\t\t\t\t\"motorway\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"brunnel\",\n\t\t\t\t\"bridge\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"!=\",\n\t\t\t\t\"ramp\",\n\t\t\t\t1\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\t\"line-join\": \"round\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"line-color\": \"rgba(223, 219, 202, 1)\",\n\t\t\t\"line-width\": {\n\t\t\t\tbase: 1.2,\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t5,\n\t\t\t\t\t\t0\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t7,\n\t\t\t\t\t\t1\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t20,\n\t\t\t\t\t\t18\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tid: \"bridge_major_rail\",\n\t\ttype: \"line\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"transportation\",\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"class\",\n\t\t\t\t\"rail\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"brunnel\",\n\t\t\t\t\"bridge\"\n\t\t\t]\n\t\t],\n\t\tpaint: {\n\t\t\t\"line-color\": \"rgb(208, 208, 208)\",\n\t\t\t\"line-width\": {\n\t\t\t\tbase: 1.4,\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t14,\n\t\t\t\t\t\t0.4\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t15,\n\t\t\t\t\t\t0.75\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t20,\n\t\t\t\t\t\t2\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tid: \"bridge_major_rail_hatching\",\n\t\ttype: \"line\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"transportation\",\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"class\",\n\t\t\t\t\"rail\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"brunnel\",\n\t\t\t\t\"bridge\"\n\t\t\t]\n\t\t],\n\t\tpaint: {\n\t\t\t\"line-color\": \"rgb(208, 208, 208)\",\n\t\t\t\"line-dasharray\": [\n\t\t\t\t0.2,\n\t\t\t\t8\n\t\t\t],\n\t\t\t\"line-width\": {\n\t\t\t\tbase: 1.4,\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t14.5,\n\t\t\t\t\t\t0\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t15,\n\t\t\t\t\t\t3\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t20,\n\t\t\t\t\t\t8\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tid: \"cablecar\",\n\t\ttype: \"line\",\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"transportation\",\n\t\tminzoom: 13,\n\t\tfilter: [\n\t\t\t\"==\",\n\t\t\t\"class\",\n\t\t\t\"cable_car\"\n\t\t],\n\t\tlayout: {\n\t\t\t\"line-cap\": \"round\",\n\t\t\tvisibility: \"visible\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"line-color\": \"rgb(199, 199, 199)\",\n\t\t\t\"line-width\": {\n\t\t\t\tbase: 1,\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t11,\n\t\t\t\t\t\t1\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t19,\n\t\t\t\t\t\t2.5\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tid: \"cablecar-dash\",\n\t\ttype: \"line\",\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"transportation\",\n\t\tminzoom: 13,\n\t\tfilter: [\n\t\t\t\"==\",\n\t\t\t\"class\",\n\t\t\t\"cable_car\"\n\t\t],\n\t\tlayout: {\n\t\t\t\"line-cap\": \"round\",\n\t\t\tvisibility: \"visible\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"line-color\": \"rgb(199, 199, 199)\",\n\t\t\t\"line-dasharray\": [\n\t\t\t\t2,\n\t\t\t\t3\n\t\t\t],\n\t\t\t\"line-width\": {\n\t\t\t\tbase: 1,\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t11,\n\t\t\t\t\t\t3\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t19,\n\t\t\t\t\t\t5.5\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tid: \"boundary_3\",\n\t\ttype: \"line\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"boundary\",\n\t\tfilter: [\n\t\t\t\"match\",\n\t\t\t[\n\t\t\t\t\"get\",\n\t\t\t\t\"admin_level\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t3,\n\t\t\t\t4\n\t\t\t],\n\t\t\ttrue,\n\t\t\tfalse\n\t\t],\n\t\tlayout: {\n\t\t\t\"line-join\": \"round\",\n\t\t\tvisibility: \"visible\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"line-color\": \"rgb(197, 208, 216)\",\n\t\t\t\"line-dasharray\": [\n\t\t\t\t1,\n\t\t\t\t1\n\t\t\t],\n\t\t\t\"line-width\": {\n\t\t\t\tbase: 1,\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t4,\n\t\t\t\t\t\t0.4\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t5,\n\t\t\t\t\t\t1\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t12,\n\t\t\t\t\t\t1.8\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t},\n\t\t\t\"line-opacity\": 0.5\n\t\t}\n\t},\n\t{\n\t\tid: \"boundary_2\",\n\t\ttype: \"line\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"boundary\",\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"admin_level\",\n\t\t\t\t2\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"!=\",\n\t\t\t\t\"disputed\",\n\t\t\t\t1\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\t\"line-cap\": \"round\",\n\t\t\t\"line-join\": \"round\",\n\t\t\tvisibility: \"visible\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"line-color\": \"rgb(197, 208, 216)\",\n\t\t\t\"line-opacity\": {\n\t\t\t\tbase: 1,\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t0,\n\t\t\t\t\t\t0.4\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t4,\n\t\t\t\t\t\t0.8\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t},\n\t\t\t\"line-width\": {\n\t\t\t\tbase: 1,\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t3,\n\t\t\t\t\t\t1\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t5,\n\t\t\t\t\t\t1.2\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t12,\n\t\t\t\t\t\t3\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tid: \"boundary_disputed_level_2\",\n\t\ttype: \"line\",\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"boundary\",\n\t\tminzoom: 0,\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"<=\",\n\t\t\t\t\"admin_level\",\n\t\t\t\t2\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"disputed\",\n\t\t\t\t1\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\t\"line-cap\": \"round\",\n\t\t\t\"line-join\": \"round\",\n\t\t\tvisibility: \"visible\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"line-color\": \"rgb(197, 208, 216)\",\n\t\t\t\"line-width\": 1,\n\t\t\t\"line-opacity\": 0.7,\n\t\t\t\"line-dasharray\": [\n\t\t\t\t6,\n\t\t\t\t6\n\t\t\t]\n\t\t}\n\t},\n\t{\n\t\tid: \"water_name_line\",\n\t\ttype: \"symbol\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"water_name\",\n\t\tminzoom: 0,\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"$type\",\n\t\t\t\t\"LineString\"\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\t\"symbol-placement\": \"line\",\n\t\t\t\"text-field\": \"{name_en}\",\n\t\t\t\"text-font\": [\n\t\t\t\t\"Open Sans Regular\"\n\t\t\t],\n\t\t\t\"text-max-width\": 5,\n\t\t\t\"text-size\": 12\n\t\t},\n\t\tpaint: {\n\t\t\t\"text-color\": \"rgb(178, 178, 178)\",\n\t\t\t\"text-halo-color\": \"rgba(255, 255, 255, 0.7)\",\n\t\t\t\"text-halo-width\": 1\n\t\t}\n\t},\n\t{\n\t\tid: \"water_name_point\",\n\t\ttype: \"symbol\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"water_name\",\n\t\tminzoom: 2,\n\t\tmaxzoom: 24,\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"$type\",\n\t\t\t\t\"Point\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"!=\",\n\t\t\t\t\"class\",\n\t\t\t\t\"ocean\"\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\t\"text-field\": \"{name_en}\",\n\t\t\t\"text-font\": [\n\t\t\t\t\"Open Sans Regular\"\n\t\t\t],\n\t\t\t\"text-max-width\": 5,\n\t\t\t\"text-size\": 12\n\t\t},\n\t\tpaint: {\n\t\t\t\"text-color\": \"rgba(159, 178, 195, 0.8)\",\n\t\t\t\"text-halo-color\": \"rgba(255, 255, 255, 0)\",\n\t\t\t\"text-halo-width\": 1\n\t\t}\n\t},\n\t{\n\t\tid: \"water_ocean_name_point\",\n\t\ttype: \"symbol\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"water_name\",\n\t\tminzoom: 0,\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"$type\",\n\t\t\t\t\"Point\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"class\",\n\t\t\t\t\"ocean\"\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\t\"text-field\": \"{name_en}\",\n\t\t\t\"text-font\": [\n\t\t\t\t\"Open Sans Regular\"\n\t\t\t],\n\t\t\t\"text-max-width\": 5,\n\t\t\t\"text-size\": 12\n\t\t},\n\t\tpaint: {\n\t\t\t\"text-color\": \"rgba(159, 178, 195, 0.6)\",\n\t\t\t\"text-halo-color\": \"rgba(255, 255, 255, 0)\",\n\t\t\t\"text-halo-width\": 1\n\t\t}\n\t},\n\t{\n\t\tid: \"poi_z16_subclass\",\n\t\ttype: \"symbol\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"poi\",\n\t\tminzoom: 16,\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"$type\",\n\t\t\t\t\"Point\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\">=\",\n\t\t\t\t\"rank\",\n\t\t\t\t20\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"any\",\n\t\t\t\t[\n\t\t\t\t\t\"all\",\n\t\t\t\t\t[\n\t\t\t\t\t\t\"in\",\n\t\t\t\t\t\t\"class\",\n\t\t\t\t\t\t\"pitch\"\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t\"in\",\n\t\t\t\t\t\t\"subclass\",\n\t\t\t\t\t\t\"soccer\",\n\t\t\t\t\t\t\"tennis\",\n\t\t\t\t\t\t\"baseball\",\n\t\t\t\t\t\t\"basketball\",\n\t\t\t\t\t\t\"swimming\",\n\t\t\t\t\t\t\"golf\"\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"any\",\n\t\t\t\t[\n\t\t\t\t\t\"!has\",\n\t\t\t\t\t\"level\"\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t\"==\",\n\t\t\t\t\t\"level\",\n\t\t\t\t\t0\n\t\t\t\t]\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\t\"text-anchor\": \"top\",\n\t\t\t\"text-field\": \"{name_en}\",\n\t\t\t\"text-font\": [\n\t\t\t\t\"Open Sans Italic\"\n\t\t\t],\n\t\t\t\"text-max-width\": 9,\n\t\t\t\"text-offset\": [\n\t\t\t\t0,\n\t\t\t\t0.6\n\t\t\t],\n\t\t\t\"text-padding\": 2,\n\t\t\t\"text-size\": 12,\n\t\t\tvisibility: \"none\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"text-color\": \"#666\",\n\t\t\t\"text-halo-blur\": 0.5,\n\t\t\t\"text-halo-color\": \"#ffffff\",\n\t\t\t\"text-halo-width\": 1\n\t\t}\n\t},\n\t{\n\t\tid: \"poi_z16\",\n\t\ttype: \"symbol\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"poi\",\n\t\tminzoom: 16,\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"$type\",\n\t\t\t\t\"Point\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\">=\",\n\t\t\t\t\"rank\",\n\t\t\t\t20\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"none\",\n\t\t\t\t[\n\t\t\t\t\t\"all\",\n\t\t\t\t\t[\n\t\t\t\t\t\t\"in\",\n\t\t\t\t\t\t\"class\",\n\t\t\t\t\t\t\"pitch\"\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t\"in\",\n\t\t\t\t\t\t\"subclass\",\n\t\t\t\t\t\t\"soccer\",\n\t\t\t\t\t\t\"tennis\",\n\t\t\t\t\t\t\"baseball\",\n\t\t\t\t\t\t\"basketball\",\n\t\t\t\t\t\t\"swimming\",\n\t\t\t\t\t\t\"golf\"\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"any\",\n\t\t\t\t[\n\t\t\t\t\t\"!has\",\n\t\t\t\t\t\"level\"\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t\"==\",\n\t\t\t\t\t\"level\",\n\t\t\t\t\t0\n\t\t\t\t]\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\t\"text-anchor\": \"top\",\n\t\t\t\"text-field\": \"{name_en}\",\n\t\t\t\"text-font\": [\n\t\t\t\t\"Open Sans Italic\"\n\t\t\t],\n\t\t\t\"text-max-width\": 9,\n\t\t\t\"text-offset\": [\n\t\t\t\t0,\n\t\t\t\t0.6\n\t\t\t],\n\t\t\t\"text-padding\": 2,\n\t\t\t\"text-size\": 12,\n\t\t\tvisibility: \"none\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"text-color\": \"rgb(216, 220, 223)\",\n\t\t\t\"text-halo-blur\": 0.5,\n\t\t\t\"text-halo-color\": \"rgb(255, 255, 255)\",\n\t\t\t\"text-halo-width\": 1\n\t\t}\n\t},\n\t{\n\t\tid: \"poi_z15\",\n\t\ttype: \"symbol\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"poi\",\n\t\tminzoom: 15,\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"$type\",\n\t\t\t\t\"Point\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\">=\",\n\t\t\t\t\"rank\",\n\t\t\t\t7\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"<\",\n\t\t\t\t\"rank\",\n\t\t\t\t20\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"any\",\n\t\t\t\t[\n\t\t\t\t\t\"!has\",\n\t\t\t\t\t\"level\"\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t\"==\",\n\t\t\t\t\t\"level\",\n\t\t\t\t\t0\n\t\t\t\t]\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\t\"text-anchor\": \"top\",\n\t\t\t\"text-field\": \"{name_en}\",\n\t\t\t\"text-font\": [\n\t\t\t\t\"Open Sans Italic\"\n\t\t\t],\n\t\t\t\"text-max-width\": 9,\n\t\t\t\"text-offset\": [\n\t\t\t\t0,\n\t\t\t\t0.6\n\t\t\t],\n\t\t\t\"text-padding\": 2,\n\t\t\t\"text-size\": 12,\n\t\t\tvisibility: \"none\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"text-color\": \"rgb(216, 220, 223)\",\n\t\t\t\"text-halo-blur\": 0.5,\n\t\t\t\"text-halo-color\": \"rgb(255, 255, 255)\",\n\t\t\t\"text-halo-width\": 1\n\t\t}\n\t},\n\t{\n\t\tid: \"poi_z14\",\n\t\ttype: \"symbol\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"poi\",\n\t\tminzoom: 14.2,\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"$type\",\n\t\t\t\t\"Point\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"any\",\n\t\t\t\t[\n\t\t\t\t\t\"<\",\n\t\t\t\t\t\"rank\",\n\t\t\t\t\t7\n\t\t\t\t]\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"any\",\n\t\t\t\t[\n\t\t\t\t\t\"!has\",\n\t\t\t\t\t\"level\"\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t\"==\",\n\t\t\t\t\t\"level\",\n\t\t\t\t\t0\n\t\t\t\t]\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\t\"icon-size\": 0.9,\n\t\t\t\"text-anchor\": \"top\",\n\t\t\t\"text-field\": \"{name_en}\",\n\t\t\t\"text-font\": [\n\t\t\t\t\"Open Sans Italic\"\n\t\t\t],\n\t\t\t\"text-max-width\": 9,\n\t\t\t\"text-offset\": [\n\t\t\t\t0,\n\t\t\t\t0.6\n\t\t\t],\n\t\t\t\"text-padding\": 2,\n\t\t\t\"text-size\": 12,\n\t\t\tvisibility: \"none\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"text-color\": \"rgb(216, 220, 223)\",\n\t\t\t\"text-halo-blur\": 0.5,\n\t\t\t\"text-halo-color\": \"rgb(255, 255, 255)\",\n\t\t\t\"text-halo-width\": 1\n\t\t}\n\t},\n\t{\n\t\tid: \"poi_transit\",\n\t\ttype: \"symbol\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"poi\",\n\t\tminzoom: 15,\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"in\",\n\t\t\t\t\"class\",\n\t\t\t\t\"bus\",\n\t\t\t\t\"railway\",\n\t\t\t\t\"airport\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"subclass\",\n\t\t\t\t\"station\"\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\t\"icon-size\": 0.9,\n\t\t\t\"text-anchor\": \"left\",\n\t\t\t\"text-field\": \"{name_en}\",\n\t\t\t\"text-font\": [\n\t\t\t\t\"Open Sans Italic\"\n\t\t\t],\n\t\t\t\"text-max-width\": 9,\n\t\t\t\"text-offset\": [\n\t\t\t\t0.9,\n\t\t\t\t0\n\t\t\t],\n\t\t\t\"text-padding\": 2,\n\t\t\t\"text-size\": 12,\n\t\t\tvisibility: \"visible\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"text-color\": \"rgb(216, 220, 223)\",\n\t\t\t\"text-halo-blur\": 0.5,\n\t\t\t\"text-halo-color\": \"rgb(255, 255, 255)\",\n\t\t\t\"text-halo-width\": 1\n\t\t}\n\t},\n\t{\n\t\tid: \"road_oneway\",\n\t\ttype: \"symbol\",\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"transportation\",\n\t\tminzoom: 15,\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"oneway\",\n\t\t\t\t1\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"in\",\n\t\t\t\t\"class\",\n\t\t\t\t\"motorway\",\n\t\t\t\t\"trunk\",\n\t\t\t\t\"primary\",\n\t\t\t\t\"secondary\",\n\t\t\t\t\"tertiary\",\n\t\t\t\t\"minor\",\n\t\t\t\t\"service\"\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\t\"icon-padding\": 2,\n\t\t\t\"icon-rotate\": 90,\n\t\t\t\"icon-rotation-alignment\": \"map\",\n\t\t\t\"icon-size\": {\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t15,\n\t\t\t\t\t\t0.5\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t19,\n\t\t\t\t\t\t1\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t},\n\t\t\t\"symbol-placement\": \"line\",\n\t\t\t\"symbol-spacing\": 75\n\t\t},\n\t\tpaint: {\n\t\t\t\"icon-opacity\": 0.5\n\t\t}\n\t},\n\t{\n\t\tid: \"road_oneway_opposite\",\n\t\ttype: \"symbol\",\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"transportation\",\n\t\tminzoom: 15,\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"oneway\",\n\t\t\t\t-1\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"in\",\n\t\t\t\t\"class\",\n\t\t\t\t\"motorway\",\n\t\t\t\t\"trunk\",\n\t\t\t\t\"primary\",\n\t\t\t\t\"secondary\",\n\t\t\t\t\"tertiary\",\n\t\t\t\t\"minor\",\n\t\t\t\t\"service\"\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\t\"icon-padding\": 2,\n\t\t\t\"icon-rotate\": -90,\n\t\t\t\"icon-rotation-alignment\": \"map\",\n\t\t\t\"icon-size\": {\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t15,\n\t\t\t\t\t\t0.5\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t19,\n\t\t\t\t\t\t1\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t},\n\t\t\t\"symbol-placement\": \"line\",\n\t\t\t\"symbol-spacing\": 75\n\t\t},\n\t\tpaint: {\n\t\t\t\"icon-opacity\": 0.5\n\t\t}\n\t},\n\t{\n\t\tid: \"road_label\",\n\t\ttype: \"symbol\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"transportation_name\",\n\t\tfilter: [\n\t\t\t\"all\"\n\t\t],\n\t\tlayout: {\n\t\t\t\"symbol-placement\": \"line\",\n\t\t\t\"text-anchor\": \"center\",\n\t\t\t\"text-field\": \"{name_en} \",\n\t\t\t\"text-font\": [\n\t\t\t\t\"Open Sans Regular\"\n\t\t\t],\n\t\t\t\"text-offset\": [\n\t\t\t\t0,\n\t\t\t\t0.15\n\t\t\t],\n\t\t\t\"text-size\": {\n\t\t\t\tbase: 1,\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t13,\n\t\t\t\t\t\t12\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t14,\n\t\t\t\t\t\t13\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t}\n\t\t},\n\t\tpaint: {\n\t\t\t\"text-color\": \"rgba(161, 169, 176, 1)\",\n\t\t\t\"text-halo-blur\": 0.5,\n\t\t\t\"text-halo-width\": 1\n\t\t}\n\t},\n\t{\n\t\tid: \"highway-shield\",\n\t\ttype: \"symbol\",\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"transportation_name\",\n\t\tminzoom: 8,\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"<=\",\n\t\t\t\t\"ref_length\",\n\t\t\t\t6\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"$type\",\n\t\t\t\t\"LineString\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"!in\",\n\t\t\t\t\"network\",\n\t\t\t\t\"us-interstate\",\n\t\t\t\t\"us-highway\",\n\t\t\t\t\"us-state\"\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\t\"icon-rotation-alignment\": \"viewport\",\n\t\t\t\"icon-size\": 1,\n\t\t\t\"symbol-avoid-edges\": true,\n\t\t\t\"symbol-placement\": {\n\t\t\t\tbase: 1,\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t10,\n\t\t\t\t\t\t\"point\"\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t11,\n\t\t\t\t\t\t\"line\"\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t},\n\t\t\t\"symbol-spacing\": 200,\n\t\t\t\"text-field\": \"{ref}\",\n\t\t\t\"text-font\": [\n\t\t\t\t\"Open Sans Regular\"\n\t\t\t],\n\t\t\t\"text-rotation-alignment\": \"viewport\",\n\t\t\t\"text-size\": 10,\n\t\t\tvisibility: \"none\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"icon-color\": \"rgba(161, 169, 176, 1)\",\n\t\t\t\"text-color\": \"rgba(161, 169, 176, 1)\"\n\t\t}\n\t},\n\t{\n\t\tid: \"highway-shield-us-interstate\",\n\t\ttype: \"symbol\",\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"transportation_name\",\n\t\tminzoom: 7,\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"<=\",\n\t\t\t\t\"ref_length\",\n\t\t\t\t6\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"$type\",\n\t\t\t\t\"LineString\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"in\",\n\t\t\t\t\"network\",\n\t\t\t\t\"us-interstate\"\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\t\"icon-rotation-alignment\": \"viewport\",\n\t\t\t\"icon-size\": 1,\n\t\t\t\"symbol-avoid-edges\": true,\n\t\t\t\"symbol-placement\": {\n\t\t\t\tbase: 1,\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t7,\n\t\t\t\t\t\t\"point\"\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t7,\n\t\t\t\t\t\t\"line\"\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t8,\n\t\t\t\t\t\t\"line\"\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t},\n\t\t\t\"symbol-spacing\": 200,\n\t\t\t\"text-field\": \"{ref}\",\n\t\t\t\"text-font\": [\n\t\t\t\t\"Open Sans Regular\"\n\t\t\t],\n\t\t\t\"text-rotation-alignment\": \"viewport\",\n\t\t\t\"text-size\": 9,\n\t\t\tvisibility: \"none\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"text-color\": \"rgb(255, 255, 255)\"\n\t\t}\n\t},\n\t{\n\t\tid: \"highway-shield-us-other\",\n\t\ttype: \"symbol\",\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"transportation_name\",\n\t\tminzoom: 9,\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"<=\",\n\t\t\t\t\"ref_length\",\n\t\t\t\t6\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"$type\",\n\t\t\t\t\"LineString\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"in\",\n\t\t\t\t\"network\",\n\t\t\t\t\"us-highway\",\n\t\t\t\t\"us-state\"\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\t\"icon-rotation-alignment\": \"viewport\",\n\t\t\t\"icon-size\": 1,\n\t\t\t\"symbol-avoid-edges\": true,\n\t\t\t\"symbol-placement\": {\n\t\t\t\tbase: 1,\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t10,\n\t\t\t\t\t\t\"point\"\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t11,\n\t\t\t\t\t\t\"line\"\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t},\n\t\t\t\"symbol-spacing\": 200,\n\t\t\t\"text-field\": \"{ref}\",\n\t\t\t\"text-font\": [\n\t\t\t\t\"Open Sans Regular\"\n\t\t\t],\n\t\t\t\"text-rotation-alignment\": \"viewport\",\n\t\t\t\"text-size\": 9,\n\t\t\tvisibility: \"none\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"text-color\": \"rgb(57, 57, 57)\"\n\t\t}\n\t},\n\t{\n\t\tid: \"place_other\",\n\t\ttype: \"symbol\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"place\",\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"in\",\n\t\t\t\t\"class\",\n\t\t\t\t\"hamlet\",\n\t\t\t\t\"island\",\n\t\t\t\t\"islet\",\n\t\t\t\t\"neighbourhood\",\n\t\t\t\t\"suburb\"\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\t\"text-field\": \"{name_en}\",\n\t\t\t\"text-font\": [\n\t\t\t\t\"Open Sans Italic\"\n\t\t\t],\n\t\t\t\"text-letter-spacing\": 0.1,\n\t\t\t\"text-max-width\": 9,\n\t\t\t\"text-size\": {\n\t\t\t\tbase: 1.2,\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t12,\n\t\t\t\t\t\t10\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t15,\n\t\t\t\t\t\t14\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t},\n\t\t\t\"text-transform\": \"uppercase\",\n\t\t\tvisibility: \"visible\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"text-color\": \"rgb(173, 182, 190)\",\n\t\t\t\"text-halo-color\": \"rgba(255, 255, 255, 0.6)\",\n\t\t\t\"text-halo-width\": 1.2\n\t\t}\n\t},\n\t{\n\t\tid: \"place_village\",\n\t\ttype: \"symbol\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"place\",\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"class\",\n\t\t\t\t\"village\"\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\t\"text-field\": \"{name_en}\",\n\t\t\t\"text-font\": [\n\t\t\t\t\"Open Sans Regular\"\n\t\t\t],\n\t\t\t\"text-max-width\": 8,\n\t\t\t\"text-size\": {\n\t\t\t\tbase: 1.2,\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t10,\n\t\t\t\t\t\t12\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t15,\n\t\t\t\t\t\t22\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t},\n\t\t\tvisibility: \"none\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"text-color\": \"rgb(161, 169, 176)\",\n\t\t\t\"text-halo-color\": \"rgba(255, 255, 255, 0.6)\",\n\t\t\t\"text-halo-width\": 1.2\n\t\t}\n\t},\n\t{\n\t\tid: \"place_town\",\n\t\ttype: \"symbol\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"place\",\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"class\",\n\t\t\t\t\"town\"\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\t\"text-anchor\": \"bottom\",\n\t\t\t\"text-field\": \"{name_en}\",\n\t\t\t\"text-font\": [\n\t\t\t\t\"Open Sans Regular\"\n\t\t\t],\n\t\t\t\"text-max-width\": 8,\n\t\t\t\"text-offset\": [\n\t\t\t\t0,\n\t\t\t\t0\n\t\t\t],\n\t\t\t\"text-size\": {\n\t\t\t\tbase: 1.2,\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t7,\n\t\t\t\t\t\t12\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t11,\n\t\t\t\t\t\t16\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t}\n\t\t},\n\t\tpaint: {\n\t\t\t\"text-color\": \"rgba(161, 169, 176, 0.8)\",\n\t\t\t\"text-halo-color\": \"rgba(255, 255, 255, 0.6)\",\n\t\t\t\"text-halo-width\": 1.2\n\t\t}\n\t},\n\t{\n\t\tid: \"place_city\",\n\t\ttype: \"symbol\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"place\",\n\t\tminzoom: 5,\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"class\",\n\t\t\t\t\"city\"\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\t\"icon-allow-overlap\": true,\n\t\t\t\"icon-optional\": false,\n\t\t\t\"text-anchor\": \"bottom\",\n\t\t\t\"text-field\": \"{name_en}\",\n\t\t\t\"text-font\": [\n\t\t\t\t\"Open Sans Semibold\"\n\t\t\t],\n\t\t\t\"text-max-width\": 8,\n\t\t\t\"text-offset\": [\n\t\t\t\t0,\n\t\t\t\t0\n\t\t\t],\n\t\t\t\"text-size\": {\n\t\t\t\tbase: 1.2,\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t7,\n\t\t\t\t\t\t14\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t11,\n\t\t\t\t\t\t24\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t}\n\t\t},\n\t\tpaint: {\n\t\t\t\"text-color\": \"rgba(161, 169, 176, 0.8)\",\n\t\t\t\"text-halo-color\": \"rgba(255, 255, 255, 0.6)\",\n\t\t\t\"text-halo-width\": 1.2\n\t\t}\n\t},\n\t{\n\t\tid: \"country_other\",\n\t\ttype: \"symbol\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"place\",\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"class\",\n\t\t\t\t\"country\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"!has\",\n\t\t\t\t\"iso_a2\"\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\t\"text-field\": \"{name_en}\",\n\t\t\t\"text-font\": [\n\t\t\t\t\"Open Sans Italic\"\n\t\t\t],\n\t\t\t\"text-max-width\": 6.25,\n\t\t\t\"text-size\": {\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t3,\n\t\t\t\t\t\t9\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t7,\n\t\t\t\t\t\t15\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t},\n\t\t\t\"text-transform\": \"none\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"text-color\": \"rgba(159, 178, 195, 0.55)\",\n\t\t\t\"text-halo-blur\": 1,\n\t\t\t\"text-halo-color\": \"rgba(255, 255, 255, 0.6)\",\n\t\t\t\"text-halo-width\": 0.8\n\t\t}\n\t},\n\t{\n\t\tid: \"country_3\",\n\t\ttype: \"symbol\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"place\",\n\t\tminzoom: 2,\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\">=\",\n\t\t\t\t\"rank\",\n\t\t\t\t3\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"class\",\n\t\t\t\t\"country\"\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\t\"text-field\": \"{name_en}\",\n\t\t\t\"text-font\": [\n\t\t\t\t\"Open Sans Italic\"\n\t\t\t],\n\t\t\t\"text-max-width\": 6.25,\n\t\t\t\"text-size\": {\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t3,\n\t\t\t\t\t\t11\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t7,\n\t\t\t\t\t\t17\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t},\n\t\t\t\"text-transform\": \"none\",\n\t\t\tvisibility: \"visible\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"text-color\": \"rgba(159, 178, 195, 0.55)\",\n\t\t\t\"text-halo-blur\": 1,\n\t\t\t\"text-halo-color\": \"rgba(255, 255, 255, 0.6)\",\n\t\t\t\"text-halo-width\": 0.8\n\t\t}\n\t},\n\t{\n\t\tid: \"country_2\",\n\t\ttype: \"symbol\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"place\",\n\t\tminzoom: 2,\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"rank\",\n\t\t\t\t2\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"class\",\n\t\t\t\t\"country\"\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\t\"text-field\": \"{name_en}\",\n\t\t\t\"text-font\": [\n\t\t\t\t\"Open Sans Italic\"\n\t\t\t],\n\t\t\t\"text-max-width\": 6.25,\n\t\t\t\"text-size\": {\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t2,\n\t\t\t\t\t\t11\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t5,\n\t\t\t\t\t\t17\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t},\n\t\t\t\"text-transform\": \"none\",\n\t\t\tvisibility: \"visible\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"text-color\": \"rgba(159, 178, 195, 0.55)\",\n\t\t\t\"text-halo-blur\": 1,\n\t\t\t\"text-halo-color\": \"rgba(255, 255, 255, 0.6)\",\n\t\t\t\"text-halo-width\": 0.8\n\t\t}\n\t},\n\t{\n\t\tid: \"country_1\",\n\t\ttype: \"symbol\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"place\",\n\t\tminzoom: 2,\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"rank\",\n\t\t\t\t1\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"class\",\n\t\t\t\t\"country\"\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\t\"text-field\": \"{name_en}\",\n\t\t\t\"text-font\": [\n\t\t\t\t\"Open Sans Italic\"\n\t\t\t],\n\t\t\t\"text-max-width\": 6.25,\n\t\t\t\"text-size\": {\n\t\t\t\tstops: [\n\t\t\t\t\t[\n\t\t\t\t\t\t1,\n\t\t\t\t\t\t11\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t4,\n\t\t\t\t\t\t17\n\t\t\t\t\t]\n\t\t\t\t]\n\t\t\t},\n\t\t\t\"text-transform\": \"none\",\n\t\t\tvisibility: \"visible\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"text-color\": \"rgba(159, 178, 195, 0.55)\",\n\t\t\t\"text-halo-blur\": 1,\n\t\t\t\"text-halo-color\": \"rgba(255, 255, 255, 0.6)\",\n\t\t\t\"text-halo-width\": 0.8\n\t\t}\n\t},\n\t{\n\t\tid: \"continent\",\n\t\ttype: \"symbol\",\n\t\tmetadata: {\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"place\",\n\t\tmaxzoom: 1,\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"==\",\n\t\t\t\t\"class\",\n\t\t\t\t\"continent\"\n\t\t\t]\n\t\t],\n\t\tlayout: {\n\t\t\t\"text-field\": \"{name_en}\",\n\t\t\t\"text-font\": [\n\t\t\t\t\"Open Sans Italic\"\n\t\t\t],\n\t\t\t\"text-justify\": \"center\",\n\t\t\t\"text-size\": 13,\n\t\t\t\"text-transform\": \"uppercase\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"text-color\": \"rgb(168, 196, 220)\",\n\t\t\t\"text-halo-color\": \"rgba(255, 255, 255, 0.6)\",\n\t\t\t\"text-halo-width\": 1\n\t\t}\n\t}\n];\nvar version = 8;\nvar mapLibreBaseSettings = {\n\tbearing: bearing,\n\tname: name,\n\towner: owner,\n\tglyphs: glyphs,\n\tsources: sources,\n\tlayers: layers,\n\tversion: version\n};\n\nexport { bearing, mapLibreBaseSettings as default, glyphs, layers, name, owner, sources, version };\n//# sourceMappingURL=mapboxgl-settings.json.js.map\n", "var layers = [\n\t{\n\t\tid: \"background\",\n\t\tlayout: {\n\t\t\tvisibility: \"visible\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"background-color\": \"#5C627A\"\n\t\t},\n\t\ttype: \"background\"\n\t},\n\t{\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"!=\",\n\t\t\t\t\"intermittent\",\n\t\t\t\t1\n\t\t\t]\n\t\t],\n\t\tid: \"water\",\n\t\tlayout: {\n\t\t\tvisibility: \"visible\"\n\t\t},\n\t\tmetadata: {\n\t\t},\n\t\tpaint: {\n\t\t\t\"fill-color\": \"#2A2D39\"\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"water\",\n\t\ttype: \"fill\"\n\t}\n];\nvar mapLibreDarkTheme = {\n\tlayers: layers\n};\n\nexport { mapLibreDarkTheme as default, layers };\n//# sourceMappingURL=mapboxgl-dark-theme.json.js.map\n", "var layers = [\n\t{\n\t\tid: \"background\",\n\t\tlayout: {\n\t\t\tvisibility: \"visible\"\n\t\t},\n\t\tpaint: {\n\t\t\t\"background-color\": \"rgba(255, 255, 255, 1)\"\n\t\t},\n\t\ttype: \"background\"\n\t},\n\t{\n\t\tfilter: [\n\t\t\t\"all\",\n\t\t\t[\n\t\t\t\t\"!=\",\n\t\t\t\t\"intermittent\",\n\t\t\t\t1\n\t\t\t]\n\t\t],\n\t\tid: \"water\",\n\t\tlayout: {\n\t\t\tvisibility: \"visible\"\n\t\t},\n\t\tmetadata: {\n\t\t},\n\t\tpaint: {\n\t\t\t\"fill-color\": \"rgb(223, 229, 235)\"\n\t\t},\n\t\tsource: \"openmaptiles\",\n\t\t\"source-layer\": \"water\",\n\t\ttype: \"fill\"\n\t}\n];\nvar mapLibreLightTheme = {\n\tlayers: layers\n};\n\nexport { mapLibreLightTheme as default, layers };\n//# sourceMappingURL=mapboxgl-light-theme.json.js.map\n", "import { StyleSpecification, LayerSpecification } from 'maplibre-gl'\n\nimport mapLibreBaseSettings from './mapboxgl/mapboxgl-settings.json'\nimport mapLibreDarkTheme from './mapboxgl/mapboxgl-dark-theme.json'\nimport mapLibreLightTheme from './mapboxgl/mapboxgl-light-theme.json'\n\n\nexport type MapLibreStyleSpecs = StyleSpecification\n\nexport const MapLibreArcticDark: MapLibreStyleSpecs = {\n  ...(mapLibreBaseSettings as StyleSpecification),\n  layers: [\n    ...mapLibreDarkTheme.layers,\n    ...mapLibreBaseSettings.layers,\n  ] as Array<LayerSpecification>,\n}\n\nexport const MapLibreArcticLight: MapLibreStyleSpecs = {\n  ...(mapLibreBaseSettings as StyleSpecification),\n  layers: [\n    ...mapLibreLightTheme.layers,\n    ...mapLibreBaseSettings.layers,\n  ] as Array<LayerSpecification>,\n}\n", "/* eslint-disable dot-notation */\n\n// Config\nimport { LeafletMapDefaultConfig, LeafletMapConfigInterface } from 'components/leaflet-map/config'\n\n// Types\nimport { ColorAccessor, NumericAccessor } from 'types/accessor'\nimport { GenericDataRecord } from 'types/data'\n\nexport interface LeafletFlowMapConfigInterface<PointDatum extends GenericDataRecord, FlowDatum extends GenericDataRecord> extends LeafletMapConfigInterface<PointDatum> {\n  /** Flow source point longitude accessor function or value. Default:.`f => f.sourceLongitude` */\n  sourceLongitude?: NumericAccessor<FlowDatum>;\n  /** Flow source point latitude accessor function or value. Default: `f => f.sourceLatitude` */\n  sourceLatitude?: NumericAccessor<FlowDatum>;\n  /** Flow target point longitude accessor function or value. Default: `f => f.targetLongitude` */\n  targetLongitude?: NumericAccessor<FlowDatum>;\n  /** Flow target point latitude accessor function or value. Default: `f => f.targetLatitude` */\n  targetLatitude?: NumericAccessor<FlowDatum>;\n  /** Flow source point radius accessor function or value. Default: `3` */\n  sourcePointRadius?: NumericAccessor<FlowDatum>;\n  /** Source point color accessor function or value. Default: `'#88919f'` */\n  sourcePointColor?: ColorAccessor<FlowDatum>;\n  /** Flow particle color accessor function or value. Default: `'#949dad'` */\n  flowParticleColor?: ColorAccessor<FlowDatum>;\n  /** Flow particle radius accessor function or value. Default: `1.1` */\n  flowParticleRadius?: NumericAccessor<FlowDatum>;\n  /** Flow particle speed accessor function or value. The unit is arbitrary, recommended range is 0 – 0.2. Default: `0.07` */\n  flowParticleSpeed?: NumericAccessor<FlowDatum>;\n  /** Flow particle density accessor function or value on the range of [0, 1]. Default: `0.6` */\n  flowParticleDensity?: NumericAccessor<FlowDatum>;\n\n  // Events\n  /** Flow source point click callback function. Default: `undefined` */\n  onSourcePointClick?: (f: FlowDatum, x: number, y: number, event: MouseEvent) => void;\n  /** Flow source point mouse over callback function. Default: `undefined` */\n  onSourcePointMouseEnter?: (f: FlowDatum, x: number, y: number, event: MouseEvent) => void;\n  /** Flow source point mouse leave callback function. Default: `undefined` */\n  onSourcePointMouseLeave?: (f: FlowDatum, event: MouseEvent) => void;\n}\n\nexport const LeafletFlowMapDefaultConfig: LeafletFlowMapConfigInterface<GenericDataRecord, GenericDataRecord> = {\n  ...LeafletMapDefaultConfig,\n  sourceLongitude: (f: unknown): number => (f as { sourceLongitude: number }).sourceLongitude as number,\n  sourceLatitude: (f: unknown): number => (f as { sourceLatitude: number }).sourceLatitude as number,\n  targetLongitude: (f: unknown): number => (f as { targetLongitude: number }).targetLongitude as number,\n  targetLatitude: (f: unknown): number => (f as { targetLatitude: number }).targetLatitude as number,\n  sourcePointRadius: 3,\n  sourcePointColor: '#88919f',\n  flowParticleColor: '#949dad',\n  flowParticleRadius: 1.1,\n  flowParticleSpeed: 0.07,\n  flowParticleDensity: 0.6,\n  onSourcePointClick: undefined,\n  onSourcePointMouseEnter: undefined,\n  onSourcePointMouseLeave: undefined,\n}\n", "import { select } from 'd3-selection'\n\nimport { ComponentCore } from 'core/component'\nimport { ComponentType } from 'types/component'\n\n// Utils\nimport { ResizeObserver } from 'utils/resize-observer'\nimport { getNumber, throttle } from 'utils/data'\nimport { getDataLatLngBounds } from 'utils/map'\nimport { getColor } from 'utils/color'\n\n// Components\nimport { LeafletMap } from 'components/leaflet-map'\n\n// Types\nimport { Bounds } from 'components/leaflet-map/types'\nimport { GenericDataRecord } from 'types/data'\n\n// Config\nimport { LeafletFlowMapDefaultConfig, LeafletFlowMapConfigInterface } from './config'\n\n// Local Types\nimport { LatLon, Particle } from './types'\n\n// Renderer\nimport { PointRenderer as PointRendererType } from './renderer'\n\nexport class LeafletFlowMap<\n  PointDatum extends GenericDataRecord,\n  FlowDatum extends GenericDataRecord,\n> extends ComponentCore<\n  { points: PointDatum[]; flows?: FlowDatum[] },\n  LeafletFlowMapConfigInterface<PointDatum, FlowDatum>\n  > {\n  static selectors = LeafletMap.selectors\n  protected _defaultConfig = LeafletFlowMapDefaultConfig as LeafletFlowMapConfigInterface<PointDatum, FlowDatum>\n  public config: LeafletFlowMapConfigInterface<PointDatum, FlowDatum> = this._defaultConfig\n\n  type = ComponentType.HTML\n  private leafletMap: LeafletMap<PointDatum>\n  private leafletMapInstance: L.Map\n  private flows: FlowDatum[] = []\n  private points: PointDatum[] = []\n  private hoveredSourcePoint: FlowDatum | undefined\n  private onCanvasMouseMoveBound = throttle(this.onCanvasMouseMove.bind(this), 60)\n  private onCanvasClickBound = this.onCanvasClick.bind(this)\n  private canvasElement: HTMLCanvasElement | undefined\n  private panningOffset = { x: 0, y: 0 }\n\n  private resizeObserver: ResizeObserver | undefined\n  private renderer: PointRendererType | undefined\n  particles: Particle[] = []\n\n  constructor (container: HTMLDivElement, config?: LeafletFlowMapConfigInterface<PointDatum, FlowDatum>, data?: { points: PointDatum[]; flows?: FlowDatum[] }) {\n    super(ComponentType.HTML)\n\n    this.leafletMap = new LeafletMap<PointDatum>(container, config, data?.points ?? [])\n\n    const rendererImportPromise = import('./renderer')\n    Promise.all([rendererImportPromise, this.leafletMap.getLeafletInstancePromise()])\n      .then((imports) => {\n        // eslint-disable-next-line @typescript-eslint/naming-convention\n        const [{ PointRenderer }, leaflet] = imports\n\n        this.leafletMapInstance = leaflet\n        const canvasContainer = this.leafletMapInstance.getPanes().overlayPane as HTMLDivElement\n\n        // Initialize renderer\n        const canvas = select(canvasContainer).insert('canvas', ':first-child')\n        this.canvasElement = canvas.node()\n        this.renderer = new PointRenderer(canvasContainer, container.offsetWidth, container.offsetHeight, this.canvasElement)\n        this.canvasElement.addEventListener('mousemove', this.onCanvasMouseMoveBound)\n        this.canvasElement.addEventListener('click', this.onCanvasClickBound)\n\n        this.leafletMap._onMapMoveEndInternal = this.onMapMove.bind(this)\n\n        // Update renderer size on container resize\n        this.resizeObserver = new ResizeObserver(() => {\n          this.renderer.setSize(container.offsetWidth, container.offsetHeight)\n        })\n        this.resizeObserver.observe(container)\n\n        if (config) this.setConfig(config)\n        if (data) this.setData(data)\n        this.animate()\n      })\n  }\n\n  setConfig (config: LeafletFlowMapConfigInterface<PointDatum, FlowDatum>): void {\n    super.setConfig(config)\n    this.leafletMap.setConfig({ ...config, clusteringDistance: 0 })\n  }\n\n  setData (data: { points: PointDatum[]; flows?: FlowDatum[] }): void {\n    super.setData(data)\n    this.flows = data.flows\n    this.points = data.points\n    this.initParticles()\n    this.leafletMap.setData(this.points)\n    this.render()\n  }\n\n  render (): void {\n    super.render()\n  }\n\n  initParticles (): void {\n    this.clearParticles()\n    for (const flow of this.flows) {\n      const source = {\n        lat: getNumber(flow, this.config.sourceLatitude),\n        lon: getNumber(flow, this.config.sourceLongitude),\n      }\n\n      const target = {\n        lat: getNumber(flow, this.config.targetLatitude),\n        lon: getNumber(flow, this.config.targetLongitude),\n      }\n\n      // Add source particle, showing the origin of the flow\n      const sourcePointRadius = getNumber(flow, this.config.sourcePointRadius)\n      const sourcePointColor = getColor(flow, this.config.sourcePointColor)\n      this.addParticle(source, source, source, 0, sourcePointRadius, sourcePointColor)\n\n      // Add flow particles\n      const dist = Math.sqrt((target.lat - source.lat) ** 2 + (target.lon - source.lon) ** 2)\n      const numParticles = Math.round(dist * getNumber(flow, this.config.flowParticleDensity))\n      const velocity = getNumber(flow, this.config.flowParticleSpeed)\n      const r = getNumber(flow, this.config.flowParticleRadius)\n      const color = getColor(flow, this.config.flowParticleColor)\n      for (let i = 0; i < numParticles; i += 1) {\n        const location = {\n          lat: source.lat + (target.lat - source.lat) * i / numParticles,\n          lon: source.lon + (target.lon - source.lon) * i / numParticles,\n        }\n        this.addParticle(source, target, location, velocity, r, color)\n      }\n    }\n\n    this.renderer?.update(this.particles)\n  }\n\n  private addParticle (source: LatLon, target: LatLon, location = source, velocity = 0.05, r = 0.75, color?: string): void {\n    const x = 0\n    const y = 0\n    this.particles.push({ x, y, source, target, location, velocity, r, color })\n  }\n\n  private clearParticles (): void {\n    this.particles = []\n  }\n\n  private animate (): void {\n    const map = this.leafletMapInstance\n\n    requestAnimationFrame(() => {\n      const zoomLevel = map?.getZoom()\n      for (const p of this.particles) {\n        const fullDist = Math.sqrt((p.target.lat - p.source.lat) ** 2 + (p.target.lon - p.source.lon) ** 2)\n        const remainedDist = Math.sqrt((p.target.lat - p.location.lat) ** 2 + (p.target.lon - p.location.lon) ** 2)\n        const angle = Math.atan2(p.target.lat - p.source.lat, p.target.lon - p.source.lon)\n        p.location.lat += p.velocity * Math.sin(angle)\n        p.location.lon += p.velocity * Math.cos(angle)\n\n        if (\n          (((p.target.lat > p.source.lat) && (p.location.lat > p.target.lat)) || ((p.target.lon > p.source.lon) && (p.location.lon > p.target.lon))) ||\n          (((p.target.lat < p.source.lat) && (p.location.lat < p.target.lat)) || ((p.target.lon < p.source.lon) && (p.location.lon < p.target.lon)))\n        ) {\n          p.location.lat = p.source.lat\n          p.location.lon = p.source.lon\n        }\n\n        const pos = map?.latLngToLayerPoint([p.location.lat, p.location.lon])\n        const orthogonalArcShift = -(zoomLevel ** 2 * fullDist / 8) * Math.cos(Math.PI / 2 * (fullDist / 2 - remainedDist) / (fullDist / 2)) || 0\n        p.x = pos?.x - this.panningOffset.x\n        p.y = pos?.y + orthogonalArcShift - this.panningOffset.y\n      }\n\n      this.renderer.updatePointsPosition(this.particles)\n      this.renderer.draw()\n      this.animate()\n    })\n  }\n\n  private getPointByScreenPos (x: number, y: number): [FlowDatum, number, number] | [] {\n    const map = this.leafletMapInstance\n\n    for (const flow of this.flows) {\n      const lat = getNumber(flow, this.config.sourceLatitude)\n      const lon = getNumber(flow, this.config.sourceLongitude)\n      const r = getNumber(flow, this.config.sourcePointRadius)\n      const pos = map?.latLngToLayerPoint([lat, lon])\n      const posX = pos.x - this.panningOffset.x\n      const posY = pos.y - this.panningOffset.y\n\n      if ((Math.abs(x - posX) < r) && (Math.abs(y - posY) < r)) {\n        return [flow, posX, posY]\n      }\n    }\n\n    return []\n  }\n\n  private onCanvasMouseMove (event: MouseEvent): void {\n    const { config } = this\n\n    this.canvasElement.style.removeProperty('cursor')\n    const [hoveredPoint, x, y] = this.getPointByScreenPos(event.offsetX, event.offsetY)\n    if (hoveredPoint) this.canvasElement.style.cursor = 'default'\n\n    if (this.hoveredSourcePoint !== hoveredPoint) {\n      if (hoveredPoint) config.onSourcePointMouseEnter?.(hoveredPoint, x, y, event)\n      if (this.hoveredSourcePoint) config.onSourcePointMouseLeave?.(this.hoveredSourcePoint, event)\n      this.hoveredSourcePoint = hoveredPoint\n    }\n  }\n\n  private onCanvasClick (event: MouseEvent): void {\n    const { config } = this\n\n    const [clickedPoint, x, y] = this.getPointByScreenPos(event.offsetX, event.offsetY)\n    if (clickedPoint) config.onSourcePointClick?.(clickedPoint, x, y, event)\n  }\n\n  private onMapMove (leaflet: L.Map): void {\n    const shift = leaflet.containerPointToLayerPoint([0, 0])\n    this.panningOffset.x = shift.x\n    this.panningOffset.y = shift.y\n    this.canvasElement.style.transform = `translate(${shift.x}px, ${shift.y}px)`\n  }\n\n  public destroy (): void {\n    this.resizeObserver?.disconnect()\n    this.renderer?.destroy()\n    this.canvasElement?.removeEventListener('mousemove', this.onCanvasMouseMoveBound)\n    this.canvasElement?.removeEventListener('click', this.onCanvasClickBound)\n    super.destroy()\n  }\n\n  // Leaflet Map useful methods\n  public selectPointById (id: string, centerPoint = false): void { this.leafletMap.selectPointById(id, centerPoint) }\n  public getSelectedPointId (): string | number | undefined { return this.leafletMap.getSelectedPointId() }\n  public unselectPoint (): void { this.leafletMap.unselectPoint() }\n  public zoomToPointById (id: string, selectNode = false, customZoomLevel?: number): void { this.leafletMap.zoomToPointById(id, selectNode, customZoomLevel) }\n  public zoomIn (increment = 1): void { this.leafletMap.zoomIn(increment) }\n  public zoomOut (increment = 1): void { this.leafletMap.zoomOut(increment) }\n  public setZoom (zoomLevel: number): void { this.leafletMap.setZoom(zoomLevel) }\n  public fitView (): void {\n    const points: { lat: number; lon: number }[] = []\n\n    for (const point of this.points) {\n      points.push({\n        lat: getNumber(point, this.config.pointLatitude),\n        lon: getNumber(point, this.config.pointLongitude),\n      })\n    }\n\n    for (const flow of this.flows) {\n      const source = {\n        lat: getNumber(flow, this.config.sourceLatitude),\n        lon: getNumber(flow, this.config.sourceLongitude),\n      }\n\n      const target = {\n        lat: getNumber(flow, this.config.targetLatitude),\n        lon: getNumber(flow, this.config.targetLongitude),\n      }\n\n      points.push(source)\n      points.push(target)\n    }\n\n    const boundsArray = getDataLatLngBounds(points, d => d.lat, d => d.lon, 0)\n    const bounds: Bounds = {\n      northEast: { lat: boundsArray[0][0], lng: boundsArray[1][1] },\n      southWest: { lat: boundsArray[1][0], lng: boundsArray[0][1] },\n    }\n    this.leafletMap.fitToBounds(bounds)\n  }\n}\n", "import { HierarchyRectangularNode } from 'd3-hierarchy'\nimport { GraphLinkCore, GraphNodeCore } from 'types'\n\n// Node data flow in the component:\n// Input data (N extends ChordInputNode, L extends ChordInputLink)\n//   => GraphNodeCore<N>[] (we reference it only in a few places when it's needed, to make the code easier to read)\n//   => ChordHierarchyNode (nested object representing node hierarchy)\n//   => ChordNode[] and ChordLeafNode[] (HierarchyRectangularNode[] from D3 partition)\n\nexport interface ChordInputNode {\n  id?: string;\n}\n\nexport interface ChordInputLink {\n  id?: string;\n  source: number | string | ChordInputNode;\n  target: number | string | ChordInputNode;\n}\n\nexport type ChordDiagramData<\n  N extends ChordInputNode,\n  L extends ChordInputLink,\n> = {\n  nodes: N[];\n  links?: L[];\n}\n\nexport interface ChordHierarchyNode<N> {\n  key: string;\n  values: (ChordHierarchyNode<N> | N)[];\n  depth?: number;\n  height?: number;\n  value?: number;\n  ancestors?: string[];\n}\n\nexport type ChordNodeState = {\n  _state: {\n    hovered?: boolean;\n    value?: number;\n  };\n  _prevX1?: number;\n}\n\nexport type ChordNodeCore<N> = HierarchyRectangularNode<N> & ChordNodeState & {\n  data: GraphNodeCore<N, ChordInputLink>;\n  uid: string; // Unique id for textPath href\n}\n\nexport type ChordNodeDatum<N> = ChordHierarchyNode<N> | N\nexport type ChordLinkDatum<N extends ChordInputNode, L extends ChordInputLink = ChordInputLink> = GraphLinkCore<N, L>;\n\nexport type ChordNode<N extends ChordInputNode> = ChordNodeCore<ChordNodeDatum<N>>\nexport type ChordLeafNode<N extends ChordInputNode> = ChordNodeCore<N>\n\nexport type ChordRibbonPoint = { a0: number; a1: number; r: number }\nexport interface ChordRibbon<N extends ChordInputNode, L extends ChordInputLink = ChordInputLink> {\n  source: ChordLeafNode<N>;\n  target: ChordLeafNode<N>;\n  points: ChordRibbonPoint[];\n  data: ChordLinkDatum<N, L>;\n  _state: {\n    hovered?: boolean;\n  };\n}\n\nexport enum ChordLabelAlignment {\n  Along = 'along',\n  Perpendicular = 'perpendicular',\n}\n", "// Core\nimport { ComponentConfigInterface, ComponentDefaultConfig } from 'core/component/config'\n\n// Types\nimport { ColorAccessor, GenericAccessor, NumericAccessor, StringAccessor } from 'types/accessor'\n\n// Local Types\nimport { ChordInputLink, ChordInputNode, ChordLabelAlignment, ChordLinkDatum, ChordNodeDatum } from './types'\n\nexport interface ChordDiagramConfigInterface<N extends ChordInputNode, L extends ChordInputLink> extends ComponentConfigInterface {\n  /** Angular range of the diagram. Default: `[0, 2 * Math.PI]` */\n  angleRange?: [number, number];\n  /** Corner radius constant value or accessor function. Default: `2` */\n  cornerRadius?: NumericAccessor<ChordNodeDatum<N>>;\n  /** Node id or index to highlight. Overrides default hover behavior if supplied. Default: `undefined` */\n  highlightedNodeId?: number | string;\n  /** Link ids or index values to highlight. Overrides default hover behavior if supplied. Default: [] */\n  highlightedLinkIds?: (number | string)[];\n  /** Link color accessor function. Default: `var(--vis-chord-diagram-link-fill-color)` */\n  linkColor?: ColorAccessor<ChordLinkDatum<N, L>>;\n  /** Link value accessor function. Default: `l => l.value` */\n  linkValue?: NumericAccessor<ChordLinkDatum<N, L>>;\n  /** Array of node hierarchy levels. Data records are supposed to have corresponding properties, e.g. ['level1', 'level2']. Default: `[]` */\n  nodeLevels?: string[];\n  /** Node width in pixels. Default: `15` */\n  nodeWidth?: number;\n  /** Node color accessor function ot constant value. Default: `d => d.color` */\n  nodeColor?: ColorAccessor<ChordNodeDatum<N>>;\n  /** Node label accessor function. Default: `d => d.label ?? d.key` */\n  nodeLabel?: StringAccessor<ChordNodeDatum<N>>;\n  /** Node label color accessor function. Default: `undefined` */\n  nodeLabelColor?: StringAccessor<ChordNodeDatum<N>>;\n  /** Node label alignment. Default: `ChordLabelAlignment.Along` */\n  nodeLabelAlignment?: GenericAccessor<ChordLabelAlignment | string, ChordNodeDatum<N>>;\n  /** Pad angle in radians. Default: `0.02` */\n  padAngle?: number;\n  /** The exponent property of the radius scale. Default: `2` */\n  radiusScaleExponent?: number;\n}\n\nexport const ChordDiagramDefaultConfig: ChordDiagramConfigInterface<ChordInputNode, ChordInputLink> = {\n  ...ComponentDefaultConfig,\n  duration: 800,\n  highlightedNodeId: undefined,\n  highlightedLinkIds: [],\n  linkColor: undefined,\n  linkValue: (d: ChordInputNode): number => (d as { value: number }).value,\n  nodeLevels: [],\n  nodeWidth: 15,\n  nodeColor: (d: unknown): string => (d as { color: string }).color,\n  nodeLabel: (d: unknown): string => (d as { label: string }).label ?? (d as { key: string }).key,\n  nodeLabelColor: undefined,\n  nodeLabelAlignment: ChordLabelAlignment.Along,\n  padAngle: 0.02,\n  cornerRadius: 2,\n  angleRange: [0, 2 * Math.PI],\n  radiusScaleExponent: 2,\n}\n", "import { Selection } from 'd3-selection'\nimport { Transition } from 'd3-transition'\nimport { interpolate } from 'd3-interpolate'\nimport { Arc } from 'd3-shape'\n\n// Utils\nimport { getColor } from 'utils/color'\nimport { smartTransition } from 'utils/d3'\n\n// Local Types\nimport { ChordInputNode, ChordInputLink, ChordNode } from '../types'\n\n// Config\nimport { ChordDiagramConfigInterface } from '../config'\n\ntype AnimState = { x0: number; x1: number; y0: number; y1: number }\nexport interface ArcNode extends SVGElement {\n  _animState?: AnimState;\n}\n\nexport function createNode<N extends ChordInputNode, L extends ChordInputLink> (\n  selection: Selection<SVGPathElement, ChordNode<N>, SVGGElement, unknown>\n): void {\n  selection\n    .style('opacity', 0)\n    .each((d, i, els) => {\n      const arcNode: ArcNode = els[i]\n      const angleCenter = (d.x0 + d.x1) / 2\n      const angleHalfWidth = (d.x1 - d.x0) / 2\n      arcNode._animState = {\n        x0: angleCenter - angleHalfWidth * 0.8,\n        x1: angleCenter + angleHalfWidth * 0.8,\n        y0: d.y0,\n        y1: d.y1,\n      }\n    })\n}\n\nexport function updateNode<N extends ChordInputNode, L extends ChordInputLink> (\n  selection: Selection<SVGPathElement, ChordNode<N>, SVGGElement, unknown>,\n  config: ChordDiagramConfigInterface<N, L>,\n  arcGen: Arc<unknown, AnimState>,\n  duration: number\n): void {\n  const nodeColor = (d: ChordNode<N>): string => getColor(d.data, config.nodeColor, d.height)\n\n  selection\n    .attr('id', d => d.uid)\n    .style('transition', `fill ${duration}ms`) // Animate color with CSS because we're using CSS-variables\n    .style('fill', nodeColor)\n    .style('stroke', nodeColor)\n\n  if (duration) {\n    const transition = smartTransition(selection, duration)\n      .style('opacity', 1) as Transition<SVGPathElement, ChordNode<N>, SVGGElement, ChordNode<N>>\n\n    transition.attrTween('d', (d, i, els) => {\n      const arcNode: ArcNode = els[i]\n      const nextAnimState = { x0: d.x0, x1: d.x1, y0: d.y0, y1: d.y1 }\n      const datum = interpolate(arcNode._animState, nextAnimState)\n\n      return (t: number): string => {\n        arcNode._animState = datum(t)\n        return arcGen(arcNode._animState)\n      }\n    })\n  } else {\n    selection.attr('d', d => arcGen(d))\n      .style('opacity', 1)\n  }\n}\n\nexport function removeNode<N extends ChordInputNode> (\n  selection: Selection<SVGPathElement, unknown, SVGGElement, unknown>,\n  duration: number\n): void {\n  smartTransition(selection, duration)\n    .style('opacity', 0)\n    .remove()\n}\n", "import { css, injectGlobal } from '@emotion/css'\n\nexport const root = css`\n  label: chord-diagram-component;\n`\n\nexport const variables = injectGlobal`\n  :root {\n    --vis-chord-diagram-link-fill-color: #cad5f6;\n    --vis-chord-diagram-link-stroke-color: #777777;\n    --vis-chord-diagram-link-opacity: 0.5;\n    --vis-chord-diagram-link-stroke-opacity: 0.15;\n    --vis-chord-diagram-link-highlighted-opacity: 0.9;\n    --vis-chord-diagram-link-dimmed-opacity: 0.25;\n\n    --vis-chord-diagram-node-highlighted-opacity: 0.9;\n    --vis-chord-diagram-node-dimmed-opacity: 0.25;\n\n    --vis-chord-diagram-label-text-fill-color-bright: #ffffff;\n    --vis-chord-diagram-label-text-fill-color-dark: #a5abb2;\n    --vis-chord-diagram-label-text-font-size: 1em;\n\n    --vis-dark-chord-diagram-link-fill-color: #575c65;\n  }\n\n  body.theme-dark ${`.${root}`} {\n    --vis-chord-diagram-link-fill-color: var(--vis-dark-chord-diagram-link-fill-color);\n  }\n`\n\nexport const background = css`\n  label: background;\n`\n\nexport const nodes = css`\n  label: nodes;\n`\n\nexport const links = css`\n  label: links;\n`\n\nexport const labels = css`\n  label: labels;\n`\n\nexport const node = css`\n  label: node;\n  stroke-width: 0;\n  fill: var(--vis-color-main);\n  stroke: var(--vis-color-main);\n  transition: .1s fill-opacity;\n`\n\nexport const highlightedNode = css`\n  label: highlighted;\n  fill-opacity: var(--vis-chord-diagram-node-highlighted-opacity);\n  stroke-width: 1.5;\n`\n\nexport const label = css`\n  label: label;\n`\n\nexport const labelText = css`\n  label: label-text;\n\n  dominant-baseline: middle;\n  user-select: none;\n  font-size: var(--vis-chord-diagram-label-text-font-size);\n  \n  > textPath {\n    dominant-baseline: central;\n  }\n`\n\nexport const labelExit = css`\n  label: label-exit;\n`\n\nexport const link = css`\n  label: link;\n\n  fill: var(--vis-chord-diagram-link-fill-color);\n  fill-opacity: var(--vis-chord-diagram-link-opacity);\n  stroke: var(--vis-chord-diagram-link-stroke-color);\n  stroke-opacity:  var(--vis-chord-diagram-link-stroke-opacity);\n  transition: .1s fill-opacity;\n`\nexport const highlightedLink = css`\n  label: highlighted;\n  fill-opacity: var(--vis-chord-diagram-link-highlighted-opacity);\n`\n\nexport const transparent = css`\n  label: transparent;\n\n  ${`.${link}`}:not(${`.${highlightedLink}`}) {\n    fill-opacity: var(--vis-chord-diagram-link-dimmed-opacity);\n  }\n\n  ${`.${node}`}:not(${`.${highlightedNode}`}) {\n    fill-opacity: var(--vis-chord-diagram-node-dimmed-opacity);\n  }\n`\n", "import { select, Selection } from 'd3-selection'\nimport { ScaleContinuousNumeric } from 'd3-scale'\nimport { color } from 'd3-color'\n\n// Utils\nimport { trimSVGText } from 'utils/text'\nimport { smartTransition } from 'utils/d3'\nimport { getNumber, getString, getValue } from 'utils/data'\nimport { getColor, hexToBrightness } from 'utils/color'\n\n// Config\nimport { ChordDiagramConfigInterface } from '../config'\n\n// Local Types\nimport { ChordInputLink, ChordInputNode, ChordLabelAlignment, ChordNode } from '../types'\n\n// Styles\nimport * as s from '../style'\n\nexport const LABEL_PADDING = 3\n\nfunction getLabelFillColor<N extends ChordInputNode, L extends ChordInputLink> (\n  d: ChordNode<N>,\n  config: ChordDiagramConfigInterface<N, L>\n): string {\n  const nodeLabelAlignment = getValue(d.data, config.nodeLabelAlignment) ?? ChordLabelAlignment.Along\n  switch (nodeLabelAlignment) {\n    case ChordLabelAlignment.Perpendicular: {\n      return getColor(d.data, config.nodeColor, d.height)\n    }\n    case ChordLabelAlignment.Along: {\n      const c = getColor(d.data, config.nodeColor, d.height)\n      const colorParsed = color(c)\n      const brightness = colorParsed ? hexToBrightness(colorParsed.hex()) : 0\n      return brightness > 0.65 ? 'var(--vis-chord-diagram-label-text-fill-color-dark)' : 'var(--vis-chord-diagram-label-text-fill-color-bright)'\n    }\n  }\n}\n\nfunction getLabelTextAnchor<N extends ChordInputNode, L extends ChordInputLink> (\n  d: ChordNode<N>,\n  config: ChordDiagramConfigInterface<N, L>\n): string | null {\n  const nodeLabelAlignment = getValue(d.data, config.nodeLabelAlignment) ?? ChordLabelAlignment.Along\n  switch (nodeLabelAlignment) {\n    case ChordLabelAlignment.Perpendicular: {\n      const angleCenter = (d.x0 + d.x1) / 2\n      const angleDegree = angleCenter * 180 / Math.PI\n      return angleDegree < 180 ? 'start' : 'end'\n    }\n    case ChordLabelAlignment.Along: {\n      return null\n    }\n  }\n}\n\nfunction getLabelTransform<N extends ChordInputNode, L extends ChordInputLink> (\n  d: ChordNode<N>,\n  config: ChordDiagramConfigInterface<N, L>,\n  radiusScale: ScaleContinuousNumeric<number, number>\n): string | null {\n  const nodeLabelAlignment = getValue(d.data, config.nodeLabelAlignment) ?? ChordLabelAlignment.Along\n  switch (nodeLabelAlignment) {\n    case ChordLabelAlignment.Perpendicular: {\n      const r = radiusScale(d.y1) + LABEL_PADDING\n      const angleCenter = (d.x0 + d.x1) / 2\n      const angle = angleCenter - Math.PI / 2\n      const x = r * Math.cos(angle)\n      const y = r * Math.sin(angle)\n      return `translate(${x}, ${y})`\n    }\n    case ChordLabelAlignment.Along:\n      return null\n  }\n}\n\nexport function createLabel<N extends ChordInputNode, L extends ChordInputLink> (\n  selection: Selection<SVGGElement, ChordNode<N>, SVGGElement, unknown>,\n  config: ChordDiagramConfigInterface<N, L>,\n  radiusScale: ScaleContinuousNumeric<number, number>\n): void {\n  selection.style('opacity', 0)\n    .attr('transform', d => getLabelTransform(d, config, radiusScale))\n\n  selection.append('text')\n    .attr('class', s.labelText)\n    .style('fill', d => getColor(d.data, config.nodeColor, d.height))\n}\n\nexport function updateLabel<N extends ChordInputNode, L extends ChordInputLink> (\n  selection: Selection<SVGGElement, ChordNode<N>, SVGGElement, unknown>,\n  config: ChordDiagramConfigInterface<N, L>,\n  width: number,\n  radiusScale: ScaleContinuousNumeric<number, number>,\n  duration: number\n): void {\n  const { nodeLabel, nodeLabelColor, nodeWidth } = config\n\n  smartTransition(selection, duration)\n    .attr('transform', d => getLabelTransform(d, config, radiusScale))\n    .style('opacity', 1)\n\n  const label: Selection<SVGTextElement, ChordNode<N>, SVGElement, unknown> = selection.select(`.${s.labelText}`)\n  label.selectAll('textPath').remove()\n\n  label.text(d => getString(d.data, nodeLabel))\n    .style('transition', `fill ${duration}ms`)\n    .style('fill', d => getColor(d.data, nodeLabelColor) ?? getLabelFillColor(d, config))\n    .style('text-anchor', d => getLabelTextAnchor(d, config))\n    .each((d: ChordNode<N>, i: number, elements) => {\n      const nodeLabelAlignment = getValue(d.data, config.nodeLabelAlignment) ?? ChordLabelAlignment.Along\n      const radianArcLength = d.x1 - d.x0 - getNumber(d.data, config.padAngle) * 2\n      const radius = radiusScale(d.y1) - getNumber(d, config.nodeWidth) / 2\n      const arcLength = radius * radianArcLength\n      const maxWidth = (nodeLabelAlignment === ChordLabelAlignment.Along ? arcLength : width - LABEL_PADDING * 2)\n\n      const textElement = select(elements[i])\n        .call(trimSVGText, maxWidth)\n        .attr('dx', nodeLabelAlignment === ChordLabelAlignment.Along ? LABEL_PADDING : null)\n        .attr('dy', nodeLabelAlignment === ChordLabelAlignment.Along ? getNumber(d.data, nodeWidth) / 2 : null)\n\n      const textWidth = textElement.node().getComputedTextLength()\n      const labelText = textElement.text()\n      if (nodeLabelAlignment === ChordLabelAlignment.Along) {\n        textElement.text('')\n        if (textWidth <= maxWidth) {\n          textElement.append('textPath')\n            .attr('href', `#${d.uid}`)\n            .text(labelText)\n        }\n      }\n    })\n\n  smartTransition(label, duration)\n    .attr('transform', d => {\n      const nodeLabelAlignment = getValue(d.data, config.nodeLabelAlignment)\n      if (nodeLabelAlignment !== ChordLabelAlignment.Perpendicular) return null\n      const angleCenter = (d.x0 + d.x1) / 2\n      const angleDegree = angleCenter * 180 / Math.PI\n      return `rotate(${angleDegree < 180 ? angleDegree - 90 : angleDegree + 90})`\n    })\n}\n\nexport function removeLabel (\n  selection: Selection<SVGGElement, unknown, SVGGElement, unknown>,\n  duration: number\n): void {\n  smartTransition(selection, duration)\n    .style('opacity', 0)\n    .remove()\n}\n", "import { group, index } from 'd3-array'\nimport { HierarchyNode, hierarchy } from 'd3-hierarchy'\nimport { pie } from 'd3-shape'\n\n// Utils\nimport { getNumber, groupBy } from 'utils/data'\n\n// Types\nimport { NumericAccessor } from 'types/accessor'\n\n// Local Types\nimport { ChordNode, ChordRibbon, ChordLinkDatum, ChordHierarchyNode, ChordLeafNode } from '../types'\n\nfunction transformData <T> (node: HierarchyNode<T>): void {\n  const { height, depth } = node\n  if (height > 0) {\n    const d = node.data as unknown as [string, T[]]\n    const n = node as unknown as HierarchyNode<ChordHierarchyNode<T>>\n    n.data = { key: d[0], values: d[1], depth, height, ancestors: n.ancestors().map(d => d.data.key) }\n  }\n}\n\nexport function getHierarchyNodes<N> (\n  data: N[],\n  value: NumericAccessor<N>,\n  levels: string[] = []\n): HierarchyNode<ChordHierarchyNode<N>> {\n  const nodeLevels = levels.map(level => (d: N) => d[level as keyof N]) as unknown as [(d: N) => string]\n  const nestedData = levels.length ? group<N, string>(data, ...nodeLevels) : { key: 'root', children: data }\n\n  const root = hierarchy(nestedData)\n    .sum(d => getNumber(d as unknown as N, value))\n    .each(transformData)\n\n  return root as unknown as HierarchyNode<ChordHierarchyNode<N>>\n}\n\nexport function positionChildren<N> (node: ChordNode<N>, padding: number, scalingCoeff = 0.95): void {\n  if (!node.children) return\n\n  // We need to ensure levels with empty links still take up full space\n  const containsLinks = node.value > 0\n\n  const length = node.x1 - node.x0\n  const scaledLength = length * (node.y0 === 0 ? 1 : scalingCoeff)\n  const delta = length - scaledLength\n  const padAngle = containsLinks ? padding : scaledLength / node.children.length\n\n  const positions = pie<ChordNode<N>>()\n    .startAngle(node.x0 + delta / 2)\n    .endAngle(node.x1 - delta / 2)\n    .padAngle(padAngle)\n    .value(d => containsLinks ? d.value : 1)\n    .sort((a, b) => node.children.indexOf(a) - node.children.indexOf(b))(node.children)\n\n  node.children.forEach((child, i) => {\n    const x0 = positions[i].startAngle\n    const x1 = positions[i].endAngle\n    const childDelta = (x1 - x0) * (1 - scalingCoeff)\n    const xmid = (x0 + x1) / 2\n    child.x0 = containsLinks ? x0 + childDelta / 2 : xmid - padding / 2\n    child.x1 = containsLinks ? x1 - childDelta / 2 : xmid + padding / 2\n  })\n}\n\nexport function getRibbons<N> (data: ChordNode<N>, links: ChordLinkDatum<N>[], padding: number): ChordRibbon<N>[] {\n  type LinksArrayType = typeof links\n  const groupedBySource: Record<string, LinksArrayType> = groupBy(links, d => d.source._id)\n  const groupedByTarget: Record<string, LinksArrayType> = groupBy(links, d => d.target._id)\n\n  const leafNodes = data.leaves() as ChordLeafNode<N>[]\n  const leafNodesById: Map<string, ChordLeafNode<N>> = index(leafNodes, d => d.data._id)\n\n  const getNodesInRibbon = (\n    source: ChordLeafNode<N>,\n    target: ChordLeafNode<N>,\n    partitionHeight: number,\n    nodes: ChordNode<N>[] = []\n  ): ChordNode<N>[] => {\n    nodes[source.height] = source\n    nodes[partitionHeight * 2 - target.height] = target\n    if (source.parent && target.parent) getNodesInRibbon(source.parent, target.parent, partitionHeight, nodes)\n    return nodes\n  }\n  const calculatePoints = (links: LinksArrayType, type: 'in' | 'out', depth: number, maxDepth: number): void => {\n    links.forEach(link => {\n      if (!link._state.points) link._state.points = []\n\n      const sourceLeaf = leafNodesById.get(link.source._id)\n      const targetLeaf = leafNodesById.get(link.target._id)\n      const nodesInRibbon = getNodesInRibbon(\n        type === 'out' ? sourceLeaf : targetLeaf,\n        type === 'out' ? targetLeaf : sourceLeaf,\n        maxDepth\n      )\n      const currNode = nodesInRibbon[depth]\n      const len = currNode.x1 - currNode.x0 - padding\n      const x0 = currNode._prevX1 ?? (currNode.x0 + padding / 2)\n      const x1 = x0 + len * link._state.value / currNode.value\n      currNode._prevX1 = x1\n\n      const pointIdx = type === 'out' ? depth : maxDepth * 2 - 1 - depth\n      link._state.points[pointIdx] = { a0: x0, a1: x1, r: currNode.y1 }\n    })\n  }\n\n  leafNodes.forEach(leafNode => {\n    const outLinks = groupedBySource[leafNode.data._id] || []\n    const inLinks = groupedByTarget[leafNode.data._id] || []\n    for (let depth = 0; depth < leafNode.depth; depth += 1) {\n      calculatePoints(outLinks, 'out', depth, leafNode.depth)\n      calculatePoints(inLinks, 'in', depth, leafNode.depth)\n    }\n  })\n\n  return links.map(l => ({\n    source: leafNodesById.get(l.source._id),\n    target: leafNodesById.get(l.target._id),\n    data: l,\n    points: l._state.points,\n    _state: {},\n  }))\n}\n", "export var abs = Math.abs;\nexport var cos = Math.cos;\nexport var sin = Math.sin;\nexport var pi = Math.PI;\nexport var halfPi = pi / 2;\nexport var tau = pi * 2;\nexport var max = Math.max;\nexport var epsilon = 1e-12;\n", "export var slice = Array.prototype.slice;\n", "export default function(x) {\n  return function() {\n    return x;\n  };\n}\n", "import {path} from \"d3-path\";\nimport {slice} from \"./array.js\";\nimport constant from \"./constant.js\";\nimport {abs, cos, epsilon, halfPi, sin} from \"./math.js\";\n\nfunction defaultSource(d) {\n  return d.source;\n}\n\nfunction defaultTarget(d) {\n  return d.target;\n}\n\nfunction defaultRadius(d) {\n  return d.radius;\n}\n\nfunction defaultStartAngle(d) {\n  return d.startAngle;\n}\n\nfunction defaultEndAngle(d) {\n  return d.endAngle;\n}\n\nfunction defaultPadAngle() {\n  return 0;\n}\n\nfunction defaultArrowheadRadius() {\n  return 10;\n}\n\nfunction ribbon(headRadius) {\n  var source = defaultSource,\n      target = defaultTarget,\n      sourceRadius = defaultRadius,\n      targetRadius = defaultRadius,\n      startAngle = defaultStartAngle,\n      endAngle = defaultEndAngle,\n      padAngle = defaultPadAngle,\n      context = null;\n\n  function ribbon() {\n    var buffer,\n        s = source.apply(this, arguments),\n        t = target.apply(this, arguments),\n        ap = padAngle.apply(this, arguments) / 2,\n        argv = slice.call(arguments),\n        sr = +sourceRadius.apply(this, (argv[0] = s, argv)),\n        sa0 = startAngle.apply(this, argv) - halfPi,\n        sa1 = endAngle.apply(this, argv) - halfPi,\n        tr = +targetRadius.apply(this, (argv[0] = t, argv)),\n        ta0 = startAngle.apply(this, argv) - halfPi,\n        ta1 = endAngle.apply(this, argv) - halfPi;\n\n    if (!context) context = buffer = path();\n\n    if (ap > epsilon) {\n      if (abs(sa1 - sa0) > ap * 2 + epsilon) sa1 > sa0 ? (sa0 += ap, sa1 -= ap) : (sa0 -= ap, sa1 += ap);\n      else sa0 = sa1 = (sa0 + sa1) / 2;\n      if (abs(ta1 - ta0) > ap * 2 + epsilon) ta1 > ta0 ? (ta0 += ap, ta1 -= ap) : (ta0 -= ap, ta1 += ap);\n      else ta0 = ta1 = (ta0 + ta1) / 2;\n    }\n\n    context.moveTo(sr * cos(sa0), sr * sin(sa0));\n    context.arc(0, 0, sr, sa0, sa1);\n    if (sa0 !== ta0 || sa1 !== ta1) {\n      if (headRadius) {\n        var hr = +headRadius.apply(this, arguments), tr2 = tr - hr, ta2 = (ta0 + ta1) / 2;\n        context.quadraticCurveTo(0, 0, tr2 * cos(ta0), tr2 * sin(ta0));\n        context.lineTo(tr * cos(ta2), tr * sin(ta2));\n        context.lineTo(tr2 * cos(ta1), tr2 * sin(ta1));\n      } else {\n        context.quadraticCurveTo(0, 0, tr * cos(ta0), tr * sin(ta0));\n        context.arc(0, 0, tr, ta0, ta1);\n      }\n    }\n    context.quadraticCurveTo(0, 0, sr * cos(sa0), sr * sin(sa0));\n    context.closePath();\n\n    if (buffer) return context = null, buffer + \"\" || null;\n  }\n\n  if (headRadius) ribbon.headRadius = function(_) {\n    return arguments.length ? (headRadius = typeof _ === \"function\" ? _ : constant(+_), ribbon) : headRadius;\n  };\n\n  ribbon.radius = function(_) {\n    return arguments.length ? (sourceRadius = targetRadius = typeof _ === \"function\" ? _ : constant(+_), ribbon) : sourceRadius;\n  };\n\n  ribbon.sourceRadius = function(_) {\n    return arguments.length ? (sourceRadius = typeof _ === \"function\" ? _ : constant(+_), ribbon) : sourceRadius;\n  };\n\n  ribbon.targetRadius = function(_) {\n    return arguments.length ? (targetRadius = typeof _ === \"function\" ? _ : constant(+_), ribbon) : targetRadius;\n  };\n\n  ribbon.startAngle = function(_) {\n    return arguments.length ? (startAngle = typeof _ === \"function\" ? _ : constant(+_), ribbon) : startAngle;\n  };\n\n  ribbon.endAngle = function(_) {\n    return arguments.length ? (endAngle = typeof _ === \"function\" ? _ : constant(+_), ribbon) : endAngle;\n  };\n\n  ribbon.padAngle = function(_) {\n    return arguments.length ? (padAngle = typeof _ === \"function\" ? _ : constant(+_), ribbon) : padAngle;\n  };\n\n  ribbon.source = function(_) {\n    return arguments.length ? (source = _, ribbon) : source;\n  };\n\n  ribbon.target = function(_) {\n    return arguments.length ? (target = _, ribbon) : target;\n  };\n\n  ribbon.context = function(_) {\n    return arguments.length ? ((context = _ == null ? null : _), ribbon) : context;\n  };\n\n  return ribbon;\n}\n\nexport default function() {\n  return ribbon();\n}\n\nexport function ribbonArrow() {\n  return ribbon(defaultArrowheadRadius);\n}\n", "import { Selection, select } from 'd3-selection'\nimport { ribbon } from 'd3-chord'\nimport { ScalePower } from 'd3-scale'\nimport { areaRadial } from 'd3-shape'\nimport { Transition } from 'd3-transition'\nimport { interpolatePath } from 'd3-interpolate-path'\n\n// Types\nimport { Curve } from 'types/curve'\n\n// Utils\nimport { getColor } from 'utils/color'\nimport { smartTransition } from 'utils/d3'\nimport { convertLineToArc } from 'utils/path'\n\n// Local Types\nimport { ChordInputLink, ChordInputNode, ChordRibbon, ChordRibbonPoint } from '../types'\nimport { ChordDiagramConfigInterface } from '../config'\n\n// Generators\nexport function emptyPath (): string {\n  return 'M0,0 L0,0'\n}\n\n// Generators\nconst ribbonGen = ribbon<ChordRibbonPoint[], ChordRibbonPoint>()\n  .source(d => d[0])\n  .target(d => d[d.length - 1])\n  .startAngle(d => d.a0)\n  .endAngle(d => d.a1)\n\nconst areaGen = areaRadial<ChordRibbonPoint>()\n  .curve(Curve.catmullRom.alpha(0.5))\n  .startAngle((d, i, points) => i < points.length / 2 ? d.a1 : d.a0)\n  .endAngle((d, i, points) => i < points.length / 2 ? d.a0 : d.a1)\n\n\n// Creates a path from set of points\nfunction linkGen (points: ChordRibbonPoint[], radiusScale: ScalePower<number, number>): string {\n  const link = (points.length === 2 ? ribbonGen : areaGen)\n  link.radius(d => radiusScale(d.r))\n\n  const linkPath = link(points) as string\n\n  if (points.length === 2) return linkPath\n\n  // Replace closePath with line to starting point\n  const area = linkPath.slice(0, -1)\n  const path = area.concat(`L${area.match(/M-?\\d*\\.?\\d*[,\\s*]-?\\d*\\.?\\d*/)?.[0].slice(1)}`)\n\n  // Convert line edges to arcs\n  const radius = Math.max(radiusScale(points[0].r), 0)\n  return convertLineToArc(path, radius)\n}\n\nexport function createLink<N extends ChordInputNode> (\n  selection: Selection<SVGPathElement, ChordRibbon<N>, SVGGElement, unknown>,\n  radiusScale: ScalePower<number, number>\n): void {\n  selection\n    .attr('d', d => linkGen(d.points, radiusScale) || emptyPath())\n    .style('opacity', 0)\n}\n\nexport function updateLink<N extends ChordInputNode, L extends ChordInputLink> (\n  selection: Selection<SVGPathElement, ChordRibbon<N, L>, SVGGElement, unknown>,\n  config: ChordDiagramConfigInterface<N, L>,\n  radiusScale: ScalePower<number, number>,\n  duration: number\n): void {\n  selection\n    .style('transition', `fill ${duration}ms`)\n    .style('fill', d => getColor(d.data, config.linkColor))\n    .style('stroke', d => getColor(d.data, config.linkColor))\n\n  const transition = smartTransition(selection, duration)\n    .style('opacity', 1) as Transition<SVGPathElement, ChordRibbon<N, L>, SVGGElement, unknown>\n\n  if (duration) {\n    transition.attrTween('d', (d, i, el) => {\n      const previous = select(el[i]).attr('d')\n      const next = linkGen(d.points, radiusScale) || emptyPath()\n      return interpolatePath(previous, next)\n    })\n  } else {\n    transition.attr('d', d => linkGen(d.points, radiusScale) || emptyPath())\n  }\n}\n\nexport function removeLink (\n  selection: Selection<SVGPathElement, unknown, SVGGElement, unknown>,\n  duration: number\n): void {\n  smartTransition(selection, duration)\n    .style('opacity', 0)\n    .remove()\n}\n", "import { max } from 'd3-array'\nimport { partition } from 'd3-hierarchy'\nimport { Selection } from 'd3-selection'\nimport { scalePow, ScalePower } from 'd3-scale'\nimport { arc } from 'd3-shape'\n\n// Core\nimport { ComponentCore } from 'core/component'\nimport { GraphData, GraphDataModel } from 'data-models/graph'\n\n// Utils\nimport { getNumber, isNumber, getString, getValue } from 'utils/data'\nimport { estimateStringPixelLength } from 'utils/text'\nimport { getCSSVariableValueInPixels } from 'utils/misc'\n\n// Types\nimport { Spacing } from 'types/spacing'\n\n// Local Types\nimport { ChordInputNode, ChordInputLink, ChordDiagramData, ChordNode, ChordRibbon, ChordLabelAlignment, ChordLeafNode } from './types'\n\n// Config\nimport { ChordDiagramDefaultConfig, ChordDiagramConfigInterface } from './config'\n\n// Modules\nimport { createNode, updateNode, removeNode } from './modules/node'\nimport { createLabel, updateLabel, removeLabel, LABEL_PADDING } from './modules/label'\nimport { getHierarchyNodes, getRibbons, positionChildren } from './modules/layout'\nimport { createLink, updateLink, removeLink } from './modules/link'\n\n// Styles\nimport * as s from './style'\n\nexport class ChordDiagram<\n  N extends ChordInputNode,\n  L extends ChordInputLink,\n> extends ComponentCore<\n  ChordDiagramData<N, L>,\n  ChordDiagramConfigInterface<N, L>\n  > {\n  static selectors = s\n  protected _defaultConfig = ChordDiagramDefaultConfig as ChordDiagramConfigInterface<N, L>\n  public config: ChordDiagramConfigInterface<N, L> = this._defaultConfig\n  datamodel: GraphDataModel<N, L> = new GraphDataModel()\n\n  background: Selection<SVGRectElement, unknown, SVGGElement, unknown>\n  nodeGroup: Selection<SVGGElement, unknown, SVGGElement, unknown>\n  linkGroup: Selection<SVGGElement, unknown, SVGGElement, unknown>\n  labelGroup: Selection<SVGGElement, unknown, SVGGElement, unknown>\n\n  arcGen = arc<ChordNode<N>>()\n  radiusScale: ScalePower<number, number> = scalePow()\n\n  events = {\n    [ChordDiagram.selectors.node]: {\n      mouseover: this._onNodeMouseOver.bind(this),\n      mouseout: this._onNodeMouseOut.bind(this),\n    },\n    [ChordDiagram.selectors.link]: {\n      mouseover: this._onLinkMouseOver.bind(this),\n      mouseout: this._onLinkMouseOut.bind(this),\n    },\n    [ChordDiagram.selectors.label]: {\n      mouseover: this._onNodeMouseOver.bind(this),\n      mouseout: this._onNodeMouseOut.bind(this),\n    },\n  }\n\n  private _nodes: ChordNode<N>[] = []\n  private _links: ChordRibbon<N>[] = []\n  private _rootNode: ChordNode<N>\n\n  private get _forceHighlight (): boolean {\n    return this.config.highlightedNodeId !== undefined || this.config.highlightedLinkIds?.length > 0\n  }\n\n  constructor (config?: ChordDiagramConfigInterface<N, L>) {\n    super()\n    if (config) this.setConfig(config)\n\n    this.background = this.g.append('rect').attr('class', s.background)\n    this.linkGroup = this.g.append('g').attr('class', s.links)\n    this.nodeGroup = this.g.append('g').attr('class', s.nodes)\n    this.labelGroup = this.g.append('g').attr('class', s.labels)\n  }\n\n  get bleed (): Spacing {\n    const { config } = this\n    const padding = LABEL_PADDING * 2\n    let top = 0; let bottom = 0; let right = 0; let left = 0\n    this._nodes.forEach(n => {\n      const nodeLabelAlignment = getValue(n.data, config.nodeLabelAlignment)\n      if (n.height === 0 && nodeLabelAlignment === ChordLabelAlignment.Perpendicular) {\n        const label = getString(n.data as N, config.nodeLabel) ?? ''\n        const fontSize = getCSSVariableValueInPixels('var(--vis-chord-diagram-label-text-font-size)', this.element)\n        const labelWidth = estimateStringPixelLength(label, fontSize)\n\n        const [x, y] = this.arcGen.centroid(n)\n\n        if (x < 0) left = Math.max(left, labelWidth)\n        else right = Math.max(right, labelWidth)\n\n        if (y < 0) top = Math.max(top, labelWidth)\n        else bottom = Math.max(bottom, labelWidth)\n      }\n    })\n    left += padding\n    right += padding\n    bottom += padding\n    top += padding\n    return { top, bottom, left, right }\n  }\n\n  setSize (width: number, height: number, containerWidth: number, containerHeight: number): void {\n    super.setSize(width, height, containerWidth, containerHeight)\n\n    // Setting radius for initial bleed calculation. This ensures the correct radius is set when render is called\n    this.radiusScale\n      .exponent(this.config.radiusScaleExponent)\n      .range([0, Math.min(width, height) / 2])\n  }\n\n  setData (data: GraphData<N, L>): void {\n    super.setData(data)\n    this._layoutData()\n  }\n\n  _layoutData (): void {\n    const { nodes, links } = this.datamodel\n    const { padAngle, linkValue, nodeLevels } = this.config\n    nodes.forEach(n => { delete n._state.value })\n    links.forEach(l => {\n      delete l._state.points\n      l._state.value = getNumber(l, linkValue)\n      l.source._state.value = (l.source._state.value || 0) + getNumber(l, linkValue)\n      l.target._state.value = (l.target._state.value || 0) + getNumber(l, linkValue)\n    })\n\n    const root = getHierarchyNodes(nodes, d => d._state?.value, nodeLevels)\n\n    const partitionData = partition().size([this.config.angleRange[1], 1])(root) as ChordNode<N>\n    partitionData.each((n, i) => {\n      positionChildren(n, padAngle)\n      n.uid = `${this.uid.substr(0, 4)}-${i}`\n      n.x0 = Number.isNaN(n.x0) ? 0 : n.x0\n      n.x1 = Number.isNaN(n.x1) ? 0 : n.x1\n      n._state = {}\n    })\n\n    const partitionDataWithRoot = partitionData.descendants()\n    this._rootNode = partitionDataWithRoot.find(d => d.depth === 0)\n    this._nodes = partitionDataWithRoot.filter(d => d.depth !== 0) // Filter out the root node\n    this._links = getRibbons<N>(partitionData, links, padAngle)\n  }\n\n  _render (customDuration?: number): void {\n    super._render(customDuration)\n    const { config, bleed } = this\n\n    this._layoutData()\n    const duration = isNumber(customDuration) ? customDuration : config.duration\n    const size = Math.min(this._width, this._height)\n    const radius = size / 2 - max([bleed.top, bleed.bottom, bleed.left, bleed.right])\n\n    const numLevels = 1 + config.nodeLevels?.length\n    const maxSpace = config.nodeWidth * numLevels\n    const nodeWidth = radius > maxSpace ? config.nodeWidth : Math.max(radius / numLevels, 0)\n\n    this.radiusScale.range([0, Math.max(radius, 0)])\n\n    this.arcGen\n      .startAngle(d => d.x0 + config.padAngle / 2 - (d.value ? 0 : Math.PI / 360))\n      .endAngle(d => d.x1 - config.padAngle / 2 + (d.value ? 0 : Math.PI / 360))\n      .cornerRadius(d => getNumber(d.data, config.cornerRadius))\n      .innerRadius(d => Math.max(this.radiusScale(d.y1) - nodeWidth, 0))\n      .outerRadius(d => this.radiusScale(d.y1))\n\n    this.g.classed(s.transparent, this._forceHighlight)\n    this.background\n      .attr('width', this._width)\n      .attr('height', this._height)\n      .style('opacity', 0)\n\n    // Center the view\n    this.nodeGroup.attr('transform', `translate(${this._width / 2},${this._height / 2})`)\n    this.labelGroup.attr('transform', `translate(${this._width / 2},${this._height / 2})`)\n    this.linkGroup.attr('transform', `translate(${this._width / 2},${this._height / 2})`)\n\n    // Links\n    const linksSelection = this.linkGroup\n      .selectAll<SVGPathElement, ChordRibbon<N>>(`.${s.link}`)\n      .data(this._links, d => String(d.data._id))\n\n    const linksEnter = linksSelection.enter().append('path')\n      .attr('class', s.link)\n      .call(createLink, this.radiusScale)\n\n    const linksMerged = linksSelection\n      .merge(linksEnter)\n      .classed(s.highlightedLink, l => {\n        const linkId = l.data.id ?? l.data._indexGlobal\n        return config.highlightedLinkIds?.includes(linkId)\n      })\n    linksMerged.call(updateLink, config, this.radiusScale, duration)\n\n    linksSelection.exit()\n      .call(removeLink, duration)\n\n    // Nodes\n    const nodesSelection = this.nodeGroup\n      .selectAll<SVGPathElement, ChordNode<N>>(`.${s.node}`)\n      .data(this._nodes, d => String(d.uid))\n\n    const nodesEnter = nodesSelection.enter().append('path')\n      .attr('class', s.node)\n      .call(createNode, config)\n\n    const nodesMerged = nodesSelection\n      .merge(nodesEnter)\n      .classed(s.highlightedNode, d => config.highlightedNodeId === d.data._id)\n    nodesMerged.call(updateNode, config, this.arcGen, duration, this.bleed)\n\n    nodesSelection.exit()\n      .call(removeNode, duration)\n\n    // Labels\n    const labelWidth = size - radius\n    const labels = this.labelGroup\n      .selectAll<SVGGElement, ChordNode<N>>(`.${s.label}`)\n      .data(this._nodes, d => String(d.uid))\n\n    const labelEnter = labels.enter().append('g')\n      .attr('class', s.label)\n      .call(createLabel, config, this.radiusScale)\n\n    const labelsMerged = labels.merge(labelEnter)\n    labelsMerged.call(updateLabel, config, labelWidth, this.radiusScale, duration)\n\n    labels.exit()\n      .attr('class', s.labelExit)\n      .call(removeLabel, duration)\n  }\n\n  private _onNodeMouseOver (d: ChordNode<N>): void {\n    let ribbons: ChordRibbon<N>[]\n    if (d.children) {\n      const leaves = d.leaves() as ChordLeafNode<N>[]\n      ribbons = this._links.filter(l =>\n        leaves.find(leaf => l.source.data.id === leaf.data.id || l.target.data.id === leaf.data.id)\n      )\n    } else {\n      const leaf = d as ChordLeafNode<N>\n      ribbons = this._links.filter(l => l.source.data.id === leaf.data.id || l.target.data.id === leaf.data.id)\n    }\n\n    // Nodes without links should still be highlighted\n    if (!ribbons.length) d._state.hovered = true\n    this._highlightOnHover(ribbons)\n  }\n\n  private _onNodeMouseOut (): void {\n    this._highlightOnHover()\n  }\n\n  private _onLinkMouseOver (d: ChordRibbon<N>): void {\n    this._highlightOnHover([d])\n  }\n\n  private _onLinkMouseOut (): void {\n    this._highlightOnHover()\n  }\n\n  private _highlightOnHover (links?: ChordRibbon<N>[]): void {\n    if (this._forceHighlight) return\n    if (links) {\n      links.forEach(l => {\n        l._state.hovered = true\n        const sourcePath = (l.source as ChordNode<N>).path(this._rootNode)\n        const targetPath = (l.target as ChordNode<N>).path(this._rootNode)\n        sourcePath.forEach(n => { if (n.depth) n._state.hovered = true })\n        targetPath.forEach(n => { if (n.depth) n._state.hovered = true })\n      })\n    } else {\n      this._nodes.forEach(n => { delete n._state.hovered })\n      this._links.forEach(l => { delete l._state.hovered })\n    }\n\n    this.nodeGroup.selectAll<SVGPathElement, ChordNode<N>>(`.${s.node}`)\n      .classed(s.highlightedNode, d => d._state.hovered)\n    this.linkGroup.selectAll<SVGPathElement, ChordRibbon<N>>(`.${s.link}`)\n      .classed(s.highlightedLink, d => d._state.hovered)\n\n    this.g.classed(s.transparent, !!links)\n  }\n}\n", "// Types\nimport { Position } from 'types/position'\nimport { GraphInputLink, GraphInputNode, GraphNodeCore, GraphLinkCore } from 'types/graph'\nimport { Spacing } from 'types/spacing'\nimport { TrimMode } from 'types/text'\n\nexport type GraphNode<\n  N extends GraphInputNode = GraphInputNode,\n  L extends GraphInputLink = GraphInputLink,\n> = GraphNodeCore<N, L> & {\n  x?: number;\n  y?: number;\n\n  _id?: number | string;\n  _index?: number;\n  _state?: {\n    isDragged?: boolean;\n    fx?: number;\n    fy?: number;\n    selected?: boolean;\n    greyout?: boolean;\n    brushed?: boolean;\n  };\n\n  _panels?: GraphPanel<N, L>[];\n  _isConnected?: boolean;\n}\n\nexport type GraphForceSimulationNode<\n  N extends GraphInputNode = GraphInputNode,\n  L extends GraphInputLink = GraphInputLink,\n> = GraphNode<N, L> & {\n  fx?: number;\n  fy?: number;\n}\n\nexport type GraphLink<\n  N extends GraphInputNode = GraphInputNode,\n  L extends GraphInputLink = GraphInputLink,\n> = GraphLinkCore<N, L> & {\n  id?: number | string;\n  source: number | string | GraphNode<N>;\n  target: number | string | GraphNode<N>;\n\n  _id?: number | string;\n  _direction?: number;\n  _index?: number;\n  _neighbours?: number;\n\n  _state?: {\n    flowAnimTime?: number;\n    hovered?: boolean;\n    selected?: boolean;\n    greyout?: boolean;\n  };\n}\n\nexport enum GraphLayoutType {\n  Circular = 'circular',\n  Concentric = 'concentric',\n  Parallel = 'parallel',\n  ParallelHorizontal = 'parallel horizontal',\n  Dagre = 'dagre',\n  Force = 'force',\n  Elk = 'elk',\n  Precalculated = 'precalculated',\n}\n\nexport type GraphCircleLabel = {\n  text: string;\n  textColor?: string | null;\n  color?: string | null;\n  cursor?: string | null;\n  fontSize?: string | null;\n  radius?: number;\n}\n\nexport type GraphLinkLabel = GraphCircleLabel\n\nexport enum GraphLinkStyle {\n  Dashed = 'dashed',\n  Solid = 'solid',\n}\n\nexport enum GraphLinkArrowStyle {\n  Single = 'single',\n  Double = 'double',\n}\n\nexport enum GraphNodeShape {\n  Circle = 'circle',\n  Square = 'square',\n  Hexagon = 'hexagon',\n  Triangle = 'triangle',\n}\n\nexport type GraphPanelConfig = {\n  /** Panel nodes references by unique ids */\n  nodes: (string|number)[];\n  /** Panel label */\n  label?: string;\n  /** Trim label if it's longer than this number of characters */\n  labelTrimLength?: number;\n  /** Trim mode of the label */\n  labelTrimMode?: TrimMode;\n  /** Position of the label */\n  labelPosition?: Position.Top | Position.Bottom | string;\n  /** Fill color of the panel */\n  fillColor?: string;\n  /** Color of the panel's border */\n  borderColor?: string;\n  /** Border width of the panel in pixels */\n  borderWidth?: number;\n  /** Inner padding */\n  padding?: number | Spacing;\n  /** Dashed outline showing that the panel is selected */\n  dashedOutline?: boolean;\n  /** Side icon symbol */\n  sideIconSymbol?: string;\n  /** Size of the icon as a CSS string. e.g.: `12pt` or `12px` */\n  sideIconFontSize?: string;\n  /** Color of the icon */\n  sideIconSymbolColor?: string;\n  /** Shape of the icon's background */\n  sideIconShape?: GraphNodeShape | string;\n  /** Size of the icon's background shape */\n  sideIconShapeSize?: number;\n  /** Stroke color of the icon's background shape */\n  sideIconShapeStroke?: string;\n  /** Cursor, when hovering over the icon */\n  sideIconCursor?: string;\n}\n\nexport type GraphPanel<\n  N extends GraphInputNode = GraphInputNode,\n  L extends GraphInputLink = GraphInputLink,\n> = GraphPanelConfig & {\n  _numNodes?: number;\n  _x?: number;\n  _y?: number;\n  _width?: number;\n  _height?: number;\n  _disabled?: boolean;\n  _padding?: Spacing;\n}\n\nexport type GraphNodeAnimationState = {\n  endAngle: number;\n  nodeIndex: number;\n  nodeSize?: number;\n  borderWidth?: number;\n}\n\nexport type GraphNodeAnimatedElement<T = SVGElement> = T & {\n  _animState: GraphNodeAnimationState;\n}\n\nexport type GraphForceLayoutSettings<\n  N extends GraphInputNode = GraphInputNode,\n  L extends GraphInputLink = GraphInputLink,\n> = {\n  /** Preferred Link Distance. Default: `60` */\n  linkDistance?: number | ((l: GraphLink<N, L>, i: number) => number);\n  /** Link Strength [0:1]. Default: `0.45` */\n  linkStrength?: number | ((l: GraphLink<N, L>, i: number) => number);\n  /** Charge Force (<0 repulsion, >0 attraction). Default: `-500` */\n  charge?: number | ((l: GraphNode<N, L>, i: number) => number);\n  /** X-centring force. Default: `0.15` */\n  forceXStrength?: number;\n  /** Y-centring force. Default: `0.25` */\n  forceYStrength?: number;\n  /** Number if simulation iterations. Default: automatic */\n  numIterations?: number;\n  /** Set to true if you want to fix the node positions after the simulation\n   * Helpful when you want to update graph settings without re-calculating the layout.\n   * Default: `false` */\n  fixNodePositionAfterSimulation?: boolean;\n}\n\nexport type GraphElkLayoutSettings = Record<string, string>\n\n/**\n * Settings for configuring the layout of a Dagre graph.\n */\nexport type GraphDagreLayoutSetting = {\n  /**\n   * Direction for rank nodes. Can be TB, BT, LR, or RL, where T = top, B = bottom, L = left, and R = right.\n   * Additional custom values can also be provided as a string.\n   */\n  rankdir?: 'TB' | 'BT' | 'LR' | 'RL' | string;\n\n  /**\n   * Alignment for rank nodes. Can be UL, UR, DL, or DR, where U = up, D = down, L = left, and R = right.\n   * Additional custom values can also be provided as a string.\n   */\n  align?: 'UL' | 'UR' | 'DL' | 'DR' | string;\n\n  /**\n   * Number of pixels that separate nodes horizontally in the layout.\n   */\n  nodesep?: number;\n\n  /**\n   * Number of pixels that separate edges horizontally in the layout.\n   */\n  edgesep?: number;\n\n  /**\n   * Number of pixels between each rank in the layout.\n   */\n  ranksep?: number;\n\n  /**\n   * Number of pixels to use as a margin around the left and right of the graph.\n   */\n  marginx?: number;\n\n  /**\n   * Number of pixels to use as a margin around the top and bottom of the graph.\n   */\n  marginy?: number;\n\n  /**\n   * If set to 'greedy', uses a greedy heuristic for finding a feedback arc set for a graph.\n   * A feedback arc set is a set of edges that can be removed to make a graph acyclic.\n   */\n  acyclicer?: 'greedy' | undefined;\n\n  /**\n   * Type of algorithm to assign a rank to each node in the input graph.\n   * Possible values are 'network-simplex', 'tight-tree', or 'longest-path'.\n   * Additional custom values can also be provided as a string.\n   */\n  ranker?: 'network-simplex' | 'tight-tree' | 'longest-path' | string;\n}\n\nexport enum GraphNodeSelectionHighlightMode {\n  None = 'none',\n  Greyout ='greyout',\n  GreyoutNonConnected ='greyout-non-connected',\n}\n", "import { D3BrushEvent } from 'd3-brush'\nimport { D3DragEvent } from 'd3-drag'\nimport { D3ZoomEvent, ZoomTransform } from 'd3-zoom'\nimport { Selection } from 'd3-selection'\nimport { ElkShape } from 'elkjs'\n\n// Core\nimport type { GraphDataModel } from 'data-models/graph'\n\n// Utils\nimport { isEqual } from 'utils/data'\n\n// Config\nimport { ComponentConfigInterface, ComponentDefaultConfig } from 'core/component/config'\n\n// Types\nimport { TrimMode } from 'types/text'\nimport { GraphInputLink, GraphInputNode, GraphInputData } from 'types/graph'\nimport { BooleanAccessor, ColorAccessor, NumericAccessor, StringAccessor, GenericAccessor } from 'types/accessor'\n\n// Local Types\nimport {\n  GraphLayoutType,\n  GraphCircleLabel,\n  GraphLinkStyle,\n  GraphLinkArrowStyle,\n  GraphPanelConfig,\n  GraphForceLayoutSettings,\n  GraphElkLayoutSettings,\n  GraphNodeShape,\n  GraphDagreLayoutSetting,\n  GraphNode,\n  GraphLink,\n  GraphNodeSelectionHighlightMode,\n} from './types'\n\n\nexport interface GraphConfigInterface<N extends GraphInputNode, L extends GraphInputLink> extends ComponentConfigInterface {\n  // Zoom and drag\n  /** Zoom level constraints. Default: [0.35, 1.25] */\n  zoomScaleExtent?: [number, number];\n  /** Disable zooming. Default: `false` */\n  disableZoom?: boolean;\n  /** Custom Zoom event filter to better control which actions should trigger zooming.\n   * Learn more: https://d3js.org/d3-zoom#zoom_filter.\n   * Default: `undefined` */\n  zoomEventFilter?: (event: PointerEvent) => boolean;\n  /** Disable node dragging. Default: `false` */\n  disableDrag?: boolean;\n  /** Disable brush for multiple node selection. Default: `false` */\n  disableBrush?: boolean;\n  /** Interval to re-render the graph when zooming. Default: `100` */\n  zoomThrottledUpdateNodeThreshold?: number;\n\n  // Layout general settings\n  /** Type of the graph layout. Default: `GraphLayoutType.Force` */\n  layoutType?: GraphLayoutType | string;\n  /** Fit the graph to container on data or config updates, or on container resize. Default: `true` */\n  layoutAutofit?: boolean;\n  /** Tolerance constant defining whether the graph should be fitted to container\n   * (on data or config update, or container resize) after a zoom / pan interaction or not.\n   * `0` — Stop fitting after any pan or zoom\n   * `Number.POSITIVE_INFINITY` — Always fit\n   * Default: `8.0` */\n  layoutAutofitTolerance?: number;\n  /** Place non-connected nodes at the bottom of the graph. Default: `false` */\n  layoutNonConnectedAside?: boolean;\n\n  // Settings for Parallel and Concentric layouts\n  /** Node group accessor function.\n   * Only for `GraphLayoutType.Parallel`, `GraphLayoutType.ParallelHorizontal` and `GraphLayoutType.Concentric` layouts.\n   * Default: `node => node.group` */\n  layoutNodeGroup?: StringAccessor<N>;\n  /** Order of the layout groups.\n   * Only for `GraphLayoutType.Parallel`, `GraphLayoutType.ParallelHorizontal` and `GraphLayoutType.Concentric` layouts.\n   * Default: `[]` */\n  layoutGroupOrder?: string[];\n\n  // Setting for Parallel layouts only\n  /** Sets the number of nodes in a sub-group after which they'll continue on the next column (or row if `layoutType` is\n   * `GraphLayoutType.ParallelHorizontal`).\n   * Only for `GraphLayoutType.Parallel` and `GraphLayoutType.ParallelHorizontal` layouts.\n   * Default: `6` */\n  layoutParallelNodesPerColumn?: number;\n  /** Node sub-group accessor function.\n   * Only for `GraphLayoutType.Parallel` and `GraphLayoutType.ParallelHorizontal` layouts.\n   * Default: `node => node.subgroup` */\n  layoutParallelNodeSubGroup?: StringAccessor<N>;\n  /** Number of sub-groups per row (or column if `layoutType` is `GraphLayoutType.ParallelHorizontal`) in a group.\n   * Only for `GraphLayoutType.Parallel` and `GraphLayoutType.ParallelHorizontal` layouts.\n   * Default: `1` */\n  layoutParallelSubGroupsPerRow?: number;\n  /** Spacing between groups.\n   * Only for `GraphLayoutType.Parallel` and `GraphLayoutType.ParallelHorizontal` layouts.\n   * Default: `undefined` */\n  layoutParallelGroupSpacing?: number;\n  /** Set a group by name to have priority in sorting the graph links.\n   * Only for `GraphLayoutType.Parallel` and `GraphLayoutType.ParallelHorizontal` layouts.\n   * Default: `undefined` */\n  layoutParallelSortConnectionsByGroup?: string;\n\n  // Force layout\n  /** Force Layout settings, see the `d3-force` package for more details */\n  forceLayoutSettings?: GraphForceLayoutSettings<N, L>;\n\n  // Dagre layout\n  /** Darge Layout settings, see the `dagrejs` package\n   * for more details: https://github.com/dagrejs/dagre/wiki#configuring-the-layout\n  */\n  dagreLayoutSettings?: GraphDagreLayoutSetting;\n\n  // ELK layout\n  /** ELK layout options, see the `elkjs` package for more details: https://github.com/kieler/elkjs.\n   * If you want to specify custom layout option for each node group, you can provide an accessor function that\n   * receives group name ('root' for the top-level configuration) as the first argument and returns an object containing\n   * layout options. Default: `undefined`\n  */\n  layoutElkSettings?: GenericAccessor<GraphElkLayoutSettings, string> | undefined;\n  /** Array of accessor functions to define nested node groups for the ELK Layered layout.\n   * E.g.: `[n => n.group, n => n.subGroup]`.\n   * Default: `undefined` */\n  layoutElkNodeGroups?: StringAccessor<N>[];\n  /** A function to be called per graph node to get the ELK shape object.\n   * This enables you to provide custom node dimensions (through the `width` and `height` properties)\n   * and coordinates (through the `x` and `y` properties) if needed.\n   * Default: `undefined`\n  */\n  layoutElkGetNodeShape?: (d: GraphNode<N, L>, i: number) => ElkShape;\n\n  // Links\n  /** Link width accessor function ot constant value. Default: `1` */\n  linkWidth?: NumericAccessor<L>;\n  /** Link style accessor function or constant value. Default: `GraphLinkStyle.Solid`  */\n  linkStyle?: GenericAccessor<GraphLinkStyle, L>;\n  /** Link band width accessor function or constant value. Default: `0` */\n  linkBandWidth?: NumericAccessor<L>;\n  /** Link arrow accessor function or constant value. Default: `undefined` */\n  linkArrow?: GenericAccessor<GraphLinkArrowStyle | string | boolean, L> | undefined;\n  /** Link stroke color accessor function or constant value. Default: `undefined` */\n  linkStroke?: ColorAccessor<L>;\n  /** Link disabled state accessor function or constant value. Default: `false` */\n  linkDisabled?: BooleanAccessor<L>;\n  /** Link flow animation accessor function or constant value. Default: `false` */\n  linkFlow?: BooleanAccessor<L>;\n  /** Animation duration of the flow (traffic) circles. Default: `20000` */\n  linkFlowAnimDuration?: number;\n  /** Size of the moving particles that represent traffic flow. Default: `2` */\n  linkFlowParticleSize?: number;\n  /** Link label accessor function or constant value. Default: `undefined` */\n  linkLabel?: GenericAccessor<GraphCircleLabel | GraphCircleLabel[], L> | undefined;\n  /** Shift label along the link center a little bit to avoid overlap with the link arrow. Default: `true` */\n  linkLabelShiftFromCenter?: BooleanAccessor<L>;\n  /** Spacing between neighboring links. Default: `8` */\n  linkNeighborSpacing?: number;\n  /** Curvature of the link. Recommended value range: [0:1.5].\n   * `0` - straight line,\n   * `1` - nice curvature,\n   * `1.5` - very curve.\n   * Default: `0` */\n  linkCurvature?: NumericAccessor<L>;\n  /** Highlight links on hover. Default: `true` */\n  linkHighlightOnHover?: boolean;\n  /** Offset [x,y] in pixels from the source node's center point where the link should start. Default: `undefined` */\n  linkSourcePointOffset?: GenericAccessor<[number, number], GraphLink<N, L>>;\n  /** Offset [x,y] in pixels from the target node's center point where the link should end. Default: `undefined` */\n  linkTargetPointOffset?: GenericAccessor<[number, number], GraphLink<N, L>>;\n  /** Set selected link by its unique id. Default: `undefined` */\n  selectedLinkId?: number | string;\n\n  // Nodes\n  /** Node size accessor function or constant value. Default: `30` */\n  nodeSize?: NumericAccessor<N>;\n  /** Node stroke width accessor function or constant value. Default: `3` */\n  nodeStrokeWidth?: NumericAccessor<N>;\n  /** Node shape accessor function or constant value. Default: `GraphNodeShape.Circle` */\n  nodeShape?: GenericAccessor<GraphNodeShape | string, N>;\n  /** Node gauge outline accessor function or constant value in the range [0,100]. Default: `0` */\n  nodeGaugeValue?: NumericAccessor<N>;\n  /** Node gauge outline fill color accessor function or constant value. Default: `undefined` */\n  nodeGaugeFill?: ColorAccessor<N>;\n  /** Animation duration of the node gauge outline. Default: `1500` */\n  nodeGaugeAnimDuration?: number;\n  /** Node central icon accessor function or constant value. Default: `node => node.icon` */\n  nodeIcon?: StringAccessor<N>;\n  /** Node central icon size accessor function or constant value. Default: `undefined` */\n  nodeIconSize?: NumericAccessor<N>;\n  /** Node label accessor function or constant value. Default: `node => node.label` */\n  nodeLabel?: StringAccessor<N>;\n  /** Defines whether to trim the node labels or not. Default: `true` */\n  nodeLabelTrim?: BooleanAccessor<N>;\n  /** Node label trimming mode. Default: `TrimMode.Middle` */\n  nodeLabelTrimMode?: GenericAccessor<TrimMode | string, N>;\n  /** Node label maximum allowed text length above which the label will be trimmed. Default: `15` */\n  nodeLabelTrimLength?: NumericAccessor<N>;\n  /** Node sub-label accessor function or constant value: Default: `''` */\n  nodeSubLabel?: StringAccessor<N>;\n  /** Defines whether to trim the node sub-labels or not. Default: `true` */\n  nodeSubLabelTrim?: BooleanAccessor<N>;\n  /** Node sub-label trimming mode. Default: `TrimMode.Middle` */\n  nodeSubLabelTrimMode?: GenericAccessor<TrimMode | string, N>;\n  /** Node sub-label maximum allowed text length above which the label will be trimmed. Default: `15` */\n  nodeSubLabelTrimLength?: NumericAccessor<N>;\n  /** Node circular side labels accessor function. The function should return an array of GraphCircleLabel objects. Default: `undefined` */\n  nodeSideLabels?: GenericAccessor<GraphCircleLabel[], N>;\n  /** Node bottom icon accessor function. Default: `undefined` */\n  nodeBottomIcon?: StringAccessor<N>;\n  /** Node disabled state accessor function or constant value. Default: `false` */\n  nodeDisabled?: BooleanAccessor<N>;\n  /** Node fill color accessor function or constant value. Default: `node => node.fill` */\n  nodeFill?: ColorAccessor<N>;\n  /** Node stroke color accessor function or constant value. Default: `node => node.stroke` */\n  nodeStroke?: ColorAccessor<N>;\n  /** Sorting function to determine node placement. Default: `undefined` */\n  nodeSort?: ((a: N, b: N) => number);\n  /** Specify the initial position for entering nodes as [x, y]. Default: `undefined` */\n  nodeEnterPosition?: GenericAccessor<[number, number], N> | undefined;\n  /** Specify the initial scale for entering nodes in the range [0,1]. Default: `0.75` */\n  nodeEnterScale?: NumericAccessor<N> | undefined;\n  /** Specify the destination position for exiting nodes as [x, y]. Default: `undefined` */\n  nodeExitPosition?: GenericAccessor<[number, number], N> | undefined;\n  /** Specify the destination scale for exiting nodes in the range [0,1]. Default: `0.75` */\n  nodeExitScale?: NumericAccessor<N> | undefined;\n  /** Custom \"enter\" function for node rendering. Default: `undefined` */\n  nodeEnterCustomRenderFunction?:\n  (datum: GraphNode<N, L>, nodeGroupElementSelection: Selection<SVGGElement, GraphNode<N, L>, null, unknown>, config: GraphConfigInterface<N, L>, duration: number, zoomLevel: number) => void;\n  /** Custom \"update\" function for node rendering. Default: `undefined` */\n  nodeUpdateCustomRenderFunction?:\n  (datum: GraphNode<N, L>, nodeGroupElementSelection: Selection<SVGGElement, GraphNode<N, L>, null, unknown>, config: GraphConfigInterface<N, L>, duration: number, zoomLevel: number) => void;\n  /** Custom partial \"update\" function for node rendering which will be triggered after the following events:\n   * - Full node update (`nodeUpdateCustomRenderFunction`);\n   * - Background click;\n   * - Node and Link mouseover and mouseout;\n   * - Node brushing,\n   * Default: `undefined` */\n  nodePartialUpdateCustomRenderFunction?:\n  (datum: GraphNode<N, L>, nodeGroupElementSelection: Selection<SVGGElement, GraphNode<N, L>, null, unknown>, config: GraphConfigInterface<N, L>, duration: number, zoomLevel: number) => void;\n  /** Custom \"exit\" function for node rendering. Default: `undefined` */\n  nodeExitCustomRenderFunction?:\n  (datum: GraphNode<N, L>, nodeGroupElementSelection: Selection<SVGGElement, GraphNode<N, L>, null, unknown>, config: GraphConfigInterface<N, L>, duration: number, zoomLevel: number) => void;\n  /** Custom render function that will be called while zooming / panning the graph. Default: `undefined` */\n  nodeOnZoomCustomRenderFunction?:\n  (datum: GraphNode<N, L>, nodeGroupElementSelection: Selection<SVGGElement, GraphNode<N, L>, null, unknown>, config: GraphConfigInterface<N, L>, zoomLevel: number) => void;\n  /** Define the mode for highlighting selected nodes in the graph. Default: `GraphNodeSelectionHighlightMode.GreyoutNonConnected` */\n  nodeSelectionHighlightMode?: GraphNodeSelectionHighlightMode;\n  /** Set selected node by unique id. Default: `undefined` */\n  selectedNodeId?: number | string;\n  /** Set selected nodes by unique id. Default: `undefined` */\n  selectedNodeIds?: number[] | string[];\n\n  /** Panels configuration. An array of `GraphPanelConfig` objects. Default: `[]` */\n  panels?: GraphPanelConfig[] | undefined;\n\n  // Events\n  /** Graph node drag start callback function. Default: `undefined` */\n  onNodeDragStart?: (n: GraphNode<N, L>, event: D3DragEvent<SVGGElement, GraphNode<N, L>, unknown>) => void | undefined;\n  /** Graph node drag callback function. Default: `undefined` */\n  onNodeDrag?: (n: GraphNode<N, L>, event: D3DragEvent<SVGGElement, GraphNode<N, L>, unknown>) => void | undefined;\n  /** Graph node drag end callback function. Default: `undefined` */\n  onNodeDragEnd?: (n: GraphNode<N, L>, event: D3DragEvent<SVGGElement, GraphNode<N, L>, unknown>) => void | undefined;\n  /** Zoom event callback. Default: `undefined` */\n  onZoom?: (zoomScale: number, zoomScaleExtent: [number, number], event: D3ZoomEvent<SVGGElement, unknown> | undefined, transform: ZoomTransform) => void;\n  /** Zoom start event callback. Default: `undefined` */\n  onZoomStart?: (zoomScale: number, zoomScaleExtent: [number, number], event: D3ZoomEvent<SVGGElement, unknown> | undefined, transform: ZoomTransform) => void;\n  /** Zoom end event callback. Default: `undefined` */\n  onZoomEnd?: (zoomScale: number, zoomScaleExtent: [number, number], event: D3ZoomEvent<SVGGElement, unknown> | undefined, transform: ZoomTransform) => void;\n  /** Callback function to be called when the graph layout is calculated. Default: `undefined` */\n  onLayoutCalculated?: (nodes: GraphNode<N, L>[], links: GraphLink<N, L>[]) => void;\n  /** Graph node selection brush callback function. Default: `undefined` */\n  onNodeSelectionBrush?: (selectedNodes: GraphNode<N, L>[], event: D3BrushEvent<SVGGElement> | undefined) => void;\n  /** Graph multiple node drag callback function. Default: `undefined` */\n  onNodeSelectionDrag?: (selectedNodes: GraphNode<N, L>[], event: D3DragEvent<SVGGElement, GraphNode<N, L>, unknown>) => void;\n  /** Callback function to be called when the graph rendering is complete. Default: `undefined` */\n  onRenderComplete?: (\n    g: Selection<SVGGElement, unknown, null, undefined>,\n    nodes: GraphNode<N, L>[],\n    links: GraphLink<N, L>[],\n    config: GraphConfigInterface<N, L>,\n    duration: number,\n    zoomLevel: number,\n    width: number,\n    height: number\n  ) => void;\n\n  /** Determines whether the component should update when new data is provided.\n   * This function takes the previous and new data as parameters and returns a boolean\n   * indicating whether the update should proceed. Useful for fine-grained control over\n   * update behavior when your data has a complex nested structure.\n   * By default the `isEqual` function from Unovis will be used to do the comparison.\n   */\n  shouldDataUpdate?: (\n    prevData: GraphInputData<N, L>,\n    nextData: GraphInputData<N, L>,\n    datamodel: GraphDataModel<N, L, GraphNode<N, L>, GraphLink<N, L>>\n  ) => boolean;\n}\n\nexport const GraphDefaultConfig: GraphConfigInterface<GraphInputNode, GraphInputLink> = {\n  ...ComponentDefaultConfig,\n  duration: 1000,\n  zoomScaleExtent: [0.35, 1.25],\n  disableZoom: false,\n  zoomEventFilter: undefined,\n  disableDrag: false,\n  disableBrush: false,\n  zoomThrottledUpdateNodeThreshold: 100,\n  layoutType: GraphLayoutType.Force,\n  layoutAutofit: true,\n  layoutAutofitTolerance: 8.0,\n  layoutNonConnectedAside: false,\n\n  layoutGroupOrder: [],\n  layoutParallelSubGroupsPerRow: 1,\n  layoutParallelNodesPerColumn: 6,\n  layoutParallelGroupSpacing: undefined,\n  layoutParallelSortConnectionsByGroup: undefined,\n  layoutNodeGroup: (n: GraphInputNode): string => (n as { group: string }).group,\n  layoutParallelNodeSubGroup: (n: GraphInputNode): string => (n as { subgroup: string }).subgroup,\n\n  forceLayoutSettings: {\n    linkDistance: 60,\n    linkStrength: 0.45,\n    charge: -500,\n    forceXStrength: 0.15,\n    forceYStrength: 0.25,\n    numIterations: undefined,\n    fixNodePositionAfterSimulation: false,\n  },\n\n  dagreLayoutSettings: {\n    rankdir: 'BT',\n    ranker: 'longest-path',\n  },\n\n  layoutElkSettings: undefined,\n  layoutElkNodeGroups: undefined,\n  layoutElkGetNodeShape: undefined,\n\n  linkFlowAnimDuration: 20000,\n  linkFlowParticleSize: 2,\n  linkWidth: 1,\n  linkStyle: GraphLinkStyle.Solid,\n  linkBandWidth: 0,\n  linkArrow: undefined,\n  linkStroke: undefined,\n  linkFlow: false,\n  linkLabel: undefined,\n  linkLabelShiftFromCenter: true,\n  linkNeighborSpacing: 8,\n  linkDisabled: false,\n  linkCurvature: 0,\n  linkHighlightOnHover: true,\n  linkSourcePointOffset: undefined,\n  linkTargetPointOffset: undefined,\n  selectedLinkId: undefined,\n\n  nodeSize: 30,\n  nodeStrokeWidth: 3,\n  nodeShape: GraphNodeShape.Circle,\n  nodeGaugeValue: 0,\n  nodeIcon: (n: GraphInputNode): string => (n as { icon: string }).icon,\n  nodeIconSize: undefined,\n  nodeLabel: (n: GraphInputNode): string => (n as { label: string }).label,\n  nodeLabelTrim: true,\n  nodeLabelTrimLength: 15,\n  nodeLabelTrimMode: TrimMode.Middle,\n  nodeSubLabel: '',\n  nodeSubLabelTrim: true,\n  nodeSubLabelTrimLength: 15,\n  nodeSubLabelTrimMode: TrimMode.Middle,\n  nodeSideLabels: undefined,\n  nodeBottomIcon: undefined,\n  nodeDisabled: false,\n  nodeFill: (n: GraphInputNode): string => (n as { fill: string }).fill,\n  nodeGaugeFill: undefined,\n  nodeStroke: (n: GraphInputNode): string => (n as { stroke: string }).stroke,\n  nodeEnterPosition: undefined,\n  nodeEnterScale: 0.75,\n  nodeExitPosition: undefined,\n  nodeExitScale: 0.75,\n  nodeSort: undefined,\n  nodeSelectionHighlightMode: GraphNodeSelectionHighlightMode.GreyoutNonConnected,\n  nodeGaugeAnimDuration: 1500,\n\n  selectedNodeId: undefined,\n  selectedNodeIds: undefined,\n\n  panels: undefined,\n\n  onNodeDragStart: undefined,\n  onNodeDrag: undefined,\n  onNodeDragEnd: undefined,\n  onZoom: undefined,\n  onZoomStart: undefined,\n  onZoomEnd: undefined,\n  onLayoutCalculated: undefined,\n  onNodeSelectionBrush: undefined,\n  onNodeSelectionDrag: undefined,\n  onRenderComplete: undefined,\n\n  shouldDataUpdate: (prevData: GraphInputData<GraphInputNode, GraphInputLink>, nextData: GraphInputData<GraphInputNode, GraphInputLink>): boolean => {\n    return !isEqual(prevData, nextData)\n  },\n}\n", "import { css, injectGlobal } from '@emotion/css'\n\nexport const nodes = css`\n  label: nodes;\n`\n\nexport const variables = injectGlobal`\n  :root {\n    /* Node Fill */\n    --vis-graph-node-stroke-color: rgb(206, 211, 222);\n    --vis-graph-node-fill-color: #fff;\n    --vis-graph-node-gauge-color: #adb4c2;\n    --vis-graph-node-selection-color: #acb3b8;\n\n    --vis-dark-graph-node-stroke-color: rgba(30,30,30,.25);\n    --vis-dark-graph-node-fill-color: #494b56;\n    --vis-dark-graph-node-gauge-color: #989aa3;\n    --vis-dark-graph-node-selection-color: #494b56;\n\n    /* Node Central Icon */\n    --vis-graph-node-icon-fill-color-bright: #ffffff;\n    --vis-graph-node-icon-fill-color-dark: var(--vis-color-grey);\n    --vis-graph-node-icon-fill-color: #9ea7b8;\n\n    --vis-dark-graph-node-icon-fill-color: var(--vis-graph-node-icon-fill-color-bright);\n\n    /* Node Bottom Icon */\n    --vis-graph-node-bottom-icon-font-size: 14pt;\n    --vis-graph-node-bottom-icon-fill-color: #a0a6ad;\n    --vis-graph-node-bottom-icon-stroke-color: #fff;\n    --vis-graph-node-bottom-icon-stroke-width: 2px;\n\n    --vis-dark-graph-node-bottom-icon-fill-color: #a0a6ad;\n    --vis-dark-graph-node-bottom-icon-stroke-color: #fff;\n\n    /* Node Label */\n    --vis-graph-node-label-font-size: 9pt;\n    --vis-graph-node-label-background: #ffffff;\n    --vis-graph-node-label-text-color: #0F1E57;\n    --vis-graph-node-sublabel-text-color: #989aa3;\n    --vis-graph-node-sublabel-font-size: 8pt;\n    // Undefined by default to allow proper fallback to var(--vis-font-family)\n    /* --vis-graph-node-label-font-family: */\n\n    --vis-dark-graph-node-label-background: var(--vis-color-grey);\n    --vis-dark-graph-node-label-text-color: #ffffff;\n    --vis-dark-graph-node-sublabel-text-color: #989aa3;\n\n    /* Node Side Labels (circular labels)*/\n    --vis-graph-node-side-label-background-fill-color: #a0a9af;\n    --vis-graph-node-side-label-background-stroke-color: #ffffff;\n    --vis-graph-node-side-label-fill-color-bright: #ffffff;\n    --vis-graph-node-side-label-fill-color-dark: #494b56;\n\n    --vis-dark-graph-node-side-label-background-fill-color: #989aa3;\n    --vis-dark-graph-node-side-label-background-stroke-color: var(--vis-color-grey);\n    --vis-dark-graph-node-side-label-fill-color-bright: #f1f4f7;\n    --vis-dark-graph-node-side-label-fill-color-dark: var(--vis-color-grey);\n\n    /* Greyout */\n    --vis-graph-node-greyout-opacity: 0.9;\n    --vis-graph-node-greyout-filter: none;\n    --vis-graph-node-greyout-color: #ebeff7;\n    --vis-graph-node-icon-greyout-color: #c6cad1;\n    --vis-graph-node-side-label-background-greyout-color: #f1f4f7;\n\n    --vis-dark-graph-node-greyout-color: #494b56;\n    --vis-dark-graph-node-icon-greyout-color: var(--vis-color-grey);\n    --vis-dark-graph-node-side-label-background-greyout-color: #494B56;\n\n    /* Brushed */\n    --vis-graph-brushed-node-stroke-color: var(--vis-color-main);\n    --vis-graph-brushed-node-label-text-color: var(--vis-color-main);\n    --vis-graph-brushed-node-icon-fill-color: var(--vis-color-main);\n    \n    /* Misc */\n    --vis-graph-node-dominant-baseline: middle;\n  }\n\n  body.theme-dark ${`.${nodes}`} {\n    --vis-graph-node-stroke-color: var(--vis-dark-graph-node-stroke-color);\n    --vis-graph-node-fill-color: var(--vis-dark-graph-node-fill-color);\n    --vis-graph-node-gauge-color: var(--vis-dark-graph-node-gauge-color);\n    --vis-graph-node-selection-color: var(--vis-dark-graph-node-selection-color);\n\n    --vis-graph-node-icon-fill-color: var(--vis-dark-graph-node-icon-fill-color);\n\n    --vis-graph-node-bottom-icon-fill-color: var(--vis-dark-graph-node-bottom-icon-fill-color);\n    --vis-graph-node-bottom-icon-stroke-color: var(--vis-dark-graph-node-bottom-icon-stroke-color);\n\n    --vis-graph-node-label-background: var(--vis-dark-graph-node-label-background);\n    --vis-graph-node-label-text-color: var(--vis-dark-graph-node-label-text-color);\n    --vis-graph-node-sublabel-text-color: var(--vis-dark-graph-node-sublabel-text-color);\n\n    --vis-graph-node-side-label-background-fill-color: var(--vis-dark-graph-node-side-label-background-fill-color);\n    --vis-graph-node-side-label-background-stroke-color: var(--vis-dark-graph-side-label-background-stroke-color);\n    --vis-graph-node-side-label-fill-color-bright: var(--vis-dark-graph-node-side-label-fill-color-bright);\n    --vis-graph-node-side-label-fill-color-dark: var(vis-dark-graph-node-side-label-fill-color-dark);\n\n    --vis-graph-node-greyout-color: var(--vis-dark-graph-node-greyout-color);\n    --vis-graph-node-icon-greyout-color: var(--vis-dark-graph-node-icon-greyout-color);\n    --vis-graph-node-side-label-background-greyout-color: var(--vis-dark-graph-node-side-label-background-greyout-color);\n  }\n`\n\nexport const brushable = css`\n  label: brushable;\n`\n\n\nexport const node = css`\n  label: node-shape;\n\n  stroke: var(--vis-graph-node-stroke-color);\n  fill: var(--vis-graph-node-fill-color);\n\n  :not(.${brushable}) {\n    transition: .4s fill, 4s stroke;\n  }\n`\n\nexport const nodeIcon = css`\n  label: icon;\n\n  font-family: var(--vis-graph-icon-font-family), var(--vis-font-family);\n  dominant-baseline: var(--vis-graph-node-dominant-baseline);\n  text-anchor: middle;\n  pointer-events: none;\n  fill: var(--vis-graph-node-icon-fill-color);\n\n  :not(.${brushable}) {\n    transition: .4s all;\n  }\n`\n\nexport const nodeBottomIcon = css`\n  label: node-bottom-icon;\n  font-family: var(--vis-graph-icon-font-family), var(--vis-font-family);\n  font-size: var(--vis-graph-node-bottom-icon-font-size);\n  dominant-baseline: var(--vis-graph-node-dominant-baseline);\n  text-anchor: middle;\n  pointer-events: none;\n  fill: var(--vis-graph-node-bottom-icon-fill-color);\n  stroke: var(--vis-graph-node-bottom-icon-stroke-color);\n  stroke-width: var(--vis-graph-node-bottom-icon-stroke-width);\n\n  :not(.${brushable}) {\n    transition: .4s all;\n  }\n`\n\nexport const nodeIsDragged = css`\n  label: dragged;\n`\n\nexport const label = css`\n  label: label;\n\n  text-anchor: middle;\n  font-weight: 300;\n  font-size: var(--vis-graph-node-label-font-size);\n`\n\nexport const labelBackground = css`\n  label: background;\n\n  opacity: 0.9;\n  -webkit-backdrop-filter: blur(2px);\n  backdrop-filter: blur(2px);\n  fill: var(--vis-graph-node-label-background);\n`\n\nexport const labelText = css`\n  label: label-text;\n`\n\nexport const labelTextContent = css`\n  label: label-text-content;\n\n  fill: var(--vis-graph-node-label-text-color);\n  font-family: var(--vis-graph-node-label-font-family, var(--vis-font-family));\n`\n\nexport const subLabelTextContent = css`\n  label: sublabel-text-content;\n\n  fill: var(--vis-graph-node-sublabel-text-color);\n  font-family: var(--vis-graph-node-label-font-family, var(--vis-font-family));\n  font-size: var(--vis-graph-node-sublabel-font-size);\n`\n\nexport const sideLabelsGroup = css`\n  label: side-labels-group;\n`\n\nexport const sideLabelBackground = css`\n  label: side-label-background;\n\n  stroke-opacity: 0.8;\n  stroke: var(--vis-graph-node-side-label-background-stroke-color);\n  fill: var(--vis-graph-node-side-label-background-fill-color);\n`\n\nexport const sideLabel = css`\n  label: side-label;\n\n  font-family: var(--vis-graph-icon-font-family), var(--vis-font-family);\n  dominant-baseline: var(--vis-graph-node-dominant-baseline);\n  text-anchor: middle;\n  font-size: 16px;\n  fill: var(--vis-graph-node-side-label-fill-color-bright);\n`\n\nexport const sideLabelGroup = css`\n  label: side-label-group;\n  cursor: default;\n`\n\nexport const gNode = css`\n  label: g-node;\n\n  transition: .25s opacity;\n`\n\nexport const draggable = css`\n  label: draggable;\n\n  &:hover {\n    cursor: grab;\n  }\n\n  &${`.${nodeIsDragged}`} {\n    cursor: grabbing;\n  }\n`\n\nexport const gNodeExit = css`\n  label: g-node-exit;\n  pointer-events: none;\n`\n\nexport const nodeSelectionActive = css`\n  label: active;\n`\n\nexport const nodeSelection = css`\n  label: node-selection;\n\n  fill: none;\n  stroke-width: 1;\n  stroke-dasharray: 3 3;\n  opacity: 0;\n  transition: 350ms cubic-bezier(0.165, 0.840, 0.440, 1.000);\n  transform: scale(.5);\n  fill: var(--vis-graph-node-selection-color);\n  fill-opacity: 0.1;\n  stroke: var(--vis-graph-node-selection-color);\n  stroke-opacity: 0.75;\n\n  &${`.${nodeSelectionActive}`} {\n    opacity: 1;\n    transform: scale(1.2);\n  }\n`\n\nexport const nodeGauge = css`\n  label: node-gauge;\n\n  fill: var(--vis-graph-node-gauge-color);\n  transition: .4s fill;\n`\n\nexport const nodePolygon = css`\n  label: polygon;\n\n  ${`.${nodeGauge}`} {\n    fill-opacity: 0;\n    stroke-linecap: round;\n    pointer-events: none;\n  }\n`\n\nexport const customNode = css`\n  label: custom-node;\n\n  stroke-width: 0;\n`\n\nexport const greyedOutNode = css`\n  label: greyed-out;\n  opacity: var(--vis-graph-node-greyout-opacity);\n  filter: var(--vis-graph-node-greyout-filter);\n\n  ${`.${node}`} {\n    fill: var(--vis-graph-node-greyout-color) !important;\n    stroke: var(--vis-graph-node-greyout-color) !important;\n  }\n\n  ${`.${nodeIcon}`} {\n     fill: var(--vis-graph-node-icon-greyout-color) !important;\n  }\n\n  ${`.${nodeGauge}`} {\n    fill: var(--vis-graph-node-greyout-color) !important;\n    stroke: var(--vis-graph-node-greyout-color) !important;\n  }\n\n  ${`.${label}`} {\n    opacity: 0.5;\n  }\n\n  ${`.${sideLabelBackground}`} {\n     fill: var(--vis-graph-node-side-label-background-greyout-color) !important;\n     stroke-opacity: 0.5;\n   }\n\n   ${`.${sideLabel}`} {\n    fill: var(--vis-graph-node-side-label-fill-color-bright) !important;\n    opacity: 0.25;\n  }\n`\n\nexport const brushed = css`\n  label: brushed-node;\n\n  ${`.${node}`} {\n    stroke: var(--vis-graph-brushed-node-stroke-color);\n  }\n  ${`.${nodeIcon}`} {\n    fill: var(--vis-graph-brushed-node-icon-fill-color);\n  }\n  ${`.${labelTextContent}`} {\n    fill: var(--vis-graph-brushed-node-label-text-color);\n  }\n`\n", "import { css, injectGlobal } from '@emotion/css'\n\nexport const links = css`\n  label: links;\n`\n\nexport const variables = injectGlobal`\n  :root {\n    --vis-graph-link-stroke-color: #e6e9f3;\n    --vis-graph-link-stroke-opacity: 1.0;\n    --vis-graph-link-greyout-opacity: 0.3;\n    --vis-graph-link-dashed-stroke-dasharray: 6 6;\n\n    --vis-graph-link-label-font-size: 9pt;\n    --vis-graph-link-label-background: #e6e9f3;\n    --vis-graph-link-label-text-color-dark: #18181B;\n    --vis-graph-link-label-text-color-bright: #fff;\n    --vis-graph-link-label-text-color: var(--vis-graph-link-label-text-color-dark);\n\n    --vis-graph-link-band-opacity: 0.35;\n    --vis-graph-link-support-stroke-width: 10px;\n\n    --vis-dark-graph-link-stroke-color: #494b56;\n    --vis-dark-graph-link-label-background: #3f3f45;\n    --vis-dark-graph-link-label-text-color: var(--vis-graph-link-label-text-color-bright);\n\n    --vis-graph-link-dominant-baseline: middle;\n  }\n\n  body.theme-dark ${`.${links}`} {\n    --vis-graph-link-stroke-color: var(--vis-dark-graph-link-stroke-color);\n    --vis-graph-link-label-stroke-color: var(--vis-dark-graph-link-label-stroke-color);\n    --vis-graph-link-label-text-color: var(--vis-dark-graph-link-label-text-color);\n    --vis-graph-link-label-background: var(--vis-dark-graph-link-label-background);\n  }\n`\n\nexport const linkSupport = css`\n  label: link-support;\n\n  fill: none;\n  stroke-linecap: round;\n  stroke-width: var(--vis-graph-link-support-stroke-width);\n  stroke-opacity: 0;\n  stroke: var(--vis-graph-link-stroke-color);\n  transition: stroke-opacity 0.2s;\n`\n\nexport const link = css`\n  label: link;\n\n  fill: none;\n  stroke: var(--vis-graph-link-stroke-color);\n  stroke-opacity: var(--vis-graph-link-stroke-opacity);\n  transition: stroke 800ms;\n  stroke-linecap: round;\n  pointer-events: none;\n`\n\nexport const linkDashed = css`\n  label: dashed;\n\n  ${`.${link}`} {\n    stroke-dasharray: var(--vis-graph-link-dashed-stroke-dasharray);\n  }\n`\n\nexport const linkArrow = css`\n  label: link-arrow;\n  fill: var(--vis-graph-link-stroke-color);\n`\n\nexport const gLink = css`\n  label: g-link;\n`\n\nexport const gLinkExit = css`\n  label: g-link-exit;\n  pointer-events: none;\n`\n\nexport const greyedOutLink = css`\n  label: greyed-out;\n  opacity: var(--vis-graph-link-greyout-opacity);\n`\n\nexport const linkBand = css`\n  label: link-band;\n\n  stroke-opacity: var(--vis-graph-link-band-opacity);\n  pointer-events: none;\n  stroke: var(--vis-graph-node-stroke-color);\n  fill: none;\n`\n\nexport const flowGroup = css`\n  label: flow-group;\n\n  pointer-events: none;\n`\n\nexport const flowCircle = css`\n  label: flow-circle;\n\n  fill: var(--vis-graph-link-stroke-color);\n`\n\nexport const linkLabelGroup = css`\n  label: label-group;\n`\n\nexport const linkLabelBackground = css`\n  label: label-background;\n\n  fill: var(--vis-graph-link-label-background);\n`\n\nexport const linkLabelContent = css`\n  label: label-content;\n\n  font-size: var(--vis-graph-link-label-font-size);\n  font-family: var(--vis-font-family);\n  fill: var(--vis-graph-link-label-text-color);\n  text-anchor: middle;\n  dominant-baseline: var(--vis-graph-link-dominant-baseline);\n  user-select: none;\n`\n", "import { css, injectGlobal } from '@emotion/css'\nimport { UNOVIS_ICON_FONT_FAMILY_DEFAULT } from 'styles/index'\n\n// Nodes\nimport * as nodeSelectors from './modules/node/style'\n\n// Links\nimport * as linkSelectors from './modules/link/style'\n\nexport const variables = injectGlobal`\n  :root {\n    --vis-graph-icon-font-family: ${UNOVIS_ICON_FONT_FAMILY_DEFAULT};\n\n    /* Brush */\n    --vis-graph-brush-selection-opacity: 0.2;\n  }\n`\n\n// General\nexport const root = css`\n  label: graph-component;\n`\n\nexport const background = css`\n  label: background;\n`\n\nexport const graphGroup = css`\n  label: graph-group;\n`\n\nexport const brush = css`\n  label: brush;\n\n  :not(.active) {\n    display: none;\n  }\n\n  .active {\n    .selection {\n      fill-opacity: 0;\n      stroke: none;\n    }\n\n    .handle {\n      display: none;\n    }\n  }\n`\n\nexport const zoomOutLevel1 = css`\n  label: zoom-out-level-1;\n\n  ${`.${nodeSelectors.label}`} {\n    rect {\n      stroke: none;\n    }\n  }\n`\n\nexport const zoomOutLevel2 = css`\n  label: zoom-out-level-2;\n\n  ${`.${nodeSelectors.label}`} {\n    visibility: visible;\n  }\n\n  ${`.${nodeSelectors.nodeGauge}`} {\n    visibility: visible;\n  }\n\n  ${`.${nodeSelectors.node}`} {\n    stroke-width: 4px;\n  }\n\n  rect${`.${nodeSelectors.node}`} {\n    stroke-width: 2px;\n  }\n\n  ${`.${linkSelectors.gLink}`} {\n    animation: none;\n    stroke-dasharray: none;\n  }\n\n  ${`.${linkSelectors.flowCircle}`} {\n    display: none;\n  }\n\n  ${`.${nodeSelectors.nodeSelection}`} {\n    &${`.${nodeSelectors.nodeSelectionActive}`} {\n      transform: scale(1.15);\n    }\n  }\n`\n", "import { css, injectGlobal } from '@emotion/css'\n\nexport const panels = css`\n  label: panels;\n`\n\nexport const variables = injectGlobal`\n  :root {\n    --vis-graph-panel-border-color: #E6E9F3;\n    --vis-graph-panel-border-opacity: 0.9;\n    --vis-graph-panel-fill-color: #ffffff;\n\n    --vis-graph-panel-label-color: #6c778c;\n    --vis-graph-panel-label-background: #ffffff;\n\n    // Undefined by default to allow proper fallback to var(--vis-font-family)\n    /* --vis-graph-panel-label-font-family: */\n    --vis-graph-panel-label-font-size: 10pt;\n    --vis-graph-panel-label-font-weight: 300;\n\n    --vis-graph-panel-dashed-outline-color: #b7b7b7;\n\n    --vis-graph-panel-side-icon-symbol-color: #9ea7b8;\n    --vis-graph-panel-side-icon-shape-fill-color: #ffffff;\n\n    --vis-dark-graph-panel-border-color: var(--vis-color-grey);\n    --vis-dark-graph-panel-fill-color: #292b34;\n    --vis-dark-graph-panel-label-color: #E6E9F3;\n    --vis-dark-graph-panel-label-background: var(--vis-color-grey);\n    --vis-dark-graph-panel-side-icon-symbol-color: #ffffff;\n    --vis-dark-graph-panel-side-icon-shape-fill-color: #6c778c;\n    --vis-dark-graph-panel-border-color: #a0a6ad;\n  }\n\n  body.theme-dark ${`.${panels}`} {\n    --vis-graph-panel-border-color: var(--vis-dark-graph-panel-border-color);\n    --vis-graph-panel-fill-color: var(--vis-dark-graph-panel-fill-color);\n    --vis-graph-panel-label-color: var(--vis-dark-graph-panel-label-color);\n    --vis-graph-panel-label-background: var(--vis-dark-graph-panel-label-background);\n    --vis-graph-panel-side-icon-symbol-color: var(--vis-dark-graph-panel-side-icon-symbol-color);\n    --vis-graph-panel-side-icon-shape-fill-color: var(--vis-dark-graph-panel-side-icon-shape-fill-color);\n    --vis-graph-panel-border-color:  var(--vis-dark-graph-panel-border-color);\n  }\n`\n\nexport const gPanel = css`\n  label: g-panel;\n`\n\nexport const panel = css`\n  label: panel;\n\n  stroke: var(--vis-graph-panel-border-color);\n  stroke-opacity: var(--vis-graph-panel-border-opacity);\n  fill: var(--vis-graph-panel-fill-color);\n`\n\nexport const label = css`\n  label: label;\n\n  fill: var(--vis-graph-panel-label-color);\n`\n\nexport const background = css`\n  label: background;\n\n  opacity: 0.9;\n  -webkit-backdrop-filter: blur(2px);\n  backdrop-filter: blur(2px);\n  fill: var(--vis-graph-panel-label-background);\n  stroke: none;\n`\n\nexport const labelText = css`\n  label: label-text;\n\n  text-anchor: middle;\n  font-size: var(--vis-graph-panel-label-font-size);\n  font-weight: var(--vis-graph-panel-label-font-weight);;\n  cursor: default;\n  stroke: none;\n  font-family: var(--vis-graph-panel-label-font-family, var(--vis-font-family));\n`\n\nexport const panelSelectionActive = css`\n  label: active;\n`\n\nexport const panelSelection = css`\n  label: panel-selection-outline;\n\n  opacity: 0;\n  stroke-width: 1;\n  stroke-dasharray: 3 3;\n  fill: var(--vis-graph-node-selection-color);\n  fill-opacity: 0.1;\n  stroke: var(--vis-graph-panel-dashed-outline-color);\n  stroke-opacity: 0;\n\n  &${`.${panelSelectionActive}`} {\n    opacity: 1;\n    stroke-opacity: 0.75;\n  }\n`\n\nexport const greyout = css`\n  label: greyout;\n  opacity: 0.4;\n`\n\nexport const sideIconGroup = css`\n  label: side-icon-group;\n`\n\nexport const sideIconShape = css`\n  label: side-icon-shape;\n\n  fill: var(--vis-graph-panel-side-icon-shape-fill-color);\n  stroke-width: 2px;\n`\n\nexport const customSideIcon = css`\n  label: side-icon-custom;\n`\n\nexport const sideIconSymbol = css`\n  label: side-label-icon-text;\n  font-family: var(--vis-graph-icon-font-family), var(--vis-font-family);\n  fill: var(--vis-graph-panel-side-icon-symbol-color);\n  stroke: none;\n  dominant-baseline: middle;\n  text-anchor: middle;\n  pointer-events: none;\n  cursor: default;\n`\n", "import { TransformValues } from 'types/svg'\nimport striptags from 'striptags'\n\nimport { allowedSvgTextTags } from './text'\n\nexport const allowedSvgTags = [\n  'svg', 'g', 'path', 'rect', 'circle', 'ellipse', 'line', 'polyline', 'polygon',\n  'defs', 'clipPath', 'use', 'symbol', 'image', 'marker', 'style', 'mask',\n  ...allowedSvgTextTags,\n]\n\nexport function getTransformValues (svgElement: SVGElement): TransformValues {\n  // Get the transform attribute value from the SVG element\n  const transformAttribute = svgElement.getAttribute('transform')\n\n  // Regular expressions to extract translate and scale values from the transform attribute\n  const translateRegex = /translate\\(\\s*(-?[\\d.]+)\\s*,?\\s*(-?[\\d.]+)?\\s*\\)/\n  const scaleRegex = /scale\\(\\s*(-?[\\d.]+)\\s*,?\\s*(-?[\\d.]+)?\\s*\\)/\n\n  // Initialize default values\n  const transformValues: TransformValues = {\n    translate: { x: 0, y: 0 },\n    scale: { x: 1, y: 1 },\n  }\n\n  if (transformAttribute) {\n    // Extract translate values\n    const translateMatches = transformAttribute.match(translateRegex)\n    if (translateMatches) {\n      transformValues.translate.x = parseFloat(translateMatches[1])\n      transformValues.translate.y = translateMatches[2] ? parseFloat(translateMatches[2]) : 0\n    }\n\n    // Extract scale values\n    const scaleMatches = transformAttribute.match(scaleRegex)\n    if (scaleMatches) {\n      transformValues.scale.x = parseFloat(scaleMatches[1])\n      transformValues.scale.y = scaleMatches[2] ? parseFloat(scaleMatches[2]) : transformValues.scale.x\n    }\n  }\n\n  return transformValues\n}\n\nexport function transformValuesToString (transformValues: TransformValues): string {\n  const translateString = `translate(${transformValues.translate.x} ${transformValues.translate.y})`\n\n  // Only include scaleString when both scale values are not 1\n  const shouldIncludeScaleString = transformValues.scale.x !== 1 || transformValues.scale.y !== 1\n  const scaleString = shouldIncludeScaleString ? `scale(${transformValues.scale.x} ${transformValues.scale.y})` : ''\n\n  // Combine the translate and scale strings into a single transform attribute string\n  const transformString = scaleString\n    ? `${translateString} ${scaleString}`\n    : translateString\n\n  return transformString\n}\n\nexport function sanitizeSvgString (svgString: string, allowedTags = allowedSvgTags): string {\n  return striptags(svgString, allowedTags)\n}\n\n\nexport function isStringSvg (input: string): boolean {\n  /* Since a general-purpose regex for this can be complex and potentially vulnerable\n  * to ReDoS attacks, we'll create a simpler, safer regex that looks for a few common\n  * SVG elements or attributes.\n  */\n  const svgElementsRegex = new RegExp(`<(${allowedSvgTags.join('|')})\\\\b`, 'i')\n  const svgAttributesRegex = /\\b(d|fill|stroke|transform|viewBox)=/i\n\n  return svgElementsRegex.test(input) || svgAttributesRegex.test(input)\n}\n", "import { BaseType, Selection } from 'd3-selection'\nimport { interpolate } from 'd3-interpolate'\nimport { max, mean } from 'd3-array'\nimport { Arc } from 'd3-shape'\n\n// Types\nimport { ColorAccessor, NumericAccessor } from 'types/accessor'\nimport { GraphInputLink, GraphInputNode } from 'types/graph'\n\n// Utils\nimport { scoreRectPath } from 'utils/path'\nimport { isEmpty, isNil, getNumber, getString } from 'utils/data'\nimport { getColor, getHexValue, hexToBrightness } from 'utils/color'\n\n// Local Types\nimport { GraphNode, GraphCircleLabel, GraphNodeAnimatedElement, GraphNodeAnimationState, GraphNodeShape } from '../../types'\n\n// Config\nimport { GraphConfigInterface } from '../../config'\n\nexport const NODE_SIZE = 30\nexport const LABEL_RECT_HORIZONTAL_PADDING = 10\nexport const LABEL_RECT_VERTICAL_PADDING = 4\n\nexport function getNodeSize<T> (d: T, nodeSizeAccessor: NumericAccessor<T>, index: number): number {\n  return getNumber(d, nodeSizeAccessor, index) || NODE_SIZE\n}\n\nfunction _setInitialAnimState (el: GraphNodeAnimatedElement<SVGElement>, index: number): void {\n  el._animState = {\n    endAngle: 0,\n    nodeIndex: index,\n  }\n}\n\n// Animate the arc around node with keeping\n// the current anim state info\nexport function arcTween<N extends GraphInputNode, L extends GraphInputLink> (\n  d: GraphNode<N, L>,\n  config: GraphConfigInterface<N, L>,\n  arcConstructor: Arc<any, GraphNodeAnimationState>,\n  el: GraphNodeAnimatedElement<SVGElement>\n): (t: number) => string {\n  const { nodeStrokeWidth, nodeSize, nodeGaugeValue } = config\n  if (!el._animState) _setInitialAnimState(el, d._index)\n\n  const i = interpolate(el._animState, {\n    endAngle: 2 * Math.PI * (getNumber(d, nodeGaugeValue, d._index) ?? 0) / 100,\n    nodeIndex: d._index,\n    nodeSize: getNodeSize(d, nodeSize, d._index),\n    borderWidth: getNumber(d, nodeStrokeWidth, d._index),\n  })\n  el._animState = i(0)\n\n  return (t: number): string => {\n    el._animState = i(t)\n    return arcConstructor(el._animState)\n  }\n}\n\nexport function polyTween<N extends GraphInputNode, L extends GraphInputLink> (\n  d: GraphNode<N, L>,\n  config: GraphConfigInterface<N, L>,\n  polygonConstructor: (nodeSize: number, nEdges?: number, endAngle?: number, isOpen?: boolean) => string,\n  el: GraphNodeAnimatedElement<SVGElement>\n): (t: number) => string {\n  const { nodeShape, nodeGaugeValue } = config\n  const nodeSize = getNodeSize(d, config.nodeSize, d._index)\n  let n: number\n  switch (getString(d, nodeShape, d._index)) {\n    case GraphNodeShape.Square:\n      n = 4\n      break\n    case GraphNodeShape.Triangle:\n      n = 3\n      break\n    case GraphNodeShape.Hexagon:\n    default:\n      n = 6\n  }\n\n  if (!el._animState) _setInitialAnimState(el, d._index)\n  const i = interpolate(el._animState, {\n    endAngle: 2 * Math.PI * (getNumber(d, nodeGaugeValue, d._index) ?? 0) / 100,\n    nodeIndex: d._index,\n  })\n  el._animState = i(0)\n\n  return (t: number): string => {\n    el._animState = i(t)\n    return n === 4 ? scoreRectPath({\n      x: -nodeSize / 2,\n      y: -nodeSize / 2,\n      w: nodeSize,\n      h: nodeSize,\n      r: 5,\n      score: el._animState.endAngle / (2 * Math.PI),\n    }) : polygonConstructor(nodeSize, n, el._animState.endAngle, true)\n  }\n}\n\nexport function setLabelRect<T, K extends BaseType, L> (\n  labelSelection: Selection<SVGGElement, T, K, L>,\n  label: string,\n  selector: string\n): Selection<SVGRectElement, T, K, L> {\n  // Set label background rectangle size by text size\n  const labelIsEmpty = isEmpty(label)\n  const labelTextSelection = labelSelection.select<SVGTextElement>(`.${selector}`)\n  const labelTextBBox = (labelTextSelection.node() as SVGGraphicsElement).getBBox()\n  const backgroundRect = labelSelection.select<SVGRectElement>('rect')\n    .attr('visibility', labelIsEmpty ? 'hidden' : null)\n    .attr('rx', 4)\n    .attr('ry', 4)\n    .attr('x', -labelTextBBox.width / 2 - LABEL_RECT_HORIZONTAL_PADDING)\n    .attr('y', '-0.64em')\n    .attr('width', labelTextBBox.width + 2 * LABEL_RECT_HORIZONTAL_PADDING)\n    .attr('height', labelTextBBox.height + 2 * LABEL_RECT_VERTICAL_PADDING)\n    .style('transform', `translateY(${-LABEL_RECT_VERTICAL_PADDING}px)`)\n\n  return backgroundRect\n}\n\nexport function getX (node: GraphNode): number {\n  return node._state && !isNil(node._state.fx) ? node._state.fx : node.x\n}\n\nexport function getY (node: GraphNode): number {\n  return node._state && !isNil(node._state.fy) ? node._state.fy : node.y\n}\n\nexport function configuredNodeSize<T> (nodeSizeAccessor: NumericAccessor<T>): number {\n  return typeof nodeSizeAccessor === 'number' ? nodeSizeAccessor : NODE_SIZE\n}\n\nexport function getMaxNodeSize<T> (data: T[], nodeSize: NumericAccessor<T>): number {\n  return max(data || [], (d, i) => getNodeSize(d, nodeSize, i)) || NODE_SIZE\n}\n\nexport function getAverageNodeSize<T> (data: T[], nodeSize: NumericAccessor<T>): number {\n  return mean(data || [], (d, i) => getNodeSize(d, nodeSize, i)) || NODE_SIZE\n}\n\nexport function getSideLabelTextColor (label: GraphCircleLabel, context: SVGElement): string {\n  if (!label.color) return null\n\n  const hex = getHexValue(label.color, context)\n  const brightness = hexToBrightness(hex)\n  return brightness > 0.65 ? 'var(--vis-graph-node-side-label-fill-color-dark)' : 'var(--vis-graph-node-side-label-fill-color-bright)'\n}\n\nexport function getNodeColor<T> (d: T, colorAccessor: ColorAccessor<T>, index: number): string {\n  return getColor(d, colorAccessor, index, true) ?? null\n}\n\nexport function getNodeIconColor<T> (d: T, colorAccessor: ColorAccessor<T>, index: number, context: SVGElement): string {\n  const nodeColor = getNodeColor(d, colorAccessor, index)\n  if (!nodeColor) return null\n\n  const hex = getHexValue(nodeColor, context)\n  const brightness = hexToBrightness(hex)\n  return brightness > 0.65 ? 'var(--vis-graph-node-icon-fill-color-dark)' : 'var(--vis-graph-node-icon-fill-color-bright)'\n}\n\nexport function isInternalHref (str: string): boolean {\n  return /^#[^]+/.test(str)\n}\n", "import { Selection, select } from 'd3-selection'\n\n// Types\nimport { NumericAccessor, StringAccessor } from 'types/accessor'\n\n// Utils\nimport { polygon } from 'utils/path'\nimport { getString } from 'utils/data'\nimport { isStringSvg, sanitizeSvgString } from 'utils/svg'\n\n// Types\n\n// Local Types\nimport { GraphNodeShape } from '../types'\n\n// Helpers\nimport { getNodeSize } from './node/helper'\n\nexport function appendShape<T> (\n  selection: Selection<SVGGElement, T, SVGGElement, unknown>,\n  shapeAccessor: StringAccessor<T>,\n  shapeSelector: string,\n  customShapeSelector: string,\n  index?: number,\n  insertSelector = ':last-child'\n): void {\n  selection.each((d, i, elements) => {\n    const element = select(elements[i])\n    const shape = getString(d, shapeAccessor, index) as GraphNodeShape\n\n    let shapeElement: Selection<SVGPathElement, unknown, null, undefined>\n    | Selection<SVGRectElement, unknown, null, undefined>\n    | Selection<SVGGElement, unknown, null, undefined>\n    | Selection<SVGCircleElement, unknown, null, undefined>\n    const isCustomShape = isStringSvg(shape)\n    if (isCustomShape) {\n      shapeElement = element.insert('g', insertSelector)\n        .html(sanitizeSvgString(shape))\n    } else {\n      switch (shape) {\n        case GraphNodeShape.Square:\n          shapeElement = element.insert('rect', insertSelector)\n            .attr('rx', 5)\n            .attr('ry', 5)\n          break\n        case GraphNodeShape.Hexagon:\n        case GraphNodeShape.Triangle:\n          shapeElement = element.insert('path', insertSelector)\n          break\n        case GraphNodeShape.Circle:\n        default:\n          shapeElement = element.insert('circle', insertSelector)\n      }\n    }\n\n    shapeElement.classed(customShapeSelector, isCustomShape)\n    return shapeElement.attr('class', shapeSelector)\n  })\n}\n\nexport function updateShape<T> (\n  selection: Selection<SVGGElement, T, SVGGElement, unknown>,\n  shape: StringAccessor<T>,\n  size: NumericAccessor<T>,\n  index: number\n): void {\n  if (selection.size() === 0) return\n\n  const d: T = selection.datum()\n  const nodeSize = getNodeSize(d, size, index)\n  selection.filter('circle')\n    .attr('r', nodeSize / 2)\n\n  selection.filter('rect')\n    .attr('width', nodeSize)\n    .attr('height', nodeSize)\n    .attr('x', -nodeSize / 2)\n    .attr('y', -nodeSize / 2)\n\n  selection.filter('path')\n    .attr('d', () => {\n      let n: number\n      switch (getString(d, shape, index)) {\n        case GraphNodeShape.Square:\n          n = 4\n          break\n        case GraphNodeShape.Triangle:\n          n = 3\n          break\n        case GraphNodeShape.Hexagon:\n        default:\n          n = 6\n      }\n\n      return polygon(nodeSize, n)\n    })\n\n  selection.filter('g')\n    .filter(() => !isStringSvg(getString(d, shape, index) as GraphNodeShape))\n    .html(getString(d, shape, index))\n\n  selection.filter('g')\n    .each((d, i, elements) => {\n      const el = select(elements[i])\n      const bBox = el.node().getBBox()\n      el.attr('transform', `translate(${-bBox.width / 2},${-bBox.height / 2})`)\n    })\n}\n", "export enum ZoomLevel {\n  Level0 = 1.0,\n  Level1 = 0.6,\n  Level2 = 0.4,\n  Level3 = 0.2,\n}\n", "import { select, Selection } from 'd3-selection'\nimport { Transition } from 'd3-transition'\nimport { arc } from 'd3-shape'\n\n// Types\nimport { GraphInputLink, GraphInputNode } from 'types/graph'\nimport { TrimMode } from 'types/text'\n\n// Utils\nimport { trimString } from 'utils/text'\nimport { polygon } from 'utils/path'\nimport { smartTransition, Selection$Transition } from 'utils/d3'\nimport { getBoolean, getNumber, getString, getValue, throttle } from 'utils/data'\nimport { getColor } from 'utils/color'\nimport { isStringSvg } from 'utils/svg'\n\n// Local Types\nimport { GraphNode, GraphCircleLabel, GraphNodeAnimationState, GraphNodeAnimatedElement, GraphNodeShape } from '../../types'\n\n// Config\nimport { GraphConfigInterface } from '../../config'\n\n// Helpers\nimport {\n  arcTween,\n  polyTween,\n  setLabelRect,\n  getX,\n  getY,\n  getSideLabelTextColor,\n  getNodeColor,\n  getNodeIconColor,\n  getNodeSize,\n  LABEL_RECT_VERTICAL_PADDING,\n  isInternalHref,\n} from './helper'\nimport { appendShape, updateShape } from '../shape'\nimport { ZoomLevel } from '../zoom-levels'\n\n// Styles\nimport * as generalSelectors from '../../style'\nimport * as nodeSelectors from './style'\n\nconst SIDE_LABEL_DEFAULT_RADIUS = 10\n\nexport interface GraphNodeSVGGElement extends SVGGElement {\n  nodeShape?: string;\n  nodeIcon?: string;\n}\n\nexport function createNodes<N extends GraphInputNode, L extends GraphInputLink> (\n  selection: Selection<SVGGElement, GraphNode<N, L>, SVGGElement, unknown>,\n  config: GraphConfigInterface<N, L>,\n  duration: number,\n  scale = 1\n): void {\n  selection.each((d, i, elements) => {\n    const element = elements[i] as GraphNodeSVGGElement\n    const group = select<SVGGElement, GraphNode<N, L>>(element)\n    group\n      .attr('transform', (d: GraphNode<N, L>, i) => {\n        const configuredPosition = getValue<GraphNode<N, L>, [number, number] | undefined>(d, config.nodeEnterPosition, i)\n        const scale = getNumber(d, config.nodeEnterScale, i) ?? 0\n        const x = configuredPosition?.[0] ?? getX(d)\n        const y = configuredPosition?.[1] ?? getY(d)\n        return `translate(${x}, ${y}) scale(${scale})`\n      })\n      .attr('opacity', 0)\n\n    // If there's a custom render function, use it\n    if (config.nodeEnterCustomRenderFunction) {\n      config.nodeEnterCustomRenderFunction(d, group, config, duration, scale)\n    } else { // Default node rendering\n      const shape = getString(d, config.nodeShape, d._index) as GraphNodeShape\n      // Todo: The 'nodeShape'  and `nodeIcon` storing logic below it a temporary solution,\n      // we need a cleaner implementation\n      element.nodeShape = shape\n      appendShape(group, shape, nodeSelectors.node, nodeSelectors.customNode, d._index)\n      appendShape(group, shape, nodeSelectors.nodeSelection, nodeSelectors.customNode, d._index)\n      group.append('path').attr('class', nodeSelectors.nodeGauge)\n      group.append('g').attr('class', nodeSelectors.nodeIcon)\n\n      group.append('g')\n        .attr('class', nodeSelectors.sideLabelsGroup)\n\n      group.append('text')\n        .attr('class', nodeSelectors.nodeBottomIcon)\n    }\n\n    // Label\n    const label = group.append('g').attr('class', nodeSelectors.label)\n    label.append('rect').attr('class', nodeSelectors.labelBackground)\n\n    const labelText = label.append('text')\n      .attr('class', nodeSelectors.labelText)\n      .attr('dy', '0.32em')\n    labelText.append('tspan').attr('class', nodeSelectors.labelTextContent)\n    labelText.append('tspan')\n      .attr('class', nodeSelectors.subLabelTextContent)\n      .attr('dy', '1.1em')\n      .attr('x', '0')\n  })\n}\n\n/** Updates the nodes partially according to their `_state` */\nexport function updateNodesPartial<N extends GraphInputNode, L extends GraphInputLink> (\n  selection: Selection<SVGGElement, GraphNode<N, L>, SVGGElement, unknown>,\n  config: GraphConfigInterface<N, L>,\n  duration: number,\n  scale = 1\n): void {\n  const { nodeDisabled } = config\n\n  if (config.nodePartialUpdateCustomRenderFunction || config.nodeEnterCustomRenderFunction) {\n    // Handle custom rendering behavior\n    selection.each((d, i, elements) => {\n      const g = select<SVGGElement, GraphNode<N, L>>(elements[i])\n      config.nodePartialUpdateCustomRenderFunction?.(d, g, config, duration, scale)\n    })\n  } else {\n    // Default rendering\n    selection.each((d, i, elements) => {\n      const group: Selection<SVGGElement, GraphNode<N, L>, SVGGElement, unknown> = select(elements[i])\n      const isGreyout = getBoolean(d, nodeDisabled, d._index) || d._state.greyout\n\n      group.classed(nodeSelectors.greyedOutNode, isGreyout && !d._state.brushed)\n        .classed(nodeSelectors.draggable, !config.disableDrag)\n\n      const nodeSelectionOutline = group.selectAll<SVGGElement, GraphNode<N, L>>(`.${nodeSelectors.nodeSelection}`)\n      nodeSelectionOutline.classed(nodeSelectors.nodeSelectionActive, d._state.selected || d._state.brushed)\n\n      group.selectAll<SVGTextElement, GraphCircleLabel>(`.${nodeSelectors.sideLabel}`)\n        .style('fill', (l) => isGreyout ? null : getSideLabelTextColor(l, selection.node()))\n\n      group.selectAll<SVGRectElement, GraphCircleLabel>(`.${nodeSelectors.sideLabelBackground}`)\n        .style('fill', (l) => isGreyout ? null : l.color)\n    })\n  }\n}\n\nexport function updateNodePositions<N extends GraphInputNode, L extends GraphInputLink> (\n  selection: Selection<SVGGElement, GraphNode<N, L>, SVGGElement, unknown>,\n  duration: number\n): Selection$Transition<SVGGElement, GraphNode<N, L>, SVGGElement, unknown> {\n  return smartTransition(selection, duration)\n    .attr('transform', d => `translate(${getX(d)}, ${getY(d)}) scale(1)`)\n    .attr('opacity', 1)\n}\n\nexport function updateNodes<N extends GraphInputNode, L extends GraphInputLink> (\n  selection: Selection<SVGGElement, GraphNode<N, L>, SVGGElement, unknown>,\n  config: GraphConfigInterface<N, L>,\n  duration: number,\n  scale = 1\n): Selection<SVGGElement, GraphNode<N, L>, SVGGElement, unknown> | Transition<SVGGElement, GraphNode<N, L>, SVGGElement, unknown> {\n  const {\n    nodeGaugeAnimDuration, nodeStrokeWidth, nodeShape, nodeSize, nodeGaugeValue, nodeGaugeFill,\n    nodeIcon, nodeIconSize, nodeLabel, nodeLabelTrim, nodeLabelTrimMode, nodeLabelTrimLength,\n    nodeSubLabel, nodeSubLabelTrim, nodeSubLabelTrimMode, nodeSubLabelTrimLength,\n    nodeSideLabels, nodeStroke, nodeFill, nodeBottomIcon,\n  } = config\n\n  const nodeGroupsUpdate = updateNodePositions(selection, duration)\n\n  // If there's a custom render function, use it\n  if (config.nodeUpdateCustomRenderFunction) {\n    selection.each((d, i, elements) => {\n      const g = select<SVGGElement, GraphNode<N, L>>(elements[i])\n      config.nodeUpdateCustomRenderFunction(d, g, config, duration, scale)\n    })\n\n    updateNodesPartial(selection, config, duration, scale)\n    return nodeGroupsUpdate\n  }\n\n  // Default node rendering\n  // Re-create nodes to update shapes if they were changed\n  selection.each((d, i, elements) => {\n    const element = elements[i] as GraphNodeSVGGElement\n    const group = select<SVGGElement, GraphNode<N, L>>(element)\n    const shape = getString(d, nodeShape, d._index)\n\n    if (element.nodeShape !== shape) {\n      group.select(`.${nodeSelectors.node}`).remove()\n      appendShape(group, nodeShape, nodeSelectors.node, nodeSelectors.customNode, d._index, `.${nodeSelectors.nodeSelection}`)\n      group.select(`.${nodeSelectors.nodeSelection}`).remove()\n      appendShape(group, shape, nodeSelectors.nodeSelection, null, d._index, `.${nodeSelectors.nodeGauge}`)\n      element.nodeShape = shape\n    }\n  })\n\n  // Update nodes themselves\n  selection.each((d, i, elements) => {\n    const groupElement = elements[i] as GraphNodeSVGGElement\n    const group: Selection<SVGGElement, GraphNode<N, L>, SVGGElement, unknown> = select(groupElement)\n    const node: Selection<SVGGElement, GraphNode<N, L>, SVGGElement, unknown> = group.select(`.${nodeSelectors.node}`)\n    const nodeArc = group.select<GraphNodeAnimatedElement<SVGElement>>(`.${nodeSelectors.nodeGauge}`)\n    const icon = group.select<SVGTextElement>(`.${nodeSelectors.nodeIcon}`)\n    const sideLabelsGroup = group.select<SVGGElement>(`.${nodeSelectors.sideLabelsGroup}`)\n    const label = group.select<SVGGElement>(`.${nodeSelectors.label}`)\n    const labelTextContent = label.select<SVGTextElement>(`.${nodeSelectors.labelTextContent}`)\n    const sublabelTextContent = label.select<SVGTextElement>(`.${nodeSelectors.subLabelTextContent}`)\n    const bottomIcon = group.select<SVGTextElement>(`.${nodeSelectors.nodeBottomIcon}`)\n    const nodeSelectionOutline = group.select<SVGGElement>(`.${nodeSelectors.nodeSelection}`)\n    const nodeSizeValue = getNodeSize(d, nodeSize, d._index)\n    const arcGenerator = arc<GraphNodeAnimationState>()\n      .innerRadius(state => state.nodeSize / 2 - state.borderWidth / 2)\n      .outerRadius(state => state.nodeSize / 2 + state.borderWidth / 2)\n      .startAngle(0 * (Math.PI / 180))\n      // eslint-disable-next-line dot-notation\n      .endAngle(a => a['endAngle'])\n\n    group\n      .classed(generalSelectors.zoomOutLevel2, scale < ZoomLevel.Level2)\n      .classed(nodeSelectors.nodeIsDragged, (d: GraphNode<N, L>) => d._state.isDragged)\n\n    // Update Group\n    group\n      .classed(nodeSelectors.nodePolygon, () => {\n        const shape = getString(d, nodeShape, d._index)\n        return shape === GraphNodeShape.Triangle || shape === GraphNodeShape.Hexagon || shape === GraphNodeShape.Square\n      })\n\n    // Update Node\n    node\n      .call(updateShape, nodeShape, nodeSize, d._index)\n      .attr('stroke-width', getNumber(d, nodeStrokeWidth, d._index) ?? 0)\n      .style('fill', getNodeColor(d, nodeFill, d._index))\n      .style('stroke', getColor(d, nodeStroke, d._index, true) ?? null)\n\n    const nodeBBox = (node.node() as SVGGraphicsElement).getBBox()\n\n    nodeArc\n      .attr('stroke-width', getNumber(d, nodeStrokeWidth, d._index))\n      .style('display', !getNumber(d, nodeGaugeValue, d._index) ? 'none' : null)\n      .style('fill', getNodeColor(d, nodeGaugeFill, d._index))\n      .style('stroke', getNodeColor(d, nodeGaugeFill, d._index))\n      .style('stroke-opacity', d => getString(d, nodeShape, d._index) === GraphNodeShape.Circle ? 0 : null)\n\n    nodeArc\n      .transition()\n      .duration(nodeGaugeAnimDuration)\n      .attrTween('d', (\n        d,\n        j,\n        arr\n      ) => {\n        switch (getString(d, nodeShape, d._index)) {\n          case GraphNodeShape.Circle: return arcTween(d, config, arcGenerator, arr[j])\n          case GraphNodeShape.Hexagon: return polyTween(d, config, polygon, arr[j])\n          case GraphNodeShape.Square: return polyTween(d, config, polygon, arr[j])\n          case GraphNodeShape.Triangle: return polyTween(d, config, polygon, arr[j])\n          default: return null\n        }\n      })\n\n    // Set Node Selection\n    updateShape(nodeSelectionOutline, nodeShape, nodeSize, d._index)\n\n    // Update Node Icon\n    const prevNodeIconValue = groupElement.nodeIcon\n    const nodeIconValue = getString(d, nodeIcon, d._index)\n    const nodeIconSizeValue = getNumber(d, nodeIconSize, d._index) ?? 2.5 * Math.sqrt(nodeSizeValue)\n    const nodeIconColor = getNodeIconColor(d, nodeFill, d._index, selection.node())\n    const shouldRenderUseElement = isInternalHref(nodeIconValue)\n\n    if (prevNodeIconValue !== nodeIconValue) {\n      // If the icon has changed, we remove all children and re-render\n      icon.selectAll('*').remove()\n      // If the icon is a href, we need to append a <use> element. If it's a text we append the `<text>` element.\n      icon.append(shouldRenderUseElement ? 'use' : 'text')\n      groupElement.nodeIcon = nodeIconValue\n    }\n\n    if (shouldRenderUseElement) {\n      icon.select('use')\n        .attr('href', nodeIconValue)\n        .attr('x', -nodeIconSizeValue / 2)\n        .attr('y', -nodeIconSizeValue / 2)\n        .attr('width', nodeIconSizeValue)\n        .attr('height', nodeIconSizeValue)\n        .style('fill', nodeIconColor)\n    } else {\n      icon.select('text')\n        .style('font-size', `${nodeIconSizeValue}px`)\n        .attr('dy', '0.1em')\n        .style('fill', nodeIconColor)\n        .html(nodeIconValue)\n    }\n\n    // Side Labels\n    const sideLabelsData = getValue<GraphNode<N, L>, GraphCircleLabel[]>(d, nodeSideLabels, d._index) || []\n    const sideLabels = sideLabelsGroup.selectAll<SVGGElement, GraphCircleLabel>('g').data(sideLabelsData)\n    const sideLabelsEnter = sideLabels.enter().append('g')\n      .attr('class', nodeSelectors.sideLabelGroup)\n    sideLabelsEnter.append('circle')\n      .attr('class', nodeSelectors.sideLabelBackground)\n      .attr('r', l => l.radius ?? SIDE_LABEL_DEFAULT_RADIUS)\n    sideLabelsEnter.append('text')\n      .attr('class', nodeSelectors.sideLabel)\n\n    const sideLabelsUpdate = sideLabels.merge(sideLabelsEnter)\n      .style('cursor', l => l.cursor ?? null)\n\n    // Side label text\n    sideLabelsUpdate.select(`.${nodeSelectors.sideLabel}`).html(d => d.text)\n      .attr('dy', '0.1em')\n      .style('fill', l => l.textColor ?? getSideLabelTextColor(l, selection.node()))\n      .style('font-size', l => l.fontSize ?? `${(2 + (l.radius ?? SIDE_LABEL_DEFAULT_RADIUS)) / Math.pow(l.text.toString().length, 0.3)}px`)\n      // Side label circle background\n    sideLabelsUpdate.select(`.${nodeSelectors.sideLabelBackground}`)\n      .style('fill', l => l.color)\n\n    sideLabelsUpdate.attr('transform', (l, j) => {\n      if (sideLabelsData.length === 1) return `translate(${nodeSizeValue / 2.5}, ${-nodeSizeValue / 2.5})`\n      const r = 1.05 * nodeSizeValue / 2\n      const angle = j * 1.15 * 2 * Math.atan2(l.radius ?? SIDE_LABEL_DEFAULT_RADIUS, r) - Math.PI / 3\n      return `translate(${r * Math.cos(angle)}, ${r * Math.sin(angle)})`\n    })\n\n    sideLabels.exit().remove()\n\n    // Set label and sub-label text\n    const labelText = getString(d, nodeLabel, d._index)\n    const sublabelText = getString(d, nodeSubLabel, d._index)\n    const labelTextTrimmed = getBoolean(d, nodeLabelTrim, d._index)\n      ? trimString(labelText, getNumber(d, nodeLabelTrimLength, d._index), getValue(d, nodeLabelTrimMode as TrimMode, d._index))\n      : labelText\n    const sublabelTextTrimmed = getBoolean(d, nodeSubLabelTrim, d._index)\n      ? trimString(sublabelText, getNumber(d, nodeSubLabelTrimLength, d._index), getValue(d, nodeSubLabelTrimMode as TrimMode, d._index))\n      : sublabelText\n\n    labelTextContent.text(labelTextTrimmed)\n    sublabelTextContent.text(sublabelTextTrimmed)\n    group\n      .on('mouseenter', () => {\n        labelTextContent.text(labelText)\n        sublabelTextContent.text(sublabelText)\n        setLabelRect(label, labelText, nodeSelectors.labelText)\n        group.raise()\n      })\n      .on('mouseleave', () => {\n        labelTextContent.text(labelTextTrimmed)\n        sublabelTextContent.text(sublabelTextTrimmed)\n        setLabelRect(label, labelTextTrimmed, nodeSelectors.labelText)\n      })\n\n    // Position label\n    const labelFontSize = parseFloat(window.getComputedStyle(groupElement).getPropertyValue('--vis-graph-node-label-font-size')) || 12\n    const labelMargin = LABEL_RECT_VERTICAL_PADDING + 1.25 * labelFontSize ** 1.03\n    const nodeHeight = isStringSvg((getString(d, nodeShape, d._index)) as GraphNodeShape) ? nodeBBox.height : nodeSizeValue\n    label.attr('transform', `translate(0, ${nodeHeight / 2 + labelMargin})`)\n    if (scale >= ZoomLevel.Level3) setLabelRect(label, getString(d, nodeLabel, d._index), nodeSelectors.labelText)\n\n    // Bottom Icon\n    bottomIcon.html(getString(d, nodeBottomIcon, d._index))\n      .attr('transform', `translate(0, ${nodeHeight / 2})`)\n  })\n\n  updateNodesPartial(selection, config, duration, scale)\n\n  return nodeGroupsUpdate\n}\n\nexport function removeNodes<N extends GraphInputNode, L extends GraphInputLink> (\n  selection: Selection<SVGGElement, GraphNode<N, L>, SVGGElement, unknown>,\n  config: GraphConfigInterface<N, L>,\n  duration: number,\n  scale = 1\n): void {\n  smartTransition(selection, duration / 2)\n    .attr('opacity', 0)\n    .attr('transform', (d, i) => {\n      const configuredPosition = getValue<GraphNode<N, L>, [number, number] | undefined>(d, config.nodeExitPosition, i)\n      const scale = getNumber(d, config.nodeExitScale, i) ?? 0\n      const x = configuredPosition?.[0] ?? getX(d)\n      const y = configuredPosition?.[1] ?? getY(d)\n      return `translate(${x}, ${y}) scale(${scale})`\n    })\n    .remove()\n\n  // If there's a custom render function, use it\n  if (config.nodeExitCustomRenderFunction) {\n    selection.each((d, i, elements) => {\n      const g = select<SVGGElement, GraphNode<N, L>>(elements[i])\n      config.nodeExitCustomRenderFunction(d, g, config, duration, scale)\n    })\n  }\n}\n\nfunction setLabelBackgroundRect<N extends GraphInputNode, L extends GraphInputLink> (\n  selection: Selection<SVGGElement, GraphNode<N, L>, SVGGElement, unknown>,\n  config: GraphConfigInterface<N, L>\n): void {\n  const { nodeLabel } = config\n\n  selection.each((d, i, elements) => {\n    const group: Selection<SVGGElement, N, SVGGElement, N> = select(elements[i])\n    const label: Selection<SVGGElement, N, SVGGElement, N> = group.select(`.${nodeSelectors.label}`)\n    setLabelRect(label, getString(d, nodeLabel, i), nodeSelectors.labelText)\n  })\n}\n\nconst setLabelBackgroundRectThrottled = throttle(setLabelBackgroundRect, 1000) as typeof setLabelBackgroundRect\n\nexport function zoomNodes<N extends GraphInputNode, L extends GraphInputLink> (\n  selection: Selection<SVGGElement, GraphNode<N, L>, SVGGElement, unknown>,\n  config: GraphConfigInterface<N, L>,\n  scale: number\n): void {\n  if (config.nodeOnZoomCustomRenderFunction || config.nodeEnterCustomRenderFunction) {\n    // Handle custom rendering behavior\n    selection.each((d, i, elements) => {\n      const g = select<SVGGElement, GraphNode<N, L>>(elements[i])\n      config.nodeOnZoomCustomRenderFunction?.(d, g, config, scale)\n    })\n  } else {\n    // Default rendering\n    selection.classed(generalSelectors.zoomOutLevel1, scale < ZoomLevel.Level1)\n    selection.classed(generalSelectors.zoomOutLevel2, scale < ZoomLevel.Level2)\n    selection.selectAll(`${nodeSelectors.sideLabelBackground}`)\n      .attr('transform', `scale(${1 / Math.pow(scale, 0.35)})`)\n    selection.selectAll(`.${nodeSelectors.sideLabel}`)\n      .attr('transform', `scale(${1 / Math.pow(scale, 0.45)})`)\n\n    if (scale >= ZoomLevel.Level3) selection.call(setLabelBackgroundRectThrottled, config)\n  }\n}\n\nexport const zoomNodesThrottled = throttle(zoomNodes, 500)\n", "// Utils\nimport { getNumber, getValue } from 'utils/data'\nimport { getColor, hexToBrightness } from 'utils/color'\nimport { color } from 'd3-color'\n\n// Types\nimport { GraphInputLink, GraphInputNode } from 'types/graph'\n\n// Local Types\nimport { GraphLink, GraphLinkArrowStyle, GraphCircleLabel } from '../../types'\n\n// Config\nimport { GraphConfigInterface } from '../../config'\n\n// Helpers\nimport { getX, getY } from '../node/helper'\n\nexport const getPolylineData = (d: { x1: number; x2: number; y1: number; y2: number}): string => `${d.x1},${d.y1} ${(d.x1 + d.x2) / 2},${(d.y1 + d.y2) / 2} ${d.x2},${d.y2}`\n\nexport const LINK_MARKER_WIDTH = 9\nexport const LINK_MARKER_HEIGHT = 7\n\nexport function getLinkShift (link: GraphLink, spacing: number): { dx: number; dy: number } {\n  const sourceNode = link.source\n  const targetNode = link.target\n  const angle = Math.atan2(getY(targetNode) - getY(sourceNode), getX(targetNode) - getX(sourceNode)) - Math.PI / 2\n  const dx = Math.cos(angle) * spacing * link._direction * (link._index - (link._neighbours - 1) / 2)\n  const dy = Math.sin(angle) * spacing * link._direction * (link._index - (link._neighbours - 1) / 2)\n  return { dx, dy }\n}\n\nexport function getLinkShiftTransform (link: GraphLink, spacing: number): string {\n  const { dx, dy } = getLinkShift(link, spacing)\n  return `translate(${dx}, ${dy})`\n}\n\nexport function getLinkStrokeWidth<N extends GraphInputNode, L extends GraphInputLink> (\n  d: GraphLink<N, L>,\n  scale: number,\n  config: GraphConfigInterface<N, L>\n): number {\n  const m = getNumber(d, config.linkWidth, d._indexGlobal)\n  return m / Math.pow(scale, 0.5)\n}\n\nexport function getLinkBandWidth<N extends GraphInputNode, L extends GraphInputLink> (\n  d: GraphLink<N, L>,\n  scale: number,\n  config: GraphConfigInterface<N, L>\n): number {\n  const { nodeSize, linkBandWidth } = config\n  const sourceNodeSize = getNumber(d.source, nodeSize, d.source._index)\n  const targetNodeSize = getNumber(d.target, nodeSize, d.target._index)\n  const minNodeSize = Math.min(sourceNodeSize, targetNodeSize)\n  return Math.min(minNodeSize, getNumber(d, linkBandWidth, d._indexGlobal) / Math.pow(scale || 1, 0.5)) || 0\n}\n\nexport function getLinkColor<N extends GraphInputNode, L extends GraphInputLink> (link: GraphLink<N, L>, config: GraphConfigInterface<N, L>): string {\n  const { linkStroke } = config\n  const c = getColor(link, linkStroke, link._indexGlobal, true) ?? 'var(--vis-graph-link-stroke-color)'\n  return c || null\n}\n\nexport function getLinkArrowStyle<N extends GraphInputNode, L extends GraphInputLink> (\n  d: GraphLink<N, L>,\n  config: GraphConfigInterface<N, L>\n): GraphLinkArrowStyle | undefined {\n  const linkArrowValue = getValue<GraphLink<N, L>, GraphLinkArrowStyle | string | boolean>(d, config.linkArrow, d._indexGlobal)\n\n  if (!linkArrowValue) return undefined\n  else if (linkArrowValue === GraphLinkArrowStyle.Double) return linkArrowValue as GraphLinkArrowStyle.Double\n  else return GraphLinkArrowStyle.Single\n}\n\nexport function getArrowPath (): string {\n  return `M${-LINK_MARKER_WIDTH / 2},${-LINK_MARKER_HEIGHT / 2} V${LINK_MARKER_HEIGHT / 2} L${LINK_MARKER_WIDTH / 2},0 Z`\n}\n\nexport function getDoubleArrowPath (): string {\n  return `M${-LINK_MARKER_WIDTH / 2},0 L${LINK_MARKER_WIDTH / 2},${-LINK_MARKER_HEIGHT / 2} L${LINK_MARKER_WIDTH * 1.5},0 L${LINK_MARKER_WIDTH / 2},${LINK_MARKER_HEIGHT / 2} Z`\n}\n\nexport function getLinkLabelTextColor (label: GraphCircleLabel): string {\n  if (!label.color) return null\n\n  const hex = color(label.color).hex()\n  const brightness = hexToBrightness(hex)\n  return brightness > 0.65 ? 'var(--vis-graph-link-label-text-color-dark)' : 'var(--vis-graph-link-label-text-color-bright)'\n}\n", "import { select, Selection } from 'd3-selection'\nimport { range, sum } from 'd3-array'\nimport { Transition } from 'd3-transition'\nimport toPx from 'to-px'\n\n// Utils\nimport { throttle, getValue, getNumber, getBoolean, ensureArray } from 'utils/data'\nimport { smartTransition } from 'utils/d3'\nimport { getCSSVariableValueInPixels } from 'utils/misc'\nimport { estimateStringPixelLength } from 'utils/text'\n\n// Types\nimport { GraphInputLink, GraphInputNode } from 'types/graph'\n\n// Local Types\nimport { GraphCircleLabel, GraphLink, GraphLinkArrowStyle, GraphLinkStyle } from '../../types'\n\n// Config\nimport { GraphConfigInterface } from '../../config'\n\n// Helpers\nimport { getX, getY, isInternalHref } from '../node/helper'\nimport {\n  getLinkShiftTransform,\n  getLinkStrokeWidth,\n  getLinkBandWidth,\n  getLinkColor,\n  getLinkLabelTextColor,\n  getLinkArrowStyle,\n  LINK_MARKER_WIDTH,\n} from './helper'\nimport { ZoomLevel } from '../zoom-levels'\n\n// Styles\nimport * as generalSelectors from '../../style'\nimport * as linkSelectors from './style'\n\nexport function createLinks<N extends GraphInputNode, L extends GraphInputLink> (\n  selection: Selection<SVGGElement, GraphLink<N, L>, SVGGElement, unknown>\n): void {\n  selection.attr('opacity', 0)\n\n  selection.append('path')\n    .attr('class', linkSelectors.linkSupport)\n\n  selection.append('path')\n    .attr('class', linkSelectors.link)\n\n  selection.append('path')\n    .attr('class', linkSelectors.linkBand)\n\n  selection.append('use')\n    .attr('class', linkSelectors.linkArrow)\n\n  selection.append('g')\n    .attr('class', linkSelectors.flowGroup)\n    .style('opacity', 0)\n    .selectAll(`.${linkSelectors.flowCircle}`)\n    .data(range(0, 6)).enter()\n    .append('circle')\n    .attr('class', linkSelectors.flowCircle)\n}\n\n/** Updates the links partially according to their `_state` */\nexport function updateLinksPartial<N extends GraphInputNode, L extends GraphInputLink> (\n  selection: Selection<SVGGElement, GraphLink<N, L>, SVGGElement, unknown>,\n  config: GraphConfigInterface<N, L>,\n  scale: number\n): void {\n  const isGreyedOut = (d: GraphLink<N, L>, i: number): boolean => getBoolean(d, config.linkDisabled, i) || d._state.greyout\n  selection\n    .classed(linkSelectors.greyedOutLink, (d, i) => isGreyedOut(d, i))\n\n  selection.each((d, i, elements) => {\n    const element = elements[i]\n    const group = select(element)\n    group.select(`.${linkSelectors.link}`)\n    group.select(`.${linkSelectors.linkBand}`)\n    const linkSupport = group.select(`.${linkSelectors.linkSupport}`)\n\n    linkSupport\n      .style('stroke-opacity', (d._state.hovered || d._state.selected) ? 0.2 : 0)\n      .style('stroke-width',\n        d._state.selected\n          ? getLinkBandWidth(d, scale, config) + 5\n          : d._state.hovered ? getLinkBandWidth(d, scale, config) + 10 : null\n      )\n  })\n}\n\nexport function updateLinkLines<N extends GraphInputNode, L extends GraphInputLink> (\n  selection: Selection<SVGGElement, GraphLink<N, L>, SVGGElement, unknown>,\n  config: GraphConfigInterface<N, L>,\n  duration: number,\n  scale = 1,\n  getLinkArrowDefId: (arrow: GraphLinkArrowStyle | undefined) => string,\n  linkPathLengthMap: Map<string, number>\n): Selection<SVGGElement, GraphLink<N, L>, SVGGElement, unknown> {\n  return selection.each((d, i, elements) => {\n    const element = elements[i]\n    const linkGroup = select(element)\n    const link = linkGroup.select<SVGPathElement>(`.${linkSelectors.link}`)\n    const linkBand = linkGroup.select<SVGPathElement>(`.${linkSelectors.linkBand}`)\n    const linkSupport = linkGroup.select<SVGPathElement>(`.${linkSelectors.linkSupport}`)\n    const linkArrow = linkGroup.select<SVGUseElement>(`.${linkSelectors.linkArrow}`)\n    const linkColor = getLinkColor(d, config)\n    const linkShiftTransform = getLinkShiftTransform(d, config.linkNeighborSpacing)\n    const linkLabelData = ensureArray(\n      getValue<GraphLink<N, L>, GraphCircleLabel | GraphCircleLabel[]>(d, config.linkLabel, d._indexGlobal)\n    )\n    const offsetSource = getValue(d, config.linkSourcePointOffset, i)\n    const offsetTarget = getValue(d, config.linkTargetPointOffset, i)\n    const x1 = getX(d.source) + (offsetSource?.[0] || 0)\n    const y1 = getY(d.source) + (offsetSource?.[1] || 0)\n    const x2 = getX(d.target) + (offsetTarget?.[0] || 0)\n    const y2 = getY(d.target) + (offsetTarget?.[1] || 0)\n\n    const curvature = getNumber(d, config.linkCurvature, i) ?? 0\n    const cp1x = x1 + (x2 - x1) * 0.5 * curvature\n    const cp1y = y1 + (y2 - y1) * 0.0 * curvature\n    const cp2x = x1 + (x2 - x1) * 0.5 * curvature\n    const cp2y = y1 + (y2 - y1) * 1.0 * curvature\n\n    const pathData = `M${x1},${y1} C${cp1x},${cp1y} ${cp2x},${cp2y} ${x2},${y2}`\n    const linkPathElement = linkSupport.attr('d', pathData).node()\n    const cachedLinkPathLength = linkPathLengthMap.get(pathData)\n    const pathLength = cachedLinkPathLength ?? linkPathElement.getTotalLength()\n    if (!cachedLinkPathLength) linkPathLengthMap.set(pathData, pathLength)\n\n    linkSupport\n      .style('stroke', linkColor)\n      .attr('transform', linkShiftTransform)\n\n    link\n      .attr('class', linkSelectors.link)\n      .style('stroke-width', getLinkStrokeWidth(d, scale, config))\n      .style('stroke', linkColor)\n      .attr('transform', linkShiftTransform)\n\n    smartTransition(link, duration)\n      .attr('d', pathData)\n\n    linkBand\n      .attr('class', linkSelectors.linkBand)\n      .attr('transform', linkShiftTransform)\n      .style('stroke-width', getLinkBandWidth(d, scale, config))\n      .style('stroke', linkColor)\n\n    smartTransition(linkBand, duration)\n      .attr('d', pathData)\n\n\n    // Arrow\n    const linkArrowStyle = getLinkArrowStyle(d, config)\n    if (linkArrowStyle) {\n      const arrowPos = pathLength * (linkLabelData.length ? 0.65 : 0.5)\n      const p1 = linkPathElement.getPointAtLength(arrowPos)\n      const p2 = linkPathElement.getPointAtLength(arrowPos + 1) // A point very close to p1\n\n      // Calculate the angle for the arrowhead\n      const angle = Math.atan2(p2.y - p1.y, p2.x - p1.x) * (180 / Math.PI)\n      const arrowWasShownBefore = linkArrow.attr('href')\n      linkArrow\n        .attr('href', `#${getLinkArrowDefId(linkArrowStyle)}`)\n\n      smartTransition(linkArrow, arrowWasShownBefore ? duration : 0)\n        .attr('fill', linkColor)\n        .attr('transform', `translate(${p1.x}, ${p1.y}) rotate(${angle})`)\n    } else {\n      linkArrow.attr('href', null)\n    }\n  })\n}\n\nexport function updateLinks<N extends GraphInputNode, L extends GraphInputLink> (\n  selection: Selection<SVGGElement, GraphLink<N, L>, SVGGElement, unknown>,\n  config: GraphConfigInterface<N, L>,\n  duration: number,\n  scale = 1,\n  getLinkArrowDefId: (arrow: GraphLinkArrowStyle | undefined) => string,\n  linkPathLengthMap: Map<string, number>\n): void {\n  const { linkFlowParticleSize, linkStyle, linkFlow, linkLabel, linkLabelShiftFromCenter } = config\n  if (!selection.size()) return\n\n  selection\n    .classed(\n      linkSelectors.linkDashed,\n      d => getValue<GraphLink<N, L>, GraphLinkStyle>(d, linkStyle, d._indexGlobal) === GraphLinkStyle.Dashed\n    )\n\n  // Update line and arrow positions\n  updateLinkLines(selection, config, duration, scale, getLinkArrowDefId, linkPathLengthMap)\n\n  // Update labels and link flow (particles) groups\n  selection.each((d, i, elements) => {\n    const element = elements[i]\n    const linkGroup = select(element)\n    const flowGroup = linkGroup.select(`.${linkSelectors.flowGroup}`)\n    const linkSupport = linkGroup.select<SVGPathElement>(`.${linkSelectors.linkSupport}`)\n    const linkPathElement = linkSupport.node()\n    const linkColor = getLinkColor(d, config)\n    const linkShiftTransform = getLinkShiftTransform(d, config.linkNeighborSpacing)\n    const linkLabelData = ensureArray(\n      getValue<GraphLink<N, L>, GraphCircleLabel | GraphCircleLabel[]>(d, linkLabel, d._indexGlobal)\n    )\n\n    // Particle Flow\n    flowGroup\n      .attr('transform', linkShiftTransform)\n      .style('display', getBoolean(d, linkFlow, d._indexGlobal) ? null : 'none')\n\n    flowGroup\n      .selectAll(`.${linkSelectors.flowCircle}`)\n      .attr('r', linkFlowParticleSize / scale)\n      .style('fill', linkColor)\n\n    smartTransition(flowGroup, duration)\n      .style('opacity', scale < ZoomLevel.Level2 ? 0 : 1)\n\n    // Labels\n    // Preparing the labels before rendering to be able to center them\n    const linkLabelsDataPrepared = linkLabelData.map((linkLabelDatum) => {\n      const text = linkLabelDatum.text?.toString() || ''\n      const shouldRenderUseElement = isInternalHref(text)\n      const fontSizePx = toPx(linkLabelDatum.fontSize) ?? getCSSVariableValueInPixels('var(--vis-graph-link-label-font-size)', linkGroup.node())\n      const shouldBeRenderedAsCircle = text.length <= 2 || shouldRenderUseElement\n      const paddingVertical = 4\n      const paddingHorizontal = shouldBeRenderedAsCircle ? paddingVertical : 8\n      const estimatedWidthPx = estimateStringPixelLength(text, fontSizePx)\n\n      return {\n        ...linkLabelDatum,\n        _shouldRenderUseElement: shouldRenderUseElement,\n        _fontSizePx: fontSizePx,\n        _shouldBeRenderedAsCircle: shouldBeRenderedAsCircle,\n        _paddingVertical: paddingVertical,\n        _paddingHorizontal: paddingHorizontal,\n        _estimatedWidthPx: estimatedWidthPx,\n        _borderRadius: linkLabelDatum.radius ?? (shouldBeRenderedAsCircle ? fontSizePx : 4),\n        _backgroundWidth: (shouldBeRenderedAsCircle ? fontSizePx : estimatedWidthPx) + paddingHorizontal * 2,\n        _backgroundHeight: fontSizePx + paddingVertical * 2,\n      }\n    })\n    type GraphCircleLabelPrepared = typeof linkLabelsDataPrepared[0]\n    const linkLabelGroups = linkGroup\n      .selectAll<SVGGElement, GraphCircleLabelPrepared>(`.${linkSelectors.linkLabelGroup}`)\n      .data(linkLabelsDataPrepared, (d: GraphCircleLabelPrepared) => d.text)\n\n    const linkLabelGroupsEnter = linkLabelGroups.enter().append('g').attr('class', linkSelectors.linkLabelGroup)\n    linkLabelGroupsEnter.each((linkLabelDatum, i, elements) => {\n      const linkLabelGroup = select<SVGGElement, GraphCircleLabelPrepared>(elements[i])\n      linkLabelGroup.append('rect').attr('class', linkSelectors.linkLabelBackground)\n\n      const linkLabelText = linkLabelDatum ? linkLabelDatum.text?.toString() : undefined\n      const shouldRenderUseElement = isInternalHref(linkLabelText)\n      linkLabelGroup.select<SVGTextElement>(`.${linkSelectors.linkLabelContent}`).remove()\n      linkLabelGroup\n        .append(shouldRenderUseElement ? 'use' : 'text')\n        .attr('class', linkSelectors.linkLabelContent)\n    })\n    linkLabelGroupsEnter.style('opacity', 0)\n\n    const linkLabelGroupsMerged = linkLabelGroups.merge(linkLabelGroupsEnter)\n    const linkLabelMargin = 1\n    let linkLabelShiftCumulative = -sum(linkLabelsDataPrepared, d => d._backgroundWidth + linkLabelMargin) / 2 // Centering the labels\n    const cachedLinkPathLength = linkPathLengthMap.get(linkPathElement.getAttribute('d'))\n    const pathLength = cachedLinkPathLength ?? linkPathElement.getTotalLength()\n    const linkArrowStyle = getLinkArrowStyle(d, config)\n    linkLabelGroupsMerged.each((linkLabelDatum, i, elements) => {\n      const element = elements[i]\n      const linkLabelGroup = select<SVGGElement, GraphCircleLabelPrepared>(element)\n      const linkLabelText = linkLabelDatum.text?.toString()\n      const linkLabelContent = linkLabelGroup.select<SVGTextElement | SVGUseElement>(`.${linkSelectors.linkLabelContent}`)\n      const linkMarkerWidth = linkArrowStyle ? LINK_MARKER_WIDTH * 2 : 0\n      const linkLabelShift = getBoolean(d, linkLabelShiftFromCenter, d._indexGlobal) ? -linkMarkerWidth + 4 : 0\n      const linkLabelPos = linkPathElement.getPointAtLength(pathLength / 2 + linkLabelShift + linkLabelShiftCumulative + linkLabelDatum._backgroundWidth / 2)\n      const linkLabelTranslate = `translate(${linkLabelPos.x}, ${linkLabelPos.y})`\n      const linkLabelBackground = linkLabelGroup.select<SVGRectElement>(`.${linkSelectors.linkLabelBackground}`)\n\n      // If the label was not displayed before, we set the initial transform\n      if (!linkLabelGroup.attr('transform')) {\n        linkLabelGroup.attr('transform', `${linkLabelTranslate} scale(0)`)\n      }\n\n      const linkLabelColor = linkLabelDatum.textColor ?? getLinkLabelTextColor(linkLabelDatum)\n      if (linkLabelDatum._shouldRenderUseElement) {\n        linkLabelContent\n          .attr('href', linkLabelText)\n          .attr('x', -linkLabelDatum._fontSizePx / 2)\n          .attr('y', -linkLabelDatum._fontSizePx / 2)\n          .attr('width', linkLabelDatum._fontSizePx)\n          .attr('height', linkLabelDatum._fontSizePx)\n          .style('fill', linkLabelColor)\n      } else {\n        linkLabelContent\n          .text(linkLabelText)\n          .attr('dy', '0.1em')\n          .style('font-size', linkLabelDatum._fontSizePx)\n          .style('fill', linkLabelColor)\n      }\n\n      linkLabelGroup.attr('hidden', null)\n        .style('cursor', linkLabelDatum.cursor)\n\n      smartTransition(linkLabelGroup, duration)\n        .attr('transform', `${linkLabelTranslate} scale(1)`)\n        .style('opacity', 1)\n\n      linkLabelBackground\n        .attr('x', -linkLabelDatum._backgroundWidth / 2)\n        .attr('y', -linkLabelDatum._backgroundHeight / 2)\n        .attr('width', linkLabelDatum._backgroundWidth)\n        .attr('height', linkLabelDatum._backgroundHeight)\n        .attr('rx', linkLabelDatum._borderRadius)\n        .style('fill', linkLabelDatum.color)\n\n      linkLabelShiftCumulative += linkLabelDatum._backgroundWidth + linkLabelMargin\n    })\n\n    smartTransition(linkLabelGroups.exit(), duration)\n      .style('opacity', 0)\n      .remove()\n  })\n\n  // Pointer Events\n  if (duration > 0) {\n    selection.attr('pointer-events', 'none')\n    const t = smartTransition(selection, duration) as Transition<SVGGElement, GraphLink<N, L>, SVGGElement, GraphLink<N, L>>\n    t\n      .attr('opacity', 1)\n      .on('end interrupt', (d, i, elements) => {\n        select(elements[i])\n          .attr('pointer-events', 'stroke')\n          .attr('opacity', 1)\n      })\n  } else {\n    selection.attr('opacity', 1)\n  }\n\n  updateLinksPartial(selection, config, scale)\n}\n\nexport function removeLinks<N extends GraphInputNode, L extends GraphInputLink> (\n  selection: Selection<SVGGElement, GraphLink<N, L>, SVGGElement, unknown>,\n  config: GraphConfigInterface<N, L>,\n  duration: number\n): void {\n  smartTransition(selection, duration / 2)\n    .attr('opacity', 0)\n    .remove()\n}\n\nexport function animateLinkFlow<N extends GraphInputNode, L extends GraphInputLink> (\n  selection: Selection<SVGGElement, GraphLink<N, L>, SVGGElement, unknown>,\n  config: GraphConfigInterface<N, L>,\n  scale: number,\n  linkPathLengthMap: Map<string, number>\n): void {\n  const { linkFlow } = config\n  if (scale < ZoomLevel.Level2) return\n\n  selection.each((d, i, elements) => {\n    const element = elements[i]\n    const linkGroup = select(element)\n    const flowGroup = linkGroup.select(`.${linkSelectors.flowGroup}`)\n\n    const linkPathElement = linkGroup.select<SVGPathElement>(`.${linkSelectors.linkSupport}`).node()\n    const cachedLinkPathLength = linkPathLengthMap.get(linkPathElement.getAttribute('d'))\n    const pathLength = cachedLinkPathLength ?? linkPathElement.getTotalLength()\n\n    if (!getBoolean(d, linkFlow, d._indexGlobal) || !pathLength) return\n    const t = d._state.flowAnimTime\n    const circles = flowGroup.selectAll(`.${linkSelectors.flowCircle}`)\n\n    circles\n      .attr('transform', index => {\n        const tt = (t + (+index) / (circles.size() - 1)) % 1\n        const p = linkPathElement.getPointAtLength(tt * pathLength)\n        return `translate(${p.x}, ${p.y})`\n      })\n  })\n}\n\nexport function zoomLinks<N extends GraphInputNode, L extends GraphInputLink> (\n  selection: Selection<SVGGElement, GraphLink<N, L>, SVGGElement, unknown>,\n  config: GraphConfigInterface<N, L>,\n  scale: number\n): void {\n  const { linkFlowParticleSize } = config\n\n  selection.classed(generalSelectors.zoomOutLevel2, scale < ZoomLevel.Level2)\n\n  selection.select(`.${linkSelectors.flowGroup}`)\n    .style('opacity', scale < ZoomLevel.Level2 ? 0 : 1)\n\n  selection.selectAll(`.${linkSelectors.flowCircle}`)\n    .attr('r', linkFlowParticleSize / scale)\n\n  const linkElements = selection.selectAll<SVGGElement, GraphLink<N, L>>(`.${linkSelectors.link}`)\n  linkElements\n    .style('stroke-width', d => getLinkStrokeWidth(d, scale, config))\n\n  const linkBandElements = selection.selectAll<SVGGElement, GraphLink<N, L>>(`.${linkSelectors.linkBand}`)\n  linkBandElements\n    .style('stroke-width', d => getLinkBandWidth(d, scale, config))\n}\n\nexport const zoomLinksThrottled = throttle(zoomLinks, 500)\n\n", "import { Selection } from 'd3-selection'\n\n// Types\nimport { NumericAccessor, BooleanAccessor } from 'types/accessor'\nimport { Position } from 'types/position'\nimport { GraphInputLink, GraphInputNode } from 'types/graph'\nimport { Spacing } from 'types/spacing'\n\n// Utils\nimport { getBoolean, isPlainObject } from 'utils/data'\n\n// Local Types\nimport { GraphNode, GraphPanel, GraphPanelConfig } from '../../types'\n\n// Config\nimport { GraphConfigInterface } from '../../config'\n\n// Helpers\nimport { getX, getY, getNodeSize } from '../node/helper'\n\n// Styles\nimport * as nodeSelectors from '../node/style'\n\nexport const DEFAULT_PADDING = 15\nexport const DEFAULT_LABEL_MARGIN = 16\nexport const OUTLINE_SELECTION_PADDING = 5\nexport const DEFAULT_SIDE_LABEL_SIZE = 25\n\nexport function getPanelPadding (padding: number | Spacing | undefined): Spacing {\n  const isPaddingAnObject = isPlainObject(padding)\n  return {\n    left: (isPaddingAnObject ? (padding as Spacing).left : (padding as number)) ?? DEFAULT_PADDING,\n    right: (isPaddingAnObject ? (padding as Spacing).right : (padding as number)) ?? DEFAULT_PADDING,\n    top: (isPaddingAnObject ? (padding as Spacing).top : (padding as number)) ?? DEFAULT_PADDING,\n    bottom: (isPaddingAnObject ? (padding as Spacing).bottom : (padding as number)) ?? DEFAULT_PADDING,\n  }\n}\n\nexport function initPanels (panelsConfig: GraphPanelConfig[] | undefined): GraphPanel[] {\n  const panels = (panelsConfig ?? []).map(p => ({\n    ...p,\n    _padding: getPanelPadding(p.padding),\n  })) as GraphPanel[]\n\n  return panels\n}\n\nexport function setPanelForNodes<N extends GraphInputNode, L extends GraphInputLink> (\n  panels: GraphPanel[],\n  nodes: GraphNode<N, L>[],\n  config: GraphConfigInterface<N, L>\n): void {\n  if (!panels) return\n\n  // For each node store its related panels\n  nodes.forEach(node => {\n    // Find all panels to which node belong\n    const nodePanels = panels.filter(panel => panel.nodes && panel.nodes.includes(node._id))\n    node._panels = nodePanels\n  })\n}\n\nexport function setPanelBBox<N extends GraphInputNode, L extends GraphInputLink> (\n  panelConfig: GraphPanel,\n  panelNodes: Selection<SVGGElement, GraphNode<N, L>, SVGGElement, unknown>,\n  nodeSizeAccessor: NumericAccessor<N>,\n  nodeDisabledAccessor: BooleanAccessor<N>\n): void {\n  const selection = panelNodes.select(`.${nodeSelectors.node}`)\n  if (selection.empty()) return\n\n  const labelApprxHeight = 40\n  const labelApprxWidth = 110\n  const labelMargin = 10\n  let box: { x1: number; x2: number; y1: number; y2: number }\n\n  selection.each((d, i) => {\n    const nodeSize = getNodeSize(d, nodeSizeAccessor, i)\n    const w = Math.max(nodeSize, labelApprxWidth)\n    const h = nodeSize + labelMargin + labelApprxHeight\n    // const nodeBBox = node.getBBox()\n    const yShift = 10 // This is hard to calculate, so we just use an approximation\n\n    const coords = {\n      x1: getX(d) - w / 2, // We use d.x and d.y instead of bBox values here because `gBBox` contains initial ...\n      y1: getY(d) - h / 2 + yShift, // ... coordinates (before transition starts), not target coordinates\n      x2: getX(d) + w / 2,\n      y2: getY(d) + h / 2 + yShift,\n    }\n\n    if (!box) {\n      box = {\n        ...coords,\n      }\n    } else {\n      if (box.x1 > coords.x1) box.x1 = coords.x1\n      if (box.y1 > coords.y1) box.y1 = coords.y1\n      if (box.x2 < coords.x2) box.x2 = coords.x2\n      if (box.y2 < coords.y2) box.y2 = coords.y2\n    }\n  })\n\n  panelConfig._x = box.x1 - panelConfig._padding.left\n  panelConfig._y = box.y1 - panelConfig._padding.top\n  panelConfig._width = box.x2 - box.x1 + panelConfig._padding.left + panelConfig._padding.right\n  panelConfig._height = box.y2 - box.y1 + panelConfig._padding.top + panelConfig._padding.bottom\n  panelConfig._disabled = selection.data()\n    .map((node, i) => getBoolean(node, nodeDisabledAccessor, node._index) || node._state.greyout)\n    .every(d => d)\n}\n\nexport function setPanelNumNodes<N extends GraphInputNode, L extends GraphInputLink> (\n  panelConfig: GraphPanel,\n  panelNodes: Selection<SVGGElement, GraphNode<N, L>, SVGGElement, unknown>\n): void {\n  panelConfig._numNodes = panelNodes.size()\n}\n\nexport function updatePanelBBoxSize<N extends GraphInputNode, L extends GraphInputLink> (\n  nodesSelection: Selection<SVGGElement, GraphNode<N, L>, SVGGElement, unknown>,\n  panels: GraphPanel[],\n  config: GraphConfigInterface<N, L>\n): void {\n  const { layoutNonConnectedAside } = config\n  if (!panels) return\n\n  panels.forEach(panelConfig => {\n    const panelNodes = nodesSelection.filter(node => {\n      return (!layoutNonConnectedAside || node._isConnected) && panelConfig.nodes.includes(node._id)\n    })\n    setPanelBBox(panelConfig, panelNodes, config.nodeSize, config.nodeDisabled)\n  })\n}\n\nexport function updatePanelNumNodes<N extends GraphInputNode, L extends GraphInputLink> (\n  nodesSelection: Selection<SVGGElement, GraphNode<N, L>, SVGGElement, unknown>,\n  panels: GraphPanel[],\n  config: GraphConfigInterface<N, L>\n): void {\n  const { layoutNonConnectedAside } = config\n  if (!panels) return\n\n  panels.forEach(panelConfig => {\n    const panelNodes = nodesSelection.filter(node => {\n      return (!layoutNonConnectedAside || node._isConnected) && panelConfig.nodes.includes(node._id)\n    })\n    setPanelNumNodes(panelConfig, panelNodes)\n  })\n}\n\nexport function getLabelTranslateTransform<N extends GraphInputNode, L extends GraphInputLink> (panel: GraphPanel): string {\n  const x = panel._width / 2\n  const dy = DEFAULT_LABEL_MARGIN + (panel.dashedOutline ? OUTLINE_SELECTION_PADDING : 0)\n  const y = panel.labelPosition === Position.Bottom\n    ? panel._height + dy\n    : -dy\n\n  return `translate(${x}, ${y})`\n}\n\n", "import { select, Selection } from 'd3-selection'\n\n// Utils\nimport { trimString } from 'utils/text'\nimport { smartTransition } from 'utils/d3'\n\n// Types\nimport { GraphInputLink, GraphInputNode } from 'types/graph'\n\n// Local Types\nimport { GraphNode, GraphLink, GraphPanel } from '../../types'\n\n// Config\nimport { GraphConfigInterface } from '../../config'\n\n// Helpers\nimport { setLabelRect } from '../node/helper'\nimport { getLabelTranslateTransform, OUTLINE_SELECTION_PADDING, DEFAULT_SIDE_LABEL_SIZE } from './helper'\n\n// Styles\nimport * as panelSelectors from './style'\nimport { appendShape, updateShape } from '../shape'\n\nexport function createPanels<N extends GraphNode, L extends GraphLink> (\n  selection: Selection<SVGGElement, GraphPanel, SVGGElement, unknown>\n): void {\n  selection\n    .attr('transform', d => `translate(${d._x}, ${d._y})`)\n    .style('opacity', 0)\n\n  selection.append('rect').attr('class', panelSelectors.panelSelection)\n    .attr('rx', 9)\n    .attr('ry', 9)\n    .attr('width', d => d._width)\n    .attr('height', d => d._height)\n\n  selection.append('rect').attr('class', panelSelectors.panel)\n    .attr('rx', 7)\n    .attr('ry', 7)\n    .attr('width', d => d._width)\n    .attr('height', d => d._height)\n\n  const panelLabel = selection.append('g').attr('class', panelSelectors.label)\n    .attr('transform', getLabelTranslateTransform)\n  panelLabel.append('rect').attr('class', panelSelectors.background)\n  panelLabel.append('text').attr('class', panelSelectors.labelText)\n    .attr('dy', '0.32em')\n\n  const sideIcon = selection.append('g')\n    .attr('class', panelSelectors.sideIconGroup)\n    .attr('transform', (d, i, elements) => {\n      const dx = -OUTLINE_SELECTION_PADDING\n      const dy = -OUTLINE_SELECTION_PADDING\n      return `translate(${d._width + dx}, ${-dy})`\n    })\n  appendShape(sideIcon, (d: GraphPanel) => d.sideIconShape, panelSelectors.sideIconShape, panelSelectors.customSideIcon)\n  sideIcon.append('text').attr('class', panelSelectors.sideIconSymbol)\n}\n\nexport function updatePanels<N extends GraphNode, L extends GraphLink> (\n  selection: Selection<SVGGElement, GraphPanel, SVGGElement, unknown>,\n  config: GraphConfigInterface<GraphInputNode, GraphInputLink>,\n  duration: number\n): void {\n  smartTransition(selection, duration)\n    .attr('transform', d => `translate(${d._x}, ${d._y})`)\n    .style('opacity', d => d._disabled ? 0.4 : 1)\n\n  const panels = selection.selectAll<SVGRectElement, GraphPanel>(`.${panelSelectors.panel}`).data(d => [d])\n  smartTransition(panels, duration)\n    .attr('width', d => d._width)\n    .attr('height', d => d._height)\n    .style('stroke', d => d.borderColor)\n    .style('fill', d => d.fillColor)\n    .style('stroke-width', d => d.borderWidth)\n\n  const panelSelection = selection.select<SVGRectElement>(`.${panelSelectors.panelSelection}`)\n    .classed(panelSelectors.panelSelectionActive, d => d.dashedOutline)\n\n  smartTransition(panelSelection, duration)\n    .attr('x', d => -OUTLINE_SELECTION_PADDING)\n    .attr('y', d => -OUTLINE_SELECTION_PADDING)\n    .attr('width', d => d._width + OUTLINE_SELECTION_PADDING * 2)\n    .attr('height', d => d._height + OUTLINE_SELECTION_PADDING * 2)\n\n  const sideIcon = selection.select<SVGGElement>(`.${panelSelectors.sideIconGroup}`)\n\n  sideIcon.select<SVGGElement>(`.${panelSelectors.sideIconShape}`)\n    .call(updateShape, (d: GraphPanel) => d.sideIconShape, (d: GraphPanel) => d.sideIconShapeSize ?? DEFAULT_SIDE_LABEL_SIZE)\n    .style('stroke', d => d.sideIconShapeStroke)\n    .style('cursor', d => d.sideIconCursor ?? null)\n    .style('opacity', d => d.sideIconShape ? 1 : 0)\n\n  sideIcon.select(`.${panelSelectors.sideIconSymbol}`)\n    .html(d => d.sideIconSymbol)\n    .attr('dy', 1)\n    .style('fill', d => d.sideIconSymbolColor)\n    .style('font-size', d => d.sideIconFontSize ?? ((d.sideIconShapeSize ?? DEFAULT_SIDE_LABEL_SIZE) / 2.5))\n\n  smartTransition(sideIcon, duration)\n    .attr('transform', d => {\n      const dx = -OUTLINE_SELECTION_PADDING\n      const dy = -OUTLINE_SELECTION_PADDING\n      return `translate(${d._width + dx}, ${-dy})`\n    })\n\n  const panelLabel = selection.select<SVGGElement>(`.${panelSelectors.label}`)\n\n  panelLabel.select<SVGTextElement>(`.${panelSelectors.labelText}`)\n    .text(d => trimString(d.label, d.labelTrimLength, d.labelTrimMode))\n\n  smartTransition(panelLabel, duration)\n    .attr('transform', getLabelTranslateTransform)\n\n  panelLabel\n    .on('mouseover', (event: MouseEvent, d) => {\n      const label = select<SVGGElement, GraphPanel<N, L>>(event.currentTarget as SVGGElement)\n      const labelContent = d.label\n      label.select('text').text(labelContent)\n      setLabelRect(label, labelContent, panelSelectors.labelText)\n    })\n    .on('mouseleave', (event: MouseEvent, d) => {\n      const label = select<SVGGElement, GraphPanel<N, L>>(event.currentTarget as SVGGElement)\n      const labelContent = trimString(d.label, d.labelTrimLength, d.labelTrimMode)\n      label.select('text').text(labelContent)\n      setLabelRect(label, labelContent, panelSelectors.labelText)\n    })\n}\n\nexport function removePanels<N extends GraphNode, L extends GraphLink> (\n  selection: Selection<SVGGElement, GraphPanel, SVGGElement, unknown>,\n  config: GraphConfigInterface<GraphInputNode, GraphInputLink>,\n  duration: number\n): void {\n  smartTransition(selection, duration / 2)\n    .style('opacity', 0)\n    .remove()\n}\n", "// Types\nimport type { ElkNode } from 'elkjs/lib/elk.bundled.js'\nimport { GraphInputLink, GraphInputNode } from 'types/graph'\nimport { GenericAccessor } from 'types/accessor'\n\n// Utils\nimport { getValue, isPlainObject, merge } from 'utils/data'\n\n// Local Types\nimport { GraphNode, GraphElkLayoutSettings } from '../types'\n\nexport const DEFAULT_ELK_SETTINGS = {\n  hierarchyHandling: 'INCLUDE_CHILDREN',\n  'nodePlacement.strategy': 'NETWORK_SIMPLEX',\n  'elk.padding': '[top=15.0,left=15.0,bottom=15.0,right=15.0]',\n  'spacing.nodeNodeBetweenLayers': '50',\n  'spacing.edgeNodeBetweenLayers': '50',\n  'spacing.nodeNode': '10',\n}\n\nexport function positionNonConnectedNodes<N extends GraphInputNode, L extends GraphInputLink> (\n  nodes: GraphNode<N, L>[],\n  y: number,\n  spacing: number,\n  width: number,\n  xStart = 0\n): void {\n  nodes.forEach((d, i) => {\n    const x = spacing / 2 + i * spacing\n    const rowIdx = width ? Math.floor(x / width) : 0\n    d.y = (y + rowIdx * spacing) || 0\n    d.x = width ? x % width + xStart : x + xStart\n  })\n}\n\nexport type GraphElkHierarchyNode<N extends GraphInputNode, L extends GraphInputLink> = {\n  id: string;\n  children: GraphNode<N, L>[] | GraphElkHierarchyNode<N, L>;\n  layoutOptions: GraphElkLayoutSettings;\n}\n\nexport type GraphElkHierarchyNodeMap<N extends GraphInputNode, L extends GraphInputLink>\n  = Map<string | undefined | null, GraphNode<N, L>[] | GraphElkHierarchyNodeMap<N, L>>\n\n\nexport function toElkHierarchy<N extends GraphInputNode, L extends GraphInputLink> (\n  d: GraphElkHierarchyNodeMap<N, L> | GraphNode<N, L>[],\n  layoutOptions: GenericAccessor<GraphElkLayoutSettings, string> | undefined\n): (GraphElkHierarchyNode<N, L> | GraphNode<N, L>)[] {\n  if (!(d instanceof Map)) return d\n\n  const hierarchyNode = Array.from(d.entries()).map(([key, value]) => {\n    const children = toElkHierarchy(value, layoutOptions)\n    if (key) {\n      const layoutOps = isPlainObject(layoutOptions) ? merge(DEFAULT_ELK_SETTINGS, layoutOptions) : merge(DEFAULT_ELK_SETTINGS, getValue(key, layoutOptions))\n      return {\n        id: key,\n        layoutOptions: layoutOps,\n        children,\n      } as GraphElkHierarchyNode<N, L>\n    } else {\n      return children\n    }\n  }).flat()\n\n  return hierarchyNode\n}\n\nexport function adjustElkHierarchyCoordinates (node: ElkNode): void {\n  const parentX = node.x\n  const parentY = node.y\n\n  node.edges?.forEach(edge => {\n    edge.sections?.forEach(section => {\n      section.startPoint.x += parentX\n      section.startPoint.y += parentY\n      section.endPoint.x += parentX\n      section.endPoint.y += parentY\n      section.bendPoints?.forEach(bendPoint => {\n        bendPoint.x += parentX\n        bendPoint.y += parentY\n      })\n    })\n\n    edge.labels?.forEach(label => {\n      label.x += parentX\n      label.y += parentY\n    })\n  })\n\n  node.children?.forEach(child => {\n    child.x += parentX\n    child.y += parentY\n    adjustElkHierarchyCoordinates(child)\n  })\n}\n", "import { min, max, group } from 'd3-array'\nimport type { SimulationNodeDatum } from 'd3-force'\nimport type { ElkNode } from 'elkjs/lib/elk.bundled.js'\nimport type { graphlib, Node } from 'dagre'\n\n// Core\nimport { GraphDataModel } from 'data-models/graph'\n\n// Utils\nimport { without, clamp, groupBy, unique, sortBy, getString, getNumber, getValue, merge, isFunction, isNil } from 'utils/data'\n\n// Types\nimport { GraphInputLink, GraphInputNode } from 'types/graph'\n\n// Local Types\nimport { GraphNode, GraphLink, GraphForceSimulationNode } from '../types'\n\n// Config\nimport { GraphConfigInterface } from '../config'\n\n// Helpers\nimport { getMaxNodeSize, configuredNodeSize, getNodeSize, getAverageNodeSize } from './node/helper'\nimport {\n  DEFAULT_ELK_SETTINGS,\n  adjustElkHierarchyCoordinates,\n  positionNonConnectedNodes,\n  toElkHierarchy,\n  GraphElkHierarchyNode,\n} from './layout-helpers'\n\nexport function applyLayoutCircular<N extends GraphInputNode, L extends GraphInputLink> (\n  datamodel: GraphDataModel<N, L, GraphNode<N, L>, GraphLink<N, L>>,\n  config: GraphConfigInterface<N, L>,\n  width: number,\n  height: number\n): void {\n  const { nonConnectedNodes, connectedNodes, nodes } = datamodel\n  const { layoutNonConnectedAside, nodeSize } = config\n\n  const activeWidth = width\n  const activeHeight = height\n\n  // Handle layout nodes\n  const layoutNodes = layoutNonConnectedAside ? connectedNodes : nodes\n  const maxNodeSize = getMaxNodeSize(layoutNodes, nodeSize)\n  const yRatio = activeHeight / maxNodeSize\n  const yScaling = yRatio < layoutNodes.length / 2 ? layoutNodes.length / 2 / yRatio : 1\n  const xRatio = activeWidth / maxNodeSize\n  const xScaling = xRatio < layoutNodes.length / 2 ? layoutNodes.length / 2 / xRatio : 1\n  const scaling = Math.max(xScaling, yScaling)\n\n  layoutNodes.forEach((d, i) => {\n    const rX = scaling * activeWidth / 2\n    const rY = scaling * activeHeight / 2 // maxNodeSize * layoutNodes.length / 4\n    const angle = 2 * i * Math.PI / layoutNodes.length\n    d.x = activeWidth / 2 + rX * Math.cos(angle)\n    d.y = activeHeight / 2 + rY * Math.sin(angle)\n  })\n\n  // Handle non-connected nodes\n  if (layoutNonConnectedAside) {\n    const maxSize = getMaxNodeSize(nonConnectedNodes, nodeSize)\n    const maxY = max<number>(connectedNodes.map(d => d.y))\n    const maxX = max<number>(connectedNodes.map(d => d.x))\n    const minX = min<number>(connectedNodes.map(d => d.x))\n    const graphWidth = maxX - minX\n    positionNonConnectedNodes(nonConnectedNodes, maxY + maxSize * 3, maxSize * 2.25, Math.max(graphWidth, width), minX)\n  }\n}\n\nexport function applyLayoutParallel<N extends GraphInputNode, L extends GraphInputLink> (\n  datamodel: GraphDataModel<N, L, GraphNode<N, L>, GraphLink<N, L>>,\n  config: GraphConfigInterface<N, L>,\n  width: number,\n  height: number,\n  orientation?: string\n): void {\n  const { nonConnectedNodes, connectedNodes, nodes } = datamodel\n  const {\n    layoutNonConnectedAside, layoutGroupOrder, layoutParallelSortConnectionsByGroup, layoutParallelNodesPerColumn,\n    layoutParallelSubGroupsPerRow, nodeSize, layoutNodeGroup, layoutParallelNodeSubGroup, layoutParallelGroupSpacing,\n  } = config\n\n  const activeWidth = width - configuredNodeSize(nodeSize)\n  const activeHeight = height - configuredNodeSize(nodeSize) - (nonConnectedNodes.length ? configuredNodeSize(nodeSize) * 5 : 0)\n\n  // Handle connected nodes\n  const layoutNodes = layoutNonConnectedAside ? connectedNodes : nodes\n  const groupNames = unique(layoutNodes.map(d => getString(d, layoutNodeGroup, d._index)))\n  const groupNamesSorted: string[] = sortBy(groupNames, d => layoutGroupOrder.indexOf(d))\n\n  const groups = groupNamesSorted.map(groupName => {\n    const groupNodes = layoutNodes.filter(d => getString(d, layoutNodeGroup, d._index) === groupName)\n    const groupedBySubgroup = groupBy(groupNodes, d => getString(d, layoutParallelNodeSubGroup, d._index))\n    const subgroups = Object.keys(groupedBySubgroup).map(name => ({\n      nodes: groupedBySubgroup[name],\n      name,\n    }))\n\n    return {\n      name: groupName,\n      nodes: groupNodes,\n      subgroups,\n    }\n  })\n\n  // Sort\n  const group = groups.find(g => g.name === layoutParallelSortConnectionsByGroup)\n  if (group) {\n    const sortMap: Record<string, number> = {}\n    let idx = 0\n    group.subgroups.forEach(subgroup => {\n      subgroup.nodes.forEach(node => {\n        node.links.forEach(link => {\n          const linkTargetId = link?.target._id\n          sortMap[linkTargetId] = idx\n          idx = idx + 1\n        })\n      })\n    })\n\n    without(groups, group).forEach(g => {\n      g.subgroups.forEach(subgroup => {\n        subgroup.nodes.sort((a, b) => {\n          return (sortMap[a._id] || 0) - (sortMap[b._id] || 0)\n        })\n      })\n    })\n  }\n\n  const maxN = max(groups, d => d.nodes?.length)\n  const labelApprxHeight = 40\n  const labelMargin = 10\n  const subgroupMargin = 40\n  const maxNodeSize = getMaxNodeSize(layoutNodes, nodeSize)\n\n  if (orientation === 'horizontal') {\n    const minHorizontalStep = 2 * maxNodeSize + labelMargin\n    const maxHorizontalStep = 3.5 * maxNodeSize + labelMargin\n    const horizontalStep = clamp(activeWidth / (maxN - 1), minHorizontalStep, maxHorizontalStep)\n\n    const maxVerticalStep = maxNodeSize * 4 + labelApprxHeight\n    const minVerticalStep = maxNodeSize * 1.5 + labelApprxHeight\n    const verticalStep = (maxNodeSize + layoutParallelGroupSpacing) || clamp(activeHeight / (groups.length - 1), minVerticalStep, maxVerticalStep)\n    const subgroupNodeStep = maxNodeSize + labelApprxHeight + labelMargin\n\n    let y0 = (groups.length < 2) ? height / 2 : 0\n    groups.forEach(group => {\n      let x0 = 0\n      let dy = 0\n      let subgroupMaxWidth = 0\n      let groupWidth = 0\n      let groupHeight = 0\n      let k = 0\n      group.subgroups.forEach(subgroup => {\n        const subgroupRows = Math.ceil(subgroup.nodes.length / layoutParallelNodesPerColumn)\n        let n = 0\n        let x = x0\n        let y = y0 + dy\n        subgroup.nodes.forEach(d => {\n          x = x + horizontalStep\n          d.x = x\n          d.y = y\n          groupWidth = Math.max(groupWidth, x)\n\n          n = n + 1\n          if (n >= layoutParallelNodesPerColumn) {\n            n = 0\n            y += subgroupNodeStep\n            x = x0\n          }\n        })\n\n        const subgroupWidth = Math.min(subgroup.nodes.length, layoutParallelNodesPerColumn) * horizontalStep\n        const subgroupHeight = subgroupRows * subgroupNodeStep\n        subgroupMaxWidth = Math.max(subgroupMaxWidth, subgroupWidth)\n        dy = dy + subgroupHeight + subgroupMargin\n        k = k + 1\n        if (k >= layoutParallelSubGroupsPerRow) {\n          k = 0\n          dy = 0\n          x0 = x0 + subgroupMaxWidth + subgroupMargin\n          subgroupMaxWidth = 0\n        }\n\n        groupHeight = Math.max(groupHeight, y)\n        // x0 += Math.min(subgroup.nodes.length, layoutParallelNodesPerColumn) * horizontalStep + subgroupMargin\n      })\n\n      // Center group horizontally\n      group.subgroups.forEach(subgroup => {\n        subgroup.nodes.forEach(d => {\n          d.x -= groupWidth / 2\n        })\n      })\n      groupWidth = 0\n\n      // Update y0 for the next group\n      y0 = groupHeight + verticalStep\n    })\n  } else {\n    const minHorizontalStep = 6 * maxNodeSize + labelMargin\n    const maxHorizontalStep = 10 * maxNodeSize + labelMargin\n    const horizontalStep = (maxNodeSize + layoutParallelGroupSpacing) || clamp(activeWidth / (maxN - 1), minHorizontalStep, maxHorizontalStep)\n\n    const maxVerticalStep = maxNodeSize * 2.0 + labelApprxHeight\n    const minVerticalStep = maxNodeSize * 1.5 + labelApprxHeight\n    const verticalStep = clamp(activeHeight / (groups.length - 1), minVerticalStep, maxVerticalStep)\n    const subgroupNodeStep = maxNodeSize * 2.0\n\n    let x0 = (groups.length < 2) ? width / 2 : 0\n    groups.forEach(group => {\n      let y0 = 0\n      let dx = 0 // Horizontal shift inside the group (column)\n      let subgroupMaxHeight = 0\n      let groupWidth = 0\n      let groupHeight = 0\n\n      let k = 0\n      group.subgroups.forEach(subgroup => {\n        const subgroupColumns = Math.ceil(subgroup.nodes.length / layoutParallelNodesPerColumn)\n        let n = 0\n        let y = y0\n        let x = x0 + dx\n        subgroup.nodes.forEach(d => {\n          y = y + verticalStep\n          d.x = x\n          d.y = y\n          groupHeight = Math.max(groupHeight, y)\n\n          n = n + 1\n          if (n >= layoutParallelNodesPerColumn) {\n            n = 0\n            x += subgroupNodeStep\n            y = y0\n          }\n        })\n\n        const subgroupHeight = Math.min(subgroup.nodes.length, layoutParallelNodesPerColumn) * verticalStep\n        const subgroupWidth = subgroupColumns * subgroupNodeStep\n        subgroupMaxHeight = Math.max(subgroupMaxHeight, subgroupHeight)\n        dx = dx + subgroupWidth + subgroupMargin\n        k = k + 1\n        if (k >= layoutParallelSubGroupsPerRow) {\n          k = 0\n          dx = 0\n          y0 = y0 + subgroupMaxHeight + subgroupMargin\n          subgroupMaxHeight = 0\n        }\n\n        groupWidth = Math.max(groupWidth, x)\n      })\n\n      // Center group vertically\n      group.subgroups.forEach(subgroup => {\n        subgroup.nodes.forEach(d => {\n          d.y -= groupHeight / 2\n        })\n      })\n      groupHeight = 0\n\n      // Update x0 for the next group\n      x0 = groupWidth + horizontalStep\n    })\n  }\n\n  // Handle non-connected nodes\n  if (layoutNonConnectedAside) {\n    const maxSize = getMaxNodeSize(nonConnectedNodes, nodeSize)\n    const maxY = max<number>(connectedNodes.map(d => d.y)) || 0\n    const maxX = max<number>(connectedNodes.map(d => d.x)) || 0\n    const minX = min<number>(connectedNodes.map(d => d.x)) || 0\n    const graphWidth = (maxX - minX) || width\n    positionNonConnectedNodes(nonConnectedNodes, maxY + maxSize * 3, maxSize * 2.25, Math.max(graphWidth, width))\n  }\n}\n\nexport async function applyLayoutDagre<N extends GraphInputNode, L extends GraphInputLink> (\n  datamodel: GraphDataModel<N, L, GraphNode<N, L>, GraphLink<N, L>>,\n  config: GraphConfigInterface<N, L>,\n  width: number\n): Promise<void> {\n  const { nonConnectedNodes, connectedNodes, nodes, links } = datamodel\n  const { nodeSize, layoutNonConnectedAside, dagreLayoutSettings, nodeStrokeWidth, nodeLabel } = config\n\n  // eslint-disable-next-line @typescript-eslint/naming-convention,@typescript-eslint/ban-ts-comment\n  // @ts-ignore\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  const { Graph } = await import('@unovis/graphlibrary')\n  // eslint-disable-next-line @typescript-eslint/naming-convention,@typescript-eslint/ban-ts-comment\n  // @ts-ignore\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  const { layout } = await import('@unovis/dagre-layout')\n\n  // https://github.com/dagrejs/dagre/wiki\n  const dagreGraph = new Graph() as graphlib.Graph<GraphNode<N, L>>\n\n  // Set an object for the graph label\n  dagreGraph.setGraph(dagreLayoutSettings)\n\n  // Default to assigning a new object as a label for each new edge.\n  dagreGraph.setDefaultEdgeLabel(() => ({}))\n\n  // Add nodes to the graph. The first argument is the node id. The second is\n  // metadata about the node. In this case we're going to add labels to each of\n  // our nodes.\n  const labelApprxHeight = 40\n  const nds = (layoutNonConnectedAside ? connectedNodes : nodes)\n  nds.forEach(node => {\n    dagreGraph.setNode(`${node._index}`, {\n      label: getString(node, nodeLabel, node._index),\n      width: getNumber(node, nodeSize, node._index) * 1.5 + getNumber(node, nodeStrokeWidth, node._index),\n      height: labelApprxHeight + getNumber(node, nodeSize, node._index) * 1.5,\n      originalNode: node,\n    })\n  })\n\n  // Add edges to the graph.\n  links.forEach(link => {\n    dagreGraph.setEdge(\n      `${link.source._index}`,\n      `${link.target._index}`\n    )\n  })\n\n  // Calculate the layout\n  layout(dagreGraph)\n\n  // Apply coordinates to the graph\n  dagreGraph.nodes().forEach(d => {\n    const node = dagreGraph.node(d) as Node<GraphNode<N, L>> & { originalNode: GraphNode<N, L>}\n    node.originalNode.x = node.x // width * d.x / dagreGraph._label.width\n    node.originalNode.y = node.y // height * d.y / dagreGraph._label.height\n  })\n\n  // Handle non-connected nodes\n  if (layoutNonConnectedAside) {\n    const maxNodeSize = getMaxNodeSize(nonConnectedNodes, nodeSize)\n    const maxY = max<number>(connectedNodes.map(d => d.y))\n    const maxX = max<number>(connectedNodes.map(d => d.x))\n    const minX = min<number>(connectedNodes.map(d => d.x))\n    const graphWidth = maxX - minX\n    positionNonConnectedNodes(nonConnectedNodes, maxY + maxNodeSize * 3, maxNodeSize * 2.25, Math.max(graphWidth, width), 0)\n  }\n}\n\nexport function applyLayoutConcentric<N extends GraphInputNode, L extends GraphInputLink> (\n  datamodel: GraphDataModel<N, L, GraphNode<N, L>, GraphLink<N, L>>,\n  config: GraphConfigInterface<N, L>,\n  width: number,\n  height: number\n): void {\n  const { nonConnectedNodes, connectedNodes, nodes } = datamodel\n  const { layoutNonConnectedAside, layoutGroupOrder, nodeSize, layoutNodeGroup } = config\n\n  const layoutNodes = layoutNonConnectedAside ? connectedNodes : nodes\n\n  const groupNames: string[] = unique(layoutNodes.map(d => getString(d, layoutNodeGroup, d._index)))\n  const groupNamesSorted: string[] = sortBy(groupNames, d => layoutGroupOrder.indexOf(d))\n\n  const groups = groupNamesSorted.map(groupName => ({\n    name: groupName,\n    nodes: layoutNodes.filter(d => getString(d, layoutNodeGroup, d._index) === groupName),\n  }))\n\n  // Handle connected nodes\n  let r = 2 * getAverageNodeSize(groups[0]?.nodes ?? [], nodeSize)\n  const widthToHeightRatio = width / height\n\n  groups.forEach((group, i) => {\n    const avgNodeSize = getAverageNodeSize(group.nodes, nodeSize)\n    const requiredRadius = 1.1 * avgNodeSize * group.nodes.length / Math.PI\n    if (r < requiredRadius) r = requiredRadius\n\n    group.nodes.forEach((node, j) => {\n      // If the first (central) group has only one node\n      if (i === 0 && group.nodes.length === 1) {\n        node.x = width / 2\n        node.y = height / 2\n      } else {\n        let dAngle = 0\n        if (i === 0 && group.nodes.length === 3) dAngle = Math.PI / 6\n        if (i === 0 && group.nodes.length === 4) dAngle = Math.PI / 4\n        const angle = 2 * j * Math.PI / group.nodes.length + i * Math.PI / 12 + dAngle\n        node.x = width / 2 + r * Math.cos(angle) * widthToHeightRatio\n        node.y = height / 2 + r * Math.sin(angle)\n      }\n    })\n\n    const groupSpacing = avgNodeSize * 3\n    r += groupSpacing\n  })\n\n  // Handle non-connected nodes\n  if (layoutNonConnectedAside) {\n    const maxSize = getMaxNodeSize(nonConnectedNodes, nodeSize)\n    const maxY = max<number>(connectedNodes.map(d => d.y))\n    const maxX = max<number>(connectedNodes.map(d => d.x))\n    const minX = min<number>(connectedNodes.map(d => d.x))\n    const graphWidth = maxX - minX\n    positionNonConnectedNodes(nonConnectedNodes, maxY + maxSize * 3, maxSize * 2.25, graphWidth, minX)\n  }\n}\n\nexport async function applyLayoutForce<N extends GraphInputNode, L extends GraphInputLink> (\n  datamodel: GraphDataModel<N, L, GraphNode<N, L>, GraphLink<N, L>>,\n  config: GraphConfigInterface<N, L>,\n  width: number\n): Promise<void> {\n  const { layoutNonConnectedAside, forceLayoutSettings, nodeSize } = config\n\n  const { forceSimulation, forceLink, forceManyBody, forceX, forceY, forceCollide } = await import('d3-force')\n\n  const { nonConnectedNodes, connectedNodes, nodes, links } = datamodel\n\n\n  // Apply fx and fy to nodes if present before running the simulation\n  if (forceLayoutSettings.fixNodePositionAfterSimulation) {\n    nodes.forEach((d: GraphForceSimulationNode<N, L>) => {\n      d.fx = isNil(d._state.fx) ? undefined : d._state.fx\n      d.fy = isNil(d._state.fy) ? undefined : d._state.fy\n    })\n  } else {\n    nodes.forEach((d: GraphForceSimulationNode<N, L>) => {\n      delete d._state.fx\n      delete d._state.fy\n    })\n  }\n\n  const simulation = forceSimulation(layoutNonConnectedAside ? connectedNodes : nodes)\n    .force('link', forceLink(links)\n      .id((d) => String((d as GraphNode<N, L>)._id))\n      .distance((l, i) => isFunction(forceLayoutSettings.linkDistance) ? forceLayoutSettings.linkDistance(l, i) : forceLayoutSettings.linkDistance)\n      .strength((l, i) => isFunction(forceLayoutSettings.linkStrength) ? forceLayoutSettings.linkStrength(l, i) : forceLayoutSettings.linkStrength)\n    )\n    .force('charge', forceManyBody().strength((d, i) => {\n      if (isFunction(forceLayoutSettings.charge)) {\n        return forceLayoutSettings.charge(d as GraphNode<N, L>, i)\n      } else {\n        const linkCount = links.reduce((count, l) => count + Number((l.source === d) || (l.target === d)), 0)\n        return forceLayoutSettings.charge * Math.sqrt(linkCount)\n      }\n    }))\n    .force('x', forceX().strength(forceLayoutSettings.forceXStrength))\n    .force('y', forceY().strength(forceLayoutSettings.forceYStrength))\n    .force('collide', forceCollide<SimulationNodeDatum & N>().radius((d, i) => getNodeSize(d, nodeSize, i)).iterations(1))\n    .stop()\n\n  // See https://bl.ocks.org/mbostock/1667139, https://github.com/d3/d3-force/blob/master/README.md#simulation_tick\n  const numIterations = forceLayoutSettings.numIterations ?? Math.ceil(Math.log(simulation.alphaMin()) / Math.log(1 - simulation.alphaDecay()))\n  for (let i = 0, n = numIterations; i < n; ++i) {\n    simulation.tick()\n  }\n\n  // Fix node positions to `_state` if requested.\n  // And remove fx and fy from the node datum if present to make sure the nodes are not fixed\n  // if the layout was changed to a different layout and then back to force\n  if (forceLayoutSettings.fixNodePositionAfterSimulation) {\n    nodes.forEach((d: GraphForceSimulationNode<N, L>) => {\n      delete d.fx\n      delete d.fy\n      d._state.fx = d.x\n      d._state.fy = d.y\n    })\n  }\n\n  // Handle non-connected nodes\n  if (layoutNonConnectedAside) {\n    const maxSize = getMaxNodeSize(nonConnectedNodes, nodeSize)\n    const maxY = max<number>(connectedNodes.map(d => d.y))\n    const maxX = max<number>(connectedNodes.map(d => d.x))\n    const minX = min<number>(connectedNodes.map(d => d.x))\n    const graphWidth = maxX - minX\n    positionNonConnectedNodes(nonConnectedNodes, maxY + maxSize * 6, maxSize * 2.25, Math.max(graphWidth, width), minX)\n  }\n}\n\nexport async function applyELKLayout<N extends GraphInputNode, L extends GraphInputLink> (\n  datamodel: GraphDataModel<N, L, GraphNode<N, L>, GraphLink<N, L>>,\n  config: GraphConfigInterface<N, L>,\n  width: number\n): Promise<void> {\n  const ELK = (await import('elkjs/lib/elk.bundled.js')).default\n  const elk = new ELK()\n\n  const labelApprxHeight = 30\n  const nodes = datamodel.nodes.map((n, i) => ({\n    ...n,\n    id: n._id,\n    width: getNumber(n, config.nodeSize, n._index) + getNumber(n, config.nodeStrokeWidth, n._index),\n    height: getNumber(n, config.nodeSize, n._index) + labelApprxHeight,\n    ...(config.layoutElkGetNodeShape ? config.layoutElkGetNodeShape(n, i) : {}),\n  }))\n\n  let elkNodes: (GraphNode<N, L> | GraphElkHierarchyNode<N, L>)[]\n  if (config.layoutElkNodeGroups) {\n    const groupingFunctions = config.layoutElkNodeGroups\n      .map(accessor => (d: GraphNode<N, L>) => getString(d, accessor, d._index)) as [(d: GraphNode<N, L>) => string]\n    const grouped = group(nodes, ...groupingFunctions)\n    elkNodes = toElkHierarchy(grouped, config.layoutElkSettings)\n  } else {\n    elkNodes = nodes\n  }\n\n  const rootNodeId = 'root'\n  const elkGraph: ElkNode = {\n    id: rootNodeId,\n    layoutOptions: merge(DEFAULT_ELK_SETTINGS, getValue(rootNodeId, config.layoutElkSettings)),\n    children: elkNodes as ElkNode[],\n    edges: datamodel.links.map(l => ({\n      id: l._id,\n      sources: [l.source._id],\n      targets: [l.target._id],\n    })),\n  }\n\n  const layout = await elk.layout(elkGraph)\n  adjustElkHierarchyCoordinates(layout)\n\n  nodes.forEach((node, i) => {\n    const found = datamodel.nodes.find(n => n._id === node.id)\n    if (!found) return\n\n    found.x = node.x\n    found.y = node.y\n  })\n\n  // Handle non-connected nodes\n  if (config.layoutNonConnectedAside) {\n    const maxSize = getMaxNodeSize(datamodel.nonConnectedNodes, config.nodeSize)\n    const maxY = max<number>(datamodel.connectedNodes.map(d => d.y)) || 0\n    const maxX = max<number>(datamodel.connectedNodes.map(d => d.x)) || 0\n    const minX = min<number>(datamodel.connectedNodes.map(d => d.x)) || 0\n    const graphWidth = (maxX - minX) || width\n    positionNonConnectedNodes(datamodel.nonConnectedNodes, maxY + maxSize * 3, maxSize * 2.25, Math.max(graphWidth, width))\n  }\n}\n", "import { min, max } from 'd3-array'\nimport { Transition } from 'd3-transition'\nimport { select, Selection, pointer } from 'd3-selection'\nimport { brush, BrushBehavior, D3BrushEvent } from 'd3-brush'\nimport { zoom, zoomTransform, zoomIdentity, ZoomTransform, D3ZoomEvent, ZoomBehavior } from 'd3-zoom'\nimport { drag, D3DragEvent } from 'd3-drag'\nimport { interval, Timer } from 'd3-timer'\n\n// Core\nimport { ComponentCore } from 'core/component'\nimport { GraphDataModel } from 'data-models/graph'\n\n// Types\nimport { GraphInputLink, GraphInputNode, GraphInputData } from 'types/graph'\nimport { Spacing } from 'types/spacing'\n\n// Utils\nimport { isNumber, clamp, shallowDiff, isFunction, getBoolean, isPlainObject, isEqual } from 'utils/data'\nimport { smartTransition } from 'utils/d3'\n\n// Local Types\nimport { GraphNode, GraphLink, GraphLayoutType, GraphLinkArrowStyle, GraphPanel, GraphNodeSelectionHighlightMode } from './types'\n\n// Config\nimport { GraphDefaultConfig, GraphConfigInterface } from './config'\n\n// Styles\nimport * as generalSelectors from './style'\nimport * as nodeSelectors from './modules/node/style'\nimport * as linkSelectors from './modules/link/style'\nimport * as panelSelectors from './modules/panel/style'\n\n// Modules\nimport { createNodes, updateNodes, removeNodes, zoomNodesThrottled, zoomNodes, updateNodesPartial, updateNodePositions } from './modules/node'\nimport { getMaxNodeSize, getNodeSize, getX, getY } from './modules/node/helper'\nimport {\n  createLinks,\n  updateLinks,\n  removeLinks,\n  zoomLinksThrottled,\n  zoomLinks,\n  animateLinkFlow,\n  updateLinksPartial,\n  updateLinkLines,\n} from './modules/link'\nimport { getDoubleArrowPath, getArrowPath } from './modules/link/helper'\nimport { createPanels, updatePanels, removePanels } from './modules/panel'\nimport { setPanelForNodes, updatePanelBBoxSize, updatePanelNumNodes, initPanels } from './modules/panel/helper'\nimport { applyLayoutCircular, applyLayoutParallel, applyLayoutDagre, applyLayoutConcentric, applyLayoutForce, applyELKLayout } from './modules/layout'\n\nexport class Graph<\n  N extends GraphInputNode,\n  L extends GraphInputLink,\n> extends ComponentCore<\n  GraphInputData<N, L>,\n  GraphConfigInterface<N, L>\n  > {\n  static selectors = {\n    root: generalSelectors.root,\n    graphGroup: generalSelectors.graphGroup,\n    background: generalSelectors.background,\n    node: nodeSelectors.gNode,\n    nodeShape: nodeSelectors.node,\n    nodeGauge: nodeSelectors.nodeGauge,\n    nodeSideLabel: nodeSelectors.sideLabelGroup,\n    nodeLabel: nodeSelectors.label,\n    dimmedNode: nodeSelectors.greyedOutNode,\n    link: linkSelectors.gLink,\n    linkLine: linkSelectors.link,\n    linkLabel: linkSelectors.linkLabelGroup,\n    dimmedLink: linkSelectors.greyedOutLink,\n    panel: panelSelectors.gPanel,\n    panelRect: panelSelectors.panel,\n    panelSelection: panelSelectors.panelSelection,\n    panelLabel: panelSelectors.label,\n    panelLabelText: panelSelectors.labelText,\n    panelSideIcon: panelSelectors.sideIconGroup,\n    panelSideIconShape: panelSelectors.sideIconShape,\n    panelSideIconSymbol: panelSelectors.sideIconSymbol,\n  }\n\n  static nodeSelectors = nodeSelectors\n  g: Selection<SVGGElement, unknown, null, undefined>\n  protected _defaultConfig = GraphDefaultConfig as unknown as GraphConfigInterface<N, L>\n  public config: GraphConfigInterface<N, L> = this._defaultConfig\n  datamodel: GraphDataModel<N, L, GraphNode<N, L>, GraphLink<N, L>> = new GraphDataModel()\n  private _selectedNodes: GraphNode<N, L>[]\n  private _selectedLink: GraphLink<N, L>\n\n  private _graphGroup: Selection<SVGGElement, unknown, null, undefined>\n  private _panelsGroup: Selection<SVGGElement, unknown, null, undefined>\n  private _linksGroup: Selection<SVGGElement, unknown, null, undefined>\n  private _nodesGroup: Selection<SVGGElement, unknown, null, undefined>\n  private _brush: Selection<SVGGElement, unknown, null, unknown>\n  private _timer: Timer\n\n  private _isFirstRender = true\n  private _prevWidth: number\n  private _prevHeight: number\n  private _shouldRecalculateLayout = false\n  private _currentLayoutType: GraphLayoutType | undefined\n  private _layoutCalculationPromise: Promise<void> | undefined\n\n  private _shouldFitLayout: boolean\n  private _shouldSetPanels = false\n  private _panels: GraphPanel[]\n\n  private _defs: Selection<SVGDefsElement, unknown, SVGGElement, undefined>\n  private _backgroundRect: Selection<SVGRectElement, unknown, SVGGElement, undefined>\n  private _zoomBehavior: ZoomBehavior<SVGGElement, unknown>\n  private _isAutoFitDisabled = false\n  private _scale: number\n  private _initialTransform: ZoomTransform\n  private _isDragging = false\n  private _brushBehavior: BrushBehavior<unknown>\n  private _groupDragInit: [number, number]\n\n  // A map for storing link total path lengths to optimize rendering performance\n  private _linkPathLengthMap: Map<string, number> = new Map()\n\n  events = {\n    [Graph.selectors.background]: {\n      click: this._onBackgroundClick.bind(this),\n    },\n    [Graph.selectors.node]: {\n      click: this._onNodeClick.bind(this),\n      mouseover: this._onNodeMouseOver.bind(this),\n      mouseout: this._onNodeMouseOut.bind(this),\n    },\n    [Graph.selectors.link]: {\n      click: this._onLinkClick.bind(this),\n      mouseover: this._onLinkMouseOver.bind(this),\n      mouseout: this._onLinkMouseOut.bind(this),\n    },\n  }\n\n  public get selectedNode (): GraphNode<N, L> {\n    return this._selectedNodes?.[0]\n  }\n\n  public get selectedNodes (): GraphNode<N, L>[] {\n    return this._selectedNodes\n  }\n\n  public get selectedLink (): GraphLink<N, L> {\n    return this._selectedLink\n  }\n\n  constructor (config?: GraphConfigInterface<N, L>) {\n    super()\n    if (config) this.setConfig(config)\n\n    this._backgroundRect = this.g.append('rect').attr('class', generalSelectors.background)\n    this._graphGroup = this.g.append('g').attr('class', generalSelectors.graphGroup)\n    this._brush = this.g.append('g').attr('class', generalSelectors.brush)\n\n    this._zoomBehavior = zoom<SVGGElement, unknown>()\n      .scaleExtent(this.config.zoomScaleExtent)\n      .on('zoom', (e: D3ZoomEvent<SVGGElement, unknown>) => this._onZoom(e.transform, e))\n      .on('start', (e: D3ZoomEvent<SVGGElement, unknown>) => this._onZoomStart(e.transform, e))\n      .on('end', (e: D3ZoomEvent<SVGGElement, unknown>) => this._onZoomEnd(e.transform, e))\n\n    this._brushBehavior = brush()\n      .on('start brush end', this._onBrush.bind(this))\n      .filter(event => event.shiftKey)\n      .keyModifiers(false)\n\n    this._panelsGroup = this._graphGroup.append('g').attr('class', panelSelectors.panels)\n    this._linksGroup = this._graphGroup.append('g').attr('class', linkSelectors.links)\n    this._nodesGroup = this._graphGroup.append('g').attr('class', nodeSelectors.nodes)\n\n    this._defs = this._graphGroup.append('defs')\n\n    this._getLinkArrowDefId = this._getLinkArrowDefId.bind(this)\n  }\n\n  setData (data: GraphInputData<N, L>): void {\n    const { config } = this\n    if (!config.shouldDataUpdate(this.datamodel.data, data, this.datamodel)) return\n\n    this.datamodel.nodeSort = config.nodeSort\n    this.datamodel.data = data\n    this._shouldRecalculateLayout = true\n    if (config.layoutAutofit) this._shouldFitLayout = true\n    this._shouldSetPanels = true\n\n    this._addSVGDefs()\n  }\n\n  setConfig (config: GraphConfigInterface<N, L>): void {\n    super.setConfig(config)\n    const hasLayoutConfigurationChanged = this._shouldLayoutRecalculate()\n\n    // If the data has changed (see above in `setData`) or the layout configuration has changed, we need to recalculate the layout\n    this._shouldRecalculateLayout = this._shouldRecalculateLayout || hasLayoutConfigurationChanged\n\n    // If the `config.layoutAutofit` is true and data has changed (see above in `setData`),\n    // or the layout configuration has changed, we need to fit the layout\n    this._shouldFitLayout = this._shouldFitLayout || hasLayoutConfigurationChanged\n\n    if (this._shouldFitLayout) this._isAutoFitDisabled = false\n    this._shouldSetPanels = true\n  }\n\n  get bleed (): Spacing {\n    const extraPadding = 50 // Extra padding to take into account labels and selection outlines\n    return { top: extraPadding, bottom: extraPadding, left: extraPadding, right: extraPadding }\n  }\n\n  _render (customDuration?: number): void {\n    const { config: { disableBrush, disableZoom, duration, layoutAutofit, zoomEventFilter }, datamodel } = this\n    if (!datamodel.nodes && !datamodel.links) return\n    const animDuration = isNumber(customDuration) ? customDuration : duration\n\n    this._backgroundRect\n      .attr('width', this._width)\n      .attr('height', this._height)\n      .attr('opacity', 0)\n\n    if ((this._prevWidth !== this._width || this._prevHeight !== this._height) && layoutAutofit) {\n      // Fit layout on resize\n      this._shouldFitLayout = true\n      this._prevWidth = this._width\n      this._prevHeight = this._height\n    }\n\n    // Handle brush behavior\n    if (!disableBrush) {\n      this._brushBehavior.extent([[0, 0], [this._width, this._height]])\n      this._brush.call(this._brushBehavior)\n\n      // Activate the brush when the shift key is pressed\n      select(window)\n        .on('keydown.unovis-graph', e => e.key === 'Shift' && this._activateBrush())\n        .on('keyup.unovis-graph', e => e.key === 'Shift' && this._clearBrush())\n\n      this._zoomBehavior.filter(event => !event.shiftKey)\n    } else {\n      this._brush.on('.brush', null)\n\n      select(window)\n        .on('keydown.unovis-graph', null)\n        .on('keyup.unovis-graph', null)\n\n      // Clear brush in case it was disabled in an active state\n      if (this._brush.classed('active')) this._clearBrush()\n    }\n\n    // Apply layout and render\n    if (this._shouldRecalculateLayout || !this._layoutCalculationPromise) {\n      this._layoutCalculationPromise = this._calculateLayout()\n\n      // Call `onLayoutCalculated` after the layout calculation is done and the `this._layoutCalculationPromise`\n      // variable is set because the `fitView` function relies on the promise to be initialized\n      this._layoutCalculationPromise.then(() => {\n        this.config.onLayoutCalculated?.(datamodel.nodes, datamodel.links)\n      })\n    }\n\n    // Redefining Zoom Behavior filter to the one specified in the config,\n    // or to the default one supporting `shiftKey` for node brushing\n    // See more: https://d3js.org/d3-zoom#zoom_filter\n    this._zoomBehavior.filter(\n      isFunction(zoomEventFilter)\n        ? zoomEventFilter\n        : (e: PointerEvent) => (!e.ctrlKey || e.type === 'wheel') && !e.button && !e.shiftKey) // Default filter\n\n    this._layoutCalculationPromise.then(() => {\n      // If the component has been destroyed while the layout calculation\n      // was in progress, we cancel the render\n      if (this.isDestroyed()) return\n\n      this._initPanelsData()\n\n      // Fit the view\n      if (this._isFirstRender) {\n        this._fit()\n        this._shouldFitLayout = false\n      } else if (this._shouldFitLayout && !this._isAutoFitDisabled) {\n        this._fit(duration)\n        this._shouldFitLayout = false\n      }\n\n      // Update Nodes and Links Selection State\n      this._resetSelectionGreyoutState()\n      if (this.config.selectedNodeId || this.config.selectedNodeIds) {\n        const selectedIds = this.config.selectedNodeIds ?? [this.config.selectedNodeId]\n        const selectedNodes = selectedIds.map(id => datamodel.getNodeById(id))\n        this._setNodeSelectionState(selectedNodes)\n      }\n\n      if (this.config.selectedLinkId) {\n        const selectedLink = datamodel.links.find(link => link.id === this.config.selectedLinkId)\n        this._setLinkSelectionState(selectedLink)\n      }\n\n      // Draw\n      this._drawNodes(animDuration)\n      this._drawLinks(animDuration)\n\n      // Link flow animation timer\n      if (!this._timer) {\n        const refreshRateMs = 35\n        this._timer = interval(this._onLinkFlowTimerFrame.bind(this), refreshRateMs)\n      }\n\n      // Zoom\n      if (disableZoom) this.g.on('.zoom', null)\n      else this.g.call(this._zoomBehavior).on('dblclick.zoom', null)\n\n      // We need to set up events and attributes again because the rendering might have been delayed by the layout\n      // calculation and they were not set up properly (see the render function of `ComponentCore`)\n      this._setUpComponentEventsThrottled()\n      this._setCustomAttributesThrottled()\n\n      // On render complete callback\n      this.config.onRenderComplete?.(this.g, datamodel.nodes, datamodel.links, this.config, animDuration, this._scale, this._containerWidth, this._containerHeight)\n      this._isFirstRender = false\n    })\n  }\n\n  private _drawNodes (duration: number): void {\n    const { config, datamodel } = this\n\n    const nodes: GraphNode<N, L>[] = datamodel.nodes\n    const nodeGroups = this._nodesGroup\n      .selectAll<SVGGElement, GraphNode<N, L>>(`.${nodeSelectors.gNode}:not(.${nodeSelectors.gNodeExit})`)\n      .data(nodes, d => String(d._id))\n\n    const nodeGroupsEnter = nodeGroups.enter().append('g')\n      .attr('class', nodeSelectors.gNode)\n      .call(createNodes, config, duration, this._scale)\n\n    const nodeGroupsMerged = nodeGroups.merge(nodeGroupsEnter)\n    const nodeUpdateSelection = updateNodes(nodeGroupsMerged, config, duration, this._scale)\n\n    this._drawPanels(nodeUpdateSelection, duration)\n\n    const nodesGroupExit = nodeGroups.exit<GraphNode<N, L>>()\n    nodesGroupExit\n      .classed(nodeSelectors.gNodeExit, true)\n      .call(removeNodes, config, duration, this._scale)\n\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\n    const thisRef = this\n    if (!config.disableDrag) {\n      const dragBehaviour = drag<SVGGElement, GraphNode<N, L>>()\n        .on('start drag end', function (event, d) {\n          thisRef._handleDrag(d, event, select(this))\n        })\n      nodeGroupsMerged.call(dragBehaviour)\n    } else {\n      nodeGroupsMerged.on('.drag', null)\n    }\n  }\n\n  private _drawLinks (duration: number): void {\n    const { config, datamodel: { links } } = this\n\n    const linkGroups = this._linksGroup\n      .selectAll<SVGGElement, GraphLink<N, L>>(`.${linkSelectors.gLink}:not(.${linkSelectors.gLinkExit}`)\n      .data(links, (d: GraphLink<N, L>) => String(d._id))\n\n    const linkGroupsEnter = linkGroups.enter().append('g')\n      .attr('class', linkSelectors.gLink)\n      .call(createLinks, config, duration)\n\n    const linkGroupsMerged = linkGroups.merge(linkGroupsEnter)\n    linkGroupsMerged.call(updateLinks, config, duration, this._scale, this._getLinkArrowDefId, this._linkPathLengthMap)\n\n    const linkGroupsExit = linkGroups.exit<GraphLink<N, L>>()\n    linkGroupsExit\n      .attr('class', linkSelectors.gLinkExit)\n      .call(removeLinks, config, duration)\n  }\n\n  private _drawPanels (\n    nodeUpdateSelection: Selection<SVGGElement, GraphNode<N, L>, SVGGElement, unknown> | Transition<SVGGElement, GraphNode<N, L>, SVGGElement, unknown>,\n    duration: number\n  ): void {\n    const { config } = this\n    smartTransition(this._panelsGroup, duration / 2)\n      .style('opacity', config.panels?.length ? 1 : 0)\n\n    if (!this._panels) return\n\n    const selection = ((nodeUpdateSelection as Transition<SVGGElement, GraphNode<N, L>, SVGGElement, unknown>).duration)\n      ? (nodeUpdateSelection as Transition<SVGGElement, GraphNode<N, L>, SVGGElement, unknown>).selection()\n      : nodeUpdateSelection as Selection<SVGGElement, GraphNode<N, L>, SVGGElement, unknown>\n\n    updatePanelNumNodes(selection, this._panels, config)\n    updatePanelBBoxSize(selection, this._panels, config)\n    const panelData = this._panels.filter(p => p._numNodes)\n    const panelGroup = this._panelsGroup\n      .selectAll<SVGGElement, GraphPanel>(`.${panelSelectors.gPanel}`)\n      .data(panelData, p => p.label)\n\n    const panelGroupExit = panelGroup.exit<GraphPanel<N, L>>()\n    panelGroupExit.call(removePanels, config, duration)\n\n    const panelGroupEnter = panelGroup.enter().append('g')\n      .attr('class', panelSelectors.gPanel)\n      .call(createPanels, selection)\n    const panelGroupMerged = panelGroup.merge(panelGroupEnter)\n\n    this._updatePanels(panelGroupMerged, duration)\n  }\n\n  private _updatePanels (panelToUpdate: Selection<SVGGElement, GraphPanel, SVGGElement, unknown>, duration: number): void {\n    const { config } = this\n    if (!this._panels) return\n\n    panelToUpdate.call(updatePanels, config, duration)\n  }\n\n  private async _calculateLayout (): Promise<void> {\n    const { config, datamodel } = this\n\n    // If the layout type has changed, we need to reset the node positions if they were fixed before\n    if (this._currentLayoutType !== config.layoutType) {\n      for (const node of datamodel.nodes) {\n        delete node._state.fx\n        delete node._state.fy\n      }\n    }\n\n    switch (config.layoutType) {\n      case GraphLayoutType.Precalculated:\n        break\n      case GraphLayoutType.Parallel:\n        applyLayoutParallel(datamodel, config, this._width, this._height)\n        break\n      case GraphLayoutType.ParallelHorizontal:\n        applyLayoutParallel(datamodel, config, this._width, this._height, 'horizontal')\n        break\n      case GraphLayoutType.Dagre:\n        await applyLayoutDagre(datamodel, config, this._width)\n        break\n      case GraphLayoutType.Force:\n        await applyLayoutForce(datamodel, config, this._width)\n        break\n      case GraphLayoutType.Concentric:\n        applyLayoutConcentric(datamodel, config, this._width, this._height)\n        break\n      case GraphLayoutType.Elk:\n        await applyELKLayout(datamodel, config, this._width)\n        break\n      case GraphLayoutType.Circular:\n      default:\n        applyLayoutCircular(datamodel, config, this._width, this._height)\n        break\n    }\n\n    // We need to update the panels data right after the layout calculation\n    // because we want to have the latest coordinates before calling `onLayoutCalculated`\n    this._initPanelsData()\n\n    this._shouldRecalculateLayout = false\n    this._currentLayoutType = config.layoutType as GraphLayoutType\n  }\n\n  private _initPanelsData (): void {\n    const { config, datamodel } = this\n\n    if (this._shouldSetPanels) {\n      this._panels = initPanels(config.panels)\n      setPanelForNodes(this._panels, datamodel.nodes, this.config)\n      this._shouldSetPanels = false\n    }\n  }\n\n  private _fit (duration = 0, nodeIds?: (string | number)[]): void {\n    const { datamodel: { nodes } } = this\n    const fitViewNodes = nodeIds?.length ? nodes.filter(n => nodeIds.includes(n.id)) : nodes\n    const transform = this._getTransform(fitViewNodes)\n    smartTransition(this.g, duration)\n      .call(this._zoomBehavior.transform, transform)\n    this._onZoom(transform)\n  }\n\n  private _getTransform (nodes: GraphNode<N, L>[]): ZoomTransform {\n    const { nodeSize, zoomScaleExtent } = this.config\n    const { left, top, right, bottom } = this.bleed\n\n    const maxNodeSize = getMaxNodeSize(nodes, nodeSize)\n    const w = this._width\n    const h = this._height\n\n    const xExtent = [\n      min(nodes, d => getX(d) - maxNodeSize / 2 - (max((d._panels || []).map(p => p._padding.left)) || 0)),\n      max(nodes, d => getX(d) + maxNodeSize / 2 + (max((d._panels || []).map(p => p._padding.right)) || 0)),\n    ]\n    const yExtent = [\n      min(nodes, d => getY(d) - maxNodeSize / 2 - (max((d._panels || []).map(p => p._padding.top)) || 0)),\n      max(nodes, d => getY(d) + maxNodeSize / 2 + (max((d._panels || []).map(p => p._padding.bottom)) || 0)),\n    ]\n\n    if (xExtent.some(item => item === undefined) || yExtent.some(item => item === undefined)) {\n      console.warn('Unovis | Graph: Some of the node coordinates are undefined. This can happen if you try to fit the graph before the layout has been calculated.')\n      return zoomIdentity\n    }\n\n    const xScale = w / (xExtent[1] - xExtent[0] + left + right)\n    const yScale = h / (yExtent[1] - yExtent[0] + top + bottom)\n\n    const clampedScale = clamp(min([xScale, yScale]), zoomScaleExtent[0], zoomScaleExtent[1])\n\n    const xCenter = (xExtent[1] + xExtent[0]) / 2\n    const yCenter = (yExtent[1] + yExtent[0]) / 2\n    const translateX = this._width / 2 - xCenter * clampedScale\n    const translateY = this._height / 2 - yCenter * clampedScale\n    const transform = zoomIdentity\n      .translate(translateX, translateY)\n      .scale(clampedScale)\n\n    return transform\n  }\n\n\n  private _setNodeSelectionState (nodesToSelect: (GraphNode<N, L> | undefined)[]): void {\n    const { config, datamodel } = this\n\n    // Grey out all nodes and set us unselected\n    for (const n of datamodel.nodes) {\n      n._state.selected = false\n      if (config.nodeSelectionHighlightMode !== GraphNodeSelectionHighlightMode.None) {\n        n._state.greyout = true\n      }\n    }\n\n    // Grey out all links and set us unselected\n    for (const l of datamodel.links) {\n      l._state.selected = false\n      if (config.nodeSelectionHighlightMode !== GraphNodeSelectionHighlightMode.None) {\n        l._state.greyout = true\n      }\n    }\n\n    // Filter out non-existing nodes\n    this._selectedNodes = nodesToSelect.filter(n => {\n      const doesNodeExist = Boolean(n)\n      if (!doesNodeExist) console.warn('Unovis | Graph: Select Node: Not found')\n\n      return doesNodeExist\n    })\n\n    //  Set provided nodes as selected and ungreyout\n    for (const n of this._selectedNodes) {\n      n._state.selected = true\n      n._state.greyout = false\n    }\n\n    // Highlight connected links and nodes\n    if (config.nodeSelectionHighlightMode === GraphNodeSelectionHighlightMode.GreyoutNonConnected) {\n      const connectedLinks = datamodel.links.filter(l => this._selectedNodes.includes(l.source) || this._selectedNodes.includes(l.target))\n      connectedLinks.forEach(l => {\n        l.source._state.greyout = false\n        l.target._state.greyout = false\n        l._state.greyout = false\n      })\n    }\n  }\n\n  private _setLinkSelectionState (link: GraphLink<N, L>): void {\n    const { datamodel: { nodes, links } } = this\n    if (!link) console.warn('Unovis: Graph: Select Link: Not found')\n\n    this._selectedLink = link\n    const selectedLinkSource = link?.source as GraphNode<N, L>\n    const selectedLinkTarget = link?.target as GraphNode<N, L>\n\n    // Apply grey out\n    nodes.forEach(n => {\n      n._state.selected = false\n      n._state.greyout = true\n      if (selectedLinkTarget?._id === n._id || selectedLinkSource?._id === n._id) {\n        link._state.greyout = false\n      }\n    })\n\n    links.forEach(l => {\n      l._state.greyout = true\n      const source = l.source as GraphNode<N, L>\n      const target = l.target as GraphNode<N, L>\n      if ((source._id === selectedLinkSource?._id) && (target._id === selectedLinkTarget?._id)) {\n        source._state.greyout = false\n        target._state.greyout = false\n        l._state.greyout = false\n      }\n    })\n\n    links.forEach(l => {\n      delete l._state.selected\n    })\n\n    if (link) link._state.selected = true\n  }\n\n  private _resetSelectionGreyoutState (): void {\n    const { datamodel: { nodes, links } } = this\n    this._selectedNodes = []\n    this._selectedLink = undefined\n\n    // Disable Greyout\n    nodes.forEach(n => {\n      delete n._state.selected\n      delete n._state.greyout\n    })\n\n    links.forEach(l => {\n      delete l._state.greyout\n      delete l._state.selected\n    })\n  }\n\n  private _updateNodesLinksPartial (): void {\n    const { config } = this\n\n    const linkElements = this._linksGroup.selectAll<SVGGElement, GraphLink<N, L>>(`.${linkSelectors.gLink}`)\n    linkElements.call(updateLinksPartial, config, this._scale)\n\n    const nodeElements = this._nodesGroup.selectAll<SVGGElement, GraphNode<N, L>>(`.${nodeSelectors.gNode}`)\n    nodeElements.call(updateNodesPartial, config, config.duration, this._scale)\n  }\n\n  private _onBackgroundClick (): void {\n    this._resetSelectionGreyoutState()\n    this._updateNodesLinksPartial()\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\n  private _onNodeClick (d: GraphNode<N, L>): void {\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\n  private _onNodeMouseOut (d: GraphNode<N, L>): void {\n    this._updateNodesLinksPartial()\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\n  private _onNodeMouseOver (d: GraphNode<N, L>): void {\n    this._updateNodesLinksPartial()\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\n  private _onLinkClick (d: GraphLink<N, L>): void {\n  }\n\n  private _onLinkMouseOver (d: GraphLink<N, L>): void {\n    if (this._isDragging) return\n\n    if (this.config.linkHighlightOnHover) d._state.hovered = true\n    this._updateNodesLinksPartial()\n  }\n\n  private _onLinkMouseOut (d: GraphLink<N, L>): void {\n    if (this._isDragging) return\n\n    delete d._state.hovered\n    this._updateNodesLinksPartial()\n  }\n\n  private _onLinkFlowTimerFrame (elapsed = 0): void {\n    const { config: { linkFlow, linkFlowAnimDuration }, datamodel: { links } } = this\n\n    const hasLinksWithFlow = links.some((d, i) => getBoolean(d, linkFlow, i))\n    if (!hasLinksWithFlow) return\n\n    const t = (elapsed % linkFlowAnimDuration) / linkFlowAnimDuration\n    const linkElements = this._linksGroup.selectAll<SVGGElement, GraphLink<N, L>>(`.${linkSelectors.gLink}`)\n\n    const linksToAnimate = linkElements.filter(d => !d._state.greyout)\n    linksToAnimate.each(d => { d._state.flowAnimTime = t })\n    animateLinkFlow(linksToAnimate, this.config, this._scale, this._linkPathLengthMap)\n  }\n\n  private _onZoom (t: ZoomTransform, event?: D3ZoomEvent<SVGGElement, unknown>): void {\n    const { config, datamodel: { nodes } } = this\n    const transform = t || event.transform\n    this._scale = transform.k\n    this._graphGroup.attr('transform', transform.toString())\n    if (isFunction(config.onZoom)) config.onZoom(this._scale, config.zoomScaleExtent, event, transform)\n\n    // console.warn('Unovis | Graph: Zoom: ', transform)\n    if (!this._initialTransform) this._initialTransform = transform\n\n    // If the event was triggered by a mouse interaction (pan or zoom) we don't\n    //   refit the layout after recalculation (e.g. on container resize)\n    if (event?.sourceEvent) {\n      const diff = Object.keys(transform).reduce((acc, prop) => {\n        const propVal = transform[prop as keyof ZoomTransform] as number\n        const initialPropVal = this._initialTransform[prop as keyof ZoomTransform] as number\n        const dVal = Math.abs(propVal - initialPropVal)\n        const scaledDVal = prop === 'k' ? 20 * dVal : dVal / 15\n        acc += scaledDVal\n        return acc\n      }, 0)\n\n      if (diff > config.layoutAutofitTolerance) this._isAutoFitDisabled = true\n      else this._isAutoFitDisabled = false\n    }\n\n    this._nodesGroup.selectAll<SVGGElement, GraphNode<N, L>>(`.${nodeSelectors.gNode}`)\n      .call(\n        (nodes.length > config.zoomThrottledUpdateNodeThreshold ? zoomNodesThrottled : zoomNodes) as typeof zoomNodes,\n        config,\n        this._scale\n      )\n\n    this._linksGroup.selectAll<SVGGElement, GraphLink<N, L>>(`.${linkSelectors.gLink}`)\n      .call(\n        (nodes.length > config.zoomThrottledUpdateNodeThreshold ? zoomLinksThrottled : zoomLinks) as typeof zoomLinks,\n        config,\n        this._scale,\n        this._getLinkArrowDefId\n      )\n  }\n\n  private _onZoomStart (t: ZoomTransform, event?: D3ZoomEvent<SVGGElement, unknown>): void {\n    const { config } = this\n    const transform = t || event.transform\n    this._scale = transform.k\n    if (isFunction(config.onZoomStart)) config.onZoomStart(this._scale, config.zoomScaleExtent, event, transform)\n  }\n\n  private _onZoomEnd (t: ZoomTransform, event?: D3ZoomEvent<SVGGElement, unknown>): void {\n    const { config } = this\n    const transform = t || event.transform\n    this._scale = transform.k\n    if (isFunction(config.onZoomEnd)) config.onZoomEnd(this._scale, config.zoomScaleExtent, event, transform)\n  }\n\n  private _updateNodePosition (d: GraphNode<N, L>, x: number, y: number): void {\n    const transform = zoomTransform(this.g.node())\n    const scale = transform.k\n\n    // Prevent the node from being dragged offscreen or outside its panel\n    const panels = this._panels?.filter(p => p.nodes.includes(d._id)) ?? []\n    const nodeSizeValue = getNodeSize(d, this.config.nodeSize, d._index)\n    const maxY = min([(this._height - transform.y) / scale, ...panels.map(p => p._y + p._height)]) - nodeSizeValue / 2\n    const maxX = min([(this._width - transform.x) / scale, ...panels.map(p => p._x + p._width)]) - nodeSizeValue / 2\n    const minY = max([-transform.y / scale, ...panels.map(p => p._y)]) + nodeSizeValue / 2\n    const minX = max([-transform.x / scale, ...panels.map(p => p._x)]) + nodeSizeValue / 2\n\n    if (y < minY) y = minY\n    else if (y > maxY) y = maxY\n    if (x < minX) x = minX\n    else if (x > maxX) x = maxX\n\n    // Snap to Layout\n    if (Math.sqrt(Math.pow(x - d.x, 2) + Math.pow(y - d.y, 2)) < 15) {\n      x = d.x\n      y = d.y\n    }\n\n    // Assign coordinates\n    d._state.fx = x\n    d._state.fy = y\n    if (d._state.fx === d.x) delete d._state.fx\n    if (d._state.fy === d.y) delete d._state.fy\n  }\n\n  private _onBrush (event: D3BrushEvent<SVGGElement>): void {\n    if (!event.selection || !event.sourceEvent) return\n    const { config } = this\n    const transform = zoomTransform(this._graphGroup.node())\n    const [xMin, yMin] = transform.invert(event.selection[0] as [number, number])\n    const [xMax, yMax] = transform.invert(event.selection[1] as [number, number])\n\n    // Update brushed nodes\n    this._nodesGroup.selectAll<SVGGElement, GraphNode<N, L>>(`.${nodeSelectors.gNode}`)\n      .each(n => {\n        const x = getX(n)\n        const y = getY(n)\n        n._state.brushed = x >= xMin && x <= xMax && y >= yMin && y <= yMax\n      })\n      .classed(nodeSelectors.brushed, n => n._state.brushed)\n\n    const brushedNodes = this._nodesGroup.selectAll<SVGGElement, GraphNode<N, L>>(`.${nodeSelectors.brushed}`)\n      .call(updateNodesPartial, config, 0, this._scale)\n\n    this._brush.classed('active', event.type !== 'end')\n    config.onNodeSelectionBrush?.(brushedNodes.data(), event)\n  }\n\n\n  private _handleDrag (\n    d: GraphNode<N, L>,\n    event: D3DragEvent<SVGGElement, GraphNode<N, L>, unknown>,\n    nodeSelection: Selection<SVGGElement, GraphNode<N, L>, SVGGElement, unknown>\n  ): void {\n    if (event.sourceEvent.shiftKey && d._state.brushed) {\n      this._dragSelectedNodes(event)\n    } else if (!event.sourceEvent.shiftKey) {\n      switch (event.type) {\n        case 'start':\n          this._onDragStarted(d, event, nodeSelection)\n          break\n        case 'drag':\n          this._onDragged(d, event)\n          break\n        case 'end':\n          this._onDragEnded(d, event, nodeSelection)\n          break\n      }\n    }\n  }\n\n  private _onDragStarted (\n    d: GraphNode<N, L>,\n    event: D3DragEvent<SVGGElement, GraphNode<N, L>, unknown>,\n    nodeSelection: Selection<SVGGElement, GraphNode<N, L>, SVGGElement, unknown>\n  ): void {\n    const { config } = this\n    this._isDragging = true\n    d._state.isDragged = true\n    nodeSelection.call(updateNodes, config, 0, this._scale)\n    config.onNodeDragStart?.(d, event)\n  }\n\n  private _onDragged (\n    d: GraphNode<N, L>,\n    event: D3DragEvent<SVGGElement, GraphNode<N, L>, unknown>\n  ): void {\n    const { config } = this\n    const transform = zoomTransform(this.g.node())\n    const scale = transform.k\n\n    // Update node position\n    const [x, y] = pointer(event, this._graphGroup.node())\n    this._updateNodePosition(d, x, y)\n\n    // Update affected DOM elements\n    const nodeSelection = this._nodesGroup.selectAll<SVGGElement, GraphNode<N, L>>(`.${nodeSelectors.gNode}`)\n    const nodeToUpdate = nodeSelection.filter((n: GraphNode<N, L>) => n._id === d._id)\n    nodeToUpdate.call(updateNodes, config, 0, scale)\n\n    const linkSelection = this._linksGroup.selectAll<SVGGElement, GraphLink<N, L>>(`.${linkSelectors.gLink}`)\n    const linksToUpdate = linkSelection.filter((l: L) => {\n      const source = l.source as GraphNode<N, L>\n      const target = l.target as GraphNode<N, L>\n      return source._id === d._id || target._id === d._id\n    })\n    linksToUpdate.call(updateLinks, config, 0, scale, this._getLinkArrowDefId, this._linkPathLengthMap)\n    const linksToAnimate = linksToUpdate.filter(d => d._state.greyout)\n    if (linksToAnimate.size()) animateLinkFlow(linksToAnimate, config, this._scale, this._linkPathLengthMap)\n\n    config.onNodeDrag?.(d, event)\n  }\n\n  private _onDragEnded (\n    d: GraphNode<N, L>,\n    event: D3DragEvent<SVGGElement, GraphNode<N, L>, unknown>,\n    nodeSelection: Selection<SVGGElement, GraphNode<N, L>, SVGGElement, unknown>\n  ): void {\n    const { config } = this\n    this._isDragging = false\n    d._state.isDragged = false\n    nodeSelection.call(updateNodes, config, 0, this._scale)\n    config.onNodeDragEnd?.(d, event)\n  }\n\n  private _dragSelectedNodes (event: D3DragEvent<SVGGElement, GraphNode<N, L>, unknown>): void {\n    const { config } = this\n    const curr = pointer(event, this._graphGroup.node())\n\n    const selectedNodes = smartTransition(\n      this._nodesGroup.selectAll<SVGGElement, GraphNode<N, L>>(`.${nodeSelectors.brushed}`)\n    ) as Selection<SVGGElement, GraphNode<N, L>, SVGGElement, unknown>\n\n    if (event.type === 'start') {\n      this._groupDragInit = curr\n      this._isDragging = true\n      selectedNodes.each(n => {\n        n.x = getX(n)\n        n.y = getY(n)\n        n._state.isDragged = true\n      })\n    } else if (event.type === 'drag') {\n      const dx = curr[0] - this._groupDragInit[0]\n      const dy = curr[1] - this._groupDragInit[1]\n\n      selectedNodes.each(n => this._updateNodePosition(n, n.x + dx, n.y + dy))\n\n      const connectedLinks = smartTransition(\n        this._linksGroup.selectAll<SVGGElement, GraphLink<N, L>>(`.${linkSelectors.gLink}`)\n          .filter(l => l.source?._state?.isDragged || l.target?._state?.isDragged)\n      ) as Selection<SVGGElement, GraphLink<N, L>, SVGGElement, unknown>\n\n      connectedLinks.call(updateLinks, this.config, 0, this._scale, this._getLinkArrowDefId, this._linkPathLengthMap)\n    } else {\n      this._isDragging = false\n      selectedNodes.each(n => { n._state.isDragged = false })\n    }\n    selectedNodes.call(updateNodes, config, 0, this._scale)\n    this.config.onNodeSelectionDrag?.(selectedNodes.data(), event)\n  }\n\n  private _activateBrush (): void {\n    this._brush.classed('active', true)\n    this._nodesGroup.selectAll(`.${nodeSelectors.gNode}`)\n      .classed(nodeSelectors.brushable, true)\n  }\n\n  private _clearBrush (): void {\n    this._brush.classed('active', false).call(this._brushBehavior?.clear)\n\n    this._nodesGroup.selectAll<SVGGElement, GraphNode<N, L>>(`.${nodeSelectors.gNode}`)\n      .classed(nodeSelectors.brushable, false)\n      .classed(nodeSelectors.brushed, false)\n      .each(n => { n._state.brushed = false })\n      .call(updateNodesPartial, this.config, 0, this._scale)\n  }\n\n  private _shouldLayoutRecalculate (): boolean {\n    const { prevConfig, config } = this\n    if (prevConfig.layoutType !== config.layoutType) return true\n    if (prevConfig.layoutNonConnectedAside !== config.layoutNonConnectedAside) return true\n\n    if (prevConfig.layoutType === GraphLayoutType.Force) {\n      const forceSettingsDiff = shallowDiff(prevConfig.forceLayoutSettings, config.forceLayoutSettings)\n      if (Object.keys(forceSettingsDiff).length) return true\n    }\n\n    if (prevConfig.layoutType === GraphLayoutType.Dagre) {\n      const dagreSettingsDiff = shallowDiff(prevConfig.dagreLayoutSettings, config.dagreLayoutSettings)\n      if (Object.keys(dagreSettingsDiff).length) return true\n    }\n\n    if (prevConfig.layoutType === GraphLayoutType.Elk) {\n      if (isPlainObject(prevConfig.layoutElkSettings) && isPlainObject(config.layoutElkSettings)) {\n        // Do a deeper comparison if `config.layoutElkSettings` is an object\n        const elkSettingsDiff = shallowDiff(\n          prevConfig.layoutElkSettings as Record<string, string>,\n          config.layoutElkSettings as Record<string, string>\n        )\n        return Boolean(Object.keys(elkSettingsDiff).length)\n      } else {\n        // Otherwise, do a simple `===` comparison\n        return prevConfig.layoutElkSettings !== config.layoutElkSettings\n      }\n    }\n\n    if (\n      prevConfig.layoutType === GraphLayoutType.Parallel ||\n      prevConfig.layoutType === GraphLayoutType.ParallelHorizontal ||\n      prevConfig.layoutType === GraphLayoutType.Concentric\n    ) {\n      if (!isEqual(prevConfig.layoutGroupOrder, config.layoutGroupOrder)) return true\n      if (prevConfig.layoutParallelNodesPerColumn !== config.layoutParallelNodesPerColumn) return true\n      if (prevConfig.layoutParallelSortConnectionsByGroup !== config.layoutParallelSortConnectionsByGroup) return true\n    }\n\n    return false\n  }\n\n  private _getLinkArrowDefId (arrow: GraphLinkArrowStyle | undefined): string | null {\n    return arrow ? `${this.uid}-${arrow}` : null\n  }\n\n  private _addSVGDefs (): void {\n    // Clean up old defs\n    this._defs.selectAll('*').remove()\n\n    // Single Arrow\n    this._defs.append('path').attr('d', getArrowPath())\n      .attr('id', this._getLinkArrowDefId(GraphLinkArrowStyle.Single))\n\n    // Double Arrow\n    this._defs.append('path').attr('d', getDoubleArrowPath())\n      .attr('id', this._getLinkArrowDefId(GraphLinkArrowStyle.Double))\n  }\n\n  public zoomIn (increment = 0.3): void {\n    const scaleBy = 1 + increment\n    smartTransition(this.g, this.config.duration / 2)\n      .call(this._zoomBehavior.scaleBy, scaleBy)\n  }\n\n  public zoomOut (increment = 0.3): void {\n    const scaleBy = 1 - increment\n    smartTransition(this.g, this.config.duration / 2)\n      .call(this._zoomBehavior.scaleBy, scaleBy)\n  }\n\n  public setZoom (zoomLevel: number): void {\n    smartTransition(this.g, this.config.duration / 2)\n      .call(this._zoomBehavior.scaleTo, zoomLevel)\n  }\n\n  public getZoom (): number {\n    return zoomTransform(this.g.node()).k\n  }\n\n  public fitView (duration = this.config.duration, nodeIds?: (string | number)[]): void {\n    this._layoutCalculationPromise?.then(() => {\n      this._fit(duration, nodeIds)\n    })\n  }\n\n  /** Enable automatic fitting to container if it was disabled due to previous zoom / pan interactions */\n  public resetAutofitState (): void {\n    this._isAutoFitDisabled = false\n  }\n\n  /** Get current coordinates of the nodes as an array of { id: string; x: number; y: number } objects */\n  public getNodesCoordinates (): { id: string; x: number; y: number }[] {\n    const { datamodel: { nodes } } = this\n    return nodes.map(n => ({\n      id: n._id,\n      x: n.x,\n      y: n.y,\n    }))\n  }\n\n  /** Get node coordinates by id as { id: string; x: number; y: number } */\n  public getNodeCoordinatesById (id: string): { id: string; x: number; y: number } | undefined {\n    const { datamodel: { nodes } } = this\n    const node = nodes.find(n => n._id === id)\n\n    if (!node) {\n      console.warn(`Unovis | Graph: Node ${id} not found`)\n      return undefined\n    } else {\n      return {\n        id: node._id,\n        x: node.x,\n        y: node.y,\n      }\n    }\n  }\n\n  /** Set the node state by id */\n  public setNodeStateById (nodeId: string, state: GraphNode<N, L>['_state']): void {\n    this.datamodel.setNodeStateById(nodeId, state)\n  }\n\n  /** Call a partial render to update the positions of the nodes and their links.\n    * This can be useful when you've changed the node positions manually outside\n    * of the component and want to update the graph.\n  */\n  public updateNodePositions (duration?: number): void {\n    const { config } = this\n    const animDuration = isNumber(duration) ? duration : config.duration\n\n    const linkElements = this._linksGroup.selectAll<SVGGElement, GraphLink<N, L>>(`.${linkSelectors.gLink}:not(.${linkSelectors.gLinkExit}`)\n    updateLinkLines(linkElements, config, animDuration, this._scale, this._getLinkArrowDefId, this._linkPathLengthMap)\n\n    const nodeElements = this._nodesGroup.selectAll<SVGGElement, GraphNode<N, L>>(`.${nodeSelectors.gNode}:not(.${nodeSelectors.gNodeExit})`)\n    updateNodePositions(nodeElements, animDuration)\n  }\n}\n", "export interface VisControlItemInterface {\n  icon: string;\n  callback?: (event: MouseEvent) => any;\n  disabled?: boolean;\n  borderLeft?: boolean;\n  borderTop?: boolean;\n  borderRight?: boolean;\n  borderBottom?: boolean;\n}\n\nexport enum VisControlsOrientation {\n  Horizontal = 'horizontal',\n  Vertical = 'vertical',\n}\n", "// Local Types\nimport { VisControlItemInterface, VisControlsOrientation } from './types'\n\nexport interface VisControlsConfigInterface {\n  /** Controls items array, VisControlItemInterface[]. Default: `[]` */\n  items?: VisControlItemInterface[];\n  /** Controls orientation. `VisControlsOrientation.Horizontal` or `VisControlsOrientation.Horizontal`. Default: `VisControlsOrientation.Horizontal` */\n  orientation?: VisControlsOrientation;\n}\n\nexport const VisControlsDefaultConfig: VisControlsConfigInterface = {\n  items: [],\n  orientation: VisControlsOrientation.Horizontal,\n}\n\n", "import { css, injectGlobal } from '@emotion/css'\nimport { UNOVIS_ICON_FONT_FAMILY_DEFAULT } from 'styles/index'\n\nexport const root = css`\n  label: vis-controls-component;\n`\n\nexport const variables = injectGlobal`\n  :root {\n    --vis-controls-buttons-border-color: rgba(108, 119, 140, 0.15);\n    --vis-controls-buttons-background-color: rgba(255, 255, 255, 1);\n    --vis-controls-button-color: #6c778c;\n    --vis-controls-button-icon-font: ${UNOVIS_ICON_FONT_FAMILY_DEFAULT};\n\n    --vis-dark-controls-buttons-border-color:  #6c778c;\n    --vis-dark-controls-buttons-background-color: var(--vis-color-grey);\n    --vis-dark-controls-button-color: #fff;\n  }\n\n  body.theme-dark ${`.${root}`} {\n    --vis-controls-buttons-border-color: var(--vis-dark-controls.buttons-border-color);\n    --vis-controls-buttons-background-color: var(--vis-dark-controls-buttons-background-color);\n    --vis-controls-button-color: var(--vis-dark-controls-button-color);\n  }\n`\n\nexport const items = css`\n  label: items;\n  background-color: var(--vis-controls-buttons-background-color);\n  border: 1px solid var(--vis-controls-buttons-border-color);\n  border-radius: 4px;\n  opacity: 1;\n  transition: all 300ms;\n`\n\nexport const horizontalItems = css`\n  label: horizontal;\n  display: inline-flex;\n`\n\nexport const item = css`\n  label: item;\n`\n\nexport const itemButton = css`\n  label: item-button;\n  font-family: var(--vis-controls-button-icon-font);\n  display: block;\n  cursor: pointer;\n  user-select: none;\n  outline: none;\n  width: 30px;\n  height: 30px;\n  line-height: 28px;\n  border: none;\n  border-radius: inherit;\n  box-sizing: border-box;\n  color: var(--vis-controls-button-color);\n  background-color: inherit;\n`\n\nexport const borderLeft = css`\n  border-left: 1px solid var(--vis-controls-buttons-border-color);\n`\n\nexport const borderTop = css`\n  border-top: 1px solid var(--vis-controls-buttons-border-color);\n`\n\nexport const borderRight = css`\n  border-right: 1px solid var(--vis-controls-buttons-border-color);\n`\n\nexport const borderBottom = css`\n  border-bottom: 1px solid var(--vis-controls-buttons-border-color);\n`\n\nexport const disabled = css`\n  label: disabled;\n  opacity: 0.4;\n  pointer-events: none;\n`\n", "import { Selection, select } from 'd3-selection'\n\n// Utils\nimport { merge } from 'utils/data'\n\n// Local Types\nimport { VisControlItemInterface, VisControlsOrientation } from './types'\n\n// Config\nimport { VisControlsDefaultConfig, VisControlsConfigInterface } from './config'\n\n// Style\nimport * as s from './style'\n\nexport class VisControls {\n  div: Selection<HTMLDivElement, unknown, null, undefined>\n  element: HTMLDivElement\n  protected _defaultConfig = VisControlsDefaultConfig as VisControlsConfigInterface\n  public config: VisControlsConfigInterface = this._defaultConfig\n\n  protected _container: HTMLElement\n  protected _items: Selection<HTMLDivElement, unknown, null, undefined>\n\n  constructor (element: HTMLElement, config?: VisControlsConfigInterface) {\n    this._container = element\n\n    this.div = select(this._container)\n      .append('div')\n      .attr('class', s.root)\n    this.element = this.div.node()\n    this._items = this.div.append('div')\n      .attr('class', s.items)\n\n    if (config) this.update(config)\n  }\n\n  update (config: VisControlsConfigInterface): void {\n    this.config = merge(this._defaultConfig, config)\n    this.render()\n  }\n\n  render (): void {\n    const { config: { items, orientation } } = this\n    this._items\n      .classed(s.horizontalItems, orientation === VisControlsOrientation.Horizontal)\n    const controlItems = this._items.selectAll<HTMLDivElement, VisControlItemInterface>(`.${s.item}`)\n      .data(items)\n\n    const controlItemsEnter = controlItems.enter()\n      .append('div')\n      .attr('class', s.item)\n      .on('click', this._onItemClick.bind(this))\n\n    controlItemsEnter.append('button')\n      .attr('class', s.itemButton)\n\n    const controlItemsMerged = controlItemsEnter.merge(controlItems)\n    controlItemsMerged\n      .classed(s.borderLeft, d => d.borderLeft)\n      .classed(s.borderTop, d => d.borderTop)\n      .classed(s.borderRight, d => d.borderRight)\n      .classed(s.borderBottom, d => d.borderBottom)\n      .classed(s.disabled, d => d.disabled)\n    controlItemsMerged.select(`.${s.itemButton}`)\n      .html(item => item.icon)\n\n    controlItems.exit().remove()\n  }\n\n  _onItemClick (event: MouseEvent, item: VisControlItemInterface): void {\n    item.callback?.(event)\n  }\n}\n", "// Core\nimport { ComponentConfigInterface, ComponentDefaultConfig } from 'core/component/config'\n\n// Types\nimport { ColorAccessor, NumericAccessor } from 'types/accessor'\n\nexport interface DonutConfigInterface<Datum> extends ComponentConfigInterface {\n  /** Accessor function for getting the unique data record id. Used for more persistent data updates. Default: `(d, i) => d.id ?? i` */\n  id?: ((d: Datum, i: number, ...any: unknown[]) => string | number);\n  /** Value accessor function. Default: `undefined` */\n  value: NumericAccessor<Datum>;\n  /** Diagram angle range. Default: `[0, 2 * Math.PI]` */\n  angleRange?: [number, number];\n  /** Pad angle. Default: `0` */\n  padAngle?: number;\n  /** Custom sort function. Default: `undefined` */\n  sortFunction?: (a: Datum, b: Datum) => number;\n  /** Corner Radius. Default: `0` */\n  cornerRadius?: number;\n  /** Color accessor function. Default: `undefined` */\n  color?: ColorAccessor<Datum>;\n  /** Explicitly set the donut outer radius. Default: `undefined` */\n  radius?: number;\n  /** Arc width in pixels. Set to `0` if you want to have a pie chart. Default: `20` */\n  arcWidth?: number;\n  /** Central label accessor function or text. Default: `undefined` */\n  centralLabel?: string;\n  /** Central sub-label accessor function or text. Default: `undefined` */\n  centralSubLabel?: string;\n  /** Enables wrapping for the sub-label. Default: `true` */\n  centralSubLabelWrap?: boolean;\n  /** When true, the component will display empty segments (the ones that have `0` values) as tiny slices.\n   * Default: `false`\n  */\n  showEmptySegments?: boolean;\n  /** Angular size for empty segments in radians. Default: `0.5 * Math.PI / 180` */\n  emptySegmentAngle?: number;\n  /** Show donut background. The color is configurable via\n   * the `--vis-donut-background-color` and `--vis-dark-donut-background-color` CSS variables.\n   * Default: `true`\n  */\n  showBackground?: boolean;\n  /** Background angle range. When undefined, the value will be taken from `angleRange`. Default: `undefined` */\n  backgroundAngleRange?: [number, number];\n\n  /** Central label and sub-label horizontal offset in pixels. Default: `undefined` */\n  centralLabelOffsetX?: number;\n\n  /** Central label and sub-label vertical offset in pixels. Default: `undefined` */\n  centralLabelOffsetY?: number;\n}\n\nexport const DonutDefaultConfig: DonutConfigInterface<unknown> = {\n  ...ComponentDefaultConfig,\n  id: (d: unknown, i: number): string | number => (d as { id: string }).id ?? i,\n  value: undefined,\n  angleRange: [0, 2 * Math.PI],\n  padAngle: 0,\n  sortFunction: undefined,\n  cornerRadius: 0,\n  color: undefined,\n  radius: undefined,\n  arcWidth: 20,\n  centralLabel: undefined,\n  centralSubLabel: undefined,\n  centralSubLabelWrap: true,\n  showEmptySegments: false,\n  emptySegmentAngle: 0.5 * Math.PI / 180,\n  showBackground: true,\n  backgroundAngleRange: undefined,\n  centralLabelOffsetX: undefined,\n  centralLabelOffsetY: undefined,\n}\n", "import { Selection } from 'd3-selection'\nimport { Transition } from 'd3-transition'\nimport { interpolate } from 'd3-interpolate'\nimport { Arc } from 'd3-shape'\n\n// Utils\nimport { getColor } from 'utils/color'\nimport { smartTransition } from 'utils/d3'\n\n// Local Types\nimport { DonutArcDatum, DonutArcAnimState } from '../types'\n\n// Config\nimport { DonutConfigInterface } from '../config'\n\nexport interface ArcNode extends SVGElement {\n  _animState?: DonutArcAnimState;\n}\n\nexport function createArc<Datum> (\n  selection: Selection<SVGPathElement, DonutArcDatum<Datum>, SVGGElement, unknown>,\n  config: DonutConfigInterface<Datum>\n): void {\n  selection\n    .style('fill', d => getColor(d.data, config.color, d.index))\n    .style('opacity', 0)\n    .each((d, i, els) => {\n      const arcNode: ArcNode = els[i]\n      const angleCenter = (d.startAngle + d.endAngle) / 2\n      const angleHalfWidth = (d.endAngle - d.startAngle) / 2\n      arcNode._animState = {\n        startAngle: angleCenter - angleHalfWidth,\n        endAngle: angleCenter + angleHalfWidth,\n        innerRadius: d.innerRadius,\n        outerRadius: d.outerRadius,\n        padAngle: d.padAngle,\n      }\n    })\n}\n\nexport function updateArc<Datum> (\n  selection: Selection<SVGPathElement, DonutArcDatum<Datum>, SVGGElement, unknown>,\n  config: DonutConfigInterface<Datum>,\n  arcGen: Arc<any, DonutArcAnimState>,\n  duration: number\n): void {\n  selection\n    .style('transition', `fill ${duration}ms`) // Animate color with CSS because we're using CSS-variables\n    .style('fill', d => getColor(d.data, config.color, d.index))\n\n  const setOpacity = (d: DonutArcDatum<Datum>): number => (config.showEmptySegments || d.value) ? 1 : 0\n  if (duration) {\n    const transition = smartTransition(selection, duration)\n      .style('opacity', setOpacity) as Transition<SVGPathElement, DonutArcDatum<Datum>, SVGGElement, unknown>\n\n    transition.attrTween('d', (d, i, els) => {\n      const arcNode: ArcNode = els[i]\n      const nextAnimState: DonutArcAnimState = {\n        startAngle: d.startAngle,\n        endAngle: d.endAngle,\n        innerRadius: d.innerRadius,\n        outerRadius: d.outerRadius,\n        padAngle: d.padAngle,\n      }\n      const datum = interpolate(arcNode._animState, nextAnimState)\n\n      return (t: number): string => {\n        arcNode._animState = datum(t)\n        return arcGen(arcNode._animState as DonutArcDatum<Datum>)\n      }\n    })\n  } else {\n    selection\n      .attr('d', arcGen)\n      .style('opacity', setOpacity)\n  }\n}\n\nexport function removeArc<Datum> (\n  selection: Selection<SVGPathElement, DonutArcDatum<Datum>, SVGGElement, unknown>,\n  duration: number\n): void {\n  smartTransition(selection, duration)\n    .style('opacity', 0)\n    .remove()\n}\n", "export const DONUT_HALF_ANGLE_RANGES = Array.from({ length: 4 }, (_, i): [number, number] => {\n  const offset = -Math.PI / 2 + i * Math.PI / 2\n  return [offset, offset + Math.PI]\n})\n\nexport const [\n  DONUT_HALF_ANGLE_RANGE_TOP,\n  DONUT_HALF_ANGLE_RANGE_RIGHT,\n  DONUT_HALF_ANGLE_RANGE_BOTTOM,\n  DONUT_HALF_ANGLE_RANGE_LEFT,\n] = DONUT_HALF_ANGLE_RANGES\n", "import { css, injectGlobal } from '@emotion/css'\n\nexport const root = css`\n  label: donut-component;\n`\n\nexport const variables = injectGlobal`\n  :root {\n    --vis-donut-central-label-font-size: 16px;\n    --vis-donut-central-label-text-color: #5b5f6d;\n    // Undefined by default to allow proper fallback to var(--vis-font-family)\n    /* --vis-donut-central-label-font-family: */\n    --vis-donut-central-label-font-weight: 600;\n\n    --vis-donut-central-sub-label-font-size: 12px;\n    --vis-donut-central-sub-label-text-color: #5b5f6d;\n    // Undefined by default to allow proper fallback to var(--vis-font-family)\n    /* --vis-donut-central-sub-label-font-family: */\n    --vis-donut-central-sub-label-font-weight: 500;\n\n    --vis-donut-background-color: #E7E9F3;\n    --vis-donut-segment-stroke-width: 0;\n    // The line segment color variable is not defined by default\n    // to allow it to fallback to the donut background color\n    /* --vis-donut-segment-stroke-color: none; */\n\n    --vis-dark-donut-central-label-text-color: #C2BECE;\n    --vis-dark-donut-central-sub-label-text-color: #C2BECE;\n    --vis-dark-donut-background-color: #18160C;\n  }\n\n  body.theme-dark ${`.${root}`} {\n    --vis-donut-central-label-text-color: var(--vis-dark-donut-central-label-text-color);\n    --vis-donut-central-sub-label-text-color: var(--vis-dark-donut-central-sub-label-text-color);\n    --vis-donut-background-color: var(--vis-dark-donut-background-color);\n  }\n`\nexport const background = css`\n  label: background;\n  fill: var(--vis-donut-background-color);\n`\n\nexport const segment = css`\n  label: segment;\n  stroke-width: var(--vis-donut-segment-stroke-width);\n  stroke: var(--vis-donut-segment-stroke-color, var(--vis-donut-background-color));\n`\n\nexport const segmentExit = css`\n  label: segment-exit;\n`\n\nexport const centralLabel = css`\n  label: central-label;\n  text-anchor: middle;\n  dominant-baseline: middle;\n  font-size: var(--vis-donut-central-label-font-size);\n  font-family: var(--vis-donut-central-label-font-family, var(--vis-font-family));\n  font-weight: var(--vis-donut-central-label-font-weight);\n  fill: var(--vis-donut-central-label-text-color);\n`\n\nexport const centralSubLabel = css`\n  label: central-label;\n  text-anchor: middle;\n  dominant-baseline: middle;\n  font-size: var(--vis-donut-central-sub-label-font-size);\n  font-family: var(--vis-donut-central-sub-label-font-family, var(--vis-font-family));\n  font-weight: var(--vis-donut-central-sub-label-font-weight);\n  fill: var(--vis-donut-central-sub-label-text-color);\n`\n", "import { Selection } from 'd3-selection'\nimport { pie, arc } from 'd3-shape'\n\n// Core\nimport { ComponentCore } from 'core/component'\nimport { SeriesDataModel } from 'data-models/series'\n\n// Utils\nimport { smartTransition } from 'utils/d3'\nimport { isNumber, clamp, getNumber } from 'utils/data'\nimport { wrapSVGText } from 'utils/text'\n\n// Types\nimport { Spacing } from 'types/spacing'\n\n// Local Types\nimport { DonutArcDatum, DonutArcAnimState, DonutDatum } from './types'\n\n// Config\nimport { DonutDefaultConfig, DonutConfigInterface } from './config'\n\n// Modules\nimport { createArc, updateArc, removeArc } from './modules/arc'\n\n// Constants\nimport { DONUT_HALF_ANGLE_RANGES } from './constants'\n\n// Styles\nimport * as s from './style'\n\nexport class Donut<Datum> extends ComponentCore<Datum[], DonutConfigInterface<Datum>> {\n  static selectors = s\n  protected _defaultConfig = DonutDefaultConfig as DonutConfigInterface<Datum>\n  public config: DonutConfigInterface<Datum> = this._defaultConfig\n\n  datamodel: SeriesDataModel<Datum> = new SeriesDataModel()\n\n  arcBackground: Selection<SVGPathElement, unknown, SVGGElement, unknown>\n  arcGroup: Selection<SVGGElement, unknown, SVGGElement, unknown>\n  centralLabel: Selection<SVGTextElement, unknown, SVGGElement, unknown>\n  centralSubLabel: Selection<SVGTextElement, unknown, SVGGElement, unknown>\n  arcGen = arc<DonutArcAnimState>()\n\n  events = {\n  }\n\n  constructor (config?: DonutConfigInterface<Datum>) {\n    super()\n    if (config) this.setConfig(config)\n    this.arcBackground = this.g.append('path')\n    this.arcGroup = this.g.append('g')\n    this.centralLabel = this.g.append('text')\n      .attr('class', s.centralLabel)\n    this.centralSubLabel = this.g.append('text')\n      .attr('class', s.centralSubLabel)\n  }\n\n  get bleed (): Spacing {\n    return { top: 0, bottom: 0, left: 0, right: 0 }\n  }\n\n  _render (customDuration?: number): void {\n    const { config, datamodel, bleed } = this\n\n    // Wrap data to preserve original indices\n    const data: DonutDatum<Datum>[] = datamodel.data\n      .map((d, i) => ({\n        index: i,\n        datum: d,\n      }))\n      .filter(d => config.showEmptySegments || getNumber(d.datum, config.value, d.index))\n\n    const duration = isNumber(customDuration) ? customDuration : config.duration\n\n    // Handle half-donut cases, which adjust the scaling and positioning.\n    // One of these is true if we are dealing with a half-donut.\n    const [\n      isHalfDonutTop,\n      isHalfDonutRight,\n      isHalfDonutBottom,\n      isHalfDonutLeft,\n    ] = DONUT_HALF_ANGLE_RANGES.map(angleRange =>\n      config.angleRange && (\n        config.angleRange[0] === angleRange[0] &&\n        config.angleRange[1] === angleRange[1]\n      )\n    )\n    const isVerticalHalfDonut = isHalfDonutTop || isHalfDonutBottom\n    const isHorizontalHalfDonut = isHalfDonutRight || isHalfDonutLeft\n\n    // Compute the bounding box of the donut,\n    // considering it may be a half-donut\n    const width = this._width * (isHorizontalHalfDonut ? 2 : 1)\n    const height = this._height * (isVerticalHalfDonut ? 2 : 1)\n\n    const outerRadius = config.radius || Math.min(width - bleed.left - bleed.right, height - bleed.top - bleed.bottom) / 2\n    const innerRadius = config.arcWidth === 0 ? 0 : clamp(outerRadius - config.arcWidth, 0, outerRadius - 1)\n\n    const translateY = this._height / 2 + (isHalfDonutTop ? outerRadius / 2 : isHalfDonutBottom ? -outerRadius / 2 : 0)\n    const translateX = this._width / 2 + (isHalfDonutLeft ? outerRadius / 2 : isHalfDonutRight ? -outerRadius / 2 : 0)\n    const translate = `translate(${translateX},${translateY})`\n\n    this.arcGroup.attr('transform', translate)\n\n    this.arcGen\n      .startAngle(d => d.startAngle)\n      .endAngle(d => d.endAngle)\n      .innerRadius(d => d.innerRadius)\n      .outerRadius(d => d.outerRadius)\n      .padAngle(d => d.padAngle)\n      .cornerRadius(config.cornerRadius)\n\n    const pieGen = pie<DonutDatum<Datum>>()\n      .startAngle(config.angleRange?.[0] ?? 0)\n      .endAngle(config.angleRange?.[1] ?? 2 * Math.PI)\n      .padAngle(config.padAngle)\n      .value(d => getNumber(d.datum, config.value, d.index) || 0)\n      .sort((a, b) => config.sortFunction?.(a.datum, b.datum))\n\n    const arcData: DonutArcDatum<Datum>[] = pieGen(data).map(d => {\n      const arc = {\n        ...d,\n        data: d.data.datum,\n        index: d.data.index,\n        innerRadius,\n        outerRadius,\n      }\n\n      if (config.showEmptySegments && d.endAngle - d.startAngle - d.padAngle <= Number.EPSILON) {\n        arc.endAngle = d.startAngle + Math.max(config.emptySegmentAngle, config.padAngle)\n        arc.padAngle = d.padAngle / 2\n      }\n      return arc\n    })\n\n    // Arc segments\n    const arcsSelection = this.arcGroup\n      .selectAll<SVGPathElement, DonutArcDatum<Datum>>(`.${s.segment}`)\n      .data(arcData, (d: DonutArcDatum<Datum>) => config.id(d.data, d.index))\n\n    const arcsEnter = arcsSelection.enter().append('path')\n      .attr('class', s.segment)\n      .call(createArc, config)\n\n    const arcsMerged = arcsSelection.merge(arcsEnter)\n    arcsMerged.call(updateArc, config, this.arcGen, duration)\n    arcsMerged.sort((a, b) => b.value - a.value)\n\n    arcsSelection.exit<DonutArcDatum<Datum>>()\n      .attr('class', s.segmentExit)\n      .call(removeArc, duration)\n\n    // Label\n    const labelTextAnchor = isHalfDonutRight ? 'start' : isHalfDonutLeft ? 'end' : 'middle'\n    this.centralLabel\n      .attr('dy', config.centralSubLabel ? '-0.55em' : null)\n      .style('text-anchor', labelTextAnchor)\n      .text(config.centralLabel ?? null)\n\n    this.centralSubLabel\n      .attr('dy', config.centralLabel ? '0.55em' : null)\n      .style('text-anchor', labelTextAnchor)\n      .text(config.centralSubLabel ?? null)\n\n    if (config.centralSubLabelWrap) wrapSVGText(this.centralSubLabel, innerRadius * 1.9)\n\n    // Label placement\n    const labelTranslateX = (config.centralLabelOffsetX || 0) + translateX\n    let labelTranslateY = (config.centralLabelOffsetY || 0) + translateY\n\n    // Special case label placement for half donut\n    if (isVerticalHalfDonut && config.centralLabelOffsetX === undefined && config.centralLabelOffsetY === undefined) {\n      const halfDonutLabelOffsetY = isHalfDonutTop\n        ? -this.centralSubLabel.node().getBoundingClientRect().height\n        : isHalfDonutBottom\n          ? this.centralLabel.node().getBoundingClientRect().height\n          : 0\n      labelTranslateY = halfDonutLabelOffsetY + translateY\n    }\n    const labelTranslate = `translate(${labelTranslateX},${labelTranslateY})`\n    this.centralLabel.attr('transform', labelTranslate)\n    this.centralSubLabel.attr('transform', labelTranslate)\n\n    // Background\n    this.arcBackground.attr('class', s.background)\n      .attr('visibility', config.showBackground ? null : 'hidden')\n      .attr('transform', translate)\n\n    smartTransition(this.arcBackground, duration)\n      .attr('d', this.arcGen({\n        startAngle: config.backgroundAngleRange?.[0] ?? config.angleRange?.[0] ?? 0,\n        endAngle: config.backgroundAngleRange?.[1] ?? config.angleRange?.[1] ?? 2 * Math.PI,\n        innerRadius,\n        outerRadius,\n      }))\n  }\n}\n\n", "export type FreeBrushSelection = [number, number] | [[number, number], [number, number]];\nexport type FreeBrushSelectionInPixels = FreeBrushSelection\n\nexport enum FreeBrushMode {\n  X = 'x',\n  Y = 'y',\n  XY = 'xy',\n}\n", "import { D3BrushEvent } from 'd3-brush'\nimport { XYComponentConfigInterface, XYComponentDefaultConfig } from 'core/xy-component/config'\n\n// Types\nimport { FreeBrushMode, FreeBrushSelection } from './types'\n\n// We extend partial XY config interface because x and y properties are optional for FreeBrush\nexport interface FreeBrushConfigInterface<Datum> extends Partial<XYComponentConfigInterface<Datum>> {\n  /** Brush selection mode. X - horizontal, Y - vertical, XY - both. Default: `FreeBrushMode.X` */\n  mode?: FreeBrushMode;\n  /** Callback function to be called on any Brush event.\n   * Default: `(selection: FreeBrushSelection, event: D3BrushEvent<Datum>, userDriven: boolean): void => {}`\n  */\n  onBrush?: ((selection: FreeBrushSelection | undefined, event: D3BrushEvent<unknown>, userDriven: boolean) => void);\n  /** Callback function to be called on the Brush start event.\n   * Default: `(selection: FreeBrushSelection, event: D3BrushEvent<unknown>, userDriven: boolean): void => {}`\n  */\n  onBrushStart?: ((selection: FreeBrushSelection | undefined, event: D3BrushEvent<unknown>, userDriven: boolean) => void);\n  /** Callback function to be called on the Brush move event.\n   * Default: `(selection: FreeBrushSelection, event: D3BrushEvent<unknown>, userDriven: boolean): void => {}`\n  */\n  onBrushMove?: ((selection: FreeBrushSelection | undefined, event: D3BrushEvent<unknown>, userDriven: boolean) => void);\n  /** Callback function to be called on the Brush end event.\n   * Default: `(selection: FreeBrushSelection, event: D3BrushEvent<unknown>, userDriven: boolean)L void => {}`\n  */\n  onBrushEnd?: ((selection: FreeBrushSelection | undefined, event: D3BrushEvent<unknown>, userDriven: boolean) => void);\n  /** Width of the Brush handle. Default: `1` */\n  handleWidth?: number;\n  /** Brush selection in data space, can be used to force set the selection from outside.\n   * In case of two dimensional mode, the selection has the following format: `[[xMin, xMax], [yMin, yMax]]`.\n   * This config property gets updated on internal brush events. Default: `undefined`\n  */\n  selection?: FreeBrushSelection | null | undefined;\n  /** Constraint Brush selection to a minimal length in data units. Default: `undefined` */\n  selectionMinLength?: number | [number, number];\n  /** Automatically hide the brush after selection. Default: `true` */\n  autoHide?: boolean;\n}\n\nexport const FreeBrushDefaultConfig: FreeBrushConfigInterface<unknown> = {\n  ...XYComponentDefaultConfig,\n  /* eslint-disable-next-line @typescript-eslint/no-unused-vars, @typescript-eslint/no-empty-function */\n  onBrush: (s: FreeBrushSelection | undefined, e: D3BrushEvent<unknown>, userDriven: boolean): void => {},\n  /* eslint-disable-next-line @typescript-eslint/no-unused-vars, @typescript-eslint/no-empty-function */\n  onBrushStart: (s: FreeBrushSelection | undefined, e: D3BrushEvent<unknown>, userDriven: boolean): void => {},\n  /* eslint-disable-next-line @typescript-eslint/no-unused-vars, @typescript-eslint/no-empty-function */\n  onBrushMove: (s: FreeBrushSelection | undefined, e: D3BrushEvent<unknown>, userDriven: boolean): void => {},\n  /* eslint-disable-next-line @typescript-eslint/no-unused-vars, @typescript-eslint/no-empty-function */\n  onBrushEnd: (s: FreeBrushSelection | undefined, e: D3BrushEvent<unknown>, userDriven: boolean): void => {},\n  handleWidth: 1,\n  selection: undefined,\n  selectionMinLength: undefined,\n  mode: FreeBrushMode.X,\n  autoHide: true,\n}\n", "import { css, injectGlobal } from '@emotion/css'\n\nexport const root = css`\n  label: free-brush-component;\n`\n\nexport const variables = injectGlobal`\n  :root {\n    --vis-free-brush-selection-fill-color: #0b1640;\n    --vis-free-brush-selection-fill-opacity: 0.4;\n    --vis-free-brush-selection-stroke-color: #acb2b9;\n    --vis-free-brush-handle-fill-color: #6d778c;\n    --vis-free-brush-handle-stroke-color: none;\n\n    --vis-dark-free-brush-selection-fill-color: #344174;\n    --vis-dark-free-brush-selection-stroke-color: #0b1640;\n    --vis-dark-free-brush-handle-fill-color: #6d778c;\n  }\n\n  body.theme-dark ${`.${root}`} {\n    --vis-free-brush-selection-fill-color: var(--vis-dark-free-brush-selection-fill-color);\n    --vis-free-brush-selection-stroke-color: var(--vis-dark-free-brush-selection-stroke-color);\n    --vis-free-brush-handle-fill-color: var(--vis-dark-free-brush-selection-fill-color);\n  }\n`\n\nexport const brush = css`\n  label: brush;\n  fill: none;\n  stroke: none;\n\n  .selection {\n    fill: var(--vis-free-brush-selection-fill-color);\n    fill-opacity: var(--vis-free-brush-selection-fill-opacity);\n    stroke: var(--vis-free-brush-selection-stroke-color);\n    stroke-width: 0;\n    stroke-opacity: 0;\n  }\n\n  .handle {\n    fill: var(--vis-free-brush-handle-fill-color);\n    stroke: var(--vis-free-brush-handle-stroke-color);\n  }\n`\n\nexport const hide = css`\n  .selection, .handle {\n    display: none;\n  }\n`\n", "import { Selection } from 'd3-selection'\nimport { brush, BrushBehavior, brushX, brushY, D3BrushEvent } from 'd3-brush'\nimport { XYComponentCore } from 'core/xy-component'\nimport { clamp, isArray, isNumber } from 'utils/data'\nimport { smartTransition } from 'utils/d3'\n\n// Types\nimport { ContinuousScale } from 'types/scale'\nimport { FreeBrushMode, FreeBrushSelection, FreeBrushSelectionInPixels } from './types'\n\n// Config\nimport { FreeBrushDefaultConfig, FreeBrushConfigInterface } from './config'\n\n// Styles\nimport * as s from './style'\n\nexport class FreeBrush<Datum> extends XYComponentCore<Datum, FreeBrushConfigInterface<Datum>> {\n  static selectors = s\n  protected _defaultConfig = FreeBrushDefaultConfig as FreeBrushConfigInterface<Datum>\n  public config: FreeBrushConfigInterface<Datum> = this._defaultConfig\n\n  private brush: Selection<SVGGElement, unknown, SVGGElement, unknown>\n  private brushBehaviour: BrushBehavior<unknown>\n  private _firstRender = true\n\n  constructor (config: FreeBrushConfigInterface<Datum>) {\n    super()\n    if (config) this.setConfig(config)\n\n    this.brush = this.g\n      .append('g')\n      .attr('class', s.brush)\n  }\n\n  _render (customDuration?: number): void {\n    const { config } = this\n    const xScale = this.xScale\n    const yScale = this.yScale\n    const duration = isNumber(customDuration) ? customDuration : config.duration\n\n    if (this._firstRender) this.brush.classed(s.hide, this._firstRender && config.autoHide)\n\n    // Sometimes Brush stops emitting 'start' and 'end' events. Possible explanation:\n    // \"... mouseup will only fire when performed within the browser, which can lead to losing track of the button state.\"\n    // https://stackoverflow.com/a/48970682\n    //\n    // D3 code related to the problem:\n    // https://github.com/d3/d3-brush/blob/ec2bce6f15074a9ead7f9a84c61335be51c123a3/src/brush.js#L301\n    //\n    // We're clearing brush's event emitter state to force it to get re-initialized\n    // Caveat of this solution: If you're doing a brush selection and a render happens\n    // (e.g. due to a data or config update), it'll reset the brush.\n    //\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore\n    if (this.brush.node().__brush) this.brush.node().__brush.emitter = undefined\n\n    this.brushBehaviour = this._getBrushBehaviour(config.mode)\n\n    this.brushBehaviour\n      .handleSize(config.handleWidth)\n      .extent([[0, 0], [this._width, this._height]])\n      .on('start', this._onBrushStart.bind(this))\n      .on('brush', this._onBrushMove.bind(this))\n      .on('end', this._onBrushEnd.bind(this))\n\n    this.brush\n      .call(this.brushBehaviour)\n\n    // Calculate the brush range from configured selection and apply it\n    let brushRange: FreeBrushSelectionInPixels\n    switch (config.mode) {\n      case FreeBrushMode.XY: {\n        const selection = config.selection as [[number, number], [number, number]] | undefined\n        const xSelectionRange = this._dataRangeToPixelRange([selection?.[0][0], selection?.[0][1]], xScale)\n        const ySelectionRange = this._dataRangeToPixelRange([selection?.[1][0], selection?.[1][1]], yScale, true)\n        brushRange = (xSelectionRange && ySelectionRange) ? [[xSelectionRange[0], ySelectionRange[0]], [xSelectionRange[1], ySelectionRange[1]]] : null\n        break\n      }\n      case FreeBrushMode.X:\n      case FreeBrushMode.Y:\n      default: {\n        const scale = config.mode === FreeBrushMode.Y ? yScale : xScale\n        brushRange = this._dataRangeToPixelRange(config.selection as [number, number], scale, config.mode === FreeBrushMode.Y)\n      }\n    }\n\n    smartTransition(this.brush, duration)\n      .call(this.brushBehaviour.move, brushRange) // Sets up the brush and calls brush events\n      .on('end interrupt', () => { this._firstRender = false })\n\n    if (!duration) this._firstRender = false\n  }\n\n  private _onBrush (event: D3BrushEvent<unknown>): void {\n    const { config } = this\n    const userDriven = !!event?.sourceEvent\n\n    // Selection from the brush events is in Screen Space (pixels)\n    // In case of two dimensional brush is comes as [ [xMinPx, yMinPx], [xMaxPx, yMaxPx] ],\n    //   while in the config we'll be storing it as [ [xMin, xMax], [yMin, yMax] ]\n    const s = (event?.selection) as FreeBrushSelectionInPixels\n    if (!this._isSelectionValid(s)) {\n      config.selection = null\n      return\n    }\n\n    // Convert the raw brush selection from pixels to data units, store it in the config and trigger the onBrush callback\n    let selectedDomain: FreeBrushSelection\n    switch (config.mode) {\n      case FreeBrushMode.XY: {\n        const selection = s as [[number, number], [number, number]]\n        const xSelection = this._pixelRangeToDataRange([selection[0][0], selection[1][0]], this.xScale, isArray(config.selectionMinLength) ? config.selectionMinLength[0] : config.selectionMinLength)\n        const ySelection = this._pixelRangeToDataRange([selection[0][1], selection[1][1]], this.yScale, isArray(config.selectionMinLength) ? config.selectionMinLength[1] : config.selectionMinLength, true)\n        selectedDomain = (xSelection && ySelection) ? [\n          [xSelection?.[0], xSelection?.[1]],\n          [ySelection?.[0], ySelection?.[1]],\n        ] : null\n        break\n      }\n      case FreeBrushMode.Y: {\n        selectedDomain = this._pixelRangeToDataRange(s as [number, number], this.yScale, isArray(config.selectionMinLength) ? config.selectionMinLength[1] : config.selectionMinLength, true)\n        break\n      }\n      case FreeBrushMode.X:\n      default: {\n        selectedDomain = this._pixelRangeToDataRange(s as [number, number], this.xScale, isArray(config.selectionMinLength) ? config.selectionMinLength[0] : config.selectionMinLength)\n        break\n      }\n    }\n\n    if (selectedDomain === null || selectedDomain[0] === null || selectedDomain[1] === null) {\n      this.brush.call(this.brushBehaviour.move, null)\n      return\n    }\n\n    config.selection = selectedDomain\n    if (!this._firstRender) config.onBrush(selectedDomain, event, userDriven)\n  }\n\n  private _pixelRangeToDataRange (selectionInPixels: [number, number], scale: ContinuousScale, constraint: number, reversed?: boolean): [number, number] | null {\n    const selectedDomain = selectionInPixels.map(n => scale.invert(n)) as [number, number]\n    if (reversed) selectedDomain.reverse()\n\n    const domain = scale.domain() as [number, number]\n    const domainLength = Math.abs(domain[1] - domain[0])\n    const selectionLength = Math.abs(selectedDomain[1] - selectedDomain[0])\n\n    if (constraint >= domainLength) {\n      console.warn('Unovis | FreeBrush: Configured domain constraint is bigger than the brush domain')\n    }\n\n    if ((selectionLength < constraint) && (constraint < domainLength)) return null\n    else return selectedDomain\n  }\n\n  private _dataRangeToPixelRange (selectionInDataUnits: [number, number], scale: ContinuousScale, reversed?: boolean): [number, number] | null {\n    if (!selectionInDataUnits) return null\n\n    const range = scale.range()\n    const s = [...selectionInDataUnits]\n    if (reversed) {\n      range.reverse()\n      s.reverse()\n    }\n    const selectionMin = clamp(scale(s[0]) ?? 0, range[0], range[1])\n    const selectionMax = clamp(scale(s[1]) ?? 0, range[0], range[1])\n    return (selectionMax - selectionMin) ? [selectionMin, selectionMax] : null\n  }\n\n  private _isSelectionValid (s: FreeBrushSelection | FreeBrushSelectionInPixels): boolean {\n    const { config } = this\n\n    if (config.mode === FreeBrushMode.XY) {\n      return s && Array.isArray(s[0]) && Array.isArray(s[1])\n    } else {\n      return s && isNumber(s[0]) && isNumber(s[1])\n    }\n  }\n\n  private _getBrushBehaviour (mode: FreeBrushMode): BrushBehavior<unknown> {\n    switch (mode) {\n      case FreeBrushMode.X: return brushX()\n      case FreeBrushMode.Y: return brushY()\n      default: return brush()\n    }\n  }\n\n  private _onBrushStart (event: D3BrushEvent<unknown>): void {\n    const { config } = this\n    const userDriven = !!event?.sourceEvent\n    this._onBrush(event)\n    if (config.autoHide && userDriven) this.brush.classed(s.hide, false)\n    if (!this._firstRender) config.onBrushStart?.(config.selection, event, userDriven)\n  }\n\n  private _onBrushMove (event: D3BrushEvent<unknown>): void {\n    const { config } = this\n\n    this._onBrush(event)\n    if (!this._firstRender) config.onBrushMove?.(config.selection, event, !!event?.sourceEvent)\n  }\n\n  private _onBrushEnd (event: D3BrushEvent<unknown>): void {\n    const { config } = this\n\n    this._onBrush(event)\n    if (config.autoHide) this.brush.classed(s.hide, true)\n    if (!this._firstRender) config.onBrushEnd?.(config.selection, event, !!event?.sourceEvent)\n  }\n}\n", "export type XYLabelRenderProps = {\n  x: number;\n  y: number;\n  fontSize: number;\n  backgroundColor: string | null;\n  labelText: string | null;\n  labelColor: string | null;\n  cursor: string | null;\n  width: number;\n  height: number;\n}\n\nexport type XYLabel<D> = D & {\n  _screen: XYLabelRenderProps;\n}\n\nexport type XYLabelCluster<D> = {\n  _screen: XYLabelRenderProps;\n  records: XYLabel<D>[];\n}\n\nexport enum XYLabelPositioning {\n  AbsolutePx = 'absolute_px',\n  AbsolutePercentage = 'absolute_percentage',\n  DataSpace = 'data_space',\n}\n", "// Core\nimport { XYComponentConfigInterface, XYComponentDefaultConfig } from 'core/xy-component/config'\n\n// Types\nimport { ColorAccessor, GenericAccessor, NumericAccessor, StringAccessor } from 'types/accessor'\n\n// Local Types\nimport { XYLabel, XYLabelPositioning } from './types'\n\nexport interface XYLabelsConfigInterface<Datum> extends XYComponentConfigInterface<Datum> {\n  /** Label color accessor function. Default: `d => d.color` */\n  color?: ColorAccessor<Datum>;\n  /** Single Y accessor function. Default: `undefined` */\n  y: NumericAccessor<Datum>;\n  /** Defines how to position the label horizontally: in data space or in screen space. Default: `XYLabelPositioning.DataSpace` */\n  xPositioning?: GenericAccessor<XYLabelPositioning | string, Datum>;\n  /** Defines how to position the label vertically: in data space or in screen space. Default: `XYLabelPositioning.DataSpace` */\n  yPositioning?: GenericAccessor<XYLabelPositioning | string, Datum>;\n  /** Font size accessor function or constant value in pixels. If not provided, the value of CSS variable `--vis-xy-label-font-size` will be used. Default: `undefined` */\n  labelFontSize?: NumericAccessor<Datum>;\n  /** Label accessor function or string. Default: `undefined` */\n  label?: StringAccessor<Datum>;\n  /** Label color. Default: `undefined` */\n  backgroundColor?: ColorAccessor<Datum>;\n  /** Optional label cursor. Default: `null` */\n  cursor?: StringAccessor<Datum>;\n  /** Label color brightness ratio for switching between dark and light text label color. Default: `0.65` */\n  labelTextBrightnessRatio?: number;\n  /** Enable label clustering. Default: `true` */\n  clustering?: boolean;\n  /** Label accessor for clusters. Default: `undefined` */\n  clusterLabel?: StringAccessor<XYLabel<Datum>[]>;\n  /** Font size accessor for clusters, the value is in pixels. If not provided, the value of CSS variable `--vis-xy-label-cluster-font-size` will be used. Default: `undefined` */\n  clusterFontSize?: NumericAccessor<XYLabel<Datum>[]>;\n  /** Background color accessor for clusters. Default: `undefined` */\n  clusterBackgroundColor?: ColorAccessor<XYLabel<Datum>[]>;\n  /** Optional cluster cursor. Default: `null` */\n  clusterCursor?: StringAccessor<XYLabel<Datum>[]>;\n  /** Cluster label color accessor function. Default: `null` */\n  clusterLabelColor?: ColorAccessor<XYLabel<Datum>[]>;\n}\nexport const XYLabelsDefaultConfig: XYLabelsConfigInterface<unknown> = {\n  ...XYComponentDefaultConfig,\n  color: (d: unknown): string => (d as { color: string }).color,\n  y: undefined,\n  xPositioning: XYLabelPositioning.DataSpace,\n  yPositioning: XYLabelPositioning.DataSpace,\n  labelFontSize: undefined,\n  label: undefined,\n  backgroundColor: undefined,\n  cursor: null,\n  labelTextBrightnessRatio: 0.65,\n\n  clustering: true,\n  clusterLabel: <Datum>(records: XYLabel<Datum>[]): string => records.length.toString(),\n  clusterFontSize: undefined,\n  clusterBackgroundColor: undefined,\n  clusterCursor: undefined,\n  clusterLabelColor: null,\n}\n\n", "import { Selection, select } from 'd3-selection'\nimport { mean } from 'd3-array'\nimport { color } from 'd3-color'\n\n// Utils\nimport { smartTransition } from 'utils/d3'\nimport { getCSSVariableValueInPixels, getCSSVariableValue, isStringCSSVariable } from 'utils/misc'\nimport { getColor, hexToBrightness } from 'utils/color'\nimport { getNumber, getString, getValue } from 'utils/data'\n\n// Types\nimport { ContinuousScale } from 'types/scale'\n\n// Config\nimport { XYLabelsConfigInterface } from '../config'\n\n// Local Types\nimport { XYLabel, XYLabelCluster, XYLabelPositioning, XYLabelRenderProps } from '../types'\n\nexport function createLabels<Datum> (\n  selection: Selection<SVGGElement, XYLabel<Datum> | XYLabelCluster<Datum>, any, any>\n): void {\n  selection.attr('transform', d => `translate(${d._screen.x},${d._screen.y})`)\n  selection.append('rect').style('fill', d => d._screen.backgroundColor)\n  selection.append('text')\n    .style('text-anchor', 'middle')\n    .style('dominant-baseline', 'central')\n    .style('fill', d => d._screen.backgroundColor)\n    .style('pointer-events', 'none')\n\n  selection.attr('transform', d => `translate(${d._screen.x},${d._screen.y}) scale(0)`)\n}\n\nexport function updateLabels<Datum> (\n  selection: Selection<SVGGElement, XYLabel<Datum> | XYLabelCluster<Datum>, any, any>,\n  config: XYLabelsConfigInterface<Datum>,\n  duration: number\n): void {\n  selection.each((d, i, elements) => {\n    const group: Selection<SVGGElement, XYLabel<Datum> | XYLabelCluster<Datum>, any, any> = select(elements[i])\n    const text = group.select('text')\n    const rect = group.select('rect')\n\n    const backgroundColor = d._screen.backgroundColor\n    const labelText = d._screen.labelText ?? ''\n    const labelFontSize = d._screen.fontSize\n    let labelColor = d._screen.labelColor\n\n    // Label background\n    const backgroundHeight = labelFontSize * 1.7\n    let backgroundWidth = labelFontSize * labelText.length * 0.7\n    if (backgroundWidth < backgroundHeight) backgroundWidth = backgroundHeight\n    smartTransition(rect, duration)\n      .attr('width', backgroundWidth)\n      .attr('height', backgroundHeight)\n      .attr('x', -backgroundWidth / 2)\n      .attr('y', -backgroundHeight / 2)\n      .attr('rx', labelFontSize)\n      .attr('ry', labelFontSize)\n      .style('fill', backgroundColor)\n\n    // Label\n    if (!labelColor) {\n      const hex = color(isStringCSSVariable(backgroundColor) ? getCSSVariableValue(backgroundColor, group.node()) : backgroundColor)?.hex()\n      const brightness = hexToBrightness(hex)\n      labelColor = brightness > config.labelTextBrightnessRatio\n        ? 'var(--vis-xy-label-text-color-dark)'\n        : 'var(--vis-xy-label-text-color-light)'\n    }\n\n    text.html(labelText)\n      .attr('font-size', labelFontSize)\n\n    smartTransition(text, duration)\n      .style('fill', labelColor)\n\n    rect.style('cursor', d._screen.cursor)\n  })\n\n  smartTransition(selection, duration)\n    .attr('transform', d => `translate(${d._screen.x},${d._screen.y}) scale(1)`)\n}\n\nexport function removeLabels<Datum> (\n  selection: Selection<SVGGElement, XYLabel<Datum> | XYLabelCluster<Datum>, any, any>,\n  duration: number\n): void {\n  smartTransition(selection, duration)\n    .attr('transform', d => `translate(${d._screen.x},${d._screen.y}) scale(0)`)\n    .remove()\n}\n\nexport function getLabelPosition (value: number, positioning: XYLabelPositioning, scale: ContinuousScale): number {\n  switch (positioning) {\n    case XYLabelPositioning.DataSpace: return scale(value) ?? 0\n    case XYLabelPositioning.AbsolutePx: return value\n    case XYLabelPositioning.AbsolutePercentage: {\n      const scaleRange = scale.range()\n      return scaleRange[0] + (scaleRange[1] - scaleRange[0]) * value / 100\n    }\n  }\n}\n\nexport function getLabelRenderProps<Datum> (\n  data: Datum | XYLabel<Datum>[],\n  el: SVGGraphicsElement,\n  config: XYLabelsConfigInterface<Datum>,\n  xScale: ContinuousScale,\n  yScale: ContinuousScale\n): XYLabelRenderProps {\n  const isCluster = Array.isArray(data)\n  const fontSize = isCluster\n    ? (getNumber(data as XYLabel<Datum>[], config.clusterFontSize) ?? getCSSVariableValueInPixels('var(--vis-xy-label-cluster-font-size)', el))\n    : (getNumber(data as Datum, config.labelFontSize) ?? getCSSVariableValueInPixels('var(--vis-xy-label-font-size)', el))\n\n  const labelText = (isCluster ? getString(data as XYLabel<Datum>[], config.clusterLabel) : getString(data as Datum, config.label)) || ''\n  const backgroundHeight = fontSize * 1.7\n  let backgroundWidth = fontSize * labelText.length * 0.7\n  if (backgroundWidth < backgroundHeight) backgroundWidth = backgroundHeight\n\n  const x = isCluster\n    ? mean(data as XYLabel<Datum>[], d => d._screen.x)\n    : getLabelPosition(getNumber(data as Datum, config.x), getValue<Datum, XYLabelPositioning>(data as Datum, config.xPositioning), xScale)\n\n  const y = isCluster\n    ? mean(data as XYLabel<Datum>[], d => d._screen.y)\n    : getLabelPosition(getNumber(data as Datum, config.y), getValue<Datum, XYLabelPositioning>(data as Datum, config.yPositioning), yScale)\n\n  return {\n    x,\n    y,\n    fontSize,\n    labelText,\n    labelColor: isCluster ? getColor(data as XYLabel<Datum>[], config.clusterLabelColor) : getColor(data as Datum, config.color),\n    backgroundColor: isCluster ? getColor(data as XYLabel<Datum>[], config.clusterBackgroundColor) : getColor(data as Datum, config.backgroundColor),\n    cursor: isCluster ? getString(data as XYLabel<Datum>[], config.clusterCursor) : getString(data as Datum, config.cursor),\n    width: backgroundWidth,\n    height: backgroundHeight,\n  }\n}\n", "import { css, injectGlobal } from '@emotion/css'\n\nexport const globalStyles = injectGlobal`\n  :root {\n    --vis-xy-label-cursor: default;\n    // Undefined by default to allow proper fallback to var(--vis-color-main)\n    /* --vis-xy-label-fill-color */\n    --vis-xy-label-stroke-color: none;\n    --vis-xy-label-stroke-width: 0px;\n    --vis-xy-label-fill-opacity: 1;\n    --vis-xy-label-stroke-opacity: 1;\n    --vis-xy-label-hover-stroke-width: 1px;\n    --vis-xy-label-font-size: 12px;\n    --vis-xy-label-cluster-font-size: 14px;\n\n    --vis-xy-label-text-color-dark: #5b5f6d;\n    --vis-xy-label-text-color-light: #fff;\n    --vis-xy-label-text-font-weight: 500;\n  }\n`\n\nexport const root = css`\n  label: xy-labels-component;\n`\n\nexport const labelGroup = css`\n  label: label-g;\n\n  > rect, text {\n    cursor: var(--vis-xy-label-cursor);\n    fill: var(--vis-xy-label-fill-color, var(--vis-color-main));\n    fill-opacity: var(--vis-xy-label-fill-opacity);\n    stroke-opacity: var(--vis-xy-label-stroke-opacity);\n  }\n\n  > text {\n    font-weight: var(--vis-xy-label-text-font-weight);\n    user-select: none;\n  }\n\n  > rect {\n    stroke-width: var(--vis-xy-label-stroke-width);\n    stroke: var(--vis-xy-label-stroke-color);\n\n    &:hover {\n        stroke-width: var(--vis-xy-label-hover-stroke-width);\n    }\n  }\n`\n\nexport const cluster = css`\n  label: cluster;\n`\n\nexport const label = css`\n  label: label;\n`\n", "// Core\nimport { XYComponentCore } from 'core/xy-component'\n\n// Utils\nimport { getValue, isNumber, isNumberWithinRange } from 'utils/data'\nimport { rectIntersect } from 'utils/misc'\n\n// Local Types\nimport { XYLabelCluster, XYLabel, XYLabelPositioning } from './types'\n\n// Config\nimport { XYLabelsDefaultConfig, XYLabelsConfigInterface } from './config'\n\n// Modules\nimport { createLabels, updateLabels, removeLabels, getLabelRenderProps } from './modules/label'\n\n// Styles\nimport * as s from './style'\n\nexport class XYLabels<Datum> extends XYComponentCore<Datum, XYLabelsConfigInterface<Datum>> {\n  static selectors = s\n  clippable = false\n  protected _defaultConfig = XYLabelsDefaultConfig as XYLabelsConfigInterface<Datum>\n  public config: XYLabelsConfigInterface<Datum> = this._defaultConfig\n\n  events = {\n    [XYLabels.selectors.label]: {},\n  }\n\n  constructor (config?: XYLabelsConfigInterface<Datum>) {\n    super()\n    if (config) this.setConfig(config)\n  }\n\n  _render (customDuration?: number): void {\n    const { config } = this\n    const duration = isNumber(customDuration) ? customDuration : config.duration\n\n    const labelGroups = this.g\n      .selectAll<SVGGElement, XYLabel<Datum> | XYLabelCluster<Datum>>(`.${s.labelGroup}`)\n      .data(this._getDataToRender())\n\n    const labelGroupsExit = labelGroups.exit<XYLabel<Datum> | XYLabelCluster<Datum>>()\n    removeLabels(labelGroupsExit, duration)\n\n    const labelGroupsEnter = labelGroups.enter().append('g')\n      .attr('class', s.labelGroup)\n      .call(createLabels)\n\n    const labelGroupsMerged = labelGroupsEnter\n      .merge(labelGroups)\n      .classed(s.cluster, d => !!(d as XYLabelCluster<Datum>).records)\n      .classed(s.label, d => !(d as XYLabelCluster<Datum>).records)\n\n    labelGroupsMerged.call(updateLabels, config, duration)\n  }\n\n  private _getDataToRender (): (XYLabel<Datum> | XYLabelCluster<Datum>)[] {\n    const { config, datamodel } = this\n\n    const xRange = this.xScale.range() as [number, number]\n    const yRange = this.xScale.range() as [number, number]\n\n    const labels = datamodel.data?.reduce<XYLabel<Datum>[]>((acc, d) => {\n      const xPositioning = getValue<Datum, XYLabelPositioning>(d, config.xPositioning)\n      const yPositioning = getValue<Datum, XYLabelPositioning>(d, config.yPositioning)\n      const props = getLabelRenderProps(d, this.element, config, this.xScale, this.yScale)\n\n      if (\n        ((xPositioning !== XYLabelPositioning.DataSpace) || isNumberWithinRange(props.x, xRange)) &&\n        ((yPositioning !== XYLabelPositioning.DataSpace) || isNumberWithinRange(props.y, yRange))\n      ) {\n        acc.push({ ...d, _screen: props })\n      }\n\n      return acc\n    }, []) ?? []\n\n    return config.clustering ? this._getClusteredLabels(labels) : labels\n  }\n\n  private _getClusteredLabels (labels: XYLabel<Datum>[]): (XYLabel<Datum> | XYLabelCluster<Datum>)[] {\n    const labelsNonOverlapping = [...labels]\n    const clusterMap = new Map<XYLabel<Datum>, XYLabel<Datum>[]>()\n    for (let i = 0; i < labelsNonOverlapping.length; i += 1) {\n      const label1 = labelsNonOverlapping[i]\n      for (let j = i + 1; j < labelsNonOverlapping.length; j += 1) {\n        const label2 = labelsNonOverlapping[j]\n        const isIntersecting = rectIntersect(label1._screen, label2._screen)\n        if (isIntersecting) {\n          if (!clusterMap.has(label1)) clusterMap.set(label1, [label1])\n          clusterMap.get(label1).push(label2)\n          labelsNonOverlapping.splice(j, 1)\n          j -= 1\n        }\n      }\n\n      if (clusterMap.has(label1)) {\n        labelsNonOverlapping.splice(i, 1)\n        i -= 1\n      }\n    }\n\n    const clusters = Array.from(clusterMap.values()).map(records => ({\n      _screen: getLabelRenderProps(records, this.element, this.config, this.xScale, this.yScale),\n      records,\n    }))\n\n    return [...labelsNonOverlapping, ...clusters]\n  }\n}\n", "import { HierarchyRectangularNode } from 'd3-hierarchy'\n\nexport type NestedDonutSegmentDatum<Datum> = {\n  key: string;\n  root: string;\n  values: Datum[];\n}\n\nexport type NestedDonutSegment<Datum> = HierarchyRectangularNode<NestedDonutSegmentDatum<Datum>> & {\n  _id: string;\n  _layer: NestedDonutLayer;\n  _index?: number;\n  _state?: {\n    fill?: string;\n    fillOpacity?: number | null;\n  };\n}\n\nexport enum NestedDonutDirection {\n  Inwards = 'inwards',\n  Outwards = 'outwards',\n}\n\nexport enum NestedDonutSegmentLabelAlignment {\n  Along = 'along',\n  Perpendicular = 'perpendicular',\n  Straight = 'straight',\n}\n\nexport type NestedDonutLayerSettings = {\n  backgroundColor?: string;\n  labelAlignment?: NestedDonutSegmentLabelAlignment;\n  width?: number | string;\n}\n\nexport type NestedDonutLayer = NestedDonutLayerSettings & {\n  _id: number;\n  _innerRadius: number;\n  _outerRadius: number;\n}\n\n", "// Core\nimport { ComponentConfigInterface, ComponentDefaultConfig } from 'core/component/config'\n\n// Types\nimport { ColorAccessor, GenericAccessor, NumericAccessor, StringAccessor } from 'types/accessor'\nimport { NestedDonutDirection, NestedDonutLayerSettings, NestedDonutSegment } from './types'\n\nexport interface NestedDonutConfigInterface<Datum> extends ComponentConfigInterface {\n  /** Diagram angle range. Default: `[0, 2 * Math.PI]` */\n  angleRange?: [number, number];\n  /**\n   * Direction of hierarchy flow from root to leaf.\n   * `NestedDonutDirection.Inwards` starts from the outer most radius and works towards center\n   * `NestedDonutDirection.Outwards` starts from the inner most radius the consecutive layers outward.\n   *  Default: `NestedDonutDirection.Inwards`\n  */\n  direction?: NestedDonutDirection | string;\n  /* Numeric accessor for segment size value. Default: `undefined`. */\n  value?: NumericAccessor<Datum>;\n\n  /** Central label text. Default: `undefined` */\n  centralLabel?: string;\n  /** Central sub-label accessor function or text. Default: `undefined` */\n  centralSubLabel?: string;\n  /** Enables wrapping for the sub-label. Default: `true` */\n  centralSubLabelWrap?: boolean;\n  /**\n   * Show donut background. The color is configurable via\n   * the `--vis-nested-donut-background-color` and `--vis-dark-nested-donut-background-color` CSS variables.\n   * Default: `false`\n  */\n  showBackground?: boolean;\n  /** Sort function for segments. Default `undefined` */\n  sort?: (a: NestedDonutSegment<Datum>, b: NestedDonutSegment<Datum>) => number;\n\n  // Layers\n  /** Array of accessor functions to defined the nested groups  */\n  layers: StringAccessor<Datum>[];\n  /**\n   * Configuration properties for individual layers. Accepts an accessor or constant of type:\n   * {\n   *   backgroundColor?: string;\n   *   labelAlignment?: NestedDonutSegmentLabelAlignment;\n   *   width?: number | string;\n   * }\n  */\n  layerSettings?: GenericAccessor<NestedDonutLayerSettings, number>;\n  /* Space between layers */\n  layerPadding?: number;\n\n  // Segments\n  /** Corner Radius. Default: `0` */\n  cornerRadius?: number;\n  /** Angular size for empty segments in radians. Default: `Math.PI / 180` */\n  emptySegmentAngle?: number;\n  /** Hide segment labels when they don't fit. Default: `true` */\n  hideOverflowingSegmentLabels?: boolean;\n  /** Color accessor function for segments. Default: `undefined` */\n  segmentColor?: ColorAccessor<NestedDonutSegment<Datum>>;\n  /** Segment label accessor function. Default `undefined` */\n  segmentLabel?: StringAccessor<NestedDonutSegment<Datum>>;\n  /** Color accessor function for segment labels */\n  segmentLabelColor?: ColorAccessor<NestedDonutSegment<Datum>>;\n  /**\n   * When true, the component will display empty segments (the ones that have `0` values) as tiny slices.\n   * Default: `false`\n  */\n  showEmptySegments?: boolean;\n  /** Show labels for individual segments. Default: `true` */\n  showSegmentLabels?: boolean;\n}\n\nexport const NestedDonutDefaultConfig: NestedDonutConfigInterface<unknown> = {\n  ...ComponentDefaultConfig,\n  angleRange: [0, 2 * Math.PI],\n  centralLabel: undefined,\n  centralSubLabel: undefined,\n  centralSubLabelWrap: true,\n  cornerRadius: 0,\n  direction: NestedDonutDirection.Inwards,\n  emptySegmentAngle: Math.PI / 180,\n  hideOverflowingSegmentLabels: true,\n  layers: [],\n  layerPadding: 0,\n  layerSettings: undefined,\n  segmentColor: undefined,\n  segmentLabel: undefined,\n  segmentLabelColor: undefined,\n  showBackground: false,\n  showEmptySegments: false,\n  showSegmentLabels: true,\n  sort: undefined,\n  value: undefined,\n}\n", "import { Selection } from 'd3-selection'\nimport { Transition } from 'd3-transition'\nimport { interpolate } from 'd3-interpolate'\nimport { Arc } from 'd3-shape'\n\n// Utils\nimport { getColor } from 'utils/color'\nimport { smartTransition } from 'utils/d3'\n\n// Local Types\nimport { NestedDonutSegment } from '../types'\n\n// Config\nimport { NestedDonutConfigInterface } from '../config'\n\ntype AnimState = { x0: number; x1: number; y0: number; y1: number }\nexport interface ArcNode extends SVGElement {\n  _animState?: AnimState;\n}\n\nexport function createArc<Datum> (\n  selection: Selection<SVGPathElement, NestedDonutSegment<Datum>, SVGGElement, unknown>,\n  config: NestedDonutConfigInterface<Datum>\n): void {\n  selection\n    .style('fill', d => getColor(d, config.segmentColor) ?? d._state?.fill)\n    .style('opacity', 0)\n    .each((d, i, els) => {\n      const arcNode: ArcNode = els[i]\n      const angleCenter = (d.x0 + d.x1) / 2\n      const angleHalfWidth = (d.x1 - d.x0) / 2\n      arcNode._animState = {\n        x0: angleCenter - angleHalfWidth,\n        x1: angleCenter + angleHalfWidth,\n        y0: d.y0,\n        y1: d.y1,\n      }\n    })\n}\n\nexport function updateArc<Datum> (\n  selection: Selection<SVGPathElement, NestedDonutSegment<Datum>, SVGGElement, unknown>,\n  config: NestedDonutConfigInterface<Datum>,\n  arcGen: Arc<any, AnimState>,\n  duration: number\n): void {\n  selection\n    .style('transition', `fill ${duration}ms`) // Animate color with CSS because we're using CSS-variables\n    .style('fill', d => d._state.fill)\n    .style('fill-opacity', d => d._state.fillOpacity)\n\n  if (duration) {\n    const transition = smartTransition(selection, duration)\n      .style('opacity', 1) as Transition<SVGPathElement, NestedDonutSegment<Datum>, SVGGElement, ArcNode>\n\n    transition.attrTween('d', (d, i, els) => {\n      const arcNode: ArcNode = els[i]\n      const nextAnimState = { x0: d.x0, x1: d.x1, y0: d.y0, y1: d.y1 }\n      const datum = interpolate(arcNode._animState, nextAnimState)\n      return (t: number): string => {\n        arcNode._animState = datum(t)\n        return arcGen(arcNode._animState)\n      }\n    })\n  } else {\n    selection.attr('d', arcGen)\n      .style('opacity', 1)\n  }\n}\n\nexport function removeArc<Datum> (\n  selection: Selection<SVGPathElement, NestedDonutSegment<Datum>, SVGGElement, unknown>,\n  duration: number\n): void {\n  smartTransition(selection, duration)\n    .style('opacity', 0)\n    .remove()\n}\n", "import { css } from '@emotion/css'\n\n// Utils\nimport { getCssVarNames, injectGlobalCssVariables } from 'utils/style'\n\nconst cssVarDefaults = {\n  // Undefined by default to allow proper fallback to var(--vis-font-family)\n  '--vis-nested-donut-font-family': undefined as undefined,\n\n  // Background\n  '--vis-nested-donut-background-color': '#E7E9F3',\n\n  // Central label\n  '--vis-nested-donut-central-label-font-size': '16px',\n  '--vis-nested-donut-central-label-font-weight': 600,\n  '--vis-nested-donut-central-label-text-color': '#5b5f6d',\n\n  // Central sub-label\n  '--vis-nested-donut-central-sublabel-font-size': '12px;',\n  '--vis-nested-donut-central-sublabel-font-weight': 500,\n  '--vis-nested-donut-central-sublabel-text-color': '#5b5f6d',\n\n  // Segments\n  '--vis-nested-donut-segment-stroke-width': '1px',\n  '--vis-nested-donut-segment-stroke-color': 'var(--vis-nested-donut-background-color)',\n  '--vis-nested-donut-segment-label-text-color-light': '#5b5f6d',\n  '--vis-nested-donut-segment-label-text-color-dark': '#fff',\n  '--vis-nested-donut-segment-label-font-size': '1em',\n\n  /* Dark theme */\n  '--vis-dark-nested-donut-background-color': '#18160C',\n  '--vis-dark-nested-donut-central-label-text-color': '#fff',\n  '--vis-dark-nested-donut-central-sublabel-text-color': '#fff',\n}\n\nexport const root = css`\n  label: nested-donut-component;\n`\n\nexport const segmentsGroup = css`\n  label: nested-donut-segments-group;\n`\n\nexport const variables = getCssVarNames(cssVarDefaults)\ninjectGlobalCssVariables(cssVarDefaults, root)\n\nexport const background = css`\n  label: background;\n  fill: var(--vis-nested-donut-background-color);\n  stroke-width: var(--vis-nested-donut-segment-stroke-width);\n  stroke: var(--vis-nested-donut-segment-stroke-color);\n`\n\nexport const segment = css`\n  label: segment;\n `\n\nexport const segmentExit = css`\n  label: segment-exit;\n`\n\nexport const segmentArc = css`\n  label: segment-arc;\n  stroke-width: var(--vis-nested-donut-segment-stroke-width);\n  stroke: var(--vis-nested-donut-segment-stroke-color);\n`\n\nexport const segmentLabel = css`\n  label: segment-label;\n  text-anchor: middle;\n  dominant-baseline: middle;\n  user-select: none;\n  font-size: var(--vis-nested-donut-segment-label-font-size);\n`\n\nexport const centralLabel = css`\n  label: central-label;\n  text-anchor: middle;\n  dominant-baseline: middle;\n  font-size: var(--vis-nested-donut-central-label-font-size);\n  font-family: var(--vis-nested-donut-central-label-font-family, var(--vis-font-family));\n  font-weight: var(--vis-nested-donut-central-label-font-weight);\n  fill: var(--vis-nested-donut-central-label-text-color);\n`\n\nexport const centralSubLabel = css`\n  label: central-sub-label;\n  text-anchor: middle;\n  dominant-baseline: middle;\n  font-size: var(--vis-nested-donut-central-sublabel-font-size);\n  font-family: var(--vis-nested-donut-central-sublabel-font-family, var(--vis-font-family));\n  font-weight: var(--vis-nested-donut-central-sublabel-font-weight);\n  fill: var(--vis-nested-donut-central-sublabel-text-color);\n`\n", "import { Selection, select } from 'd3-selection'\nimport { color } from 'd3-color'\nimport { Arc } from 'd3-shape'\n\n// Utils\nimport { getColor, getHexValue, rgbaToRgb, rgbToBrightness } from 'utils/color'\nimport { smartTransition } from 'utils/d3'\nimport { getString } from 'utils/data'\nimport { getCSSVariableValueInPixels } from 'utils/misc'\nimport { cssvar } from 'utils/style'\nimport { wrapSVGText } from 'utils/text'\n\n// Config\nimport { NestedDonutConfigInterface } from '../config'\n\n// Local Types\nimport { NestedDonutSegment, NestedDonutSegmentLabelAlignment } from '../types'\n\n// Styles\nimport { variables } from '../style'\n\nfunction getLabelFillColor<Datum> (\n  d: NestedDonutSegment<Datum>,\n  element: SVGElement\n): string {\n  const c = color(d._state.fill) ?? color(getHexValue(d._state.fill, element))\n  const rgb = c?.rgb()\n\n  // If shading, we adjust segment color before calculating brightness ratio\n  const colorParsed = rgb && d._state.fillOpacity\n    ? rgbaToRgb(\n      `rgba(${rgb.r},${rgb.g},${rgb.b},${d._state.fillOpacity})`,\n      getHexValue(cssvar(variables.nestedDonutBackgroundColor), element)\n    ) : rgb\n\n  const brightness = colorParsed ? rgbToBrightness(colorParsed) : 0\n  return cssvar(brightness > 0.65 ? variables.nestedDonutSegmentLabelTextColorLight : variables.nestedDonutSegmentLabelTextColorDark)\n}\n\nfunction getLabelTransform<Datum> (\n  d: NestedDonutSegment<Datum>,\n  arcGen: Arc<unknown, NestedDonutSegment<Datum>>\n): string {\n  const translate = `translate(${arcGen.centroid(d)})`\n  const degree = 180 / Math.PI * (arcGen.startAngle()(d) + arcGen.endAngle()(d)) / 2 - 90\n  switch (d._layer.labelAlignment) {\n    case NestedDonutSegmentLabelAlignment.Along:\n      return `${translate} rotate(${degree + 90})`\n    case NestedDonutSegmentLabelAlignment.Perpendicular:\n      return `${translate} rotate(${degree > 90 ? degree - 180 : degree})`\n    default:\n      return `${translate}`\n  }\n}\n\nfunction getLabelBounds<Datum> (\n  d: NestedDonutSegment<Datum>\n): { width: number; height: number } {\n  const arcWidth = d.y1 - d.y0\n  const arcLength = d._layer._innerRadius * (d.x1 - d.x0)\n  const bandwidth = Math.max(Math.abs(Math.cos(d.x0 + (d.x1 - d.x0) / 2 - Math.PI / 2) * arcWidth), arcWidth)\n  switch (d._layer.labelAlignment) {\n    case NestedDonutSegmentLabelAlignment.Perpendicular:\n      return { width: arcWidth, height: arcLength }\n    case NestedDonutSegmentLabelAlignment.Along:\n      return { width: arcLength, height: arcWidth }\n    case NestedDonutSegmentLabelAlignment.Straight:\n      return { width: bandwidth, height: bandwidth }\n  }\n}\n\nexport function createLabel<Datum> (\n  selection: Selection<SVGTextElement, NestedDonutSegment<Datum>, SVGGElement, unknown>,\n  arcGen: Arc<unknown, NestedDonutSegment<Datum>>\n): void {\n  selection\n    .attr('transform', d => getLabelTransform(d, arcGen))\n    .style('visibility', null)\n    .style('opacity', 0)\n}\n\n\nexport function updateLabel<Datum> (\n  selection: Selection<SVGTextElement, NestedDonutSegment<Datum>, SVGGElement, unknown>,\n  config: NestedDonutConfigInterface<Datum>,\n  arcGen: Arc<unknown, NestedDonutSegment<Datum>>,\n  duration: number\n): void {\n  selection\n    .text(d => getString(d, config.segmentLabel) ?? d.data.key)\n    .style('transition', `fill ${duration}ms`)\n    .style('fill', (d, i, els) => getColor(d, config.segmentLabelColor) ?? getLabelFillColor(d, els[i]))\n    .each((d, i, els) => {\n      const bounds = getLabelBounds(d)\n      const label = select(els[i]).call(wrapSVGText, bounds.width)\n\n      const { width, height } = label.node().getBBox()\n\n      if (config.hideOverflowingSegmentLabels && (width > bounds.width || height > bounds.height) && 'hidden') {\n        label.attr('visibility', 'hidden')\n      } else {\n        const fontSize = getCSSVariableValueInPixels(cssvar(variables.nestedDonutSegmentLabelFontSize), els[i])\n        const len = label.selectChildren().size() - 1\n        label.attr('dy', -fontSize / 2 * len)\n      }\n    })\n\n  smartTransition(selection, duration)\n    .attr('transform', d => getLabelTransform(d, arcGen))\n    .style('opacity', 1)\n}\n\nexport function removeLabel<Datum> (\n  selection: Selection<SVGTextElement, NestedDonutSegment<Datum>, SVGGElement, unknown>,\n  duration: number\n): void {\n  smartTransition(selection, duration)\n    .style('opacity', 0)\n    .remove()\n}\n", "import { Selection } from 'd3-selection'\nimport { arc, pie } from 'd3-shape'\nimport { hierarchy, HierarchyNode, partition } from 'd3-hierarchy'\nimport { scaleLinear, ScaleLinear } from 'd3-scale'\nimport { group } from 'd3-array'\n\n// Core\nimport { ComponentCore } from 'core/component'\nimport { SeriesDataModel } from 'data-models/series'\n\n// Types\nimport { VerticalAlign } from 'types/text'\n\n// Utils\nimport { getColor } from 'utils/color'\nimport { smartTransition } from 'utils/d3'\nimport { getNumber, getString, getValue, isNumber, isNumberWithinRange, merge } from 'utils/data'\nimport { getPixelValue } from 'utils/misc'\nimport { cssvar } from 'utils/style'\nimport { wrapSVGText } from 'utils/text'\n\n// Local Types\nimport { NestedDonutDirection, NestedDonutSegment, NestedDonutLayer, NestedDonutSegmentLabelAlignment } from './types'\n\n// Config\nimport { NestedDonutDefaultConfig, NestedDonutConfigInterface } from './config'\n\n// Modules\nimport { createArc, updateArc, removeArc } from './modules/arc'\nimport { createLabel, updateLabel, removeLabel } from './modules/label'\n\n// Styles\nimport * as s from './style'\n\nexport class NestedDonut<Datum> extends ComponentCore<\nDatum[],\nNestedDonutConfigInterface<Datum>\n> {\n  static selectors = s\n  static cssVariables = s.variables\n  protected _defaultConfig = NestedDonutDefaultConfig as NestedDonutConfigInterface<Datum>\n  public config: NestedDonutConfigInterface<Datum> = this._defaultConfig\n  datamodel: SeriesDataModel<Datum> = new SeriesDataModel()\n\n  arcBackground: Selection<SVGGElement, unknown, SVGGElement, unknown>\n  arcGroup: Selection<SVGGElement, unknown, SVGGElement, unknown>\n  centralLabel: Selection<SVGTextElement, unknown, SVGGElement, unknown>\n  centralSubLabel: Selection<SVGTextElement, unknown, SVGGElement, unknown>\n\n  arcGen = arc<Partial<NestedDonutSegment<Datum>>>()\n  colorScale: ScaleLinear<string, string> = scaleLinear()\n\n  events = { }\n\n  constructor (config?: NestedDonutConfigInterface<Datum>) {\n    super()\n    if (config) this.setConfig(config)\n    this.arcBackground = this.g.append('g')\n    this.arcGroup = this.g.append('g')\n      .attr('class', s.segmentsGroup)\n    this.centralLabel = this.g.append('text')\n      .attr('class', s.centralLabel)\n    this.centralSubLabel = this.g.append('text')\n      .attr('class', s.centralSubLabel)\n  }\n\n  _render (customDuration?: number): void {\n    const { config } = this\n    const duration = isNumber(customDuration) ? customDuration : config.duration\n\n    if (config.layers === undefined || config.layers.length === 0) {\n      console.warn('Unovis | Nested Donut: No layers defined.')\n      return\n    }\n    const layers = this._getLayerSettings()\n    const data = this._getHierarchyData(layers)\n\n    this.arcGen\n      .startAngle(d => d.x0)\n      .endAngle(d => d.x1)\n      .innerRadius(d => d.y0)\n      .outerRadius(d => d.y1)\n      .cornerRadius(config.cornerRadius)\n\n    this.arcGroup.attr('transform', `translate(${this._width / 2},${this._height / 2})`)\n    this.arcBackground.attr('transform', `translate(${this._width / 2},${this._height / 2})`)\n    this.centralLabel.attr('transform', `translate(${this._width / 2},${this._height / 2})`)\n    this.centralSubLabel.attr('transform', `translate(${this._width / 2},${this._height / 2})`)\n\n    // Layer backgrounds\n    const backgrounds = this.arcBackground\n      .selectAll<SVGPathElement, NestedDonutLayer>(`.${s.background}`)\n      .data(layers, d => d._id)\n\n    const backgroundsEnter = backgrounds.enter().append('path')\n      .attr('class', s.background)\n      .attr('visibility', config.showBackground ? null : 'hidden')\n\n    const backgroundsMerged = backgrounds.merge(backgroundsEnter)\n      .style('transition', `fill ${duration}ms`)\n      .style('fill', d => d.backgroundColor)\n\n    smartTransition(backgroundsMerged, duration)\n      .attr('d', d => this.arcGen({\n        x0: config.angleRange?.[0] ?? 0,\n        x1: config.angleRange?.[1] ?? 2 * Math.PI,\n        y0: d._innerRadius,\n        y1: d._outerRadius,\n      }))\n\n    smartTransition(backgrounds.exit(), duration)\n      .style('opacity', 0)\n      .remove()\n\n    // Segments\n    const segments = this.arcGroup.selectAll<SVGGElement, NestedDonutSegment<Datum>>(`${s.segment}`)\n      .data(data, d => d._id)\n\n    const segmentsEnter = segments.enter()\n      .append('g')\n      .attr('class', s.segment)\n\n    segments.merge(segmentsEnter)\n    smartTransition(segments.exit(), duration)\n      .attr('class', s.segmentExit)\n      .style('opacity', 0)\n      .remove()\n\n    // Segment arcs\n    const arcs = this.arcGroup\n      .selectAll<SVGPathElement, NestedDonutSegment<Datum>>(`.${s.segmentArc}`)\n      .data(data, d => d._id)\n\n    const arcsEnter = segmentsEnter.append('path')\n      .attr('class', s.segmentArc)\n      .call(createArc, config)\n\n    arcs.merge(arcsEnter)\n      .call(updateArc, config, this.arcGen, duration)\n\n    arcs.exit<NestedDonutSegment<Datum>>()\n      .attr('class', s.segmentExit)\n      .call(removeArc, duration)\n\n    // Segment labels\n    if (config.showSegmentLabels) {\n      const labels = this.arcGroup\n        .selectAll<SVGTextElement, NestedDonutSegment<Datum>>(`.${s.segmentLabel}`)\n        .data(data, d => d._id)\n\n      const labelsEnter = segmentsEnter.append('text')\n        .attr('class', s.segmentLabel)\n        .call(createLabel, this.arcGen)\n\n      labels.merge(labelsEnter)\n        .call(updateLabel, config, this.arcGen, duration)\n\n      labels.exit<NestedDonutSegment<Datum>>()\n        .call(removeLabel, duration)\n    }\n\n    // Chart labels\n    this.centralLabel\n      .attr('dy', config.centralSubLabel ? '-0.55em' : null)\n      .text(config.centralLabel ?? null)\n\n    this.centralSubLabel\n      .attr('dy', config.centralLabel ? '0.55em' : null)\n      .text(config.centralSubLabel ?? null)\n\n    if (config.centralSubLabelWrap) wrapSVGText(this.centralSubLabel, layers[0]._innerRadius * 1.9, VerticalAlign.Top)\n  }\n\n  private _getHierarchyData (layers: NestedDonutLayer[]): NestedDonutSegment<Datum>[] {\n    const { config, datamodel: { data } } = this\n\n    const layerAccessors = config.layers?.map(layerAccessor => (i: number) => getString(data[i], layerAccessor, i))\n    const nestedData = group(data.keys(), ...layerAccessors as [(i: number) => string])\n\n    const rootNode = config.value !== undefined\n      ? hierarchy(nestedData).sum(index => typeof index === 'number' && getNumber(data[index], config.value, index))\n      : hierarchy(nestedData).count()\n\n    const partitionData = partition().size([config.angleRange[1], 1])(rootNode) as NestedDonutSegment<Datum>\n\n    partitionData\n      .each(node => {\n        // Starting with the root, we transform the original data returned from d3.hierarchy\n        const n = node as unknown as HierarchyNode<[string, number[]]>\n        node.data = {\n          key: n.data[0],\n          values: Array.isArray(n.data[1]) ? (n.data[1] as number[]).map(i => data[i]) : [],\n          root: node.parent?.data?.root ?? n.data[0],\n        }\n        node._id = `root${partitionData.path(node).map(d => d.data.key).join('->')}`\n        if (isNumberWithinRange(node.depth - 1, [0, layers.length - 1])) {\n          node._layer = layers[node.depth - 1]\n          node.y0 = node._layer._innerRadius\n          node.y1 = node._layer._outerRadius\n        }\n      })\n      .eachBefore((node) => {\n        // Once ancestors have been visited, children properties that are\n        // dependent on the parent's data are populated here\n        if (!node.children || node.depth === rootNode.height - 1) return\n\n        const positions = pie<NestedDonutSegment<Datum>>()\n          .startAngle(node.parent ? node.x0 : config.angleRange?.[0])\n          .endAngle(node.parent ? node.x1 : config.angleRange?.[1])\n          .value(d => config.showEmptySegments && d.value === 0\n            ? config.emptySegmentAngle\n            : (d.x1 - d.x0))\n          .sort(config.sort)(node.children)\n\n        const opacity = scaleLinear()\n          .domain([-1, node.children.length])\n          .range([node._state?.fillOpacity ?? 1, 0])\n\n        node.children.forEach((child, i) => {\n          child._index = i\n          child.x0 = positions[i].startAngle\n          child.x1 = positions[i].endAngle\n\n          // Default to parent's fill if segmentColor accessor is not provided\n          const color = getColor(child, config.segmentColor, positions[i].index, child.depth !== 1)\n          child._state = {\n            fill: color ?? node._state.fill,\n            fillOpacity: color === null ? opacity(positions[i].index) : null,\n          }\n        })\n      })\n      .eachAfter(node => {\n        // Once hierarchy has been traversed, we append children data the parent\n        // parent.data serves as a reference to all the original data it represents\n        node.children?.forEach(ch => node.data.values.push(...ch.data.values))\n      })\n\n    const segments = partitionData.descendants().filter(d => d.parent?.value && d.data.key)\n    return segments\n  }\n\n  private _getLayerSettings (): NestedDonutLayer[] {\n    const { direction, layers, layerPadding, layerSettings } = this.config\n\n    const outerRadius = Math.min(this._width, this._height) / 2\n\n    const defaultLayerSettings = {\n      backgroundColor: cssvar(s.variables.nestedDonutBackgroundColor),\n      labelAlignment: NestedDonutSegmentLabelAlignment.Perpendicular,\n      width: outerRadius * 0.75 / layers.length,\n    }\n    const layerItems = layers.reduceRight((arr, _, i) => {\n      const layerId = direction === NestedDonutDirection.Outwards ? i : arr.length\n      const layerConfig = merge(defaultLayerSettings, getValue(layerId, layerSettings))\n      const radius = arr.length ? arr[0]._innerRadius - layerPadding : outerRadius\n      const layerWidth = getPixelValue(layerConfig.width)\n      if (layerWidth === null) {\n        console.warn(`Unovis | Nested Donut: Could not parse width ${layerConfig.width}. Setting to default.`)\n      }\n      arr.unshift({\n        ...layerConfig,\n        _id: layerId,\n        _outerRadius: radius,\n        _innerRadius: radius - (layerWidth ?? defaultLayerSettings.width),\n      })\n      return arr\n    }, new Array<NestedDonutLayer>())\n\n    return direction === NestedDonutDirection.Inwards ? layerItems.reverse() : layerItems\n  }\n}\n", "import { ComponentConfigInterface, ComponentDefaultConfig } from 'core/component/config'\n\n// Types\nimport { AnnotationItem } from './types'\n\nexport interface AnnotationsConfigInterface extends ComponentConfigInterface {\n  /** Legend items. Array of `AnnotationItem`:\n   * ```\n   * {\n   *   content: string | UnovisText | UnovisText[];\n   *   subject?: AnnotationSubject;\n   *   x?: LengthUnit;\n   *   y?: LengthUnit;\n   *   width?: LengthUnit;\n   *   height?: LengthUnit;\n   * }\n   * ```\n   * To learn more, see our docs https://unovis.dev/docs/auxiliary/Annotations/\n  * Default: `[]` */\n  items: AnnotationItem[] | undefined;\n}\n\nexport const AnnotationsDefaultConfig: AnnotationsConfigInterface = {\n  ...ComponentDefaultConfig,\n  items: [],\n}\n", "import { css } from '@emotion/css'\n\n// Utils\nimport { getCssVarNames, injectGlobalCssVariables } from 'utils/style'\n\nconst cssVarDefaults = {\n  '--vis-annotations-text-color': '#282C34',\n\n  '--vis-annotations-connector-stroke-color': '#444',\n  '--vis-annotations-connector-stroke-width': '1px',\n  '--vis-annotations-connector-stroke-dasharray': 'none',\n\n  '--vis-annotations-subject-stroke-color': '#444',\n  '--vis-annotations-subject-fill-color': 'none',\n  '--vis-annotations-subject-stroke-dasharray': 'none',\n\n  '--vis-dark-annotations-text-color': '#e8e9ef',\n  '--vis-dark-annotations-connector-stroke-color': '#fff',\n  '--vis-dark-annotations-subject-stroke-color': '#fff',\n}\n\nexport const root = css`\n  label: annotations-component;\n`\nexport const variables = getCssVarNames(cssVarDefaults)\ninjectGlobalCssVariables(cssVarDefaults, root)\n\nexport const annotation = css`\n  label: annotation;\n`\n\nexport const annotationSubject = css`\n  label: annotationSubject;\n\n  line {\n    stroke: var(${variables.annotationsConnectorStrokeColor});\n    stroke-width: var(${variables.annotationsConnectorStrokeWidth});\n    stroke-dasharray: var(${variables.annotationsConnectorStrokeDasharray});\n  }\n\n  circle {\n    stroke: var(${variables.annotationsSubjectStrokeColor});\n    fill: var(${variables.annotationsSubjectFillColor});\n    stroke-dasharray: var(${variables.annotationsSubjectStrokeDasharray});\n  }\n`\n\nexport const annotationContent = css`\n  label: annotationContent;\n  > text {\n    fill: var(--vis-annotations-text-color);\n  }\n`\n", "import { select, Selection } from 'd3-selection'\n\n// Core\nimport { ComponentCore } from 'core/component'\n\n// Utils\nimport { isNumber } from 'utils/data'\nimport { smartTransition } from 'utils/d3'\nimport { renderTextIntoFrame } from 'utils/text'\nimport { parseUnit } from 'utils/misc'\nimport { UNOVIS_TEXT_DEFAULT } from 'styles'\n\n// Local Types\nimport { AnnotationItem, AnnotationSubject } from './types'\n\n// Config\nimport { AnnotationsDefaultConfig, AnnotationsConfigInterface } from './config'\n\n// Styles\nimport * as s from './style'\n\nexport class Annotations extends ComponentCore<unknown[], AnnotationsConfigInterface> {\n  static selectors = s\n  static cssVariables = s.variables\n  protected _defaultConfig = AnnotationsDefaultConfig as AnnotationsConfigInterface\n  public config: AnnotationsConfigInterface = this._defaultConfig\n\n  g: Selection<SVGGElement, unknown, null, undefined>\n\n  events = {}\n\n  constructor (config?: AnnotationsConfigInterface) {\n    super()\n    if (config) this.setConfig(config)\n  }\n\n  _render (customDuration?: number): void {\n    super._render(customDuration)\n    const { config } = this\n\n    const duration = isNumber(customDuration) ? customDuration : config.duration\n\n    const annotations = this.g.selectAll<SVGGElement, AnnotationItem[]>(`.${s.annotation}`)\n      .data(config.items, d => JSON.stringify(d))\n\n    const annotationsEnter = annotations.enter().append('g')\n      .attr('class', s.annotation)\n      .style('opacity', 0)\n\n    // Content\n    annotationsEnter.append('g').attr('class', s.annotationContent)\n\n    // Subject\n    const subject = annotationsEnter.append('g')\n      .attr('class', s.annotationSubject)\n\n    subject.append('circle')\n    subject.append('line')\n\n    const annotationsMerged = annotationsEnter.merge(annotations)\n      .attr('cursor', d => d?.cursor)\n      .each((annotation, i, elements) => {\n        if (annotation.content) {\n          const content = typeof annotation.content === 'string' ? { ...UNOVIS_TEXT_DEFAULT, text: annotation.content } : annotation.content\n          const x = parseUnit(annotation.x, this._width)\n          const y = parseUnit(annotation.y, this._height)\n          const width = parseUnit(annotation.width, this._width)\n          const height = parseUnit(annotation.height, this._height)\n          const options = { ...annotation, x, y, width, height }\n\n          const contentGroupElement = select(elements[i]).select<SVGGElement>(`.${s.annotationContent}`)\n          renderTextIntoFrame(contentGroupElement.node(), content, options)\n        }\n\n        if (annotation.subject) {\n          requestAnimationFrame(() => this._renderSubject(elements[i], annotation.subject))\n        }\n      })\n\n    smartTransition(annotationsMerged, duration)\n      .style('opacity', 1)\n\n    smartTransition(annotations.exit(), duration)\n      .style('opacity', 0)\n      .remove()\n  }\n\n\n  private _renderSubject (\n    annotationGroupElement: SVGElement,\n    subject: AnnotationSubject | undefined\n  ): void {\n    const contentGroup = select(annotationGroupElement).select<SVGGElement>(`.${s.annotationContent}`)\n    const subjectGroup = select(annotationGroupElement).select<SVGGElement>(`.${s.annotationSubject}`)\n\n    const subjectX: number | null = parseUnit(typeof subject?.x === 'function' ? subject.x() : subject?.x, this._width) ?? null\n    const subjectY: number | null = parseUnit(typeof subject?.y === 'function' ? subject.y() : subject?.y, this._height) ?? null\n\n    const subjectStrokeColor: string | null = subject?.strokeColor ?? null\n    const subjectFillColor: string | null = subject?.fillColor ?? null\n    const subjectStrokeDasharray: string | null = subject?.strokeDasharray ?? null\n    const connectorLineColor: string | null = subject?.connectorLineColor ?? null\n    const connectorLineStrokeDasharray: string | null = subject?.connectorLineStrokeDasharray ?? null\n    const subjectRadius: number | null = subject?.radius ?? 0\n    const padding = subject?.padding ?? 5\n\n    const contentBbox = contentGroup.node().getBBox()\n    const dy = Math.abs(subjectY - (contentBbox.y + contentBbox.height / 2))\n    const dx = Math.abs(subjectX - (contentBbox.x + contentBbox.width / 2))\n    const annotationPadding = 5\n    const x2 = (dx < dy) && ((subjectY < contentBbox.y) || (subjectY > (contentBbox.y + contentBbox.height)))\n      ? contentBbox.x + contentBbox.width / 2\n      : (subjectX < contentBbox.x) ? contentBbox.x - annotationPadding : contentBbox.x + contentBbox.width + annotationPadding\n\n    const y2 = (dx >= dy) || ((subjectY >= contentBbox.y) && (subjectY <= (contentBbox.y + contentBbox.height)))\n      ? contentBbox.y + contentBbox.height / 2\n      : (subjectY < contentBbox.y) ? contentBbox.y - annotationPadding : contentBbox.y + contentBbox.height + annotationPadding\n\n    const angle = Math.atan2(y2 - subjectY, x2 - subjectX) * 180 / Math.PI\n    const x1 = subjectX + Math.cos(angle * Math.PI / 180) * (subjectRadius + padding)\n    const y1 = subjectY + Math.sin(angle * Math.PI / 180) * (subjectRadius + padding)\n\n    subjectGroup.select('circle')\n      .attr('visibility', subject ? null : 'hidden')\n      .attr('cx', subjectX)\n      .attr('cy', subjectY)\n      .attr('r', subjectRadius)\n      .style('stroke', subjectStrokeColor)\n      .style('fill', subjectFillColor)\n      .style('stroke-dasharray', subjectStrokeDasharray)\n\n    subjectGroup.select('line')\n      .attr('visibility', subject ? null : 'hidden')\n      .attr('x1', x1)\n      .attr('y1', y1)\n      .attr('x2', x1)\n      .attr('y2', y1)\n      .attr('x2', x2)\n      .attr('y2', y2)\n      .style('stroke', connectorLineColor)\n      .style('stroke-dasharray', connectorLineStrokeDasharray)\n  }\n}\n", "export enum Shape {\n  Square = 'square',\n  Circle = 'circle',\n  Hexagon = 'hexagon',\n  Triangle = 'triangle',\n  Cluster = 'cluster',\n}\n", "import { css } from '@emotion/css'\n\nexport const styleLargeSize = css`\n  label: large-size;\n\n  /* Axis */\n  --vis-axis-label-font-size: 18px;\n  --vis-axis-tick-label-font-size: 16px;\n\n  /* Donut */\n  --vis-donut-central-label-font-size: 20px;\n  --vis-donut-central-sub-label-font-size: 16px;\n\n  /* Graph */\n  --vis-graph-node-bottom-icon-font-size: 18pt;\n  --vis-graph-node-label-font-size: 12pt;\n  --vis-graph-node-sublabel-font-size: 10pt;\n  --vis-graph-panel-label-font-size: 14pt;\n\n  /* LeafletMap */\n  --vis-map-point-bottom-label-font-size: 14px;\n\n  /* Legend */\n  --vis-legend-label-font-size: 16px;\n  --vis-legend-bullet-label-spacing: 10px;\n  --vis-legend-bullet-size: 12px;\n\n  /* Sankey */\n  --vis-sankey-node-label-font-size: 16px;\n  --vis-sankey-node-sublabel-font-size: 14px;\n  --vis-sankey-icon-size: 28px;\n\n  /* Scatter */\n  --vis-scatter-point-label-text-font-size: 16px;\n\n  /* Timeline */\n  --vis-timeline-label-font-size: 18px;\n\n  /* TopoJSONMap */\n  --vis-map-point-label-font-size: 16px;\n\n  /* XYLabels */\n  --vis-xy-label-font-size: 16px;\n  --vis-xy-label-cluster-font-size: 18px;\n\n  /* Override leaflet.css */\n  .leaflet-touch .leaflet-control-zoom-in, .leaflet-touch .leaflet-control-zoom-out  {\n    font-size: 28px;\n  }\n  .leaflet-control-attribution a {\n    font-size: 10pt;\n  }\n  .leaflet-container .leaflet-control-attribution,\n  .leaflet-container .leaflet-control-scale,\n  .leaflet-control-scale-line {\n    font-size: 14px;\n  }\n  `\n\nexport const styleExtraLargeSize = css`\n  label: extra-large-size;\n\n  /* Axis */\n  --vis-axis-label-font-size: 28px;\n  --vis-axis-tick-label-font-size: 24px;\n\n  /* Donut */\n  --vis-donut-central-label-font-size: 32px;\n  --vis-donut-central-sub-label-font-size: 24px;\n\n  /* Graph */\n  --vis-graph-node-bottom-icon-font-size: 28pt;\n  --vis-graph-node-label-font-size: 18pt;\n  --vis-graph-node-sublabel-font-size: 16pt;\n  --vis-graph-panel-label-font-size: 20pt;\n\n  /* LeafletMap */\n  --vis-map-point-bottom-label-font-size: 20px;\n\n  /* Legend */\n  --vis-legend-label-font-size: 24px;\n  --vis-legend-bullet-label-spacing: 16px;\n  --vis-legend-bullet-size: 18px;\n\n  /* Sankey */\n  --vis-sankey-node-label-font-size: 24px;\n  --vis-sankey-node-sublabel-font-size: 20px;\n  --vis-sankey-icon-size: 44px;\n\n  /* Scatter */\n  --vis-scatter-point-label-text-font-size: 24px;\n\n  /* Timeline */\n  --vis-timeline-label-font-size: 28px;\n\n  /* TopoJSONMap */\n  --vis-map-point-label-font-size: 24px;\n\n  /* XYLabels */\n  --vis-xy-label-font-size: 24px;\n  --vis-xy-label-cluster-font-size: 28px;\n\n  /* Override leaflet.css */\n  .leaflet-touch .leaflet-control-zoom-in, .leaflet-touch .leaflet-control-zoom-out  {\n    font-size: 44px;\n  }\n  .leaflet-control-attribution a {\n    font-size: 14pt;\n  }\n  .leaflet-container .leaflet-control-attribution,\n  .leaflet-container .leaflet-control-scale,\n  .leaflet-control-scale-line {\n    font-size: 22px;\n  }\n`\n", "export const DefaultRange = [1, 40]\n"],
  "mappings": "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",
  "names": ["parseUnit", "parseUnit", "unit", "size", "global", "Symbol", "name", "striptags", "name", "name", "document", "select", "groups", "m", "group", "node", "x", "select", "groups", "m", "group", "node", "node", "groups", "m", "group", "node", "datum", "x", "group", "node", "value", "groups", "m", "selection", "m", "merge", "node", "groups", "m", "group", "node", "ascending", "a", "groups", "m", "group", "node", "groups", "m", "group", "node", "size", "node", "groups", "m", "group", "node", "name", "value", "node", "node", "name", "value", "node", "name", "value", "node", "name", "value", "value", "value", "name", "create", "name", "create", "select", "value", "name", "m", "value", "node", "type", "window", "dispatch_default", "groups", "m", "group", "node", "groups", "dispatch_default", "select_default", "node", "id", "value", "node", "point", "ComponentType", "Sizing", "ResizeObserverBoxOptions", "ResizeObserverSize", "DOMRectReadOnly", "x", "y", "top", "right", "bottom", "left", "borderTop", "borderRight", "borderBottom", "borderLeft", "ResizeObserverEntry", "node", "callbacks", "targetDepth", "ResizeObserver", "Scheduler", "name", "ResizeObservation", "size", "ResizeObserverDetail", "ResizeObserverController", "index", "ResizeObserver", "ResizeObserver", "ResizeObserverPolyfill", "select_default", "merge", "ResizeObserver", "s", "toPx", "left2", "right2", "id", "value", "basis", "format", "m", "a", "k", "value", "s", "min", "max", "y", "x", "a", "k", "y", "x", "c", "k", "k", "s", "a", "cosh", "sinh", "hex", "c", "c", "node", "name", "id", "index", "group", "start", "tick", "node", "name", "empty", "interrupt_default", "name", "t1", "t2", "t3", "constant_default", "x", "a", "y", "constant_default", "y", "color", "rgb", "start", "colors", "a", "c", "x", "a", "x", "c", "a", "a", "a", "c", "k", "a", "s", "i", "a", "c", "constant_default", "a", "degrees", "a", "c", "value", "m", "s", "a", "x", "b0", "b1", "s", "hsl", "hue", "start", "s", "hcl", "hue", "start", "c", "cubehelix", "hue", "y", "start", "s", "i", "id", "name", "value", "transition", "node", "a", "c", "attrRemove", "name", "attrRemoveNS", "attrConstant", "attrConstantNS", "attrFunction", "value", "attrFunctionNS", "attr_default", "name", "value", "t0", "id", "value", "id", "value", "id", "value", "id", "value", "filter_default", "groups", "m", "group", "node", "merge_default", "transition", "m", "merge", "node", "name", "id", "on_default", "id", "remove_default", "select_default", "select", "name", "id", "groups", "m", "group", "node", "selectAll_default", "select", "name", "id", "groups", "m", "group", "node", "children", "inherit", "k", "Selection", "selection_default", "name", "styleRemove", "styleConstant", "styleFunction", "value", "id", "remove", "style_default", "name", "value", "textConstant", "value", "textFunction", "text_default", "value", "t0", "name", "groups", "m", "group", "node", "inherit", "id", "size", "groups", "name", "id", "select_default", "selectAll_default", "filter_default", "merge_default", "selection_default", "on_default", "attr_default", "style_default", "text_default", "remove_default", "linear", "polyIn", "custom", "polyOut", "polyInOut", "x", "custom", "s", "backIn", "backOut", "backInOut", "custom", "a", "s", "elasticIn", "p", "elasticOut", "elasticInOut", "node", "id", "transition_default", "name", "groups", "m", "group", "interrupt_default", "transition_default", "selection", "node", "transition", "tooltip", "value", "AxisType", "range", "index", "range", "value", "round", "reverse", "start", "copy", "x", "x", "identity", "x", "a", "range", "i", "transform", "clamp", "piecewise", "y", "x", "x", "value", "value", "s", "x", "exponent", "x", "exponent", "x", "x", "locale", "group", "sign", "zero", "type", "format", "value", "c", "formatPrefix", "k", "value", "max", "start", "count", "value", "count", "start", "linear", "identity", "x", "x0", "x1", "x", "k", "transform", "count", "c", "x", "transform", "exponent", "x", "transform", "identity", "range", "x", "y", "x0", "x1", "range", "x", "y", "range", "x", "y", "t0", "t1", "count", "date", "start", "range", "date", "start", "k", "date", "start", "date", "start", "date", "start", "date", "start", "date", "start", "date", "start", "date", "start", "k", "ticks", "start", "count", "reverse", "step", "date", "y", "m", "locale", "formats", "c", "pad", "format", "value", "sign", "s", "name", "locale", "defaultLocale", "date", "date", "number", "ticks", "second", "format", "formatYear", "tickFormat", "date", "y", "count", "time", "transformer", "x0", "x1", "t0", "t1", "transform", "identity", "clamp", "x", "range", "copy", "transformer", "x0", "x1", "x2", "s", "t0", "t1", "t2", "identity", "transform", "clamp", "x", "range", "copy", "linear", "identity", "time", "ScaleDimension", "Direction", "c", "tooltip", "min", "max", "mergeArrays", "_a", "bleed", "k", "axis", "m", "type", "select_default", "merge", "transition", "selection", "events", "range", "Position", "PositionStrategy", "Arrangement", "Orientation", "root", "variables", "select_default", "s.root", "merge", "s.show", "s.hidden", "translateX", "translateY", "top", "left", "node", "s.nonInteractive", "x", "y", "s.positionFixed", "selection", "path", "s", "constant_default", "x", "constant", "max", "min", "sqrt", "pi", "halfPi", "tau", "x", "pi", "tau", "epsilon", "k", "x", "y", "x1", "y1", "x2", "y2", "x0", "y0", "w", "x0", "y0", "x1", "y1", "x2", "y2", "sqrt", "x00", "y00", "D", "max", "constant_default", "path", "arc", "halfPi", "tau", "min", "t0", "t1", "pi", "a", "array_default", "x", "x", "y", "x", "y", "constant_default", "path", "line", "array_default", "x0", "y0", "y1", "x1", "constant_default", "path", "area", "k", "array_default", "a", "identity_default", "value", "identity_default", "sort", "constant_default", "tau", "array_default", "k", "sum", "index", "i", "j", "a", "radial", "c", "a", "c", "x0", "x1", "y0", "y1", "sqrt", "size", "sqrt", "pi", "tau", "size", "sqrt", "sqrt", "size", "y", "x", "size", "w", "sqrt", "x", "pi", "tau", "size", "sqrt", "x", "y", "a", "c", "s", "sqrt3", "sqrt", "size", "y", "sqrt3", "sqrt", "sqrt", "size", "x0", "y0", "x1", "y1", "x2", "y2", "Symbol", "type", "size", "path", "constant_default", "point", "x", "y", "basis_default", "x", "y", "point", "basisClosed_default", "x", "y", "x0", "y0", "point", "x", "y", "x0", "y0", "custom", "beta", "point", "x", "y", "custom", "tension", "x", "y", "point", "custom", "tension", "x", "y", "point", "custom", "tension", "point", "x", "y", "x1", "y1", "x2", "y2", "a", "m", "custom", "alpha", "x", "y", "point", "custom", "alpha", "x", "y", "point", "custom", "alpha", "x", "y", "x", "x2", "y2", "point", "t0", "t1", "x0", "y0", "x1", "y1", "y", "x", "y", "m", "a", "x", "y", "x1", "object", "symbols", "obj", "value", "points", "left", "right", "t", "array", "extend", "extended", "a", "index", "value", "hex", "rgb", "s", "rgba", "CurveType", "basis_default", "basisClosed_default", "root", "a", "value", "defined", "lines", "s.line", "s.linePath", "s.lineSelectionHelper", "s.interpolatedPath", "group", "select_default", "linePath", "lineSelectionHelper", "transition", "d", "datum", "s.dim", "s", "x", "y", "w", "path", "size", "score", "hLength", "root", "globalStyles", "s", "s.barGroup", "x", "y", "barGroupExit", "s.barGroupExit", "s.bar", "value", "c", "root", "globalStyles", "bar", "barGroup", "barGroupExit", "s.barGroup", "x", "y", "barGroupExit", "s.barGroupExit", "s.bar", "value", "c", "min", "max", "s", "identity_default", "x", "epsilon", "x", "y", "number", "tickFormat", "k", "transform", "axis", "format", "identity_default", "range", "selection", "path", "tick", "line", "TrimMode", "VerticalAlign", "FitMode", "TextAlign", "x", "type", "index", "lines", "w", "line", "merge", "text", "k", "y", "value", "striptags", "group", "root", "globalStyles", "axis", "s.grid", "type", "selection", "left", "right", "top", "bottom", "ticks", "s.tick", "s.tickLabel", "s.tickLabelHideable", "node", "value", "select_default", "s.axis", "s.hideTickLine", "s.hideDomain", "path", "i", "label2", "intersect", "label", "s.label", "translateX", "s", "SymbolType", "Symbol", "x", "y", "selection", "node", "select_default", "group2", "label2", "intersect", "label", "selection", "Symbol", "index", "group", "select_default", "label", "path", "isLabelPositionCenter", "c", "hex", "globalStyles", "root", "point", "extent", "x", "y", "top", "bottom", "left", "right", "s.pointGroup", "pointGroupExit", "s.pointGroupExit", "points", "s.point", "label", "point", "select_default", "s", "root", "selection", "select_default", "constant_default", "x", "type", "x", "y", "value", "filter", "selection", "select_default", "c", "container", "s", "type", "event", "touch", "constant_default", "value", "constant_default", "x", "type", "selection", "nopropagation", "noevent_default", "abs", "max", "min", "number2", "x", "y", "defaultFilter", "defaultTouchable", "local", "node", "empty", "extent", "dim", "extent", "filter", "defaultFilter", "defaultTouchable", "brush", "group", "local", "select_default", "selection", "event", "clean", "type", "E", "points", "min", "max", "point", "abs", "noevent_default", "nopropagation", "empty", "number2", "constant_default", "value", "s", "BrushDirection", "name", "root", "variables", "brush", "s.unselected", "s.brush", "s.handleLine", "s", "selection", "range", "BulletLegendOrientation", "select_default", "color", "selection", "Symbol", "root", "variables", "label", "select_default", "s.root", "merge", "s.item", "s.itemVertical", "s.clickable", "s.bullet", "s.label", "item", "index", "s", "FlowLegendItemType", "root", "globalStyles", "line", "item", "clickable", "label", "select_default", "s.root", "s.labels", "merge", "label", "s.item", "s.arrow", "s.label", "s.clickable", "s.line", "x", "globalStyles", "root", "line", "s.line", "x", "y", "linear", "s.circle", "tooltip", "value", "index", "a", "s", "root", "globalStyles", "lines", "line", "labels", "label", "s.background", "s.rows", "s.lines", "s.labels", "s.scrollbar", "s.scrollbarBackground", "s.scrollbarHandle", "label", "s.label", "labels", "select_default", "s.row", "s.rowOdd", "lines", "s.line", "selection", "x", "y", "min", "max", "s", "ascending_default", "a", "x", "left", "a", "right", "center", "ascending_default", "number_default", "x", "ascending_default", "number_default", "array", "slice", "map", "max", "value", "index", "min", "value", "index", "shuffle", "array", "m", "sum", "value", "index", "left", "node", "right", "center", "min", "x", "a", "find", "id", "node", "nodes", "y0", "y1", "link", "x0", "x1", "sort", "links", "iterations", "sum", "x", "max", "kx", "ky", "min", "c", "y", "w", "value", "dy", "sourceLinks", "targetLinks", "pi", "tau", "epsilon", "tauEpsilon", "Path", "path", "x", "y", "x1", "y1", "x2", "y2", "x0", "y0", "w", "epsilon", "pi", "halfPi", "tau", "Linear", "x", "y", "linear_default", "curveRadialLinear", "curveRadial", "linear_default", "Radial", "a", "radial", "slice", "tan30", "tan30_2", "kr", "pi", "kx", "tau", "ky", "sqrt3", "s", "k", "a", "noop_default", "point", "x", "y", "Basis", "BasisClosed", "noop_default", "x", "y", "point", "BasisOpen", "x", "y", "x0", "y0", "point", "Bundle", "Basis", "x", "y", "x0", "y0", "bundle_default", "custom", "beta", "point", "x", "y", "Cardinal", "cardinal_default", "custom", "tension", "CardinalClosed", "noop_default", "x", "y", "point", "cardinalClosed_default", "custom", "tension", "CardinalOpen", "x", "y", "point", "cardinalOpen_default", "custom", "tension", "point", "x", "y", "x1", "y1", "x2", "y2", "epsilon", "a", "m", "CatmullRom", "catmullRom_default", "custom", "Cardinal", "alpha", "CatmullRomClosed", "noop_default", "x", "y", "point", "catmullRomClosed_default", "custom", "CardinalClosed", "alpha", "CatmullRomOpen", "x", "y", "point", "catmullRomOpen_default", "custom", "CardinalOpen", "alpha", "LinearClosed", "noop_default", "x", "y", "sign", "x", "slope3", "x2", "y2", "slope2", "point", "t0", "t1", "x0", "y0", "x1", "y1", "MonotoneX", "y", "MonotoneY", "ReflectContext", "Natural", "x", "y", "controlPoints", "m", "a", "Step", "x", "y", "x1", "id", "nodes", "links", "node", "link", "i", "_a", "_b", "items", "item", "SankeySubLabelPlacement", "SankeyNodeAlign", "left", "right", "center", "SankeyExitTransitionType", "SankeyEnterTransitionType", "link2", "root", "variables", "link", "label", "hidden", "background", "linkPath", "x0", "x1", "y0", "y1", "s.linkPath", "s.linkSelectionHelper", "link", "labelGroup", "s.label", "s.sublabel", "labelText", "d", "s.labelTrimmed", "labelBackground", "s.labelBackground", "s.node", "node", "labelGroup", "s.labelGroup", "s.labelBackground", "s.label", "s.sublabel", "s.nodeIcon", "x", "nodeIcon", "s.SANKEY_ICON_SIZE", "select_default", "datum", "a", "b0", "b1", "s.hidden", "selection", "transition", "nodeSelection", "s.labelTrimmed", "s.forceShow", "Sankey", "s.background", "s.links", "s.nodes", "nodes", "links", "left", "right", "maxDepth", "top", "bottom", "s.link", "s.nodeGroup", "nodeSelection", "s.nodeExit", "link", "node", "linear", "group", "y", "sankeyHeight", "value", "select_default", "s", "root", "globalStyles", "s", "s.area", "transition", "select_default", "y0", "y1", "constant_default", "x", "type", "transform", "k", "x", "y", "point", "identity", "node", "nopropagation", "noevent_default", "defaultFilter", "defaultExtent", "identity", "defaultTouchable", "transform", "extent", "zoom_default", "filter", "selection", "point", "k", "t0", "x", "y", "transition", "w", "a", "clean", "type", "select_default", "noevent_default", "x0", "y0", "nopropagation", "event", "t1", "constant_default", "value", "epsilon", "epsilon2", "pi", "halfPi", "tau", "degrees", "radians", "abs", "atan2", "cos", "log", "pow", "sin", "sign", "x", "sqrt", "acos", "pi", "asin", "halfPi", "object", "features", "cartesian", "atan2", "asin", "spherical", "phi", "cos", "sin", "a", "k", "sqrt", "a", "x", "y", "phi", "abs", "pi", "tau", "cos", "sin", "x", "y", "k", "atan2", "asin", "radians", "degrees", "t0", "t1", "cos", "sin", "tau", "point", "acos", "epsilon", "lines", "line", "x", "y", "m", "a", "abs", "epsilon", "point", "points", "compareIntersection", "segment", "n", "x", "epsilon", "link", "start", "array", "a", "point", "abs", "pi", "sign", "tau", "polygon", "phi", "sin", "cos", "sum", "halfPi", "epsilon", "m", "phi0", "k", "atan2", "arc", "intersection", "asin", "epsilon2", "start", "line", "polygon", "point", "phi", "clean", "m", "segment", "a", "halfPi", "epsilon", "pi", "halfPi", "phi0", "clean", "abs", "epsilon", "sin", "cos", "phi", "circle_default", "cos", "radians", "abs", "epsilon", "phi", "clean", "point2", "c", "pi", "intersect", "a", "c2", "A", "B", "w", "t2", "sqrt", "phi0", "delta", "code", "line_default", "a", "x0", "y0", "x1", "y1", "t0", "t1", "x0", "y0", "x1", "y1", "x", "y", "a", "abs", "epsilon", "compareIntersection", "polygon", "clean", "point", "ring", "m", "b0", "b1", "visible", "line_default", "identity_default", "x", "areaSum", "areaRingSum", "areaStream", "abs", "area", "x", "y", "area_default", "x0", "y0", "x", "y", "x00", "y00", "x0", "y0", "x", "y", "sqrt", "x", "y", "tau", "x00", "y00", "x0", "y0", "x", "y", "sqrt", "append", "appendRound", "x", "y", "s", "k", "path_default", "projection", "path", "object", "area_default", "identity_default", "transformer", "s", "x", "y", "projection", "object", "extent", "w", "k", "x", "y", "size", "cos", "radians", "transformer", "x", "y", "x0", "y0", "b0", "x1", "y1", "b1", "a", "c", "m", "sqrt", "asin", "abs", "epsilon", "atan2", "x2", "y2", "x00", "y00", "point", "phi", "transformer", "x", "y", "radians", "k", "transform", "cos", "sin", "a", "phi", "x0", "y0", "x1", "y1", "identity_default", "cache", "projection", "point", "degrees", "circle_default", "sqrt", "extent", "object", "size", "center", "phi0", "pi", "m", "radians", "degrees", "phi0", "cos", "phi", "sin", "x", "y", "asin", "y0", "y1", "sin", "abs", "epsilon", "c", "sqrt", "x", "y", "cos", "atan2", "sign", "pi", "asin", "x", "y", "cache", "point", "k", "epsilon", "extent", "object", "size", "x", "y", "cos", "k", "sin", "sqrt", "c", "atan2", "asin", "sqrt", "asin", "c", "acos", "sin", "phi", "log", "halfPi", "x", "y", "tau", "m", "center", "x0", "y0", "x1", "y1", "k", "pi", "y", "halfPi", "y0", "y1", "cos", "sin", "log", "pow", "x", "epsilon", "sign", "sqrt", "atan2", "abs", "pi", "phi", "y0", "y1", "cos", "sin", "abs", "epsilon", "x", "y", "atan2", "sign", "pi", "sqrt", "sqrt", "phi", "asin", "sin", "cos", "x", "y", "abs", "epsilon2", "x", "y", "cos", "k", "sin", "phi", "phi2", "x", "y", "abs", "epsilon", "x", "y", "cos", "sin", "asin", "epsilon", "x", "y", "cos", "k", "sin", "phi", "log", "halfPi", "x", "y", "m", "center", "identity_default", "x", "transform_default", "transform", "identity_default", "x0", "y0", "kx", "ky", "reverse_default", "array", "o", "id", "transform_default", "arc", "points", "a", "k", "reverse_default", "point", "line", "arcs", "polygon", "type", "link", "points", "node", "abs", "atan", "atan2", "cos", "exp", "log", "max", "min", "pow", "sign", "x", "sin", "tan", "epsilon", "epsilon2", "pi", "halfPi", "quarterPi", "sqrt2", "sqrt", "tau", "degrees", "radians", "asin", "acos", "tanh", "exp", "sinh", "cosh", "log", "x", "y", "cos", "acos", "sin", "pi", "epsilon", "x1", "y1", "c", "sqrt", "abs", "phi0", "sin", "cos", "tan", "k", "phi", "atan2", "x", "y", "A", "abs", "epsilon", "radians", "m", "degrees", "phi", "tan", "k", "sqrt", "c", "cos", "x", "sin", "y", "x2", "y2", "abs", "s", "asin", "cosh", "sign", "atan2", "sinh", "sqrt", "log", "sqrt2", "phi", "phi0", "abs", "quarterPi", "tan", "cos", "sin", "sign", "x", "y", "y0", "atan", "exp", "halfPi", "epsilon2", "phi", "cos", "sin", "x", "y", "asin", "y", "x", "epsilon", "abs", "phi", "sin", "cos", "abs", "epsilon", "x", "y", "asin", "sqrt2", "halfPi", "pi", "k", "phi", "pi", "cos", "sqrt2", "sin", "x", "y", "ky", "quarterPi", "abs", "epsilon", "phi0", "m", "radians", "degrees", "phi", "cos", "x", "y", "pi", "phi", "sqrt", "sin", "x", "y", "pi", "asin", "sqrt3", "sqrt", "phi", "cos", "sin", "x", "y", "asin", "cylindricalEqualAreaRaw", "phi0", "cos", "phi", "sin", "x", "y", "asin", "phi0", "cos", "phi", "tan", "x", "y", "atan", "phi", "sqrt", "pi", "abs", "x", "y", "phi", "sqrt", "sin", "abs", "pi", "sign", "x", "y", "asin", "phi", "k", "sqrt", "pi", "x", "y", "phi", "k", "halfPi", "sin", "abs", "epsilon", "cos", "sqrt", "pi", "x", "y", "A", "asin", "c", "phi", "cos", "sqrt", "pi", "x", "y", "k", "phi", "k", "halfPi", "sin", "abs", "epsilon", "cos", "sqrt", "pi", "x", "y", "asin", "sqrt2", "phi", "sin", "cos", "k", "sqrt", "c", "log", "atan", "x", "y", "t2", "A", "max", "halfPi", "min", "abs", "epsilon", "cos", "radians", "phi", "tan", "sqrt", "x", "y", "atan", "phi", "k", "cos", "tan", "x", "y", "atan", "pi", "halfPi", "sqrt", "phi", "cos", "sin", "x", "y", "m", "a", "c", "phi", "pi", "phi2", "m", "asin", "sin", "cos", "x", "y", "m2", "sqrt", "abs", "epsilon", "pi", "phi", "phi2", "x", "y", "abs", "epsilon", "phi", "sign", "cos", "x", "y", "sin", "abs", "atan2", "asin", "halfPi", "epsilon", "point", "pi", "x0", "y0", "k", "sqrt", "a2", "a", "x1", "x2", "epsilon2", "m", "a", "c", "phi", "epsilon", "sin", "cos", "cosh", "tanh", "sinh", "atan", "exp", "halfPi", "sqrt", "abs", "asin", "tan", "sign", "log", "quarterPi", "pi", "pow", "phi", "sqrt2", "k", "sqrt", "K", "halfPi", "log", "tan", "pi", "abs", "exp", "cos", "sin", "x", "y", "x2", "atan2", "a", "atan", "K", "asin", "degrees", "cylindricalEqualAreaRaw", "phi", "x", "y", "phi", "abs", "x", "y", "a", "k", "sqrt", "pi", "sin", "c", "cos", "M", "phi", "sign", "kr", "x", "y", "asin", "radians", "projection", "degrees", "phi", "tau", "sqrt", "pi", "x", "y", "pi", "sqrt2", "phi", "sqrt", "cos", "x", "y", "x0", "abs", "y0", "epsilon", "halfPi", "acos", "sin", "phi", "phi2", "x", "y", "sign", "pi", "abs", "epsilon", "phi", "sin", "cos", "tan", "x", "y", "x2", "y2", "sqrt", "asin", "sign", "acos", "phi", "log", "tan", "quarterPi", "x", "y", "atan", "exp", "pi", "sqrt6", "sqrt", "phi", "asin", "sin", "cos", "x", "y", "phi", "k", "sin", "cos", "abs", "epsilon", "sqrt2", "sqrt", "x", "y", "asin", "phi", "A", "sqrt", "pi", "k", "sin", "cos", "abs", "epsilon", "x", "y", "halfPi", "asin", "phi", "phi2", "x", "y", "abs", "epsilon2", "phi", "cos", "tan", "x", "y", "abs", "epsilon", "c", "phi", "sin", "cos", "s", "sign", "abs", "halfPi", "pi", "c", "b2", "M", "m", "sqrt", "x", "y", "x2", "y2", "pi2", "phi", "phi2", "x", "y", "y2", "abs", "epsilon", "phi", "abs", "epsilon", "tan", "k", "sin", "cos", "x", "y", "asin", "sign", "acos", "halfPi", "kx", "sqrt", "a", "x", "y", "K", "phi", "min", "abs", "pi", "k", "sign", "x", "y", "max", "c", "degrees", "epsilon2", "radians", "epsilon", "x0", "epsilon", "x1", "y0", "y1", "phi", "tan", "s", "sin", "quarterPi", "x", "y", "atan", "phi", "abs", "epsilon", "halfPi", "asin", "sign", "pi", "tan", "cos", "A", "A2", "sqrt", "x", "y", "sin", "atan", "x2", "y2", "c2", "acos", "phi", "abs", "epsilon", "halfPi", "asin", "sign", "pi", "tan", "cos", "A", "A2", "x1", "sqrt", "x", "y", "sin", "atan", "B", "atan2", "phi", "abs", "epsilon", "halfPi", "asin", "pi", "tan", "A", "y1", "cos", "sign", "sqrt", "x", "y", "sin", "atan", "phi", "phi0", "abs", "halfPi", "B", "B2", "C", "C2", "D", "sign", "sqrt", "D2", "x1", "x", "y", "pi", "min", "epsilon", "A", "pi", "sqrt", "B", "phi", "sqrt", "pi", "x", "y", "phi", "cos", "atan2", "sin", "sqrt", "x", "y", "w", "k", "a", "D", "asin", "phi", "halfPi", "x", "y", "cos", "sin", "C", "E", "acos", "sqrt", "abs", "epsilon", "MapPointLabelPosition", "MapProjectionKind", "s", "root", "variables", "feature", "background", "point", "links", "link", "path_default", "zoom_default", "s.background", "s.features", "s.links", "s.points", "a", "feature", "features", "s.feature", "links", "s.link", "link", "points", "s.point", "s.pointCircle", "s.pointLabel", "hex", "pad", "identity", "transform", "center", "s", "count", "node", "sum", "children", "each_default", "index", "node", "node", "nodes", "children", "index", "node", "nodes", "children", "index", "index", "node", "value", "node", "sum", "children", "sort_default", "node", "path_default", "start", "nodes", "k", "a", "c", "node", "nodes", "node", "root", "links", "node", "iterator_default", "node", "children", "children", "root", "node", "nodes", "each_default", "sort_default", "path_default", "iterator_default", "a", "c", "s", "array_default", "x", "array", "m", "B", "a", "x1", "y1", "x2", "y2", "c", "a2", "a3", "b2", "b3", "c2", "c3", "A", "C", "a", "c", "x", "a2", "y", "b2", "node", "Node", "circle", "array_default", "k", "round_default", "node", "x0", "y0", "x1", "y1", "nodes", "node", "k", "round", "root", "round_default", "dy", "node", "x0", "y0", "x1", "y1", "x", "node", "x0", "y0", "x1", "y1", "nodes", "node", "k", "x0", "y0", "x1", "y1", "rows", "nodes", "row", "value", "custom", "x", "custom", "x0", "y0", "x1", "y1", "rows", "row", "nodes", "m", "value", "x", "map", "left", "right", "m", "k", "s", "range", "x", "y", "axis", "right", "left", "m", "axis", "right", "left", "m", "x", "y", "points", "getX", "getY", "range", "x", "y", "x", "extend", "points", "log", "now", "id", "c", "index", "children", "y", "extent", "top", "bottom", "reduce", "point", "cluster", "count", "sin", "y2", "select_default", "values", "LeafletMapRenderer", "LeafletMapPointShape", "point", "x", "y", "x", "y", "id", "color", "path", "cluster", "points", "point", "leafletCSS", "cssVarDefaults", "root", "variables", "background", "points", "point", "map", "value", "select_default", "s.mapboxglCanvas", "layer", "features", "s.onFeatureHover", "svgOverlay", "selection", "createNodes", "selection", "s.pointPath", "s.donutCluster", "s.innerLabel", "s.innerLabelCluster", "s.bottomLabel", "updateNodes", "group", "select_default", "node", "innerLabel", "bottomLabel", "x", "y", "s.pointPathCluster", "s.pointPathRing", "c", "hex", "_a", "s.variables", "collideLabels", "group2", "label2", "intersect", "removeNodes", "selection", "s.pointSelection", "s.pointSelectionRing", "pointSelection", "x", "y", "node", "selection", "clusterBackground", "node", "x", "y", "path", "select_default", "s.root", "map", "s.map", "s.svgOverlay", "s.backgroundRect", "s.points", "s.clusterBackground", "s.pointSelectionRing", "ResizeObserver", "cluster", "c", "id", "points", "point", "node", "s.point", "removeNodes", "createNodes", "updateNodes", "collideLabels", "_a", "a", "clusterBackground", "events", "s", "s.variables", "layers", "layers", "select_default", "ResizeObserver", "color", "x", "y", "map", "id", "points", "point", "ChordLabelAlignment", "selection", "transition", "datum", "root", "variables", "background", "nodes", "links", "labels", "node", "label", "link", "c", "getLabelTextAnchor", "x", "y", "selection", "s.labelText", "label", "select_default", "labelText", "node", "d", "value", "root", "a", "x0", "x1", "links", "nodes", "type", "maxDepth", "link", "abs", "cos", "sin", "pi", "halfPi", "tau", "epsilon", "slice", "constant_default", "x", "ribbon", "s", "slice", "halfPi", "epsilon", "abs", "cos", "sin", "constant_default", "points", "link", "linkPath", "area", "path", "selection", "transition", "select_default", "s.background", "s.links", "s.nodes", "s.labels", "top", "bottom", "right", "left", "label", "x", "y", "nodes", "links", "root", "size", "s.transparent", "s.link", "s.highlightedLink", "_a", "s.node", "s.highlightedNode", "labels", "s.label", "s.labelExit", "s", "GraphLayoutType", "GraphLinkStyle", "GraphLinkArrowStyle", "GraphNodeShape", "GraphNodeSelectionHighlightMode", "nodes", "variables", "node", "nodeIcon", "label", "labelBackground", "labelText", "links", "variables", "link", "variables", "root", "background", "brush", "nodeSelectors.label", "nodeSelectors.nodeGauge", "nodeSelectors.node", "linkSelectors.gLink", "linkSelectors.flowCircle", "nodeSelectors.nodeSelection", "nodeSelectors.nodeSelectionActive", "variables", "label", "background", "labelText", "striptags", "index", "label", "backgroundRect", "getX", "node", "getY", "hex", "selection", "index", "select_default", "size", "d", "ZoomLevel", "createNodes", "selection", "group", "select_default", "d", "i", "scale", "x", "getX", "y", "getY", "nodeSelectors.node", "nodeSelectors.customNode", "nodeSelectors.nodeSelection", "nodeSelectors.nodeGauge", "nodeSelectors.nodeIcon", "nodeSelectors.sideLabelsGroup", "nodeSelectors.nodeBottomIcon", "label", "nodeSelectors.label", "nodeSelectors.labelBackground", "labelText", "nodeSelectors.labelText", "nodeSelectors.labelTextContent", "nodeSelectors.subLabelTextContent", "nodeSelectors.greyedOutNode", "nodeSelectors.draggable", "nodeSelectors.nodeSelectionActive", "nodeSelectors.sideLabel", "nodeSelectors.sideLabelBackground", "updateNodes", "nodeIcon", "nodeBottomIcon", "node", "sideLabelsGroup", "labelTextContent", "a", "generalSelectors.zoomOutLevel2", "nodeSelectors.nodeIsDragged", "nodeSelectors.nodePolygon", "nodeSelectors.sideLabelGroup", "_a", "_b", "removeNodes", "generalSelectors.zoomOutLevel1", "link", "getY", "getX", "m", "c", "label", "hex", "createLinks", "selection", "linkSelectors.linkSupport", "linkSelectors.link", "linkSelectors.linkBand", "linkSelectors.linkArrow", "linkSelectors.flowGroup", "linkSelectors.flowCircle", "linkSelectors.greyedOutLink", "group", "select_default", "linkSupport", "link", "linkBand", "linkArrow", "x1", "getX", "y1", "getY", "x2", "y2", "updateLinks", "linkSelectors.linkDashed", "flowGroup", "toPx", "linkSelectors.linkLabelGroup", "d", "i", "elements", "linkLabelGroup", "linkSelectors.linkLabelBackground", "linkSelectors.linkLabelContent", "element", "linkLabelContent", "linkLabelBackground", "removeLinks", "index", "generalSelectors.zoomOutLevel2", "panels", "nodes", "node", "panel", "selection", "nodeSelectors.node", "w", "getX", "getY", "x", "y", "selection", "panelSelectors.panelSelection", "panelSelectors.panel", "panelSelectors.label", "panelSelectors.background", "panelSelectors.labelText", "panelSelectors.sideIconGroup", "panelSelectors.sideIconShape", "panelSelectors.customSideIcon", "panelSelectors.sideIconSymbol", "panels", "panelSelection", "panelSelectors.panelSelectionActive", "label", "select_default", "nodes", "y", "x", "value", "children", "merge", "node", "_a", "_b", "label", "nodes", "groups", "name", "group", "node", "link", "a", "y0", "x0", "k", "x", "y", "links", "Graph", "count", "merge", "generalSelectors.background", "generalSelectors.graphGroup", "generalSelectors.brush", "zoom_default", "brush", "panelSelectors.panels", "linkSelectors.links", "nodeSelectors.nodes", "select_default", "id", "link", "nodes", "nodeSelectors.gNode", "nodeSelectors.gNodeExit", "createNodes", "updateNodes", "removeNodes", "links", "linkSelectors.gLink", "linkSelectors.gLinkExit", "createLinks", "updateLinks", "removeLinks", "selection", "panelSelectors.gPanel", "node", "transform", "left", "top", "right", "bottom", "w", "getX", "getY", "item", "identity", "translateX", "translateY", "x", "y", "panels", "nodeSelectors.brushed", "nodeSelection", "d", "_a", "_b", "nodeSelectors.brushable", "arrow", "generalSelectors.root", "nodeSelectors.node", "nodeSelectors.sideLabelGroup", "nodeSelectors.label", "nodeSelectors.greyedOutNode", "linkSelectors.link", "linkSelectors.linkLabelGroup", "linkSelectors.greyedOutLink", "panelSelectors.panel", "panelSelectors.label", "panelSelectors.labelText", "panelSelectors.sideIconGroup", "panelSelectors.sideIconShape", "panelSelectors.sideIconSymbol", "nodeSelectors", "VisControlsOrientation", "root", "variables", "item", "select_default", "s.root", "s.items", "merge", "items", "s.horizontalItems", "s.item", "s.itemButton", "s.borderLeft", "s.borderTop", "s.borderRight", "s.borderBottom", "s.disabled", "item", "selection", "transition", "datum", "root", "variables", "background", "s.centralLabel", "s.centralSubLabel", "translateY", "translateX", "a", "_a", "arc", "s.segment", "s.segmentExit", "s.background", "s", "FreeBrushMode", "s", "root", "variables", "brush", "s.brush", "s.hide", "selection", "s", "range", "brush", "XYLabelPositioning", "selection", "group", "select_default", "labelText", "hex", "value", "x", "y", "globalStyles", "root", "labelGroup", "label", "s.labelGroup", "s.cluster", "s.label", "labels", "label2", "s", "NestedDonutDirection", "NestedDonutSegmentLabelAlignment", "createArc", "selection", "updateArc", "transition", "datum", "removeArc", "cssVarDefaults", "root", "variables", "background", "segment", "segmentExit", "centralLabel", "centralSubLabel", "getLabelFillColor", "c", "rgb", "variables", "getLabelTransform", "createLabel", "selection", "updateLabel", "label", "select_default", "removeLabel", "linear", "s.segmentsGroup", "s.centralLabel", "s.centralSubLabel", "layers", "s.background", "_b", "_a", "s.segment", "s.segmentExit", "s.segmentArc", "createArc", "updateArc", "removeArc", "labels", "s.segmentLabel", "createLabel", "updateLabel", "removeLabel", "index", "node", "color", "s.variables", "merge", "s", "cssVarDefaults", "root", "variables", "s.annotation", "s.annotationContent", "s.annotationSubject", "annotation", "x", "y", "select_default", "x2", "y2", "x1", "y1", "s", "s.variables", "Shape"]
}
